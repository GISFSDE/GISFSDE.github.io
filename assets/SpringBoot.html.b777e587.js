import{_ as p}from"./plugin-vue_export-helper.21dcd24c.js";import{r as o,o as c,c as i,a as n,b as t,d as s,e}from"./app.95807bc9.js";const l={},u=n("p",null,"SpringBoot",-1),r=n("h1",{id:"\u65B0\u5B66\u56DB\u95EE",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u65B0\u5B66\u56DB\u95EE","aria-hidden":"true"},"#"),s(" \u65B0\u5B66\u56DB\u95EE")],-1),d=n("strong",null,"WHY\u3010\u4E0E\u524D\u4EE3\u4F18\u5316\u4E86\u4EC0\u4E48\uFF0C\u5F25\u8865\u4E86\u4EC0\u4E48\u7A7A\u767D\u3011\uFF1A",-1),k=n("br",null,null,-1),m=n("strong",null,"WHAT\u3010\u6846\u67B6\uFF0C\u601D\u7EF4\u5BFC\u56FE\uFF0C\u4E3B\u9898\u6846\u67B6\u3011\uFF1A",-1),v=n("br",null,null,-1),g=n("strong",null,"HOW\u3010\u5982\u4F55\u8BB0\u5FC6\uFF0C\u5B66\u4E60\u8D44\u6E90\u3011",-1),b=s("\uFF1A"),h={href:"https://www.yuque.com/atguigu/springboot",target:"_blank",rel:"noopener noreferrer"},f=s("\u5C1A\u7845\u8C37\u5B66\u4E60\u7B14\u8BB0"),y=s("\u3001"),w={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/",target:"_blank",rel:"noopener noreferrer"},q=s("springboot\u5B98\u65B9\u6587\u6863"),_=s("\u3001"),x={href:"https://www.bilibili.com/video/BV19K4y1L7MT?p=4&spm_id_from=pageDriver",target:"_blank",rel:"noopener noreferrer"},S=s("\u89C6\u9891"),C=s("\u3001\u9879\u76EE\u91CC\u9762\u505A\u7B14\u8BB0\uFF0C\u6700\u540E\u8FDB\u884C\u7EFC\u5408\u4F18\u5316"),A=n("br",null,null,-1),M=n("strong",null,"LEVEL\u3010\u4E0D\u662F\u6BCF\u4E2A\u90FD\u5B66\u7CBE\u3011\uFF1A",-1),j=s(" \u8DEF\u4E0A\u968F\u4FBF\u770B\u770B"),R=e('<h1 id="\u8FDB\u5EA6-\u3010\u5B8C\u3011\u8DEF\u4E0A\u770B\u8865\u7B14\u8BB0" tabindex="-1"><a class="header-anchor" href="#\u8FDB\u5EA6-\u3010\u5B8C\u3011\u8DEF\u4E0A\u770B\u8865\u7B14\u8BB0" aria-hidden="true">#</a> \u8FDB\u5EA6\uFF1A\u3010\u5B8C\u3011\u8DEF\u4E0A\u770B\u8865\u7B14\u8BB0</h1><h1 id="\u7EFC\u5408\u95EE\u9898" tabindex="-1"><a class="header-anchor" href="#\u7EFC\u5408\u95EE\u9898" aria-hidden="true">#</a> \u7EFC\u5408\u95EE\u9898</h1><ol><li>\u4F18\u70B9\uFF1F</li><li>SpringBoot\u5206\u9875\u6392\u5E8F\uFF1F</li><li>\u6392\u9664\u81EA\u5E26tomcat\u7B49\u5BB9\u5668\uFF1F</li><li>\u6D4B\u8BD5\uFF1F</li><li>Spring Boot Stater \uFF1F</li><li>\u5E38\u7528\u6CE8\u89E3\uFF1F</li></ol>',3),P={id:"\u4E00\u3001\u7B80\u4ECB",tabindex:"-1"},E=n("a",{class:"header-anchor",href:"#\u4E00\u3001\u7B80\u4ECB","aria-hidden":"true"},"#",-1),I=s(),T={href:"https://spring.io/projects/spring-boot",target:"_blank",rel:"noopener noreferrer"},B=s("\u4E00\u3001\u7B80\u4ECB"),F=e('<h2 id="springboot\u53CA\u5176\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#springboot\u53CA\u5176\u7279\u70B9" aria-hidden="true">#</a> SpringBoot\u53CA\u5176\u7279\u70B9</h2><ul><li>Create stand-alone Spring applications</li><li>Embed Tomcat, Jetty or Undertow directly (no need to deploy WAR files)</li><li>Provide opinionated &#39;starter&#39; dependencies to simplify your build configuration</li><li>Automatically configure Spring and 3rd party libraries whenever possible</li><li>Provide production-ready features such as metrics, health checks, and externalized configuration</li><li>Absolutely no code generation and no requirement for XML configuration</li></ul><h2 id="\u76F8\u5173\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u6982\u5FF5" aria-hidden="true">#</a> \u76F8\u5173\u6982\u5FF5</h2>',3),H={id:"\u5FAE\u670D\u52A1",tabindex:"-1"},L=n("a",{class:"header-anchor",href:"#\u5FAE\u670D\u52A1","aria-hidden":"true"},"#",-1),D=s(),N={href:"https://martinfowler.com/microservices/",target:"_blank",rel:"noopener noreferrer"},O=s("\u5FAE\u670D\u52A1"),V=e("In short, the <strong>microservice architectural style</strong> is an approach to developing a single application as a <strong>suite of small services</strong>, each <strong>running in its own process</strong> and communicating with <strong>lightweight</strong> mechanisms, often an <strong>HTTP</strong> resource API. These services are <strong>built around business capabilities</strong> and <strong>independently deployable</strong> by fully <strong>automated deployment</strong> machinery. There is a <strong>bare minimum of centralized management</strong> of these services, which may be <strong>written in different programming languages</strong> and use different data storage technologies.-- ",21),U={href:"https://martinfowler.com/articles/microservices.html",target:"_blank",rel:"noopener noreferrer"},W=s("James Lewis and Martin Fowler (2014)"),z=n("ul",null,[n("li",null,"\u5FAE\u670D\u52A1\u662F\u4E00\u79CD\u67B6\u6784\u98CE\u683C"),n("li",null,"\u4E00\u4E2A\u5E94\u7528\u62C6\u5206\u4E3A\u4E00\u7EC4\u5C0F\u578B\u670D\u52A1"),n("li",null,"\u6BCF\u4E2A\u670D\u52A1\u8FD0\u884C\u5728\u81EA\u5DF1\u7684\u8FDB\u7A0B\u5185\uFF0C\u4E5F\u5C31\u662F\u53EF\u72EC\u7ACB\u90E8\u7F72\u548C\u5347\u7EA7"),n("li",null,"\u670D\u52A1\u4E4B\u95F4\u4F7F\u7528\u8F7B\u91CF\u7EA7HTTP\u4EA4\u4E92"),n("li",null,"\u670D\u52A1\u56F4\u7ED5\u4E1A\u52A1\u529F\u80FD\u62C6\u5206"),n("li",null,"\u53EF\u4EE5\u7531\u5168\u81EA\u52A8\u90E8\u7F72\u673A\u5236\u72EC\u7ACB\u90E8\u7F72"),n("li",null,"\u53BB\u4E2D\u5FC3\u5316\uFF0C\u670D\u52A1\u81EA\u6CBB\u3002\u670D\u52A1\u53EF\u4EE5\u4F7F\u7528\u4E0D\u540C\u7684\u8BED\u8A00\u3001\u4E0D\u540C\u7684\u5B58\u50A8\u6280\u672F")],-1),J={id:"\u5206\u5E03\u5F0F",tabindex:"-1"},Y=n("a",{class:"header-anchor",href:"#\u5206\u5E03\u5F0F","aria-hidden":"true"},"#",-1),G=s(),X={href:"https://spring.io/projects/spring-cloud",target:"_blank",rel:"noopener noreferrer"},$=s("\u5206\u5E03\u5F0F"),Q=e("<p>Spring Cloud focuses on providing good out of box experience for typical use cases and extensibility mechanism to cover others.</p><ul><li><p>Distributed/versioned configuration</p></li><li><p>Service registration and discovery</p></li><li><p>Routing</p></li><li><p>Service-to-service calls</p></li><li><p>Load balancing</p></li><li><p>Circuit Breakers</p></li><li><p>Global locks</p></li><li><p>Leadership election and cluster state</p></li><li><p>Distributed messaging</p></li><li><p>\u8FDC\u7A0B\u8C03\u7528</p></li><li><p>\u670D\u52A1\u53D1\u73B0</p></li><li><p>\u8D1F\u8F7D\u5747\u8861</p></li><li><p>\u670D\u52A1\u5BB9\u9519</p></li><li><p>\u914D\u7F6E\u7BA1\u7406</p></li><li><p>\u670D\u52A1\u76D1\u63A7</p></li><li><p>\u94FE\u8DEF\u8FFD\u8E2A</p></li><li><p>\u65E5\u5FD7\u7BA1\u7406</p></li><li><p>\u4EFB\u52A1\u8C03\u5EA6</p></li></ul>",2),K={href:"https://spring.io/projects/spring-cloud-alibaba",target:"_blank",rel:"noopener noreferrer"},Z=s("Spring Cloud Alibaba"),nn=e(`<h2 id="\u81EA\u52A8\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u81EA\u52A8\u914D\u7F6E" aria-hidden="true">#</a> \u81EA\u52A8\u914D\u7F6E</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- Spring Boot \u9879\u76EE\u542F\u52A8\u7236\u4F9D\u8D56 --&gt;</span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.3.RELEASE\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>junit.version</span><span class="token punctuation">&gt;</span></span>8.0.13\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>junit.version</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Junit \u586B\u5199\${}\u4F1A\u9ED8\u8BA4\u7236\u4F9D\u8D56\u7684\u7248\u672C\u53F7\uFF0C\u7236\u4F9D\u8D56\u6CA1\u6709\u5FC5\u987B\u6307\u5B9A\u7248\u672C\uFF0C\u53EF\u901A\u8FC7\u5982\u4E0A\\&lt;propertites&gt;\u4FEE\u6539\u9ED8\u8BA4\u7248\u672C--&gt;</span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>junit\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
           \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>\${junit.version}\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- \u5176\u7236\u4F9D\u8D56\u7684\u7236\u4F9D\u8D56 --&gt;</span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-dependencies\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.3.RELEASE\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">&gt;</span></span>../../spring-boot-dependencies\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>relativePath</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--\u6700\u9AD8\u5C42\u4F9D\u8D56\u4F1A\u5B9A\u4E49\u6240\u6709\u5F53\u524D\u7248\u672C\u4F1A\u7528\u5230\u7684\u4F9D\u8D56\u7248\u672C\uFF0C\u81EA\u52A8\u7248\u672C\u4EF2\u88C1\u673A\u5236--&gt;</span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activemq.version</span><span class="token punctuation">&gt;</span></span>5.15.8\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activemq.version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>antlr2.version</span><span class="token punctuation">&gt;</span></span>2.7.7\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>antlr2.version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appengine-sdk.version</span><span class="token punctuation">&gt;</span></span>1.9.71\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>appengine-sdk.version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artemis.version</span><span class="token punctuation">&gt;</span></span>2.6.4\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artemis.version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>aspectj.version</span><span class="token punctuation">&gt;</span></span>1.9.2\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>aspectj.version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>assertj.version</span><span class="token punctuation">&gt;</span></span>3.11.1\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>assertj.version</span><span class="token punctuation">&gt;</span></span>
    \u3002\u3002\u3002\u3002
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="springboot\u4F1A\u81EA\u52A8\u914D\u7F6E\u4EE5\u4E0B\u73AF\u5883" tabindex="-1"><a class="header-anchor" href="#springboot\u4F1A\u81EA\u52A8\u914D\u7F6E\u4EE5\u4E0B\u73AF\u5883" aria-hidden="true">#</a> SpringBoot\u4F1A\u81EA\u52A8\u914D\u7F6E\u4EE5\u4E0B\u73AF\u5883\uFF1A</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--        \u5E38\u7528starter
spring-boot-starter-parent //boot \u9879\u76EE\u7EE7\u627F\u7684\u7236\u9879\u76EE\u6A21\u5757.
spring-boot-starter-web //boot \u9879\u76EE\u96C6\u6210 web \u5F00\u53D1\u6A21\u5757.
spring-boot-starter-tomcat //boot \u9879\u76EE\u96C6\u6210 tomcat \u5185\u5D4C\u670D\u52A1\u5668.
spring-boot-starter-test //boot \u9879\u76EE\u96C6\u6210\u6D4B\u8BD5\u6A21\u5757.
mybatis-spring-boot-starter //boot \u9879\u76EE\u96C6\u6210 mybatis \u6846\u67B6.
spring-boot-starter-jdbc //boot \u9879\u76EE\u5E95\u5C42\u96C6\u6210 jdbc \u5B9E\u73B0\u6570\u636E\u5E93\u64CD\u4F5C\u652F\u6301.--&gt;</span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tomcat\u3001Spring\u3001SpringMVC\u5168\u5957\u7EC4\u4EF6\u4EE5\u53CA\u5E38\u7528\u529F\u80FD\u3010\u5B57\u7B26\u7F16\u7801\u3001dispatcherServlet\u3001viewResolver\u3001MultiparResolver\u7B49\u3011</p><p>\u9ED8\u8BA4\u5305\u626B\u63CF\u3010\u4E3B\u7A0B\u5E8F\u6240\u5728\u5305\u53CA\u5176\u5B50\u5305\u3011\uFF0C\u8981\u626B\u63CF\u4E0A\u5C42\u9700\u8981\u6CE8\u89E3\u4E0A\u5C42\u5305</p><p>\u81EA\u52A8\u914D\u7F6E\u6309\u9700\u52A0\u8F7D\u3010POM\u5F15\u5165\u624D\u4F1A\u52A0\u8F7D\u3011</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">//\u81EA\u5B9A\u4E49\u626B\u63CF\u5305</span>
<span class="token comment">//@SpringBootApplication(scanBasePackages = &quot;cn.wmyskxz&quot;)</span>
<span class="token comment">//\u9ED8\u8BA4\u626B\u63CF\u4E3B\u7A0B\u5E8F\u7C7B\u6240\u5728\u5305</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootApplication</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u9879\u76EE\u7ED3\u6784" tabindex="-1"><a class="header-anchor" href="#\u9879\u76EE\u7ED3\u6784" aria-hidden="true">#</a> \u9879\u76EE\u7ED3\u6784</h2><p><img src="http://qnimg.gisfsde.com/work/image-20220317131640784.png" alt="image-20220317131640784" loading="lazy"></p><h1 id="\u4E8C\u3001\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u6CE8\u89E3" aria-hidden="true">#</a> \u4E8C\u3001\u6CE8\u89E3</h1><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:beans.xml&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u901A\u8FC7xml\u5BFC\u5165\u7EC4\u4EF6</span>
<span class="token annotation punctuation">@Configuration</span>  <span class="token comment">//\u58F0\u660E\u914D\u7F6E\u7C7B                    </span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span><span class="token punctuation">(</span>exposeProxy <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token comment">//\u8868\u793A\u901A\u8FC7aop\u6846\u67B6\u66B4\u9732\u8BE5\u4EE3\u7406\u5BF9\u8C61,AopContext\u80FD\u591F\u8BBF\u95EE</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">//\u6CE8\u5165\u5BF9\u5E94\u7C7B\u578B\u7684\u7EC4\u4EF6</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">StudentProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token comment">//1.\u5F00\u542F\u5C5E\u6027\u914D\u7F6E\u529F\u80FD  2.\u628A\u7EC4\u4EF6\u81EA\u52A8\u6CE8\u518C\u5230\u5BB9\u5668</span>
<span class="token annotation punctuation">@Bean</span><span class="token comment">//\u5411\u5BB9\u5668\u6CE8\u518C\u7EC4\u4EF6\uFF0C\u9ED8\u8BA4\u5355\u5B9E\u4F8B</span>
<span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user02&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u6761\u4EF6\u6210\u7ACB\u624D\u88C5\u914D\u5176\u6CE8\u89E3\u4E2D\u7684\u7EC4\u4EF6</span>
<span class="token annotation punctuation">@EnableSwagger2Doc</span>  <span class="token comment">//Swagger</span>
<span class="token annotation punctuation">@Component</span> <span class="token comment">//\u6CE8\u518C\u4E3A\u7EC4\u4EF6</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u7ED9\u5BB9\u5668\u4E2D\u7684\u7EC4\u4EF6\u63D0\u4F9B\u914D\u7F6E\u7ED1\u5B9A</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u914D\u7F6E\u7C7B" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u7C7B" aria-hidden="true">#</a> \u914D\u7F6E\u7C7B</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>


<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">StudentProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span>condition<span class="token punctuation">.</span></span><span class="token class-name">ConditionalOnMissingBean</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">EnableConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>
<span class="token comment">/*\u6D4B\u8BD5\u5747\u5728\u4E3B\u7A0B\u5E8F\u7C7B*/</span>


<span class="token comment">//\u5C06\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684bean\u6CE8\u5165\u5BB9\u5668</span>
<span class="token annotation punctuation">@ImportResource</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:beans.xml&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//\u544A\u8BC9springboot\u8FD9\u662F\u4E2A\u914D\u7F6E\u7C7B</span>
<span class="token comment">// proxybeanMethods\uFF1A\u4EE3\u7406bean\u7684\u65B9\u6CD5</span>
<span class="token comment">//     Full\u6A21\u5F0F\uFF1A@Configuration(proxybeanMethods=true)  \u5168\u6A21\u5F0F      \u8BB0\u5F55\u4E0A\u6B21\u7528\u7684bean\uFF0C\u68C0\u67E5\u7EC4\u4EF6\u662F\u5426\u5728\u5BB9\u5668\u4E2D\u6709\uFF0C\u5355\u5B9E\u4F8B</span>
<span class="token comment">//     Lite\u6A21\u5F0F\uFF1A@Configuration(proxybeanMethods=false) \u8F7B\u91CF\u7EA7\u6A21\u5F0F  \u6BCF\u6B21\u52A0\u8F7D\u65B0\u7684bean\uFF0C\u8DF3\u8FC7\u68C0\u67E5</span>
<span class="token annotation punctuation">@Configuration</span>

<span class="token comment">// \u8868\u793A\u901A\u8FC7aop\u6846\u67B6\u66B4\u9732\u8BE5\u4EE3\u7406\u5BF9\u8C61,AopContext\u80FD\u591F\u8BBF\u95EE</span>
<span class="token annotation punctuation">@EnableAspectJAutoProxy</span><span class="token punctuation">(</span>exposeProxy <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>

<span class="token comment">//\u7ED9\u5BB9\u5668\u4E2D\u81EA\u52A8\u521B\u5EFA\u51FA\u5BF9\u5E94\u7C7B\u578B\u7684\u7EC4\u4EF6\u3001\u9ED8\u8BA4\u7EC4\u4EF6\u540D\u4E3A\u5176\u5168\u7C7B\u540D\u3001\u4F7F\u7528\u5176\u65E0\u53C2\u6784\u9020\u51FD\u6570</span>
<span class="token comment">//@Import({User.class})</span>

<span class="token comment">//\u5F53\u4E0D\u80FD\u5728\u539F\u7C7B\u4E2D\u6DFB\u52A0@component\u6CE8\u89E3\u65F6\uFF08\u6BD4\u5982\u7528\u4ED6\u4EBA\u5305\u65F6\uFF09\uFF0C\u5219\u5728\u4F7F\u7528\u7684\u5730\u65B9\u6DFB\u52A0\u6B21\u6CE8\u89E3,\u4F5C\u7528\u662F\u5F00\u542Fstudent\u914D\u7F6E\u7ED1\u5B9A\u529F\u80FD\u4E14\u5C06\u5176\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D</span>
<span class="token comment">//@EnableConfigurationProperties(StudentProperties.class)</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyConfig</span> <span class="token punctuation">{</span>
<span class="token comment">//\u7ED9\u5BB9\u5668\u6DFB\u52A0\u7EC4\u4EF6\uFF0C\u4E00\u65B9\u6CD5\u540D\u4F5C\u4E3A\u7EC4\u4EF6\u7684id\u3002\u8FD4\u56DE\u7C7B\u578B\u5C31\u662F\u7EC4\u4EF6\u7C7B\u578B\u3002\u8FD4\u56DE\u7684\u503C\u5C31\u662F\u7EC4\u5EFA\u5728\u5BB9\u5668\u4E2D\u7684\u5B9E\u4F8B</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">user01</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token number">111111111L</span><span class="token punctuation">,</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
<span class="token comment">//\u6761\u4EF6\u88C5\u914D\uFF0C\u6709name\u4E3Auser01 \u7684bean\u624D\u6CE8\u5165\u6CE8\u89E3\u4E0B\u7684student\u7684bean\uFF0C\u53CD\u4E4B\u6709 @ConditionalOnMissingBean</span>
    <span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user02&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentProperties</span> <span class="token function">student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@ConditionalOnBean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;user01&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">StudentProperties</span> <span class="token function">student1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">StudentProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#\u6D4B\u8BD5" aria-hidden="true">#</a> \u6D4B\u8BD5</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">cn<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>springboot</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>config<span class="token punctuation">.</span></span><span class="token class-name">MyConfig</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">cn<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>springboot<span class="token punctuation">.</span>entity<span class="token punctuation">.</span></span><span class="token class-name">User</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>spring4all<span class="token punctuation">.</span>swagger<span class="token punctuation">.</span></span><span class="token class-name">EnableSwagger2Doc</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span></span><span class="token class-name">SpringApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>autoconfigure<span class="token punctuation">.</span></span><span class="token class-name">SpringBootApplication</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableApplicationContext</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">ImportResource</span></span><span class="token punctuation">;</span>
<span class="token comment">/*Spring Boot \u9879\u76EE\u901A\u5E38\u6709\u4E00\u4E2A\u540D\u4E3A *Application \u7684\u5165\u53E3\u7C7B\uFF0C\u5165\u53E3\u7C7B\u91CC\u6709\u4E00\u4E2A main \u65B9\u6CD5\uFF0C \u8FD9\u4E2A main \u65B9\u6CD5\u5176\u5B9E\u5C31\u662F\u4E00\u4E2A\u6807\u51C6\u7684 Javay \u5E94\u7528\u7684\u5165\u53E3\u65B9\u6CD5\u3002*/</span>

<span class="token comment">//@SpringBootApplication===@Configuration\u3001@EnableAutoConfiguration\u3001@ComponentScan</span>
<span class="token comment">//@EnableAutoConfiguration \u8BA9 Spring Boot \u6839\u636E\u7C7B\u8DEF\u5F84\u4E2D\u7684 jar \u5305\u4F9D\u8D56\u4E3A\u5F53\u524D\u9879\u76EE\u8FDB\u884C\u81EA\u52A8\u914D\u7F6E\uFF0C</span>
<span class="token comment">// \u4F8B\u5982\uFF0C\u6DFB\u52A0\u4E86 spring-boot-starter-web \u4F9D\u8D56\uFF0C\u4F1A\u81EA\u52A8\u6DFB\u52A0 Tomcat \u548C Spring MVC \u7684\u4F9D\u8D56\uFF0C\u90A3\u4E48 Spring Boot \u4F1A\u5BF9 Tomcat \u548C Spring MVC \u8FDB\u884C\u81EA\u52A8\u914D\u7F6E\u3002</span>
<span class="token comment">//spring Boot \u8FD8\u4F1A\u81EA\u52A8\u626B\u63CF @SpringBootApplication \u6240\u5728\u7C7B\u7684\u540C\u7EA7\u5305\u4EE5\u53CA\u4E0B\u7EA7\u5305\u91CC\u7684 Bean \uFF0C\u6240\u4EE5\u5165\u53E3\u7C7B\u5EFA\u8BAE\u5C31\u914D\u7F6E\u5728 grounpID + arctifactID \u7EC4\u5408\u7684\u5305\u540D\u4E0B\uFF08\u8FD9\u91CC\u4E3A cn.wmyskxz.springboot \u5305\uFF09</span>
<span class="token comment">//@SpringBootApplication(scanBasePackages = &quot;cn.wmyskxz&quot;)  \u5982\u9700\u626B\u63CF\u4E3B\u7A0B\u5E8F\u540C\u7EA7\u5916\u7684\u5305\u5219\u53EF\u6DFB\u52A0scanBasePackages\u53C2\u6570</span>

<span class="token annotation punctuation">@EnableSwagger2Doc</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SpringbootApplication</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        SpringApplication.run(SpringbootApplication.class, args);</span>

<span class="token comment">//        \u8FD4\u56DEIOC\u5BB9\u5668</span>
        <span class="token class-name">ConfigurableApplicationContext</span> run <span class="token operator">=</span> <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">SpringbootApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        \u67E5\u770B\u6240\u6709\u7EC4\u4EF6</span>
<span class="token comment">//        String[] beanDefinitionNames = run.getBeanDefinitionNames();</span>
<span class="token comment">//        for (String name : beanDefinitionNames</span>
<span class="token comment">//        ) {</span>
<span class="token comment">//            System.out.println(name);</span>
<span class="token comment">//        }</span>

        <span class="token comment">//\u914D\u7F6E\u7C7B\u672C\u8EAB\u4E5F\u662F\u7EC4\u4EF6</span>
<span class="token comment">//        \u4EE5\u7C7B\u578B\u83B7\u53D6\u7EC4\u4EF6</span>
        <span class="token class-name">MyConfig</span> bean <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">MyConfig</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">User</span> user <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token class-name">User</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//    \u4EE5\u540D\u79F0\u5224\u65AD\u662F\u5426\u6709\u7EC4\u4EF6</span>
        <span class="token keyword">boolean</span> user01 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">&quot;user01&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>user01<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u6761\u4EF6\u6CE8\u89E3\u6D4B\u8BD5</span>
        <span class="token keyword">boolean</span> student <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//@ImportResource(&quot;classpath:beans.xml&quot;)\u5C06\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684bean\u6CE8\u5165\u5BB9\u5668</span>
        <span class="token keyword">boolean</span> bean1 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">containsBean</span><span class="token punctuation">(</span><span class="token string">&quot;bean1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>bean1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u914D\u7F6E\u7ED1\u5B9A,\u9700\u8981@Component</span>
<span class="token comment">//@ConfigurationProperties(prefix = &quot;student&quot;)//\u8868\u793A\u83B7\u53D6\u6240\u6709\u914D\u7F6E\u6587\u4EF6\u4E2D\u524D\u7F00\u4E3A sutdent \u7684\u914D\u7F6E\u4FE1\u606F\uFF0C\u5B9E\u4F53\u7C7B\u4E2D\u4F7F\u7528</span>
 <span class="token comment">//\u5F53\u4E0D\u80FD\u5728\u539F\u7C7B\u4E2D\u6DFB\u52A0@component\u6CE8\u89E3\u65F6\uFF08\u6BD4\u5982\u7528\u4ED6\u4EBA\u5305\u65F6\uFF09\uFF0C\u5219\u5728\u4F7F\u7528\u7684\u5730\u65B9\u6DFB\u52A0\u6B64\u6CE8\u89E3,\u4F5C\u7528\u662F\u5F00\u542Fstudent\u914D\u7F6E\u7ED1\u5B9A\u529F\u80FD\u4E14\u5C06\u5176\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D</span>
<span class="token comment">//@EnableConfigurationProperties(StudentProperties.class)</span>
        <span class="token class-name">Object</span> student1 <span class="token operator">=</span> run<span class="token punctuation">.</span><span class="token function">getBean</span><span class="token punctuation">(</span><span class="token string">&quot;student1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token comment">//\u8FD0\u2F8F SpringBoot \u6709\u54EA\u2F0F\u79CD\u2F45\u5F0F\uFF1F</span>
<span class="token comment">//\u6253\u5305\u2F64\u547D\u4EE4\u6216\u8005\u653E\u5230\u5BB9\u5668\u4E2D\u8FD0\u2F8F\u3002 \u2F64 Maven/Gradle \u63D2\u4EF6\u8FD0\u2F8F\u3002</span>
<span class="token comment">//\u76F4\u63A5\u6267\u2F8F main \u2F45\u6CD5\u8FD0\u2F8F\u3002</span>
<span class="token comment">//SpringBoot \u2F40\u6301 Java Util Logging\uFF0CLog4j2\uFF0CLogback \u4F5C\u4E3A\u2F47\u5FD7\u6846\u67B6\uFF0C\u5982\u679C\u4F60\u4F7F\u2F64 Starters \u542F\u52A8\u5668\uFF0CSpringBoot \u5C06\u4F7F\u2F64 Logback \u4F5C\u4E3A\u9ED8\u8BA4\u6846\u67B6\u3002</span>
<span class="token comment">//\u2F64 Maven/Gradle \u63D2\u4EF6\u8FD0\u2F8F\u3002\u53EF\u8FD0\u884Cthtmeleaf\u4E0Ejsp\u540C\u65F6\u5B58\u5728\u7684jsp\uFF0C</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span><span class="token comment">//\u8868\u660E\u5F53\u524D\u7C7B\u662F\u4E00\u4E2A Java Bean</span>
<span class="token comment">//\u914D\u7F6E\u7ED1\u5B9A,\u9700\u8981@Component,\u6216\u8005\u4F7F\u7528\u7684\u5730\u65B9\u4F7F\u7528</span>
<span class="token comment">//\u5F53\u4E0D\u80FD\u5728\u539F\u7C7B\u4E2D\u6DFB\u52A0@component\u6CE8\u89E3\u65F6\uFF08\u6BD4\u5982\u7528\u4ED6\u4EBA\u5305\u65F6\uFF09\uFF0C\u5219\u5728\u4F7F\u7528\u7684\u5730\u65B9\u6DFB\u52A0\u6B64\u6CE8\u89E3,\u4F5C\u7528\u662F\u5F00\u542Fstudent\u914D\u7F6E\u7ED1\u5B9A\u529F\u80FD\u4E14\u5C06\u5176\u6CE8\u5165\u5230\u5BB9\u5668\u4E2D</span>
<span class="token comment">//@EnableConfigurationProperties(StudentProperties.class)</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token comment">//\u8868\u793A\u83B7\u53D6\u6240\u6709\u914D\u7F6E\u6587\u4EF6\u4E2D\u524D\u7F00\u4E3A sutdent \u7684\u914D\u7F6E\u4FE1\u606F</span>
<span class="token comment">//student:</span>
<span class="token comment">//  name: \u771F\u7684\u5E05</span>
<span class="token comment">//  age: 21</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">StudentProperties</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u4E09\u3001springboot\u81EA\u52A8\u88C5\u914D\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001springboot\u81EA\u52A8\u88C5\u914D\u539F\u7406" aria-hidden="true">#</a> \u4E09\u3001springboot\u81EA\u52A8\u88C5\u914D\u539F\u7406</h1><h2 id="springbootapplication" tabindex="-1"><a class="header-anchor" href="#springbootapplication" aria-hidden="true">#</a> @SpringBootApplication</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootConfiguration</span>  <span class="token comment">//\u4EE3\u8868\u4E3A\u914D\u7F6E\u7C7B</span>
<span class="token annotation punctuation">@ComponentScan</span> <span class="token comment">//Spring\u6CE8\u89E3\uFF0C\u6307\u5B9A\u626B\u63CF\u54EA\u4E9B\u5305</span>
<span class="token annotation punctuation">@EnableAutoConfigration</span> <span class="token comment">//\u5982\u4E0B</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">SpringBootApplication</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="enableautoconfigration" tabindex="-1"><a class="header-anchor" href="#enableautoconfigration" aria-hidden="true">#</a> @EnableAutoConfigration</h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span>TYPE<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span>RUNTIME<span class="token punctuation">)</span>
<span class="token annotation punctuation">@Documented</span>
<span class="token annotation punctuation">@Inherited</span>
<span class="token annotation punctuation">@AutoConfigurationPackage</span><span class="token comment">//\u5982\u4E0B</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">EnableAutoConfiguration</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="autoconfigurationpackage" tabindex="-1"><a class="header-anchor" href="#autoconfigurationpackage" aria-hidden="true">#</a> @AutoConfigurationPackage</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token class-name">Registrar</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">//\u7ED9\u5BB9\u5668\u4E2D\u5BFC\u5165\u4E00\u7CFB\u5217\u7EC4\u4EF6\uFF0C\u9ED8\u8BA4\u662F\u4E3B\u7A0B\u5E8F\u6240\u5728\u5305\u4E0B\u7684\u6240\u6709\u7EC4\u4EF6 </span>
<span class="token comment">//new AutoConfigurationPackages.PackageImports(metadata)).getPackageNames()</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">AutoConfigurationPackage</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="registrar" tabindex="-1"><a class="header-anchor" href="#registrar" aria-hidden="true">#</a> Registrar</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">Registrar</span> <span class="token keyword">implements</span> <span class="token class-name">ImportBeanDefinitionRegistrar</span><span class="token punctuation">,</span> <span class="token class-name">DeterminableImports</span> <span class="token punctuation">{</span>
        <span class="token class-name">Registrar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">}</span>

 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">registerBeanDefinitions</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">BeanDefinitionRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">AutoConfigurationPackages</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPackageNames</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//\u83B7\u53D6\u5143\u6CE8\u89E3\u7684\u5305\u540D\uFF08com.xxx.xxx\uFF09\u5C01\u88C5\u5230\u6570\u7EC4\u4E2D</span>
        <span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token class-name">Set</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">determineImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AutoConfigurationPackages<span class="token punctuation">.</span>PackageImports</span><span class="token punctuation">(</span>metadata<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="import-autoconfigurationimportselector-class" tabindex="-1"><a class="header-anchor" href="#import-autoconfigurationimportselector-class" aria-hidden="true">#</a> @Import({AutoConfigurationImportSelector.class})</h4><p>1\u3001\u5229\u7528getAutoConfigurationEntry(annotationMetadata);\u7ED9\u5BB9\u5668\u4E2D\u6279\u91CF\u5BFC\u5165\u4E00\u4E9B\u7EC4\u4EF6 2\u3001\u8C03\u7528List&lt;-String&gt; configurations = getCandidateConfigurations(annotationMetadata, attributes)\u83B7\u53D6\u5230\u6240\u6709\u9700\u8981\u5BFC\u5165\u5230\u5BB9\u5668\u4E2D\u7684\u914D\u7F6E\u7C7B 3\u3001\u5229\u7528\u5DE5\u5382\u52A0\u8F7D Map&lt;String, List&lt;-String&gt;&gt; loadSpringFactories(@Nullable ClassLoader classLoader)\uFF1B\u5F97\u5230\u6240\u6709\u7684\u7EC4\u4EF6 4\u3001\u4ECEMETA-INF/spring.factories\u4F4D\u7F6E\u6765\u52A0\u8F7D\u4E00\u4E2A\u6587\u4EF6\u3002 \u9ED8\u8BA4\u626B\u63CF\u6211\u4EEC\u5F53\u524D\u7CFB\u7EDF\u91CC\u9762\u6240\u6709META-INF/spring.factories\u4F4D\u7F6E\u7684\u6587\u4EF6 spring-boot-autoconfigure-2.3.4.RELEASE.jar\u5305\u91CC\u9762\u4E5F\u6709META-INF/spring.factories\u3010springboot\u4E00\u542F\u52A8\u539F\u59CB\u52A0\u8F7D\u7684\u7EC4\u4EF6\u3011</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfigurationImportSelector</span> <span class="token keyword">implements</span> <span class="token class-name">DeferredImportSelector</span><span class="token punctuation">,</span> <span class="token class-name">BeanClassLoaderAware</span><span class="token punctuation">,</span> <span class="token class-name">ResourceLoaderAware</span><span class="token punctuation">,</span> <span class="token class-name">BeanFactoryAware</span><span class="token punctuation">,</span> <span class="token class-name">EnvironmentAware</span><span class="token punctuation">,</span> <span class="token class-name">Ordered</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span> EMPTY_ENTRY <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> NO_IMPORTS <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Log</span> logger <span class="token operator">=</span> <span class="token class-name">LogFactory</span><span class="token punctuation">.</span><span class="token function">getLog</span><span class="token punctuation">(</span><span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> PROPERTY_NAME_AUTOCONFIGURE_EXCLUDE <span class="token operator">=</span> <span class="token string">&quot;spring.autoconfigure.exclude&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ConfigurableListableBeanFactory</span> beanFactory<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Environment</span> environment<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ClassLoader</span> beanClassLoader<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ResourceLoader</span> resourceLoader<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>ConfigurationClassFilter</span> configurationClassFilter<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token class-name">AutoConfigurationImportSelector</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">selectImports</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> NO_IMPORTS<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            
            <span class="token comment">//1.getAutoConfigurationEntry\uFF08\uFF09\u7ED9\u5BB9\u5668\u4E2D\u6279\u91CF\u5BFC\u5165\u4E00\u4E9B\u7EC4\u4EF6</span>
            <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span> autoConfigurationEntry <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">toStringArray</span><span class="token punctuation">(</span>autoConfigurationEntry<span class="token punctuation">.</span><span class="token function">getConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span> <span class="token function">getAutoConfigurationEntry</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> annotationMetadata<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> EMPTY_ENTRY<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token class-name">AnnotationAttributes</span> attributes <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttributes</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2.\u5BFC\u5165\u5230\u5BB9\u5668\u4E2D\u7684\u6240\u6709\u9ED8\u8BA4\u5019\u9009\u7EC4\u4EF6</span>
        <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">removeDuplicates</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Set</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> exclusions <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getExclusions</span><span class="token punctuation">(</span>annotationMetadata<span class="token punctuation">,</span> attributes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkExcludedClasses</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurations<span class="token punctuation">.</span><span class="token function">removeAll</span><span class="token punctuation">(</span>exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        configurations <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getConfigurationClassFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>configurations<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">fireAutoConfigurationImportEvents</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">AutoConfigurationImportSelector<span class="token punctuation">.</span>AutoConfigurationEntry</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> exclusions<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCandidateConfigurations</span><span class="token punctuation">(</span><span class="token class-name">AnnotationMetadata</span> metadata<span class="token punctuation">,</span> <span class="token class-name">AnnotationAttributes</span> attributes<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//3.\u5229\u7528\u5DE5\u5382\u52A0\u8F7D Map\\&lt;String, List\\&lt;String&gt;&gt; loadSpringFactories(@Nullable ClassLoader classLoader)\uFF1B\u5F97\u5230\u6240\u6709\u7684\u7EC4\u4EF6</span>
    <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> configurations <span class="token operator">=</span> <span class="token class-name">SpringFactoriesLoader</span><span class="token punctuation">.</span><span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getSpringFactoriesLoaderFactoryClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getBeanClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">notEmpty</span><span class="token punctuation">(</span>configurations<span class="token punctuation">,</span> <span class="token string">&quot;No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> configurations<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">loadFactoryNames</span><span class="token punctuation">(</span><span class="token class-name">Class</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> factoryType<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> factoryTypeName <span class="token operator">=</span> factoryType<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">List</span><span class="token punctuation">)</span><span class="token function">loadSpringFactories</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getOrDefault</span><span class="token punctuation">(</span>factoryTypeName<span class="token punctuation">,</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Map</span>\\<span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> <span class="token function">loadSpringFactories</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ClassLoader</span> classLoader<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">MultiValueMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> result <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">MultiValueMap</span><span class="token punctuation">)</span>cache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token comment">//4\u3001\u4ECEMETA-INF/spring.factories\u4F4D\u7F6E\u6765\u52A0\u8F7D\u4E00\u4E2A\u6587\u4EF6\u3002</span>
			<span class="token comment">//\u9ED8\u8BA4\u626B\u63CF\u6211\u4EEC\u5F53\u524D\u7CFB\u7EDF\u91CC\u9762\u6240\u6709META-INF/spring.factories\u4F4D\u7F6E\u7684\u6587\u4EF6</span>
    		<span class="token comment">//spring-boot-autoconfigure-2.3.4.RELEASE.jar\u5305\u91CC\u9762\u4E5F\u6709META-INF/spring.factories</span>
            <span class="token class-name">Enumeration</span>\\<span class="token generics"><span class="token punctuation">&lt;</span>URL<span class="token punctuation">&gt;</span></span> urls <span class="token operator">=</span> classLoader <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> classLoader<span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token string">&quot;META-INF/spring.factories&quot;</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token class-name">ClassLoader</span><span class="token punctuation">.</span><span class="token function">getSystemResources</span><span class="token punctuation">(</span><span class="token string">&quot;META-INF/spring.factories&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">LinkedMultiValueMap</span> result <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedMultiValueMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">while</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token function">hasMoreElements</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token punctuation">(</span>URL<span class="token punctuation">)</span>urls<span class="token punctuation">.</span><span class="token function">nextElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">UrlResource</span> resource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlResource</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Properties</span> properties <span class="token operator">=</span> <span class="token class-name">PropertiesLoaderUtils</span><span class="token punctuation">.</span><span class="token function">loadProperties</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">Iterator</span> var6 <span class="token operator">=</span> properties<span class="token punctuation">.</span><span class="token function">entrySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token keyword">while</span><span class="token punctuation">(</span>var6<span class="token punctuation">.</span><span class="token function">hasNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token class-name">Entry</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">,</span> <span class="token operator">?</span><span class="token punctuation">&gt;</span></span> entry <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Entry</span><span class="token punctuation">)</span>var6<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span> factoryTypeName <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>entry<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> var9 <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">commaDelimitedListToStringArray</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>entry<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">int</span> var10 <span class="token operator">=</span> var9<span class="token punctuation">.</span>length<span class="token punctuation">;</span>

                    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> var11 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> var11 \\<span class="token operator">&lt;</span> var10<span class="token punctuation">;</span> <span class="token operator">++</span>var11<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">String</span> factoryImplementationName <span class="token operator">=</span> var9<span class="token punctuation">[</span>var11<span class="token punctuation">]</span><span class="token punctuation">;</span>
                        result<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>factoryTypeName<span class="token punctuation">,</span> factoryImplementationName<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            cache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>classLoader<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> result<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> var13<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Unable to load factories from location [META-INF/spring.factories]&quot;</span><span class="token punctuation">,</span> var13<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u200B spring-boot-autoconfigure-2.3.4.RELEASE.jar\u5305\u91CC\u9762\u4E5F\u6709META-INF/spring.factories</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># Initializers
org.springframework.context.ApplicationContextInitializer=\\
org.springframework.boot.autoconfigure.SharedMetadataReaderFactoryContextInitializer,\\
org.springframework.boot.autoconfigure.logging.ConditionEvaluationReportLoggingListener

# Application Listeners
org.springframework.context.ApplicationListener=\\
org.springframework.boot.autoconfigure.BackgroundPreinitializer

# Auto Configuration Import Listeners
org.springframework.boot.autoconfigure.AutoConfigurationImportListener=\\
org.springframework.boot.autoconfigure.condition.ConditionEvaluationReportAutoConfigurationImportListener

# Auto Configuration Import Filters
org.springframework.boot.autoconfigure.AutoConfigurationImportFilter=\\
org.springframework.boot.autoconfigure.condition.OnBeanCondition,\\
org.springframework.boot.autoconfigure.condition.OnClassCondition,\\
org.springframework.boot.autoconfigure.condition.OnWebApplicationCondition

# Auto Configure
org.springframework.boot.autoconfigure.EnableAutoConfiguration=\\
org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\\
org.springframework.boot.autoconfigure.aop.AopAutoConfiguration,\\
org.springframework.boot.autoconfigure.amqp.RabbitAutoConfiguration,\\
org.springframework.boot.autoconfigure.batch.BatchAutoConfiguration,\\
org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration,\\
org.springframework.boot.autoconfigure.cassandra.CassandraAutoConfiguration,\\
org.springframework.boot.autoconfigure.context.ConfigurationPropertiesAutoConfiguration,\\
org.springframework.boot.autoconfigure.context.LifecycleAutoConfiguration,\\
org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration,\\
org.springframework.boot.autoconfigure.context.PropertyPlaceholderAutoConfiguration,\\
org.springframework.boot.autoconfigure.couchbase.CouchbaseAutoConfiguration,\\
org.springframework.boot.autoconfigure.dao.PersistenceExceptionTranslationAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.cassandra.CassandraDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.cassandra.CassandraReactiveRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.cassandra.CassandraRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseReactiveRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.couchbase.CouchbaseRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.elasticsearch.ElasticsearchRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.elasticsearch.ReactiveElasticsearchRestClientAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.jdbc.JdbcRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.ldap.LdapRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.mongo.MongoReactiveDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.mongo.MongoReactiveRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.mongo.MongoRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.neo4j.Neo4jRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.solr.SolrRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.r2dbc.R2dbcDataAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.r2dbc.R2dbcRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.r2dbc.R2dbcTransactionManagerAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.redis.RedisAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.redis.RedisReactiveAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.redis.RedisRepositoriesAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.rest.RepositoryRestMvcAutoConfiguration,\\
org.springframework.boot.autoconfigure.data.web.SpringDataWebAutoConfiguration,\\
org.springframework.boot.autoconfigure.elasticsearch.ElasticsearchRestClientAutoConfiguration,\\
org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration,\\
org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\\
org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\\
org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\\
org.springframework.boot.autoconfigure.h2.H2ConsoleAutoConfiguration,\\
org.springframework.boot.autoconfigure.hateoas.HypermediaAutoConfiguration,\\
org.springframework.boot.autoconfigure.hazelcast.HazelcastAutoConfiguration,\\
org.springframework.boot.autoconfigure.hazelcast.HazelcastJpaDependencyAutoConfiguration,\\
org.springframework.boot.autoconfigure.http.HttpMessageConvertersAutoConfiguration,\\
org.springframework.boot.autoconfigure.http.codec.CodecsAutoConfiguration,\\
org.springframework.boot.autoconfigure.influx.InfluxDbAutoConfiguration,\\
org.springframework.boot.autoconfigure.info.ProjectInfoAutoConfiguration,\\
org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration,\\
org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration,\\
org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\\
org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration,\\
org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\\
org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\\
org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,\\
org.springframework.boot.autoconfigure.jms.JmsAutoConfiguration,\\
org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\\
org.springframework.boot.autoconfigure.jms.JndiConnectionFactoryAutoConfiguration,\\
org.springframework.boot.autoconfigure.jms.activemq.ActiveMQAutoConfiguration,\\
org.springframework.boot.autoconfigure.jms.artemis.ArtemisAutoConfiguration,\\
org.springframework.boot.autoconfigure.jersey.JerseyAutoConfiguration,\\
org.springframework.boot.autoconfigure.jooq.JooqAutoConfiguration,\\
org.springframework.boot.autoconfigure.jsonb.JsonbAutoConfiguration,\\
org.springframework.boot.autoconfigure.kafka.KafkaAutoConfiguration,\\
org.springframework.boot.autoconfigure.availability.ApplicationAvailabilityAutoConfiguration,\\
org.springframework.boot.autoconfigure.ldap.embedded.EmbeddedLdapAutoConfiguration,\\
org.springframework.boot.autoconfigure.ldap.LdapAutoConfiguration,\\
org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration,\\
org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\\
org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\\
org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongoAutoConfiguration,\\
org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,\\
org.springframework.boot.autoconfigure.mongo.MongoReactiveAutoConfiguration,\\
org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\\
org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,\\
org.springframework.boot.autoconfigure.quartz.QuartzAutoConfiguration,\\
org.springframework.boot.autoconfigure.r2dbc.R2dbcAutoConfiguration,\\
org.springframework.boot.autoconfigure.rsocket.RSocketMessagingAutoConfiguration,\\
org.springframework.boot.autoconfigure.rsocket.RSocketRequesterAutoConfiguration,\\
org.springframework.boot.autoconfigure.rsocket.RSocketServerAutoConfiguration,\\
org.springframework.boot.autoconfigure.rsocket.RSocketStrategiesAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.reactive.ReactiveSecurityAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.reactive.ReactiveUserDetailsServiceAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.rsocket.RSocketSecurityAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration,\\
org.springframework.boot.autoconfigure.sendgrid.SendGridAutoConfiguration,\\
org.springframework.boot.autoconfigure.session.SessionAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.oauth2.client.reactive.ReactiveOAuth2ClientAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration,\\
org.springframework.boot.autoconfigure.security.oauth2.resource.reactive.ReactiveOAuth2ResourceServerAutoConfiguration,\\
org.springframework.boot.autoconfigure.solr.SolrAutoConfiguration,\\
org.springframework.boot.autoconfigure.task.TaskExecutionAutoConfiguration,\\
org.springframework.boot.autoconfigure.task.TaskSchedulingAutoConfiguration,\\
org.springframework.boot.autoconfigure.thymeleaf.ThymeleafAutoConfiguration,\\
org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,\\
org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\\
org.springframework.boot.autoconfigure.validation.ValidationAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.client.RestTemplateAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.embedded.EmbeddedWebServerFactoryCustomizerAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.reactive.HttpHandlerAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.reactive.ReactiveWebServerFactoryAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.reactive.WebFluxAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.reactive.error.ErrorWebFluxAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.reactive.function.client.ClientHttpConnectorAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.reactive.function.client.WebClientAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.servlet.DispatcherServletAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.servlet.ServletWebServerFactoryAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.servlet.error.ErrorMvcAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.servlet.HttpEncodingAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.servlet.MultipartAutoConfiguration,\\
org.springframework.boot.autoconfigure.web.servlet.WebMvcAutoConfiguration,\\
org.springframework.boot.autoconfigure.websocket.reactive.WebSocketReactiveAutoConfiguration,\\
org.springframework.boot.autoconfigure.websocket.servlet.WebSocketServletAutoConfiguration,\\
org.springframework.boot.autoconfigure.websocket.servlet.WebSocketMessagingAutoConfiguration,\\
org.springframework.boot.autoconfigure.webservices.WebServicesAutoConfiguration,\\
org.springframework.boot.autoconfigure.webservices.client.WebServiceTemplateAutoConfiguration

# Failure analyzers
org.springframework.boot.diagnostics.FailureAnalyzer=\\
org.springframework.boot.autoconfigure.data.redis.RedisUrlSyntaxFailureAnalyzer,\\
org.springframework.boot.autoconfigure.diagnostics.analyzer.NoSuchBeanDefinitionFailureAnalyzer,\\
org.springframework.boot.autoconfigure.flyway.FlywayMigrationScriptMissingFailureAnalyzer,\\
org.springframework.boot.autoconfigure.jdbc.DataSourceBeanCreationFailureAnalyzer,\\
org.springframework.boot.autoconfigure.jdbc.HikariDriverConfigurationFailureAnalyzer,\\
org.springframework.boot.autoconfigure.r2dbc.ConnectionFactoryBeanCreationFailureAnalyzer,\\
org.springframework.boot.autoconfigure.session.NonUniqueSessionRepositoryFailureAnalyzer

# Template availability providers
org.springframework.boot.autoconfigure.template.TemplateAvailabilityProvider=\\
org.springframework.boot.autoconfigure.freemarker.FreeMarkerTemplateAvailabilityProvider,\\
org.springframework.boot.autoconfigure.mustache.MustacheTemplateAvailabilityProvider,\\
org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAvailabilityProvider,\\
org.springframework.boot.autoconfigure.thymeleaf.ThymeleafTemplateAvailabilityProvider,\\
org.springframework.boot.autoconfigure.web.servlet.JspTemplateAvailabilityProvider
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u6309\u9700\u52A0\u8F7D" tabindex="-1"><a class="header-anchor" href="#\u6309\u9700\u52A0\u8F7D" aria-hidden="true">#</a> \u6309\u9700\u52A0\u8F7D</h3><p>springboot \u901A\u8FC7\u81EA\u52A8\u914D\u7F6E\u6587\u4EF6\u4E2D\u7C7B\u4F3C@ConditionalOnClass({Advice.class})\u7B49\u6761\u4EF6\u6CE8\u89E3\u6309\u9700\u52A0\u8F7D\u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E</p><h3 id="\u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E" aria-hidden="true">#</a> \u4FEE\u6539\u9ED8\u8BA4\u914D\u7F6E</h3><pre><code>    @Bean
	@ConditionalOnBean(MultipartResolver.class)  //\u5BB9\u5668\u4E2D\u6709\u8FD9\u4E2A\u7C7B\u578B\u7EC4\u4EF6
	@ConditionalOnMissingBean(name = DispatcherServlet.MULTIPART_RESOLVER_BEAN_NAME) //\u5BB9\u5668\u4E2D\u6CA1\u6709\u8FD9\u4E2A\u540D\u5B57 multipartResolver \u7684\u7EC4\u4EF6
	public MultipartResolver multipartResolver(MultipartResolver resolver) {
        //\u7ED9@Bean\u6807\u6CE8\u7684\u65B9\u6CD5\u4F20\u5165\u4E86\u5BF9\u8C61\u53C2\u6570\uFF0C\u8FD9\u4E2A\u53C2\u6570\u7684\u503C\u5C31\u4F1A\u4ECE\u5BB9\u5668\u4E2D\u627E\u3002
        //SpringMVC multipartResolver\u3002\u9632\u6B62\u6709\u4E9B\u7528\u6237\u914D\u7F6E\u7684\u6587\u4EF6\u4E0A\u4F20\u89E3\u6790\u5668\u4E0D\u7B26\u5408\u89C4\u8303
		// Detect if the user has created a MultipartResolver but named it incorrectly
		return resolver;
	}
	\u7ED9\u5BB9\u5668\u4E2D\u52A0\u5165\u4E86\u6587\u4EF6\u4E0A\u4F20\u89E3\u6790\u5668\uFF1B
</code></pre><p>SpringBoot\u9ED8\u8BA4\u4F1A\u5728\u5E95\u5C42\u914D\u597D\u6240\u6709\u7684\u7EC4\u4EF6\u3002\u4F46\u662F\u5982\u679C\u7528\u6237\u81EA\u5DF1\u914D\u7F6E\u4E86\u4EE5\u7528\u6237\u7684\u4F18\u5148</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Bean</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span>
	<span class="token keyword">public</span> <span class="token class-name">CharacterEncodingFilter</span> <span class="token function">characterEncodingFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u603B\u7ED3\uFF1A</p><ul><li><p>SpringBoot\u5148\u52A0\u8F7D\u6240\u6709\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B xxxxxAutoConfiguration</p></li><li><p>\u6BCF\u4E2A\u81EA\u52A8\u914D\u7F6E\u7C7B\u6309\u7167\u6761\u4EF6\u8FDB\u884C\u751F\u6548\uFF0C\u9ED8\u8BA4\u90FD\u4F1A\u7ED1\u5B9A\u914D\u7F6E\u6587\u4EF6\u6307\u5B9A\u7684\u503C\u3002xxxxProperties\u91CC\u9762\u62FF\u3002xxxProperties\u548C\u914D\u7F6E\u6587\u4EF6\u8FDB\u884C\u4E86\u7ED1\u5B9A</p></li><li><p>\u751F\u6548\u7684\u914D\u7F6E\u7C7B\u5C31\u4F1A\u7ED9\u5BB9\u5668\u4E2D\u88C5\u914D\u5F88\u591A\u7EC4\u4EF6</p></li><li><p>\u53EA\u8981\u5BB9\u5668\u4E2D\u6709\u8FD9\u4E9B\u7EC4\u4EF6\uFF0C\u76F8\u5F53\u4E8E\u8FD9\u4E9B\u529F\u80FD\u5C31\u6709\u4E86</p></li><li><p>\u5B9A\u5236\u5316\u914D\u7F6E</p></li><li><ul><li>\u7528\u6237\u76F4\u63A5\u81EA\u5DF1@Bean\u66FF\u6362\u5E95\u5C42\u7684\u7EC4\u4EF6</li><li>\u7528\u6237\u53BB\u770B\u8FD9\u4E2A\u7EC4\u4EF6\u662F\u83B7\u53D6\u7684\u914D\u7F6E\u6587\u4EF6\u4EC0\u4E48\u503C\u5C31\u53BB\u4FEE\u6539\u3002</li></ul></li></ul><p><strong>xxxxxAutoConfiguration ---&gt; \u7EC4\u4EF6 ---&gt;</strong> <strong>xxxxProperties\u91CC\u9762\u62FF\u503C ----&gt; application.properties</strong></p><h3 id="springboot\u5F00\u53D1\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#springboot\u5F00\u53D1\u6D41\u7A0B" aria-hidden="true">#</a> SpringBoot\u5F00\u53D1\u6D41\u7A0B</h3>`,44),sn=n("li",null,"\u5F15\u5165\u573A\u666F\u4F9D\u8D56",-1),an={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter",target:"_blank",rel:"noopener noreferrer"},tn=s("https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-starter"),en=n("li",null,"\u67E5\u770B\u81EA\u52A8\u914D\u7F6E\u4E86\u54EA\u4E9B\uFF08\u9009\u505A\uFF09",-1),pn=n("li",null,[n("ul",null,[n("li",null,"\u81EA\u5DF1\u5206\u6790\uFF0C\u5F15\u5165\u573A\u666F\u5BF9\u5E94\u7684\u81EA\u52A8\u914D\u7F6E\u4E00\u822C\u90FD\u751F\u6548\u4E86"),n("li",null,[n("strong",null,"\u914D\u7F6E\u6587\u4EF6\u4E2Ddebug=true"),s("\u5F00\u542F"),n("strong",null,"\u81EA\u52A8\u914D\u7F6E\u62A5\u544A"),s("\u3002console\u4E2D\u663E\u793ANegative\uFF08\u4E0D\u751F\u6548\uFF09\\Positive\uFF08\u751F\u6548\uFF09")])])],-1),on=n("li",null,"\u662F\u5426\u9700\u8981\u4FEE\u6539",-1),cn=n("li",null,[n("ul",null,[n("li",null,"1.\u53C2\u7167\u6587\u6863\u4FEE\u6539\u914D\u7F6E\u9879")])],-1),ln={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties",target:"_blank",rel:"noopener noreferrer"},un=s("https://docs.spring.io/spring-boot/docs/current/reference/html/appendix-application-properties.html#common-application-properties"),rn=n("li",null,"\u81EA\u5DF1\u5206\u6790\u3002xxxxProperties\u7ED1\u5B9A\u4E86\u914D\u7F6E\u6587\u4EF6\u7684\u54EA\u4E9B\u3002",-1),dn=n("li",null,[n("ul",null,[n("li",null,"\u81EA\u5B9A\u4E49\u52A0\u5165\u6216\u8005\u66FF\u6362\u7EC4\u4EF6")])],-1),kn=n("li",null,[n("ul",null,[n("li",null,[n("ul",null,[n("li",null,"@Bean\u3001@Component\u3002\u3002\u3002")])])])],-1),mn=n("li",null,[n("ul",null,[n("li",null,[s("\u81EA\u5B9A\u4E49\u5668 "),n("strong",null,"XXXXXCustomizer"),s("\uFF1B")])])],-1),vn=n("li",null,"\u4E1A\u52A1\u4EE3\u7801",-1),gn=n("h1",{id:"\u56DB\u3001\u5F00\u53D1\u6280\u5DE7",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u56DB\u3001\u5F00\u53D1\u6280\u5DE7","aria-hidden":"true"},"#"),s(" \u56DB\u3001\u5F00\u53D1\u6280\u5DE7")],-1),bn=n("h2",{id:"_1-lombok",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1-lombok","aria-hidden":"true"},"#"),s(" 1.lombok")],-1),hn=n("p",null,"@Data \uFF1A\u4EE3\u66FFget set \u65B9\u6CD5",-1),fn=n("p",null,"@ToString \uFF1A\u4EE3\u66FFtostring\u65B9\u6CD5",-1),yn=n("p",null,"@AllArgsConstructor \uFF1A\u4EE3\u66FF\u5168\u53C2\u6784\u9020\u5668",-1),wn=n("p",null,"@NoArgsConstructor \uFF1A\u4EE3\u66FF\u65E0\u53C2\u6784\u9020\u5668",-1),qn=n("p",null,"@EqualsAndHashCode\uFF1A\u4EE3\u66FFHashCode\u3001equals\u65B9\u6CD5",-1),_n=s("@Slf4j \uFF1A\u6DFB\u52A0 "),xn={href:"http://Log.info",target:"_blank",rel:"noopener noreferrer"},Sn=s("Log.info"),Cn=s("(\u201Cxxx\u201D);\u6253\u5370\u65E5\u5FD7"),An=e(`<h2 id="_2-dev-tools" tabindex="-1"><a class="header-anchor" href="#_2-dev-tools" aria-hidden="true">#</a> 2.dev-tools</h2><p>ctrl+f9 \u81EA\u52A8\u91CD\u542F</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code> \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-devtools\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_3-spring-initailizr-\u9879\u76EE\u521D\u59CB\u5316\u5411\u5BFC" tabindex="-1"><a class="header-anchor" href="#_3-spring-initailizr-\u9879\u76EE\u521D\u59CB\u5316\u5411\u5BFC" aria-hidden="true">#</a> 3.Spring Initailizr\uFF08\u9879\u76EE\u521D\u59CB\u5316\u5411\u5BFC\uFF09</h2><p>\u81EA\u52A8\u642D\u5EFA\u521D\u59CB\u9879\u76EE\u73AF\u5883\u3010\u76F8\u5173\u4F9D\u8D56\uFF0C\u9879\u76EE\u7ED3\u6784\uFF0C\u4E3B\u7A0B\u5E8F\u7C7B\u3011</p><h1 id="\u4E94\u3001\u6838\u5FC3\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001\u6838\u5FC3\u529F\u80FD" aria-hidden="true">#</a> \u4E94\u3001\u6838\u5FC3\u529F\u80FD</h1><h2 id="_1-\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1-\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 1.\u914D\u7F6E\u6587\u4EF6</h2>`,7),Mn={id:"_1-1\u3001properties",tabindex:"-1"},jn=n("a",{class:"header-anchor",href:"#_1-1\u3001properties","aria-hidden":"true"},"#",-1),Rn=s(" 1.1\u3001"),Pn={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#appendix.application-properties",target:"_blank",rel:"noopener noreferrer"},En=s("properties"),In=e(`<p>\u540C\u4EE5\u524D\u7684properties\u7528\u6CD5\uFF0C\u53EF\u7528@PropertySource \u6CE8\u89E3\u5BFC\u5165\u914D\u7F6E\u3002</p><h3 id="_1-2\u3001yaml" tabindex="-1"><a class="header-anchor" href="#_1-2\u3001yaml" aria-hidden="true">#</a> 1.2\u3001yaml</h3><h4 id="_1-2-1\u3001\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_1-2-1\u3001\u7B80\u4ECB" aria-hidden="true">#</a> 1.2.1\u3001\u7B80\u4ECB</h4><p>YAML \u662F &quot;YAML Ain&#39;t Markup Language&quot;\uFF08YAML \u4E0D\u662F\u4E00\u79CD\u6807\u8BB0\u8BED\u8A00\uFF09\u7684\u9012\u5F52\u7F29\u5199\u3002\u5728\u5F00\u53D1\u7684\u8FD9\u79CD\u8BED\u8A00\u65F6\uFF0CYAML \u7684\u610F\u601D\u5176\u5B9E\u662F\uFF1A&quot;Yet Another Markup Language&quot;\uFF08\u4ECD\u662F\u4E00\u79CD\u6807\u8BB0\u8BED\u8A00\uFF09\u3002 \u975E\u5E38\u9002\u5408\u7528\u6765\u505A\u4EE5\u6570\u636E\u4E3A\u4E2D\u5FC3\u7684\u914D\u7F6E\u6587\u4EF6\u3002\u5982\u679Cproperties\u548Cymal\u90FD\u6709\uFF0C\u5219\u90FD\u751F\u6548\u4E14properties\u4F18\u5148\u3002</p><h4 id="_1-2-2\u3001\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_1-2-2\u3001\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> 1.2.2\u3001\u57FA\u672C\u8BED\u6CD5</h4><p>key: value\uFF1Bkv\u4E4B\u95F4\u6709\u7A7A\u683C \u5927\u5C0F\u5199\u654F\u611F \u4F7F\u7528\u7F29\u8FDB\u8868\u793A\u5C42\u7EA7\u5173\u7CFB \u7F29\u8FDB\u4E0D\u5141\u8BB8\u4F7F\u7528tab\uFF0C\u53EA\u5141\u8BB8\u7A7A\u683C \u7F29\u8FDB\u7684\u7A7A\u683C\u6570\u4E0D\u91CD\u8981\uFF0C\u53EA\u8981\u76F8\u540C\u5C42\u7EA7\u7684\u5143\u7D20\u5DE6\u5BF9\u9F50\u5373\u53EF &#39;#&#39;\u8868\u793A\u6CE8\u91CA \u5B57\u7B26\u4E32\u65E0\u9700\u52A0\u5F15\u53F7\uFF0C\u5982\u679C\u8981\u52A0\uFF0C&#39; &#39; \u4E0E &quot; &quot; \u8868\u793A\u5B57\u7B26\u4E32\u5185\u5BB9 \u4F1A\u88AB \u8F6C\u4E49/\u4E0D\u8F6C\u4E49\uFF0C\u6BD4\u5982 \\n \u5355\u5F15\u53F7\u56DE\u8F6C\u4E49\u6210 \\n \u5B57\u7B26\u4E32\uFF0C\u800C\u53CC\u5F15\u53F7\u4F1A\u6362\u884C\u3002 .yml \u683C\u5F0F\u4E0D\u652F\u6301 @PropertySource \u6CE8\u89E3\u5BFC\u5165\u914D\u7F6E\u3002</p><h4 id="_1-2-3\u3001\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#_1-2-3\u3001\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> 1.2.3\u3001\u6570\u636E\u7C7B\u578B</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment">#\u5B57\u9762\u91CF\uFF1A\u5355\u4E2A\u7684\u3001\u4E0D\u53EF\u518D\u5206\u7684\u503C\u3002date\u3001boolean\u3001string\u3001number\u3001null</span>
<span class="token key atrule">k</span><span class="token punctuation">:</span> v
<span class="token comment">#\u5BF9\u8C61\uFF1A\u952E\u503C\u5BF9\u7684\u96C6\u5408\u3002map\u3001hash\u3001set\u3001object </span>
<span class="token key atrule">\u884C\u5185\u5199\u6CD5\uFF1A  k</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>k1<span class="token punctuation">:</span>v1<span class="token punctuation">,</span>k2<span class="token punctuation">:</span>v2<span class="token punctuation">,</span>k3<span class="token punctuation">:</span>v3<span class="token punctuation">}</span>
<span class="token comment">#\u6216</span>
<span class="token key atrule">k</span><span class="token punctuation">:</span> 
  <span class="token key atrule">k1</span><span class="token punctuation">:</span> v1
  <span class="token key atrule">k2</span><span class="token punctuation">:</span> v2
  <span class="token key atrule">k3</span><span class="token punctuation">:</span> v3
<span class="token comment">#\u6570\u7EC4\uFF1A\u4E00\u7EC4\u6309\u6B21\u5E8F\u6392\u5217\u7684\u503C\u3002array\u3001list\u3001queue</span>
<span class="token key atrule">\u884C\u5185\u5199\u6CD5\uFF1A  k</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>v1<span class="token punctuation">,</span>v2<span class="token punctuation">,</span>v3<span class="token punctuation">]</span>
<span class="token comment">#\u6216\u8005</span>
<span class="token key atrule">k</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> v1
 <span class="token punctuation">-</span> v2
 <span class="token punctuation">-</span> v3

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_1-2-4\u3001\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_1-2-4\u3001\u793A\u4F8B" aria-hidden="true">#</a> 1.2.4\u3001\u793A\u4F8B</h4><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code>@Data
public class Person <span class="token punctuation">{</span>
    
    private String userName;
    private Boolean boss;
    private Date birth;
    private Integer age;
    private Pet pet;
    private String<span class="token punctuation">[</span><span class="token punctuation">]</span> interests;
    private List\\&lt;String<span class="token punctuation">&gt;</span> animal;
    private Map\\&lt;String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span> score;
    private Set\\&lt;Double<span class="token punctuation">&gt;</span> salarys;
    private Map\\&lt;String<span class="token punctuation">,</span> List\\&lt;Pet<span class="token punctuation">&gt;</span><span class="token punctuation">&gt;</span> allPets;
<span class="token punctuation">}</span>

@Data
public class Pet <span class="token punctuation">{</span>
    private String name;
    private Double weight;
<span class="token punctuation">}</span>
<span class="token comment"># yaml\u8868\u793A\u4EE5\u4E0A\u5BF9\u8C61</span>
<span class="token key atrule">person</span><span class="token punctuation">:</span>
  <span class="token key atrule">userName</span><span class="token punctuation">:</span> zhangsan
  <span class="token key atrule">boss</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">birth</span><span class="token punctuation">:</span> 2019/12/12 20<span class="token punctuation">:</span><span class="token datetime number">12:33</span>
  <span class="token key atrule">age</span><span class="token punctuation">:</span> <span class="token number">18</span>
  <span class="token key atrule">pet</span><span class="token punctuation">:</span> 
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tomcat
    <span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">23.4</span>
  <span class="token key atrule">interests</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>\u7BEE\u7403<span class="token punctuation">,</span>\u6E38\u6CF3<span class="token punctuation">]</span>
  <span class="token key atrule">animal</span><span class="token punctuation">:</span> 
    <span class="token punctuation">-</span> jerry
    <span class="token punctuation">-</span> mario
  <span class="token key atrule">score</span><span class="token punctuation">:</span>
    <span class="token key atrule">english</span><span class="token punctuation">:</span> 
      <span class="token key atrule">first</span><span class="token punctuation">:</span> <span class="token number">30</span>
      <span class="token key atrule">second</span><span class="token punctuation">:</span> <span class="token number">40</span>
      <span class="token key atrule">third</span><span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token key atrule">math</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">131</span><span class="token punctuation">,</span><span class="token number">140</span><span class="token punctuation">,</span><span class="token number">148</span><span class="token punctuation">]</span>
    <span class="token key atrule">chinese</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token key atrule">first</span><span class="token punctuation">:</span> <span class="token number">128</span><span class="token punctuation">,</span><span class="token key atrule">second</span><span class="token punctuation">:</span> <span class="token number">136</span><span class="token punctuation">}</span>
  <span class="token key atrule">salarys</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">3999</span><span class="token punctuation">,</span><span class="token number">4999.98</span><span class="token punctuation">,</span><span class="token number">5999.99</span><span class="token punctuation">]</span>
  <span class="token key atrule">allPets</span><span class="token punctuation">:</span>
    <span class="token key atrule">sick</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> tom<span class="token punctuation">}</span>
      <span class="token punctuation">-</span> <span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> jerry<span class="token punctuation">,</span><span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">47</span><span class="token punctuation">}</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token key atrule">name</span><span class="token punctuation">:</span> mario<span class="token punctuation">,</span><span class="token key atrule">weight</span><span class="token punctuation">:</span> <span class="token number">47</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-3\u914D\u7F6E\u6587\u4EF6\u81EA\u5B9A\u4E49\u7C7B\u63D0\u793A" tabindex="-1"><a class="header-anchor" href="#_1-3\u914D\u7F6E\u6587\u4EF6\u81EA\u5B9A\u4E49\u7C7B\u63D0\u793A" aria-hidden="true">#</a> 1.3\u914D\u7F6E\u6587\u4EF6\u81EA\u5B9A\u4E49\u7C7B\u63D0\u793A</h3><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>
<span class="token comment">&lt;!--\u8BA9\u81EA\u5B9A\u4E49\u7C7B\u5728\u914D\u7F6E\u7C7B\u4E2D\u6709\u63D0\u793A--&gt;</span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>optional</span><span class="token punctuation">&gt;</span></span>true\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>optional</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--\u6253\u5305\u65F6\u53BB\u9664\u4E1A\u52A1\u65E0\u5173\u4F9D\u8D56processor--&gt;</span>
 \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>excludes</span><span class="token punctuation">&gt;</span></span>
                        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclude</span><span class="token punctuation">&gt;</span></span>
                            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-configuration-processor\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
                        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclude</span><span class="token punctuation">&gt;</span></span>
                    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>excludes</span><span class="token punctuation">&gt;</span></span>
                \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-4-bootstrap" tabindex="-1"><a class="header-anchor" href="#_1-4-bootstrap" aria-hidden="true">#</a> 1.4 bootstrap</h3><ul><li>bootstrap (.yml \u6216\u8005 .properties)<strong>\u4F18\u5148\u4E8E</strong>application (.yml \u6216\u8005 .properties)\uFF0C\u4E24\u8005\u5171\u7528\u540C\u4E0A\u4E0B\u6587\u73AF\u5883\uFF0Cbootstrap\u9002\u7528\u4E8E\u56FA\u5B9A\u5C5E\u6027\uFF0C\u52A0\u89E3\u5BC6\u7B49\u60C5\u666F\u3002</li></ul><h3 id="_1-5\u5404\u4E2A\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#_1-5\u5404\u4E2A\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u987A\u5E8F" aria-hidden="true">#</a> 1.5\u5404\u4E2A\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u987A\u5E8F</h3><p>\u914D\u7F6E\u5C5E\u6027\u52A0\u8F7D\u7684\u987A\u5E8F\u5982\u4E0B\uFF1A 1\u3001\u5F00\u53D1\u8005\u5DE5\u5177 Devtools \u5168\u5C40\u914D\u7F6E\u53C2\u6570\uFF1B 2\u3001\u5355\u5143\u6D4B\u8BD5\u4E0A\u7684 @TestPropertySource \u6CE8\u89E3\u6307\u5B9A\u7684\u53C2\u6570\uFF1B 3\u3001\u5355\u5143\u6D4B\u8BD5\u4E0A\u7684 @SpringBootTest \u6CE8\u89E3\u6307\u5B9A\u7684\u53C2\u6570\uFF1B 4\u3001\u547D\u4EE4\u884C\u6307\u5B9A\u7684\u53C2\u6570\uFF0C\u5982 java -jar springboot.jar --name=&quot;Java\u6280\u672F\u6808&quot;\uFF1B 5\u3001\u547D\u4EE4\u884C\u4E2D\u7684 SPRING_APPLICATION_JSON \u6307\u5B9A\u53C2\u6570, \u5982 java -Dspring.application.json=&#39;{&quot;name&quot;:&quot;Java\u6280\u672F\u6808&quot;}&#39; -jar springboot.jar 6\u3001ServletConfig \u521D\u59CB\u5316\u53C2\u6570\uFF1B 7\u3001ServletContext \u521D\u59CB\u5316\u53C2\u6570\uFF1B 8\u3001JNDI\u53C2\u6570\uFF08\u5982 java:comp/env/spring.application.json\uFF09\uFF1B 9\u3001Java\u7CFB\u7EDF\u53C2\u6570\uFF08\u6765\u6E90\uFF1ASystem.getProperties()\uFF09\uFF1B 10\u3001\u64CD\u4F5C\u7CFB\u7EDF\u73AF\u5883\u53D8\u91CF\u53C2\u6570\uFF1B 11\u3001RandomValuePropertySource \u968F\u673A\u6570\uFF0C\u4EC5\u5339\u914D\uFF1Aramdom.*\uFF1B 12\u3001JAR\u5305\u5916\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u53C2\u6570\uFF08application-{profile}.properties\uFF08YAML\uFF09\uFF09 13\u3001JAR\u5305\u91CC\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u53C2\u6570\uFF08application-{profile}.properties\uFF08YAML\uFF09\uFF09 14\u3001JAR\u5305\u5916\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u53C2\u6570\uFF08application.properties\uFF08YAML\uFF09\uFF09 15\u3001JAR\u5305\u91CC\u9762\u7684\u914D\u7F6E\u6587\u4EF6\u53C2\u6570\uFF08application.properties\uFF08YAML\uFF09\uFF09 16\u3001@Configuration\u914D\u7F6E\u6587\u4EF6\u4E0A @PropertySource \u6CE8\u89E3\u52A0\u8F7D\u7684\u53C2\u6570\uFF1B 17\u3001\u9ED8\u8BA4\u53C2\u6570\uFF08\u901A\u8FC7 SpringApplication.setDefaultProperties \u6307\u5B9A\uFF09\uFF1B</p><h2 id="_2-web\u5F00\u53D1" tabindex="-1"><a class="header-anchor" href="#_2-web\u5F00\u53D1" aria-hidden="true">#</a> 2.Web\u5F00\u53D1</h2><h3 id="_1-\u9759\u6001\u8D44\u6E90\u4E0E\u5B9A\u5236\u5316" tabindex="-1"><a class="header-anchor" href="#_1-\u9759\u6001\u8D44\u6E90\u4E0E\u5B9A\u5236\u5316" aria-hidden="true">#</a> 1.\u9759\u6001\u8D44\u6E90\u4E0E\u5B9A\u5236\u5316</h3><h3 id="_2-\u7B80\u5355\u529F\u80FD\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#_2-\u7B80\u5355\u529F\u80FD\u5206\u6790" aria-hidden="true">#</a> 2.\u7B80\u5355\u529F\u80FD\u5206\u6790</h3><h4 id="_2-1\u3001\u9759\u6001\u8D44\u6E90\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#_2-1\u3001\u9759\u6001\u8D44\u6E90\u8BBF\u95EE" aria-hidden="true">#</a> 2.1\u3001\u9759\u6001\u8D44\u6E90\u8BBF\u95EE</h4><h5 id="_1\u3001\u9759\u6001\u8D44\u6E90\u76EE\u5F55" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u9759\u6001\u8D44\u6E90\u76EE\u5F55" aria-hidden="true">#</a> 1\u3001\u9759\u6001\u8D44\u6E90\u76EE\u5F55</h5><p>\u53EA\u8981\u9759\u6001\u8D44\u6E90\u653E\u5728\u7C7B\u8DEF\u5F84\u4E0B\uFF1A called /static (or /public or /resources or /META-INF/resources \u8BBF\u95EE \uFF1A \u5F53\u524D\u9879\u76EE\u6839\u8DEF\u5F84/ + \u9759\u6001\u8D44\u6E90\u540D \u539F\u7406\uFF1A \u9759\u6001\u6620\u5C04/**\u3002 \u8BF7\u6C42\u8FDB\u6765\uFF0C\u5148\u53BB\u627EController\u770B\u80FD\u4E0D\u80FD\u5904\u7406\u3002\u4E0D\u80FD\u5904\u7406\u7684\u6240\u6709\u8BF7\u6C42\u53C8\u90FD\u4EA4\u7ED9\u9759\u6001\u8D44\u6E90\u5904\u7406\u5668\u3002\u9759\u6001\u8D44\u6E90\u4E5F\u627E\u4E0D\u5230\u5219\u54CD\u5E94404\u9875\u9762 \u6539\u53D8\u9ED8\u8BA4\u7684\u9759\u6001\u8D44\u6E90\u8DEF\u5F84</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span>

  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2\u3001\u9759\u6001\u8D44\u6E90\u8BBF\u95EE\u524D\u7F00" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u9759\u6001\u8D44\u6E90\u8BBF\u95EE\u524D\u7F00" aria-hidden="true">#</a> 2\u3001\u9759\u6001\u8D44\u6E90\u8BBF\u95EE\u524D\u7F00</h5><p>\u9ED8\u8BA4\u65E0\u524D\u7F00</p><p>\u5F53\u524D\u9879\u76EE + static-path-pattern + \u9759\u6001\u8D44\u6E90\u540D = \u9759\u6001\u8D44\u6E90\u6587\u4EF6\u5939\u4E0B\u627E</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-path-pattern</span><span class="token punctuation">:</span> /res/<span class="token important">**</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3\u3001webjar" tabindex="-1"><a class="header-anchor" href="#_3\u3001webjar" aria-hidden="true">#</a> 3\u3001webjar</h5>`,28),Tn=s("\u81EA\u52A8\u6620\u5C04 /webjars/** "),Bn={href:"https://www.webjars.org/",target:"_blank",rel:"noopener noreferrer"},Fn=s("https://www.webjars.org/"),Hn=s("\u8BBF\u95EE\u5730\u5740\uFF1A"),Ln={href:"http://localhost:8080/webjars/jquery/3.5.1/jquery.js",target:"_blank",rel:"noopener noreferrer"},Dn=s("http://localhost:8080/webjars/jquery/3.5.1/jquery.js"),Nn=s(" \u540E\u9762\u5730\u5740\u8981\u6309\u7167\u4F9D\u8D56\u91CC\u9762\u7684\u5305\u8DEF\u5F84"),On=e(`<div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.webjars\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jquery\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.5.1\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-2\u3001\u6B22\u8FCE\u9875\u652F\u6301" tabindex="-1"><a class="header-anchor" href="#_2-2\u3001\u6B22\u8FCE\u9875\u652F\u6301" aria-hidden="true">#</a> 2.2\u3001\u6B22\u8FCE\u9875\u652F\u6301</h4><p>\u9759\u6001\u8D44\u6E90\u8DEF\u5F84\u4E0B index.html \u53EF\u4EE5\u914D\u7F6E\u9759\u6001\u8D44\u6E90\u8DEF\u5F84 \u4F46\u662F\u4E0D\u53EF\u4EE5\u914D\u7F6E\u9759\u6001\u8D44\u6E90\u7684\u8BBF\u95EE\u524D\u7F00\u3002\u5426\u5219\u5BFC\u81F4 index.html\u4E0D\u80FD\u88AB\u9ED8\u8BA4\u8BBF\u95EE controller\u80FD\u5904\u7406/index</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment">#  mvc:</span>
<span class="token comment">#    static-path-pattern: /res/**   \u8FD9\u4E2A\u4F1A\u5BFC\u81F4welcome page\u529F\u80FD\u5931\u6548</span>
  <span class="token key atrule">resources</span><span class="token punctuation">:</span>
    <span class="token key atrule">static-locations</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>classpath<span class="token punctuation">:</span>/haha/<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3\u3001\u81EA\u5B9A\u4E49-favicon" tabindex="-1"><a class="header-anchor" href="#_2-3\u3001\u81EA\u5B9A\u4E49-favicon" aria-hidden="true">#</a> 2.3\u3001\u81EA\u5B9A\u4E49 Favicon</h4><p>favicon.ico \u653E\u5728\u9759\u6001\u8D44\u6E90\u76EE\u5F55\u4E0B\u5373\u53EF\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
<span class="token comment">#  mvc:</span>
<span class="token comment">#    static-path-pattern: /res/**   \u8FD9\u4E2A\u4F1A\u5BFC\u81F4 Favicon \u529F\u80FD\u5931\u6548</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E0D\u751F\u6548\u5219\u9996\u9875\u6DFB\u52A0</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!--    \\&lt;link rel=&quot;shortcut icon&quot; th:href=&quot;@{/favicon.ico}&quot;/&gt;--&gt;</span>
<span class="token comment">&lt;!--    \\&lt;link rel=&quot;bookmark&quot; th:href=&quot;@{/favicon.ico}&quot;/&gt;--&gt;</span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>shortcut icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/favicon.ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bookmark<span class="token punctuation">&quot;</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/favicon.ico<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u505C\u7528\u7F13\u5B58\uFF0C\u8C37\u6B4Cctrl+F5\u5F3A\u5236\u5237\u65B0</p><h4 id="_2-4\u3001\u9759\u6001\u8D44\u6E90\u914D\u7F6E\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_2-4\u3001\u9759\u6001\u8D44\u6E90\u914D\u7F6E\u539F\u7406" aria-hidden="true">#</a> 2.4\u3001\u9759\u6001\u8D44\u6E90\u914D\u7F6E\u539F\u7406</h4><ul><li>SpringBoot\u542F\u52A8\u9ED8\u8BA4\u52A0\u8F7D xxxAutoConfiguration \u7C7B\uFF08\u81EA\u52A8\u914D\u7F6E\u7C7B\uFF09</li><li>SpringMVC\u529F\u80FD\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B WebMvcAutoConfiguration\uFF0C\u751F\u6548</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span><span class="token punctuation">(</span>type <span class="token operator">=</span> <span class="token class-name">Type</span><span class="token punctuation">.</span>SERVLET<span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">Servlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DispatcherServlet</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">WebMvcConfigurationSupport</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureOrder</span><span class="token punctuation">(</span><span class="token class-name">Ordered</span><span class="token punctuation">.</span>HIGHEST_PRECEDENCE <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DispatcherServletAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">TaskExecutionAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
		<span class="token class-name">ValidationAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfiguration</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u7ED9\u5BB9\u5668\u4E2D\u914D\u4E86\u4EC0\u4E48\u3002</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token class-name">EnableWebMvcConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">ResourceProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Order</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u914D\u7F6E\u6587\u4EF6\u7684\u76F8\u5173\u5C5E\u6027\u548Cxxx\u8FDB\u884C\u4E86\u7ED1\u5B9A\u3002WebMvcProperties==<strong>spring.mvc</strong>\u3001ResourceProperties==<strong>spring.resources</strong></li></ul><h5 id="_1\u3001\u914D\u7F6E\u7C7B\u53EA\u6709\u4E00\u4E2A\u6709\u53C2\u6784\u9020\u5668" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u914D\u7F6E\u7C7B\u53EA\u6709\u4E00\u4E2A\u6709\u53C2\u6784\u9020\u5668" aria-hidden="true">#</a> 1\u3001\u914D\u7F6E\u7C7B\u53EA\u6709\u4E00\u4E2A\u6709\u53C2\u6784\u9020\u5668</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token comment">//\u6709\u53C2\u6784\u9020\u5668\u6240\u6709\u53C2\u6570\u7684\u503C\u90FD\u4F1A\u4ECE\u5BB9\u5668\u4E2D\u786E\u5B9A</span>
<span class="token comment">//ResourceProperties resourceProperties\uFF1B\u83B7\u53D6\u548Cspring.resources\u7ED1\u5B9A\u7684\u6240\u6709\u7684\u503C\u7684\u5BF9\u8C61</span>
<span class="token comment">//WebMvcProperties mvcProperties \u83B7\u53D6\u548Cspring.mvc\u7ED1\u5B9A\u7684\u6240\u6709\u7684\u503C\u7684\u5BF9\u8C61</span>
<span class="token comment">//ListableBeanFactory beanFactory Spring\u7684beanFactory</span>
<span class="token comment">//HttpMessageConverters \u627E\u5230\u6240\u6709\u7684HttpMessageConverters</span>
<span class="token comment">//ResourceHandlerRegistrationCustomizer \u627E\u5230 \u8D44\u6E90\u5904\u7406\u5668\u7684\u81EA\u5B9A\u4E49\u5668\u3002=========</span>
<span class="token comment">//DispatcherServletPath  </span>
<span class="token comment">//ServletRegistrationBean   \u7ED9\u5E94\u7528\u6CE8\u518CServlet\u3001Filter....</span>
	<span class="token keyword">public</span> <span class="token class-name">WebMvcAutoConfigurationAdapter</span><span class="token punctuation">(</span><span class="token class-name">ResourceProperties</span> resourceProperties<span class="token punctuation">,</span> <span class="token class-name">WebMvcProperties</span> mvcProperties<span class="token punctuation">,</span>
				<span class="token class-name">ListableBeanFactory</span> beanFactory<span class="token punctuation">,</span> <span class="token class-name">ObjectProvider</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">HttpMessageConverters</span><span class="token punctuation">&gt;</span></span> messageConvertersProvider<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ResourceHandlerRegistrationCustomizer</span><span class="token punctuation">&gt;</span></span> resourceHandlerRegistrationCustomizerProvider<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DispatcherServletPath</span><span class="token punctuation">&gt;</span></span> dispatcherServletPath<span class="token punctuation">,</span>
				<span class="token class-name">ObjectProvider</span>\\<span class="token operator">&lt;</span><span class="token class-name">ServletRegistrationBean</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> servletRegistrations<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties <span class="token operator">=</span> resourceProperties<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties <span class="token operator">=</span> mvcProperties<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>beanFactory <span class="token operator">=</span> beanFactory<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>messageConvertersProvider <span class="token operator">=</span> messageConvertersProvider<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>resourceHandlerRegistrationCustomizer <span class="token operator">=</span> resourceHandlerRegistrationCustomizerProvider<span class="token punctuation">.</span><span class="token function">getIfAvailable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>dispatcherServletPath <span class="token operator">=</span> dispatcherServletPath<span class="token punctuation">;</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>servletRegistrations <span class="token operator">=</span> servletRegistrations<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2\u3001\u8D44\u6E90\u5904\u7406\u7684\u9ED8\u8BA4\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u8D44\u6E90\u5904\u7406\u7684\u9ED8\u8BA4\u89C4\u5219" aria-hidden="true">#</a> 2\u3001\u8D44\u6E90\u5904\u7406\u7684\u9ED8\u8BA4\u89C4\u5219</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
		<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addResourceHandlers</span><span class="token punctuation">(</span><span class="token class-name">ResourceHandlerRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">isAddMappings</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Default resource handling disabled&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token class-name">Duration</span> cachePeriod <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPeriod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token class-name">CacheControl</span> cacheControl <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getCache</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getCachecontrol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHttpCacheControl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token comment">//webjars\u7684\u89C4\u5219</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span><span class="token string">&quot;/webjars/**&quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token string">&quot;classpath:/META-INF/resources/webjars/&quot;</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
            
            <span class="token comment">//</span>
			<span class="token class-name">String</span> staticPathPattern <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>registry<span class="token punctuation">.</span><span class="token function">hasMappingForPattern</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">customizeResourceHandlerRegistration</span><span class="token punctuation">(</span>registry<span class="token punctuation">.</span><span class="token function">addResourceHandler</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">addResourceLocations</span><span class="token punctuation">(</span><span class="token function">getResourceLocations</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>resourceProperties<span class="token punctuation">.</span><span class="token function">getStaticLocations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
						<span class="token punctuation">.</span><span class="token function">setCachePeriod</span><span class="token punctuation">(</span><span class="token function">getSeconds</span><span class="token punctuation">(</span>cachePeriod<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setCacheControl</span><span class="token punctuation">(</span>cacheControl<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
spring<span class="token operator">:</span>
#  mvc<span class="token operator">:</span>
#    <span class="token keyword">static</span><span class="token operator">-</span>path<span class="token operator">-</span>pattern<span class="token operator">:</span> <span class="token operator">/</span>res<span class="token doc-comment comment">/**

  resources:
    add-mappings: false   \u7981\u7528\u6240\u6709\u9759\u6001\u8D44\u6E90\u89C4\u5219
@ConfigurationProperties(prefix = &quot;spring.resources&quot;, ignoreUnknownFields = false)
public class ResourceProperties <span class="token punctuation">{</span>

	private static final String[] CLASSPATH_RESOURCE_LOCATIONS = <span class="token punctuation">{</span> &quot;classpath:/META-INF/resources/&quot;,
			&quot;classpath:/resources/&quot;, &quot;classpath:/static/&quot;, &quot;classpath:/public/&quot; <span class="token punctuation">}</span>;

	/**
	 * Locations of static resources. Defaults to classpath:[/META-INF/resources/,
	 * /resources/, /static/, /public/].
	 */</span>
	<span class="token keyword">private</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> staticLocations <span class="token operator">=</span> CLASSPATH_RESOURCE_LOCATIONS<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3\u3001\u6B22\u8FCE\u9875\u7684\u5904\u7406\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u6B22\u8FCE\u9875\u7684\u5904\u7406\u89C4\u5219" aria-hidden="true">#</a> 3\u3001\u6B22\u8FCE\u9875\u7684\u5904\u7406\u89C4\u5219</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token class-name">HandlerMapping</span>\uFF1A\u5904\u7406\u5668\u6620\u5C04\u3002\u4FDD\u5B58\u4E86\u6BCF\u4E00\u4E2A<span class="token class-name">Handler</span>\u80FD\u5904\u7406\u54EA\u4E9B\u8BF7\u6C42\u3002	

	<span class="token annotation punctuation">@Bean</span>
		<span class="token keyword">public</span> <span class="token class-name">WelcomePageHandlerMapping</span> <span class="token function">welcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span>
				<span class="token class-name">FormattingConversionService</span> mvcConversionService<span class="token punctuation">,</span> <span class="token class-name">ResourceUrlProvider</span> mvcResourceUrlProvider<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">WelcomePageHandlerMapping</span> welcomePageHandlerMapping <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span>
					<span class="token keyword">new</span> <span class="token class-name">TemplateAvailabilityProviders</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">,</span> applicationContext<span class="token punctuation">,</span> <span class="token function">getWelcomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>mvcProperties<span class="token punctuation">.</span><span class="token function">getStaticPathPattern</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setInterceptors</span><span class="token punctuation">(</span><span class="token function">getInterceptors</span><span class="token punctuation">(</span>mvcConversionService<span class="token punctuation">,</span> mvcResourceUrlProvider<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			welcomePageHandlerMapping<span class="token punctuation">.</span><span class="token function">setCorsConfigurations</span><span class="token punctuation">(</span><span class="token function">getCorsConfigurations</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span> welcomePageHandlerMapping<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

	<span class="token class-name">WelcomePageHandlerMapping</span><span class="token punctuation">(</span><span class="token class-name">TemplateAvailabilityProviders</span> templateAvailabilityProviders<span class="token punctuation">,</span>
			<span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">,</span> <span class="token class-name">Optional</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Resource</span><span class="token punctuation">&gt;</span></span> welcomePage<span class="token punctuation">,</span> <span class="token class-name">String</span> staticPathPattern<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>welcomePage<span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;/**&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>staticPathPattern<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//\u8981\u7528\u6B22\u8FCE\u9875\u529F\u80FD\uFF0C\u5FC5\u987B\u662F/**</span>
			logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page: &quot;</span> <span class="token operator">+</span> welcomePage<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;forward:index.html&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">welcomeTemplateExists</span><span class="token punctuation">(</span>templateAvailabilityProviders<span class="token punctuation">,</span> applicationContext<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// \u8C03\u7528Controller  /index</span>
			logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;Adding welcome page template: index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">setRootViewName</span><span class="token punctuation">(</span><span class="token string">&quot;index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4\u3001favicon" tabindex="-1"><a class="header-anchor" href="#_4\u3001favicon" aria-hidden="true">#</a> 4\u3001favicon</h5><h3 id="_3\u3001\u8BF7\u6C42\u53C2\u6570\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u8BF7\u6C42\u53C2\u6570\u5904\u7406" aria-hidden="true">#</a> 3\u3001\u8BF7\u6C42\u53C2\u6570\u5904\u7406</h3><h4 id="_1\u3001\u8BF7\u6C42\u6620\u5C04" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u8BF7\u6C42\u6620\u5C04" aria-hidden="true">#</a> 1\u3001\u8BF7\u6C42\u6620\u5C04</h4><h5 id="_1\u3001rest\u4F7F\u7528\u4E0E\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_1\u3001rest\u4F7F\u7528\u4E0E\u539F\u7406" aria-hidden="true">#</a> 1\u3001rest\u4F7F\u7528\u4E0E\u539F\u7406</h5><p>@xxxMapping\uFF1B Rest\u98CE\u683C\u652F\u6301\uFF08\u4F7F\u7528HTTP\u8BF7\u6C42\u65B9\u5F0F\u52A8\u8BCD\u6765\u8868\u793A\u5BF9\u8D44\u6E90\u7684\u64CD\u4F5C\uFF09 \u4EE5\u524D\uFF1A/getUser \u83B7\u53D6\u7528\u6237 /deleteUser \u5220\u9664\u7528\u6237 /editUser \u4FEE\u6539\u7528\u6237 /saveUser \u4FDD\u5B58\u7528\u6237 \u73B0\u5728\uFF1A /user GET-\u83B7\u53D6\u7528\u6237 DELETE-\u5220\u9664\u7528\u6237 PUT-\u4FEE\u6539\u7528\u6237 POST-\u4FDD\u5B58\u7528\u6237 \u6838\u5FC3Filter\uFF1BHiddenHttpMethodFilter \u7528\u6CD5\uFF1A \u8868\u5355method=post\uFF0C\u9690\u85CF\u57DF _method=put SpringBoot\u4E2D\u624B\u52A8\u5F00\u542F \u6269\u5C55\uFF1A\u5982\u4F55\u628A_method \u8FD9\u4E2A\u540D\u5B57\u6362\u6210\u6211\u4EEC\u81EA\u5DF1\u559C\u6B22\u7684\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>GET<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;GET-\u5F20\u4E09&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>POST<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">saveUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;POST-\u5F20\u4E09&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>PUT<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">putUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;PUT-\u5F20\u4E09&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/user&quot;</span><span class="token punctuation">,</span>method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span>DELETE<span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;DELETE-\u5F20\u4E09&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@Bean</span>
    <span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mvc.hiddenmethod.filter&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;enabled&quot;</span><span class="token punctuation">,</span> matchIfMissing <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">OrderedHiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


<span class="token comment">//\u81EA\u5B9A\u4E49filter</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">HiddenHttpMethodFilter</span> <span class="token function">hiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">HiddenHttpMethodFilter</span> methodFilter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HiddenHttpMethodFilter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        methodFilter<span class="token punctuation">.</span><span class="token function">setMethodParam</span><span class="token punctuation">(</span><span class="token string">&quot;_m&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> methodFilter<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Rest\u539F\u7406\uFF08\u8868\u5355\u63D0\u4EA4\u8981\u4F7F\u7528REST\u7684\u65F6\u5019\uFF09</p><ul><li><p>\u8868\u5355\u63D0\u4EA4\u4F1A\u5E26\u4E0A**_method=PUT**</p></li><li><p><strong>\u8BF7\u6C42\u8FC7\u6765\u88AB</strong>HiddenHttpMethodFilter\u62E6\u622A</p></li><li><ul><li>\u8BF7\u6C42\u662F\u5426\u6B63\u5E38\uFF0C\u5E76\u4E14\u662FPOST</li></ul></li><li><ul><li><ul><li>\u83B7\u53D6\u5230**_method**\u7684\u503C\u3002</li><li>\u517C\u5BB9\u4EE5\u4E0B\u8BF7\u6C42\uFF1B<strong>PUT</strong>.<strong>DELETE</strong>.<strong>PATCH</strong></li><li><strong>\u539F\u751Frequest\uFF08post\uFF09\uFF0C\u5305\u88C5\u6A21\u5F0FrequesWrapper\u91CD\u5199\u4E86getMethod\u65B9\u6CD5\uFF0C\u8FD4\u56DE\u7684\u662F\u4F20\u5165\u7684\u503C\u3002</strong></li><li><strong>\u8FC7\u6EE4\u5668\u94FE\u653E\u884C\u7684\u65F6\u5019\u7528wrapper\u3002\u4EE5\u540E\u7684\u65B9\u6CD5\u8C03\u7528getMethod\u662F\u8C03\u7528****requesWrapper\u7684\u3002</strong></li></ul></li></ul></li></ul><p><strong>Rest\u4F7F\u7528\u5BA2\u6237\u7AEF\u5DE5\u5177\uFF0C</strong></p><ul><li>\u5982PostMan\u76F4\u63A5\u53D1\u9001Put\u3001delete\u7B49\u65B9\u5F0F\u8BF7\u6C42\uFF0C\u65E0\u9700Filter\u3002</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">mvc</span><span class="token punctuation">:</span>
    <span class="token key atrule">hiddenmethod</span><span class="token punctuation">:</span>
      <span class="token key atrule">filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>   <span class="token comment">#\u5F00\u542F\u9875\u9762\u8868\u5355\u7684Rest\u529F\u80FD</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2\u3001\u8BF7\u6C42\u6620\u5C04\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u8BF7\u6C42\u6620\u5C04\u539F\u7406" aria-hidden="true">#</a> 2\u3001\u8BF7\u6C42\u6620\u5C04\u539F\u7406</h5><p><img src="http://qnimg.gisfsde.com/work/1603181171918-b8acfb93-4914-4208-9943-b37610e93864.png" alt="image.png" loading="lazy"></p><p>SpringMVC\u529F\u80FD\u5206\u6790\u90FD\u4ECE org.springframework.web.servlet.DispatcherServlet-\u300BdoDispatch\uFF08\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doDispatch</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">HttpServletRequest</span> processedRequest <span class="token operator">=</span> request<span class="token punctuation">;</span>
        <span class="token class-name">HandlerExecutionChain</span> mappedHandler <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> multipartRequestParsed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
\u200B
        <span class="token class-name">WebAsyncManager</span> asyncManager <span class="token operator">=</span> <span class="token class-name">WebAsyncUtils</span><span class="token punctuation">.</span><span class="token function">getAsyncManager</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
\u200B
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">ModelAndView</span> mv <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
            <span class="token class-name">Exception</span> dispatchException <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
\u200B
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                processedRequest <span class="token operator">=</span> <span class="token function">checkMultipart</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
                multipartRequestParsed <span class="token operator">=</span> <span class="token punctuation">(</span>processedRequest <span class="token operator">!=</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
\u200B
                <span class="token comment">// \u627E\u5230\u5F53\u524D\u8BF7\u6C42\u4F7F\u7528\u54EA\u4E2AHandler\uFF08Controller\u7684\u65B9\u6CD5\uFF09\u5904\u7406</span>
                mappedHandler <span class="token operator">=</span> <span class="token function">getHandler</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token comment">//HandlerMapping\uFF1A\u5904\u7406\u5668\u6620\u5C04\u3002/xxx-&gt;&gt;xxxx</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1603181460034-ba25f3c0-9cfd-4432-8949-3d1dd88d8b12.png" alt="image.png" loading="lazy"></p><p>RequestMappingHandlerMapping\uFF1A\u4FDD\u5B58\u4E86\u6240\u6709@RequestMapping \u548Chandler\u7684\u6620\u5C04\u89C4\u5219\u3002 <img src="http://qnimg.gisfsde.com/work/1603181662070-9e526de8-fd78-4a02-9410-728f059d6aef.png" alt="image.png" loading="lazy"></p><p>\u6240\u6709\u7684\u8BF7\u6C42\u6620\u5C04\u90FD\u5728HandlerMapping\u4E2D\u3002</p><ul><li><p>SpringBoot\u81EA\u52A8\u914D\u7F6E\u6B22\u8FCE\u9875\u7684 WelcomePageHandlerMapping \u3002\u8BBF\u95EE /\u80FD\u8BBF\u95EE\u5230index.html\uFF1B</p></li><li><p>SpringBoot\u81EA\u52A8\u914D\u7F6E\u4E86\u9ED8\u8BA4 \u7684 RequestMappingHandlerMapping</p></li><li><p>\u8BF7\u6C42\u8FDB\u6765\uFF0C\u6328\u4E2A\u5C1D\u8BD5\u6240\u6709\u7684HandlerMapping\u770B\u662F\u5426\u6709\u8BF7\u6C42\u4FE1\u606F\u3002</p></li><li><ul><li>\u5982\u679C\u6709\u5C31\u627E\u5230\u8FD9\u4E2A\u8BF7\u6C42\u5BF9\u5E94\u7684handler</li><li>\u5982\u679C\u6CA1\u6709\u5C31\u662F\u4E0B\u4E00\u4E2A HandlerMapping</li></ul></li><li><p>\u6211\u4EEC\u9700\u8981\u4E00\u4E9B\u81EA\u5B9A\u4E49\u7684\u6620\u5C04\u5904\u7406\uFF0C\u6211\u4EEC\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u7ED9\u5BB9\u5668\u4E2D\u653E<strong>HandlerMapping</strong>\u3002\u81EA\u5B9A\u4E49 <strong>HandlerMapping</strong></p></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token keyword">protected</span> <span class="token class-name">HandlerExecutionChain</span> <span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token class-name">HandlerExecutionChain</span> handler <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">return</span> handler<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token class-name">HandlerExecutionChain</span> <span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMapping</span> mapping <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlerMappings<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">HandlerExecutionChain</span> handler <span class="token operator">=</span> mapping<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> handler<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u666E\u901A\u53C2\u6570\u4E0E\u57FA\u672C\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u666E\u901A\u53C2\u6570\u4E0E\u57FA\u672C\u6CE8\u89E3" aria-hidden="true">#</a> 2\u3001\u666E\u901A\u53C2\u6570\u4E0E\u57FA\u672C\u6CE8\u89E3</h4><h5 id="_1-1\u3001\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_1-1\u3001\u6CE8\u89E3" aria-hidden="true">#</a> 1.1\u3001\u6CE8\u89E3\uFF1A</h5><p>@PathVariable\uFF08\u8DEF\u5F84\uFF09\u3001@RequestHeader\uFF08header\uFF09\u3001@ModelAttribute\uFF08\uFF09\u3001@RequestParam\uFF08\u8BF7\u6C42\u53C2\u6570\uFF09\u3001@MatrixVariable\uFF08\u77E9\u9635\u53D8\u91CF \u7528\uFF1B\u9694\u5F00\uFF09\u3001@CookieValue\uFF08cookie\uFF09\u3001@RequestBody\uFF08\u8BF7\u6C42\u4F53\uFF09\u3001@RequestAttribute\uFF08\u8BF7\u6C42\u57DF\uFF09</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParameterTestController</span> <span class="token punctuation">{</span>


    <span class="token comment">//  car/2/owner/zhangsan</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/car/{id}/owner/{username}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pv<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestHeader</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> header<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;inters&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> inters<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> _ga<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span><span class="token punctuation">{</span>


        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//        map.put(&quot;id&quot;,id);</span>
<span class="token comment">//        map.put(&quot;name&quot;,name);</span>
<span class="token comment">//        map.put(&quot;pv&quot;,pv);</span>
<span class="token comment">//        map.put(&quot;userAgent&quot;,userAgent);</span>
<span class="token comment">//        map.put(&quot;headers&quot;,header);</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;inters&quot;</span><span class="token punctuation">,</span>inters<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;params&quot;</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">,</span>_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;===&gt;&quot;</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">postMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//1\u3001\u8BED\u6CD5\uFF1A \u8BF7\u6C42\u8DEF\u5F84\uFF1A/cars/sell;low=34;brand=byd,audi,yd</span>
    <span class="token comment">//2\u3001SpringBoot\u9ED8\u8BA4\u662F\u7981\u7528\u4E86\u77E9\u9635\u53D8\u91CF\u7684\u529F\u80FD</span>
    <span class="token comment">//      \u624B\u52A8\u5F00\u542F\uFF1A\u539F\u7406\u3002\u5BF9\u4E8E\u8DEF\u5F84\u7684\u5904\u7406\u3002UrlPathHelper\u8FDB\u884C\u89E3\u6790\u3002</span>
    <span class="token comment">//              removeSemicolonContent\uFF08\u79FB\u9664\u5206\u53F7\u5185\u5BB9\uFF09\u652F\u6301\u77E9\u9635\u53D8\u91CF\u7684</span>
    <span class="token comment">//3\u3001\u77E9\u9635\u53D8\u91CF\u5FC5\u987B\u6709url\u8DEF\u5F84\u53D8\u91CF\u624D\u80FD\u88AB\u89E3\u6790</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/cars/{path}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">carsSell</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">&quot;low&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> low<span class="token punctuation">,</span>
                        <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> brand<span class="token punctuation">,</span>
                        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;low&quot;</span><span class="token punctuation">,</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">,</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// /boss/1;age=20/2;age=10</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/boss/{bossId}/{empId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">boss</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">&quot;bossId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> bossAge<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">&quot;empId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> empAge<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bossAge&quot;</span><span class="token punctuation">,</span>bossAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;empAge&quot;</span><span class="token punctuation">,</span>empAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ParameterTestController</span> <span class="token punctuation">{</span>


    <span class="token comment">//  car/2/owner/zhangsan</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/car/{id}/owner/{username}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> <span class="token function">getCar</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> id<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> name<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@PathVariable</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> pv<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;User-Agent&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> userAgent<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestHeader</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> header<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> age<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;inters&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> inters<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> params<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> _ga<span class="token punctuation">,</span>
                                     <span class="token annotation punctuation">@CookieValue</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Cookie</span> cookie<span class="token punctuation">)</span><span class="token punctuation">{</span>


        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//        map.put(&quot;id&quot;,id);</span>
<span class="token comment">//        map.put(&quot;name&quot;,name);</span>
<span class="token comment">//        map.put(&quot;pv&quot;,pv);</span>
<span class="token comment">//        map.put(&quot;userAgent&quot;,userAgent);</span>
<span class="token comment">//        map.put(&quot;headers&quot;,header);</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;inters&quot;</span><span class="token punctuation">,</span>inters<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;params&quot;</span><span class="token punctuation">,</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;_ga&quot;</span><span class="token punctuation">,</span>_ga<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>cookie<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;===&gt;&quot;</span><span class="token operator">+</span>cookie<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/save&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">postMethod</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestBody</span> <span class="token class-name">String</span> content<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;content&quot;</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">//1\u3001\u8BED\u6CD5\uFF1A \u8BF7\u6C42\u8DEF\u5F84\uFF1A/cars/sell;low=34;brand=byd,audi,yd</span>
    <span class="token comment">//2\u3001SpringBoot\u9ED8\u8BA4\u662F\u7981\u7528\u4E86\u77E9\u9635\u53D8\u91CF\u7684\u529F\u80FD</span>
    <span class="token comment">//      \u624B\u52A8\u5F00\u542F\uFF1A\u539F\u7406\u3002\u5BF9\u4E8E\u8DEF\u5F84\u7684\u5904\u7406\u3002UrlPathHelper\u8FDB\u884C\u89E3\u6790\u3002</span>
    <span class="token comment">//              removeSemicolonContent\uFF08\u79FB\u9664\u5206\u53F7\u5185\u5BB9\uFF09\u652F\u6301\u77E9\u9635\u53D8\u91CF\u7684</span>
    <span class="token comment">//3\u3001\u77E9\u9635\u53D8\u91CF\u5FC5\u987B\u6709url\u8DEF\u5F84\u53D8\u91CF\u624D\u80FD\u88AB\u89E3\u6790</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/cars/{path}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">carsSell</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">&quot;low&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> low<span class="token punctuation">,</span>
                        <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">)</span> <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> brand<span class="token punctuation">,</span>
                        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> path<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;low&quot;</span><span class="token punctuation">,</span>low<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;brand&quot;</span><span class="token punctuation">,</span>brand<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;path&quot;</span><span class="token punctuation">,</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// /boss/1;age=20/2;age=10</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/boss/{bossId}/{empId}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">boss</span><span class="token punctuation">(</span><span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">&quot;bossId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> bossAge<span class="token punctuation">,</span>
                    <span class="token annotation punctuation">@MatrixVariable</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span>pathVar <span class="token operator">=</span> <span class="token string">&quot;empId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> empAge<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;bossAge&quot;</span><span class="token punctuation">,</span>bossAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
        map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;empAge&quot;</span><span class="token punctuation">,</span>empAge<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> map<span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-2\u3001servlet-api" tabindex="-1"><a class="header-anchor" href="#_1-2\u3001servlet-api" aria-hidden="true">#</a> 1.2\u3001Servlet API\uFF1A</h5><p>WebRequest\u3001ServletRequest\u3001MultipartRequest\u3001 HttpSession\u3001javax.servlet.http.PushBuilder\u3001Principal\u3001InputStream\u3001Reader\u3001HttpMethod\u3001Locale\u3001TimeZone\u3001ZoneId</p><p><strong>ServletRequestMethodArgumentResolver \u4EE5\u4E0A\u7684\u90E8\u5206\u53C2\u6570</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">supportsParameter</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Class</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> paramType <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">WebRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">ServletRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">MultipartRequest</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">HttpSession</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token punctuation">(</span>pushBuilder <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> pushBuilder<span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">Principal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">InputStream</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">Reader</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>paramType<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">HttpMethod</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType <span class="token operator">||</span>
				<span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType <span class="token operator">||</span>
				<span class="token class-name">TimeZone</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType <span class="token operator">||</span>
				<span class="token class-name">ZoneId</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> paramType<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-3\u3001\u590D\u6742\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_1-3\u3001\u590D\u6742\u53C2\u6570" aria-hidden="true">#</a> 1.3\u3001\u590D\u6742\u53C2\u6570\uFF1A</h5><p><strong>Map</strong>\u3001**Model\uFF08map\u3001model\u91CC\u9762\u7684\u6570\u636E\u4F1A\u88AB\u653E\u5728request\u7684\u8BF7\u6C42\u57DF request.setAttribute\uFF09\u3001**Errors/BindingResult\u3001<strong>RedirectAttributes\uFF08 \u91CD\u5B9A\u5411\u643A\u5E26\u6570\u636E\uFF09</strong>\u3001<strong>ServletResponse\uFF08response\uFF09</strong>\u3001SessionStatus\u3001UriComponentsBuilder\u3001ServletUriComponentsBuilder</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map<span class="token punctuation">,</span>  <span class="token class-name">Model</span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request \u90FD\u662F\u53EF\u4EE5\u7ED9request\u57DF\u4E2D\u653E\u6570\u636E\uFF0C
request<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Map\u3001Model\u7C7B\u578B\u7684\u53C2\u6570</strong>\uFF0C\u4F1A\u8FD4\u56DE mavContainer.getModel\uFF08\uFF09\uFF1B---&gt; BindingAwareModelMap \u662FModel \u4E5F\u662FMap</p><p><strong>mavContainer</strong>.getModel(); \u83B7\u53D6\u5230\u503C\u7684</p><p><img src="http://qnimg.gisfsde.com/work/image-20220422132507167.png" alt="image-20220422132507167" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1603271678813-d8e1a1e5-94fa-412c-a7f1-6f27174fd127.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1603271813894-037be041-92a5-49af-a49c-c350b3dd587a.png" alt="img" loading="lazy"></p><h5 id="_1-4\u3001\u81EA\u5B9A\u4E49\u5BF9\u8C61\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_1-4\u3001\u81EA\u5B9A\u4E49\u5BF9\u8C61\u53C2\u6570" aria-hidden="true">#</a> 1.4\u3001\u81EA\u5B9A\u4E49\u5BF9\u8C61\u53C2\u6570\uFF1A</h5><p>\u53EF\u4EE5\u81EA\u52A8\u7C7B\u578B\u8F6C\u6362\u4E0E\u683C\u5F0F\u5316\uFF0C\u53EF\u4EE5\u7EA7\u8054\u5C01\u88C5\u3002</p><h4 id="_3\u3001pojo\u5C01\u88C5\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_3\u3001pojo\u5C01\u88C5\u8FC7\u7A0B" aria-hidden="true">#</a> 3\u3001POJO\u5C01\u88C5\u8FC7\u7A0B</h4><ul><li><strong>ServletModelAttributeMethodProcessor</strong></li></ul><h4 id="_4\u3001\u53C2\u6570\u5904\u7406\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u53C2\u6570\u5904\u7406\u539F\u7406" aria-hidden="true">#</a> 4\u3001\u53C2\u6570\u5904\u7406\u539F\u7406</h4><ul><li>HandlerMapping\u4E2D\u627E\u5230\u80FD\u5904\u7406\u8BF7\u6C42\u7684Handler\uFF08Controller.method()\uFF09</li><li>\u4E3A\u5F53\u524DHandler \u627E\u4E00\u4E2A\u9002\u914D\u5668 HandlerAdapter\uFF1B <strong>RequestMappingHandlerAdapter</strong></li><li>\u9002\u914D\u5668\u6267\u884C\u76EE\u6807\u65B9\u6CD5\u5E76\u786E\u5B9A\u65B9\u6CD5\u53C2\u6570\u7684\u6BCF\u4E00\u4E2A\u503C</li></ul><h5 id="_1\u3001handleradapter" tabindex="-1"><a class="header-anchor" href="#_1\u3001handleradapter" aria-hidden="true">#</a> 1\u3001HandlerAdapter</h5><p><img src="http://qnimg.gisfsde.com/work/1603262942726-107353bd-f8b7-44f6-93cf-2a3cad4093cf.png" alt="img" loading="lazy"></p><p>0 - \u652F\u6301\u65B9\u6CD5\u4E0A\u6807\u6CE8@RequestMapping</p><p>1 - \u652F\u6301\u51FD\u6570\u5F0F\u7F16\u7A0B\u7684</p><p>xxxxxx</p><h5 id="_2\u3001\u6267\u884C\u76EE\u6807\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6267\u884C\u76EE\u6807\u65B9\u6CD5" aria-hidden="true">#</a> 2\u3001\u6267\u884C\u76EE\u6807\u65B9\u6CD5</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">// Actually invoke the handler.</span>
<span class="token comment">//DispatcherServlet -- doDispatch</span>
mv <span class="token operator">=</span> ha<span class="token punctuation">.</span><span class="token function">handle</span><span class="token punctuation">(</span>processedRequest<span class="token punctuation">,</span> response<span class="token punctuation">,</span> mappedHandler<span class="token punctuation">.</span><span class="token function">getHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mav <span class="token operator">=</span> <span class="token function">invokeHandlerMethod</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> handlerMethod<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u6267\u884C\u76EE\u6807\u65B9\u6CD5</span>


<span class="token comment">//ServletInvocableHandlerMethod</span>
<span class="token class-name">Object</span> returnValue <span class="token operator">=</span> <span class="token function">invokeForRequest</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//\u83B7\u53D6\u65B9\u6CD5\u7684\u53C2\u6570\u503C</span>
<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3\u3001\u53C2\u6570\u89E3\u6790\u5668-handlermethodargumentresolver" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u53C2\u6570\u89E3\u6790\u5668-handlermethodargumentresolver" aria-hidden="true">#</a> 3\u3001\u53C2\u6570\u89E3\u6790\u5668-HandlerMethodArgumentResolver</h5><p>\u786E\u5B9A\u5C06\u8981\u6267\u884C\u7684\u76EE\u6807\u65B9\u6CD5\u7684\u6BCF\u4E00\u4E2A\u53C2\u6570\u7684\u503C\u662F\u4EC0\u4E48;</p><p>SpringMVC\u76EE\u6807\u65B9\u6CD5\u80FD\u5199\u591A\u5C11\u79CD\u53C2\u6570\u7C7B\u578B\u3002\u53D6\u51B3\u4E8E\u53C2\u6570\u89E3\u6790\u5668\u3002</p><p><img src="http://qnimg.gisfsde.com/work/1603263283504-85bbd4d5-a9af-4dbf-b6a2-30b409868774.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1603263394724-33122714-9d06-42ec-bf45-e440e8b49c05.png" alt="img" loading="lazy"></p><ul><li>\u5F53\u524D\u89E3\u6790\u5668\u662F\u5426\u652F\u6301\u89E3\u6790\u8FD9\u79CD\u53C2\u6570</li><li>\u652F\u6301\u5C31\u8C03\u7528 resolveArgument</li></ul><h5 id="_4\u3001\u8FD4\u56DE\u503C\u5904\u7406\u5668" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u8FD4\u56DE\u503C\u5904\u7406\u5668" aria-hidden="true">#</a> 4\u3001\u8FD4\u56DE\u503C\u5904\u7406\u5668</h5><p><img src="http://qnimg.gisfsde.com/work/1603263524227-386da4be-43b1-4b17-a2cc-8cf886346af9.png" alt="img" loading="lazy"></p><h5 id="_5\u3001\u5982\u4F55\u786E\u5B9A\u76EE\u6807\u65B9\u6CD5\u6BCF\u4E00\u4E2A\u53C2\u6570\u7684\u503C" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u5982\u4F55\u786E\u5B9A\u76EE\u6807\u65B9\u6CD5\u6BCF\u4E00\u4E2A\u53C2\u6570\u7684\u503C" aria-hidden="true">#</a> 5\u3001\u5982\u4F55\u786E\u5B9A\u76EE\u6807\u65B9\u6CD5\u6BCF\u4E00\u4E2A\u53C2\u6570\u7684\u503C</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token class-name">InvocableHandlerMethod</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token keyword">protected</span> <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">getMethodArgumentValues</span><span class="token punctuation">(</span><span class="token class-name">NativeWebRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
			<span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> providedArgs<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

		<span class="token class-name">MethodParameter</span><span class="token punctuation">[</span><span class="token punctuation">]</span> parameters <span class="token operator">=</span> <span class="token function">getMethodParameters</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">ObjectUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>parameters<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> EMPTY_ARGS<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">[</span>parameters<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i \\<span class="token operator">&lt;</span> parameters<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">MethodParameter</span> parameter <span class="token operator">=</span> parameters<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
			parameter<span class="token punctuation">.</span><span class="token function">initParameterNameDiscovery</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>parameterNameDiscoverer<span class="token punctuation">)</span><span class="token punctuation">;</span>
			args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">findProvidedArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> providedArgs<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">continue</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalStateException</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> <span class="token string">&quot;No suitable resolver&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				args<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>resolvers<span class="token punctuation">.</span><span class="token function">resolveArgument</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataBinderFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// Leave stack trace for later, exception may actually be resolved and handled...</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token class-name">String</span> exMsg <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>exMsg <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>exMsg<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">getExecutable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toGenericString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token function">formatArgumentError</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> exMsg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> args<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_5-1\u3001\u6328\u4E2A\u5224\u65AD\u6240\u6709\u53C2\u6570\u89E3\u6790\u5668\u90A3\u4E2A\u652F\u6301\u89E3\u6790\u8FD9\u4E2A\u53C2\u6570" tabindex="-1"><a class="header-anchor" href="#_5-1\u3001\u6328\u4E2A\u5224\u65AD\u6240\u6709\u53C2\u6570\u89E3\u6790\u5668\u90A3\u4E2A\u652F\u6301\u89E3\u6790\u8FD9\u4E2A\u53C2\u6570" aria-hidden="true">#</a> 5.1\u3001\u6328\u4E2A\u5224\u65AD\u6240\u6709\u53C2\u6570\u89E3\u6790\u5668\u90A3\u4E2A\u652F\u6301\u89E3\u6790\u8FD9\u4E2A\u53C2\u6570</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Nullable</span>
	<span class="token keyword">private</span> <span class="token class-name">HandlerMethodArgumentResolver</span> <span class="token function">getArgumentResolver</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">HandlerMethodArgumentResolver</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolverCache<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">HandlerMethodArgumentResolver</span> resolver <span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolvers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>resolver<span class="token punctuation">.</span><span class="token function">supportsParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					result <span class="token operator">=</span> resolver<span class="token punctuation">;</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>argumentResolverCache<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>parameter<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token keyword">break</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_5-2\u3001\u89E3\u6790\u8FD9\u4E2A\u53C2\u6570\u7684\u503C" tabindex="-1"><a class="header-anchor" href="#_5-2\u3001\u89E3\u6790\u8FD9\u4E2A\u53C2\u6570\u7684\u503C" aria-hidden="true">#</a> 5.2\u3001\u89E3\u6790\u8FD9\u4E2A\u53C2\u6570\u7684\u503C</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u8C03\u7528\u5404\u81EA <span class="token class-name">HandlerMethodArgumentResolver</span> \u7684 resolveArgument \u65B9\u6CD5\u5373\u53EF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h6 id="_5-3\u3001\u81EA\u5B9A\u4E49\u7C7B\u578B\u53C2\u6570-\u5C01\u88C5pojo" tabindex="-1"><a class="header-anchor" href="#_5-3\u3001\u81EA\u5B9A\u4E49\u7C7B\u578B\u53C2\u6570-\u5C01\u88C5pojo" aria-hidden="true">#</a> 5.3\u3001\u81EA\u5B9A\u4E49\u7C7B\u578B\u53C2\u6570 \u5C01\u88C5POJO</h6><p><strong>ServletModelAttributeMethodProcessor \u8FD9\u4E2A\u53C2\u6570\u5904\u7406\u5668\u652F\u6301</strong></p><p><strong>\u662F\u5426\u4E3A\u7B80\u5355\u7C7B\u578B\u3002</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">boolean</span> <span class="token function">isSimpleValueType</span><span class="token punctuation">(</span><span class="token class-name">Class</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span> type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token class-name">Void</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">!=</span> type <span class="token operator">&amp;&amp;</span> <span class="token keyword">void</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">!=</span> type <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span><span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPrimitiveOrWrapper</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">Enum</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">CharSequence</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">Number</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">Date</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span>
				<span class="token class-name">Temporal</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">isAssignableFrom</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span> <span class="token operator">||</span>
				URI<span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type <span class="token operator">||</span>
				URL<span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type <span class="token operator">||</span>
				<span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type <span class="token operator">||</span>
				<span class="token class-name">Class</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token operator">==</span> type<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token annotation punctuation">@Override</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token class-name">Object</span> <span class="token function">resolveArgument</span><span class="token punctuation">(</span><span class="token class-name">MethodParameter</span> parameter<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span>
			<span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">WebDataBinderFactory</span> binderFactory<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>mavContainer <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;ModelAttributeMethodProcessor requires ModelAndViewContainer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">Assert</span><span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span>binderFactory <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token string">&quot;ModelAttributeMethodProcessor requires WebDataBinderFactory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token class-name">ModelFactory</span><span class="token punctuation">.</span><span class="token function">getNameForParameter</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ModelAttribute</span> ann <span class="token operator">=</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterAnnotation</span><span class="token punctuation">(</span><span class="token class-name">ModelAttribute</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>ann <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			mavContainer<span class="token punctuation">.</span><span class="token function">setBinding</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> ann<span class="token punctuation">.</span><span class="token function">binding</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token class-name">Object</span> attribute <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token class-name">BindingResult</span> bindingResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>mavContainer<span class="token punctuation">.</span><span class="token function">containsAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			attribute <span class="token operator">=</span> mavContainer<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// Create attribute instance</span>
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				attribute <span class="token operator">=</span> <span class="token function">createAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> parameter<span class="token punctuation">,</span> binderFactory<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">BindException</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isBindExceptionRequired</span><span class="token punctuation">(</span>parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token comment">// No BindingResult parameter -&gt; fail with BindException</span>
					<span class="token keyword">throw</span> ex<span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token comment">// Otherwise, expose null/empty value and associated BindingResult</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					attribute <span class="token operator">=</span> <span class="token class-name">Optional</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				bindingResult <span class="token operator">=</span> ex<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>bindingResult <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// Bean property binding and validation;</span>
			<span class="token comment">// skipped in case of binding failure on construction.</span>
			<span class="token class-name">WebDataBinder</span> binder <span class="token operator">=</span> binderFactory<span class="token punctuation">.</span><span class="token function">createBinder</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">,</span> attribute<span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mavContainer<span class="token punctuation">.</span><span class="token function">isBindingDisabled</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">bindRequestParameters</span><span class="token punctuation">(</span>binder<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token function">validateIfApplicable</span><span class="token punctuation">(</span>binder<span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasErrors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isBindExceptionRequired</span><span class="token punctuation">(</span>binder<span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">BindException</span><span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// Value type adaptation, also covering java.util.Optional</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">isInstance</span><span class="token punctuation">(</span>attribute<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				attribute <span class="token operator">=</span> binder<span class="token punctuation">.</span><span class="token function">convertIfNecessary</span><span class="token punctuation">(</span>binder<span class="token punctuation">.</span><span class="token function">getTarget</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parameter<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> parameter<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			bindingResult <span class="token operator">=</span> binder<span class="token punctuation">.</span><span class="token function">getBindingResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// Add resolved attribute and BindingResult at the end of the model</span>
		<span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> bindingResultModel <span class="token operator">=</span> bindingResult<span class="token punctuation">.</span><span class="token function">getModel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		mavContainer<span class="token punctuation">.</span><span class="token function">removeAttributes</span><span class="token punctuation">(</span>bindingResultModel<span class="token punctuation">)</span><span class="token punctuation">;</span>
		mavContainer<span class="token punctuation">.</span><span class="token function">addAllAttributes</span><span class="token punctuation">(</span>bindingResultModel<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">return</span> attribute<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>WebDataBinder binder = binderFactory.createBinder(webRequest, attribute, name);</strong></p><p><strong>WebDataBinder :web\u6570\u636E\u7ED1\u5B9A\u5668\uFF0C\u5C06\u8BF7\u6C42\u53C2\u6570\u7684\u503C\u7ED1\u5B9A\u5230\u6307\u5B9A\u7684JavaBean\u91CC\u9762</strong></p><p><strong>WebDataBinder \u5229\u7528\u5B83\u91CC\u9762\u7684 Converters \u5C06\u8BF7\u6C42\u6570\u636E\u8F6C\u6210\u6307\u5B9A\u7684\u6570\u636E\u7C7B\u578B\u3002\u518D\u6B21\u5C01\u88C5\u5230JavaBean\u4E2D</strong></p><p><strong>GenericConversionService\uFF1A\u5728\u8BBE\u7F6E\u6BCF\u4E00\u4E2A\u503C\u7684\u65F6\u5019\uFF0C\u627E\u5B83\u91CC\u9762\u7684\u6240\u6709converter\u90A3\u4E2A\u53EF\u4EE5\u5C06\u8FD9\u4E2A\u6570\u636E\u7C7B\u578B\uFF08request\u5E26\u6765\u53C2\u6570\u7684\u5B57\u7B26\u4E32\uFF09\u8F6C\u6362\u5230\u6307\u5B9A\u7684\u7C7B\u578B\uFF08JavaBean -- Integer\uFF09</strong></p><p><strong>byte -- &gt; file</strong></p><p>@FunctionalInterface<strong>public interface</strong> Converter&lt;S, T&gt;</p><p><img src="http://qnimg.gisfsde.com/work/1603337871521-25fc1aa1-133a-4ce0-a146-d565633d7658.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1603338486441-9bbd22a9-813f-49bd-b51b-e66c7f4b8598.png" alt="img" loading="lazy"></p><p>\u672A\u6765\u6211\u4EEC\u53EF\u4EE5\u7ED9WebDataBinder\u91CC\u9762\u653E\u81EA\u5DF1\u7684Converter\uFF1B</p><p><strong>private static final class</strong> StringToNumber&lt;T <strong>extends</strong> Number&gt; <strong>implements</strong> Converter&lt;String, T&gt;</p><p>\u81EA\u5B9A\u4E49 Converter</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">//1\u3001WebMvcConfigurer\u5B9A\u5236\u5316SpringMVC\u7684\u529F\u80FD</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">configurePathMatch</span><span class="token punctuation">(</span><span class="token class-name">PathMatchConfigurer</span> configurer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">UrlPathHelper</span> urlPathHelper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UrlPathHelper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// \u4E0D\u79FB\u9664\uFF1B\u540E\u9762\u7684\u5185\u5BB9\u3002\u77E9\u9635\u53D8\u91CF\u529F\u80FD\u5C31\u53EF\u4EE5\u751F\u6548</span>
                urlPathHelper<span class="token punctuation">.</span><span class="token function">setRemoveSemicolonContent</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                configurer<span class="token punctuation">.</span><span class="token function">setUrlPathHelper</span><span class="token punctuation">(</span>urlPathHelper<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addFormatters</span><span class="token punctuation">(</span><span class="token class-name">FormatterRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                registry<span class="token punctuation">.</span><span class="token function">addConverter</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Converter</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Pet</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

                    <span class="token annotation punctuation">@Override</span>
                    <span class="token keyword">public</span> <span class="token class-name">Pet</span> <span class="token function">convert</span><span class="token punctuation">(</span><span class="token class-name">String</span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token comment">// \u554A\u732B,3</span>
                        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                            <span class="token class-name">Pet</span> pet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> split <span class="token operator">=</span> source<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            pet<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>split<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            pet<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>split<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">return</span> pet<span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6\u3001\u76EE\u6807\u65B9\u6CD5\u6267\u884C\u5B8C\u6210" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u76EE\u6807\u65B9\u6CD5\u6267\u884C\u5B8C\u6210" aria-hidden="true">#</a> 6\u3001\u76EE\u6807\u65B9\u6CD5\u6267\u884C\u5B8C\u6210</h5><p>\u5C06\u6240\u6709\u7684\u6570\u636E\u90FD\u653E\u5728 <strong>ModelAndViewContainer</strong>\uFF1B\u5305\u542B\u8981\u53BB\u7684\u9875\u9762\u5730\u5740View\u3002\u8FD8\u5305\u542BModel\u6570\u636E\u3002</p><p><img src="http://qnimg.gisfsde.com/work/1603272018605-1bce3142-bdd9-4834-a028-c753e91c52ac.png" alt="img" loading="lazy"></p><h5 id="_7\u3001\u5904\u7406\u6D3E\u53D1\u7ED3\u679C" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u5904\u7406\u6D3E\u53D1\u7ED3\u679C" aria-hidden="true">#</a> 7\u3001\u5904\u7406\u6D3E\u53D1\u7ED3\u679C</h5><p><strong>processDispatchResult</strong>(processedRequest, response, mappedHandler, mv, dispatchException);</p><p>renderMergedOutputModel(mergedModel, getRequestToExpose(request), response);</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">InternalResourceView</span>\uFF1A
<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">renderMergedOutputModel</span><span class="token punctuation">(</span>
			<span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

		<span class="token comment">// Expose the model object as request attributes.</span>
		<span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Expose helpers as request attributes, if any.</span>
		<span class="token function">exposeHelpers</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Determine the path for the request dispatcher.</span>
		<span class="token class-name">String</span> dispatcherPath <span class="token operator">=</span> <span class="token function">prepareForRendering</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Obtain a RequestDispatcher for the target resource (typically a JSP).</span>
		<span class="token class-name">RequestDispatcher</span> rd <span class="token operator">=</span> <span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> dispatcherPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>rd <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ServletException</span><span class="token punctuation">(</span><span class="token string">&quot;Could not get RequestDispatcher for [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span>
					<span class="token string">&quot;]: Check that the corresponding file exists within your web application archive!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// If already included or response already committed, perform include, else forward.</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">useInclude</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			response<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token function">getContentType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Including [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			rd<span class="token punctuation">.</span><span class="token function">include</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token comment">// Note: The forwarded resource is supposed to determine the content type itself.</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>logger<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				logger<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;Forwarding to [&quot;</span> <span class="token operator">+</span> <span class="token function">getUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			rd<span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\u66B4\u9732\u6A21\u578B\u4F5C\u4E3A\u8BF7\u6C42\u57DF\u5C5E\u6027
<span class="token comment">// Expose the model object as request attributes.</span>
		<span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">exposeModelAsRequestAttributes</span><span class="token punctuation">(</span><span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> model<span class="token punctuation">,</span>
			<span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

    <span class="token comment">//model\u4E2D\u7684\u6240\u6709\u6570\u636E\u904D\u5386\u6328\u4E2A\u653E\u5728\u8BF7\u6C42\u57DF\u4E2D</span>
		model<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token punctuation">{</span>
				request<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4\u3001\u6570\u636E\u54CD\u5E94\u4E0E\u5185\u5BB9\u534F\u5546" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6570\u636E\u54CD\u5E94\u4E0E\u5185\u5BB9\u534F\u5546" aria-hidden="true">#</a> 4\u3001\u6570\u636E\u54CD\u5E94\u4E0E\u5185\u5BB9\u534F\u5546</h3><p><img src="http://qnimg.gisfsde.com/work/1606043749073-2573e24a-9ea9-459e-ad94-a433e1082624.png" alt="img" loading="lazy"></p><h4 id="_1\u3001\u54CD\u5E94json" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u54CD\u5E94json" aria-hidden="true">#</a> 1\u3001\u54CD\u5E94JSON</h4><h5 id="_1-1\u3001jackson-jar-responsebody" tabindex="-1"><a class="header-anchor" href="#_1-1\u3001jackson-jar-responsebody" aria-hidden="true">#</a> 1.1\u3001jackson.jar+@ResponseBody</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
web\u573A\u666F\u81EA\u52A8\u5F15\u5165\u4E86json\u573A\u666F
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
      \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
      \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-json\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
      \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.4.RELEASE\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
      \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>compile\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1605151090728-f7c60e6f-d0c0-4541-bfa3-8cc805dfd5d6.png" alt="img" loading="lazy"></p><p>\u7ED9\u524D\u7AEF\u81EA\u52A8\u8FD4\u56DEjson\u6570\u636E\uFF1B</p><h6 id="_1\u3001\u8FD4\u56DE\u503C\u89E3\u6790\u5668" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u8FD4\u56DE\u503C\u89E3\u6790\u5668" aria-hidden="true">#</a> 1\u3001\u8FD4\u56DE\u503C\u89E3\u6790\u5668</h6><p><img src="http://qnimg.gisfsde.com/work/1605151359370-01cd1fbe-628a-4eea-9430-d79a78f59125.png" alt="img" loading="lazy"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>returnValueHandlers<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span>
					returnValue<span class="token punctuation">,</span> <span class="token function">getReturnValueType</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">)</span><span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleReturnValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">,</span>
			<span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span> <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

		<span class="token class-name">HandlerMethodReturnValueHandler</span> handler <span class="token operator">=</span> <span class="token function">selectHandler</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>handler <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">IllegalArgumentException</span><span class="token punctuation">(</span><span class="token string">&quot;Unknown return value type: &quot;</span> <span class="token operator">+</span> returnType<span class="token punctuation">.</span><span class="token function">getParameterType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		handler<span class="token punctuation">.</span><span class="token function">handleReturnValue</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">,</span> mavContainer<span class="token punctuation">,</span> webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token class-name">RequestResponseBodyMethodProcessor</span>  	
<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleReturnValue</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Object</span> returnValue<span class="token punctuation">,</span> <span class="token class-name">MethodParameter</span> returnType<span class="token punctuation">,</span>
			<span class="token class-name">ModelAndViewContainer</span> mavContainer<span class="token punctuation">,</span> <span class="token class-name">NativeWebRequest</span> webRequest<span class="token punctuation">)</span>
			<span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMediaTypeNotAcceptableException</span><span class="token punctuation">,</span> <span class="token class-name">HttpMessageNotWritableException</span> <span class="token punctuation">{</span>

		mavContainer<span class="token punctuation">.</span><span class="token function">setRequestHandled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ServletServerHttpRequest</span> inputMessage <span class="token operator">=</span> <span class="token function">createInputMessage</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token class-name">ServletServerHttpResponse</span> outputMessage <span class="token operator">=</span> <span class="token function">createOutputMessage</span><span class="token punctuation">(</span>webRequest<span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token comment">// Try even with null return value. ResponseBodyAdvice could get involved.</span>
        <span class="token comment">// \u4F7F\u7528\u6D88\u606F\u8F6C\u6362\u5668\u8FDB\u884C\u5199\u51FA\u64CD\u4F5C</span>
		<span class="token function">writeWithMessageConverters</span><span class="token punctuation">(</span>returnValue<span class="token punctuation">,</span> returnType<span class="token punctuation">,</span> inputMessage<span class="token punctuation">,</span> outputMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2\u3001\u8FD4\u56DE\u503C\u89E3\u6790\u5668\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u8FD4\u56DE\u503C\u89E3\u6790\u5668\u539F\u7406" aria-hidden="true">#</a> 2\u3001\u8FD4\u56DE\u503C\u89E3\u6790\u5668\u539F\u7406</h6><p><img src="http://qnimg.gisfsde.com/work/1605151728659-68c8ce8a-1b2b-4ab0-b86d-c3a875184672.png" alt="img" loading="lazy"></p><ul><li><p>1\u3001\u8FD4\u56DE\u503C\u5904\u7406\u5668\u5224\u65AD\u662F\u5426\u652F\u6301\u8FD9\u79CD\u7C7B\u578B\u8FD4\u56DE\u503C supportsReturnType</p></li><li><p>2\u3001\u8FD4\u56DE\u503C\u5904\u7406\u5668\u8C03\u7528 handleReturnValue \u8FDB\u884C\u5904\u7406</p></li><li><p>3\u3001RequestResponseBodyMethodProcessor \u53EF\u4EE5\u5904\u7406\u8FD4\u56DE\u503C\u6807\u4E86@ResponseBody \u6CE8\u89E3\u7684\u3002</p></li><li><ul><li>\\1. \u5229\u7528 MessageConverters \u8FDB\u884C\u5904\u7406 \u5C06\u6570\u636E\u5199\u4E3Ajson</li></ul></li><li><ul><li><ul><li>1\u3001\u5185\u5BB9\u534F\u5546\uFF08\u6D4F\u89C8\u5668\u9ED8\u8BA4\u4F1A\u4EE5\u8BF7\u6C42\u5934\u7684\u65B9\u5F0F\u544A\u8BC9\u670D\u52A1\u5668\u4ED6\u80FD\u63A5\u53D7\u4EC0\u4E48\u6837\u7684\u5185\u5BB9\u7C7B\u578B\uFF09</li><li>2\u3001\u670D\u52A1\u5668\u6700\u7EC8\u6839\u636E\u81EA\u5DF1\u81EA\u8EAB\u7684\u80FD\u529B\uFF0C\u51B3\u5B9A\u670D\u52A1\u5668\u80FD\u751F\u4EA7\u51FA\u4EC0\u4E48\u6837\u5185\u5BB9\u7C7B\u578B\u7684\u6570\u636E\uFF0C</li><li>3\u3001SpringMVC\u4F1A\u6328\u4E2A\u904D\u5386\u6240\u6709\u5BB9\u5668\u5E95\u5C42\u7684 HttpMessageConverter \uFF0C\u770B\u8C01\u80FD\u5904\u7406\uFF1F</li></ul></li></ul></li><li><ul><li><ul><li><ul><li>1\u3001\u5F97\u5230MappingJackson2HttpMessageConverter\u53EF\u4EE5\u5C06\u5BF9\u8C61\u5199\u4E3Ajson</li><li>2\u3001\u5229\u7528MappingJackson2HttpMessageConverter\u5C06\u5BF9\u8C61\u8F6C\u4E3Ajson\u518D\u5199\u51FA\u53BB\u3002</li></ul></li></ul></li></ul></li></ul><p><img src="http://qnimg.gisfsde.com/work/1605163005521-a20d1d8e-0494-43d0-8135-308e7a22e896.png" alt="img" loading="lazy"></p><h5 id="_1-2\u3001springmvc\u5230\u5E95\u652F\u6301\u54EA\u4E9B\u8FD4\u56DE\u503C" tabindex="-1"><a class="header-anchor" href="#_1-2\u3001springmvc\u5230\u5E95\u652F\u6301\u54EA\u4E9B\u8FD4\u56DE\u503C" aria-hidden="true">#</a> 1.2\u3001SpringMVC\u5230\u5E95\u652F\u6301\u54EA\u4E9B\u8FD4\u56DE\u503C</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">ModelAndView</span>
<span class="token class-name">Model</span>
<span class="token class-name">View</span>
<span class="token class-name">ResponseEntity</span> 
<span class="token class-name">ResponseBodyEmitter</span>
<span class="token class-name">StreamingResponseBody</span>
<span class="token class-name">HttpEntity</span>
<span class="token class-name">HttpHeaders</span>
<span class="token class-name">Callable</span>
<span class="token class-name">DeferredResult</span>
<span class="token class-name">ListenableFuture</span>
<span class="token class-name">CompletionStage</span>
<span class="token class-name">WebAsyncTask</span>
\u6709 <span class="token annotation punctuation">@ModelAttribute</span> \u4E14\u4E3A\u5BF9\u8C61\u7C7B\u578B\u7684
<span class="token annotation punctuation">@ResponseBody</span> \u6CE8\u89E3 <span class="token operator">--</span><span class="token operator">-&gt;</span> <span class="token class-name">RequestResponseBodyMethodProcessor</span>\uFF1B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_1-3\u3001httpmessageconverter\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_1-3\u3001httpmessageconverter\u539F\u7406" aria-hidden="true">#</a> 1.3\u3001HTTPMessageConverter\u539F\u7406</h5><h6 id="_1\u3001messageconverter\u89C4\u8303" tabindex="-1"><a class="header-anchor" href="#_1\u3001messageconverter\u89C4\u8303" aria-hidden="true">#</a> 1\u3001MessageConverter\u89C4\u8303</h6><p><img src="http://qnimg.gisfsde.com/work/1605163447900-e2748217-0f31-4abb-9cce-546b4d790d0b.png" alt="img" loading="lazy"></p><p>HttpMessageConverter: \u770B\u662F\u5426\u652F\u6301\u5C06 \u6B64 Class\u7C7B\u578B\u7684\u5BF9\u8C61\uFF0C\u8F6C\u4E3AMediaType\u7C7B\u578B\u7684\u6570\u636E\u3002</p><p>\u4F8B\u5B50\uFF1APerson\u5BF9\u8C61\u8F6C\u4E3AJSON\u3002\u6216\u8005 JSON\u8F6C\u4E3APerson</p><h6 id="_2\u3001\u9ED8\u8BA4\u7684messageconverter" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u9ED8\u8BA4\u7684messageconverter" aria-hidden="true">#</a> 2\u3001\u9ED8\u8BA4\u7684MessageConverter</h6><p><img src="http://qnimg.gisfsde.com/work/1605163584708-e19770d6-6b35-4caa-bf21-266b73cb1ef1.png" alt="img" loading="lazy"></p><p>0 - \u53EA\u652F\u6301Byte\u7C7B\u578B\u7684</p><p>1 - String</p><p>2 - String</p><p>3 - Resource</p><p>4 - ResourceRegion</p><p>5 - DOMSource.*<em>class *</em> SAXSource.<strong>class</strong>) \\ StAXSource.**class **StreamSource.**class **Source.<strong>class</strong></p><p><strong>6 -</strong> MultiValueMap</p><p>7 - <strong>true</strong></p><p><strong>8 - true</strong></p><p><strong>9 - \u652F\u6301\u6CE8\u89E3\u65B9\u5F0Fxml\u5904\u7406\u7684\u3002</strong></p><p>\u6700\u7EC8 MappingJackson2HttpMessageConverter \u628A\u5BF9\u8C61\u8F6C\u4E3AJSON\uFF08\u5229\u7528\u5E95\u5C42\u7684jackson\u7684objectMapper\u8F6C\u6362\u7684\uFF09</p><p><img src="http://qnimg.gisfsde.com/work/1605164243168-1a31e9af-54a4-463e-b65a-c28ca7a8a2fa.png" alt="img" loading="lazy"></p><h4 id="_2\u3001\u5185\u5BB9\u534F\u5546" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5185\u5BB9\u534F\u5546" aria-hidden="true">#</a> 2\u3001\u5185\u5BB9\u534F\u5546</h4><p>\u6839\u636E\u5BA2\u6237\u7AEF\u63A5\u6536\u80FD\u529B\u4E0D\u540C\uFF0C\u8FD4\u56DE\u4E0D\u540C\u5A92\u4F53\u7C7B\u578B\u7684\u6570\u636E\u3002</p><h5 id="_1\u3001\u5F15\u5165xml\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5F15\u5165xml\u4F9D\u8D56" aria-hidden="true">#</a> 1\u3001\u5F15\u5165xml\u4F9D\u8D56</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code> \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.fasterxml.jackson.dataformat\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jackson-dataformat-xml\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2\u3001postman\u5206\u522B\u6D4B\u8BD5\u8FD4\u56DEjson\u548Cxml" tabindex="-1"><a class="header-anchor" href="#_2\u3001postman\u5206\u522B\u6D4B\u8BD5\u8FD4\u56DEjson\u548Cxml" aria-hidden="true">#</a> 2\u3001postman\u5206\u522B\u6D4B\u8BD5\u8FD4\u56DEjson\u548Cxml</h5><p>\u53EA\u9700\u8981\u6539\u53D8\u8BF7\u6C42\u5934\u4E2DAccept\u5B57\u6BB5\u3002Http\u534F\u8BAE\u4E2D\u89C4\u5B9A\u7684\uFF0C\u544A\u8BC9\u670D\u52A1\u5668\u672C\u5BA2\u6237\u7AEF\u53EF\u4EE5\u63A5\u6536\u7684\u6570\u636E\u7C7B\u578B\u3002</p><p><img src="http://qnimg.gisfsde.com/work/1605173127653-8a06cd0f-b8e1-4e22-9728-069b942eba3f.png" alt="img" loading="lazy"></p><h5 id="_3\u3001\u5F00\u542F\u6D4F\u89C8\u5668\u53C2\u6570\u65B9\u5F0F\u5185\u5BB9\u534F\u5546\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5F00\u542F\u6D4F\u89C8\u5668\u53C2\u6570\u65B9\u5F0F\u5185\u5BB9\u534F\u5546\u529F\u80FD" aria-hidden="true">#</a> 3\u3001\u5F00\u542F\u6D4F\u89C8\u5668\u53C2\u6570\u65B9\u5F0F\u5185\u5BB9\u534F\u5546\u529F\u80FD</h5><p>\u4E3A\u4E86\u65B9\u4FBF\u5185\u5BB9\u534F\u5546\uFF0C\u5F00\u542F\u57FA\u4E8E\u8BF7\u6C42\u53C2\u6570\u7684\u5185\u5BB9\u534F\u5546\u529F\u80FD\u3002</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
    <span class="token key atrule">contentnegotiation</span><span class="token punctuation">:</span>
      <span class="token key atrule">favor-parameter</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token comment">#\u5F00\u542F\u8BF7\u6C42\u53C2\u6570\u5185\u5BB9\u534F\u5546\u6A21\u5F0F</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,155),Vn=s("\u53D1\u8BF7\u6C42\uFF1A "),Un={href:"http://localhost:8080/test/person?format=json",target:"_blank",rel:"noopener noreferrer"},Wn=s("http://localhost:8080/test/person?format=json"),zn=s("\u200B "),Jn={href:"http://localhost:8080/test/person?format=json",target:"_blank",rel:"noopener noreferrer"},Yn=s("http://localhost:8080/test/person?format="),Gn=s("xml"),Xn=e(`<p><img src="http://qnimg.gisfsde.com/work/1605230907471-b0ed34bc-6782-40e7-84b7-615726312f01.png" alt="img" loading="lazy"></p><p>\u786E\u5B9A\u5BA2\u6237\u7AEF\u63A5\u6536\u4EC0\u4E48\u6837\u7684\u5185\u5BB9\u7C7B\u578B\uFF1B</p><p>1\u3001Parameter\u7B56\u7565\u4F18\u5148\u786E\u5B9A\u662F\u8981\u8FD4\u56DEjson\u6570\u636E\uFF08\u83B7\u53D6\u8BF7\u6C42\u5934\u4E2D\u7684format\u7684\u503C\uFF09</p><p><img src="http://qnimg.gisfsde.com/work/1605231074299-25f5b062-2de1-4a09-91bf-11e018d6ec0e.png" alt="img" loading="lazy"></p><p>2\u3001\u6700\u7EC8\u8FDB\u884C\u5185\u5BB9\u534F\u5546\u8FD4\u56DE\u7ED9\u5BA2\u6237\u7AEFjson\u5373\u53EF\u3002</p><h5 id="_4\u3001\u5185\u5BB9\u534F\u5546\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u5185\u5BB9\u534F\u5546\u539F\u7406" aria-hidden="true">#</a> 4\u3001\u5185\u5BB9\u534F\u5546\u539F\u7406</h5><ul><li><p>1\u3001\u5224\u65AD\u5F53\u524D\u54CD\u5E94\u5934\u4E2D\u662F\u5426\u5DF2\u7ECF\u6709\u786E\u5B9A\u7684\u5A92\u4F53\u7C7B\u578B\u3002MediaType</p></li><li><p><strong>2\u3001\u83B7\u53D6\u5BA2\u6237\u7AEF\uFF08PostMan\u3001\u6D4F\u89C8\u5668\uFF09\u652F\u6301\u63A5\u6536\u7684\u5185\u5BB9\u7C7B\u578B\u3002\uFF08\u83B7\u53D6\u5BA2\u6237\u7AEFAccept\u8BF7\u6C42\u5934\u5B57\u6BB5\uFF09\u3010application/xml\u3011</strong></p></li><li><ul><li><strong>contentNegotiationManager \u5185\u5BB9\u534F\u5546\u7BA1\u7406\u5668 \u9ED8\u8BA4\u4F7F\u7528\u57FA\u4E8E\u8BF7\u6C42\u5934\u7684\u7B56\u7565</strong></li><li><img src="http://qnimg.gisfsde.com/work/1605230462280-ef98de47-6717-4e27-b4ec-3eb0690b55d0.png" alt="img" loading="lazy"></li><li><strong>HeaderContentNegotiationStrategy \u786E\u5B9A\u5BA2\u6237\u7AEF\u53EF\u4EE5\u63A5\u6536\u7684\u5185\u5BB9\u7C7B\u578B</strong></li><li><img src="http://qnimg.gisfsde.com/work/1605230546376-65dcf657-7653-4a58-837a-f5657778201a.png" alt="img" loading="lazy"></li></ul></li><li><p>3\u3001\u904D\u5386\u5FAA\u73AF\u6240\u6709\u5F53\u524D\u7CFB\u7EDF\u7684 <strong>MessageConverter</strong>\uFF0C\u770B\u8C01\u652F\u6301\u64CD\u4F5C\u8FD9\u4E2A\u5BF9\u8C61\uFF08Person\uFF09</p></li><li><p>4\u3001\u627E\u5230\u652F\u6301\u64CD\u4F5CPerson\u7684converter\uFF0C\u628Aconverter\u652F\u6301\u7684\u5A92\u4F53\u7C7B\u578B\u7EDF\u8BA1\u51FA\u6765\u3002</p></li><li><p>5\u3001\u5BA2\u6237\u7AEF\u9700\u8981\u3010application/xml\u3011\u3002\u670D\u52A1\u7AEF\u80FD\u529B\u301010\u79CD\u3001json\u3001xml\u3011</p></li><li><p><img src="http://qnimg.gisfsde.com/work/1605173876646-f63575e2-50c8-44d5-9603-c2d11a78adae.png" alt="img" loading="lazy"></p></li><li><p>6\u3001\u8FDB\u884C\u5185\u5BB9\u534F\u5546\u7684\u6700\u4F73\u5339\u914D\u5A92\u4F53\u7C7B\u578B</p></li><li><p>7\u3001\u7528 \u652F\u6301 \u5C06\u5BF9\u8C61\u8F6C\u4E3A \u6700\u4F73\u5339\u914D\u5A92\u4F53\u7C7B\u578B \u7684converter\u3002\u8C03\u7528\u5B83\u8FDB\u884C\u8F6C\u5316 \u3002</p></li></ul><p><img src="http://qnimg.gisfsde.com/work/1605173657818-73331882-6086-490c-973b-af46ccf07b32.png" alt="img" loading="lazy"></p><p>\u5BFC\u5165\u4E86jackson\u5904\u7406xml\u7684\u5305\uFF0Cxml\u7684converter\u5C31\u4F1A\u81EA\u52A8\u8FDB\u6765</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">WebMvcConfigurationSupport</span>
jackson2XmlPresent <span class="token operator">=</span> <span class="token class-name">ClassUtils</span><span class="token punctuation">.</span><span class="token function">isPresent</span><span class="token punctuation">(</span><span class="token string">&quot;com.fasterxml.jackson.dataformat.xml.XmlMapper&quot;</span><span class="token punctuation">,</span> classLoader<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>jackson2XmlPresent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token class-name">Jackson2ObjectMapperBuilder</span> builder <span class="token operator">=</span> <span class="token class-name">Jackson2ObjectMapperBuilder</span><span class="token punctuation">.</span><span class="token function">xml</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				builder<span class="token punctuation">.</span><span class="token function">applicationContext</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			messageConverters<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MappingJackson2XmlHttpMessageConverter</span><span class="token punctuation">(</span>builder<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5\u3001\u81EA\u5B9A\u4E49-messageconverter" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u81EA\u5B9A\u4E49-messageconverter" aria-hidden="true">#</a> 5\u3001\u81EA\u5B9A\u4E49 MessageConverter</h5><p><strong>\u5B9E\u73B0\u591A\u534F\u8BAE\u6570\u636E\u517C\u5BB9\u3002json\u3001xml\u3001x-guigu</strong></p><p><strong>0\u3001</strong>@ResponseBody \u54CD\u5E94\u6570\u636E\u51FA\u53BB \u8C03\u7528 <strong>RequestResponseBodyMethodProcessor</strong> \u5904\u7406</p><p>1\u3001Processor \u5904\u7406\u65B9\u6CD5\u8FD4\u56DE\u503C\u3002\u901A\u8FC7 <strong>MessageConverter</strong> \u5904\u7406</p><p>2\u3001\u6240\u6709 <strong>MessageConverter</strong> \u5408\u8D77\u6765\u53EF\u4EE5\u652F\u6301\u5404\u79CD\u5A92\u4F53\u7C7B\u578B\u6570\u636E\u7684\u64CD\u4F5C\uFF08\u8BFB\u3001\u5199\uFF09</p><p>3\u3001\u5185\u5BB9\u534F\u5546\u627E\u5230\u6700\u7EC8\u7684 <strong>messageConverter</strong>\uFF1B</p><p>SpringMVC\u7684\u4EC0\u4E48\u529F\u80FD\u3002\u4E00\u4E2A\u5165\u53E3\u7ED9\u5BB9\u5668\u4E2D\u6DFB\u52A0\u4E00\u4E2A WebMvcConfigurer</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code> <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token function">webMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WebMvcConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">extendMessageConverters</span><span class="token punctuation">(</span><span class="token class-name">List</span>\\<span class="token operator">&lt;</span><span class="token class-name">HttpMessageConverter</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token operator">?</span><span class="token punctuation">&gt;</span></span><span class="token operator">&gt;</span> converters<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1605260623995-8b1f7cec-9713-4f94-9cf1-8dbc496bd245.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1605261062877-0a27cc41-51cb-4018-a9af-4e0338a247cd.png" alt="img" loading="lazy"></p><p><strong>\u6709\u53EF\u80FD\u6211\u4EEC\u6DFB\u52A0\u7684\u81EA\u5B9A\u4E49\u7684\u529F\u80FD\u4F1A\u8986\u76D6\u9ED8\u8BA4\u5F88\u591A\u529F\u80FD\uFF0C\u5BFC\u81F4\u4E00\u4E9B\u9ED8\u8BA4\u7684\u529F\u80FD\u5931\u6548\u3002</strong></p><p><strong>\u5927\u5BB6\u8003\u8651\uFF0C\u4E0A\u8FF0\u529F\u80FD\u9664\u4E86\u6211\u4EEC\u5B8C\u5168\u81EA\u5B9A\u4E49\u5916\uFF1FSpringBoot\u6709\u6CA1\u6709\u4E3A\u6211\u4EEC\u63D0\u4F9B\u57FA\u4E8E\u914D\u7F6E\u6587\u4EF6\u7684\u5FEB\u901F\u4FEE\u6539\u5A92\u4F53\u7C7B\u578B\u529F\u80FD\uFF1F\u600E\u4E48\u914D\u7F6E\u5462\uFF1F\u3010\u63D0\u793A\uFF1A\u53C2\u7167SpringBoot\u5B98\u65B9\u6587\u6863web\u5F00\u53D1\u5185\u5BB9\u534F\u5546\u7AE0\u8282\u3011</strong></p><h3 id="_5\u3001\u89C6\u56FE\u89E3\u6790\u4E0E\u6A21\u677F\u5F15\u64CE" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u89C6\u56FE\u89E3\u6790\u4E0E\u6A21\u677F\u5F15\u64CE" aria-hidden="true">#</a> 5\u3001\u89C6\u56FE\u89E3\u6790\u4E0E\u6A21\u677F\u5F15\u64CE</h3><p>\u89C6\u56FE\u89E3\u6790\uFF1A<strong>SpringBoot\u9ED8\u8BA4\u4E0D\u652F\u6301 JSP\uFF0C\u9700\u8981\u5F15\u5165\u7B2C\u4E09\u65B9\u6A21\u677F\u5F15\u64CE\u6280\u672F\u5B9E\u73B0\u9875\u9762\u6E32\u67D3\u3002</strong></p><h4 id="_1\u3001\u89C6\u56FE\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u89C6\u56FE\u89E3\u6790" aria-hidden="true">#</a> 1\u3001\u89C6\u56FE\u89E3\u6790</h4><p><img src="http://qnimg.gisfsde.com/work/1606043749039-cefbf687-4feb-441d-bad8-c6d933248d3c.png" alt="img" loading="lazy"></p><h5 id="_1\u3001\u89C6\u56FE\u89E3\u6790\u539F\u7406\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u89C6\u56FE\u89E3\u6790\u539F\u7406\u6D41\u7A0B" aria-hidden="true">#</a> 1\u3001\u89C6\u56FE\u89E3\u6790\u539F\u7406\u6D41\u7A0B</h5><p>1\u3001\u76EE\u6807\u65B9\u6CD5\u5904\u7406\u7684\u8FC7\u7A0B\u4E2D\uFF0C\u6240\u6709\u6570\u636E\u90FD\u4F1A\u88AB\u653E\u5728 <strong>ModelAndViewContainer \u91CC\u9762\u3002\u5305\u62EC\u6570\u636E\u548C\u89C6\u56FE\u5730\u5740</strong></p><p><strong>2\u3001\u65B9\u6CD5\u7684\u53C2\u6570\u662F\u4E00\u4E2A\u81EA\u5B9A\u4E49\u7C7B\u578B\u5BF9\u8C61\uFF08\u4ECE\u8BF7\u6C42\u53C2\u6570\u4E2D\u786E\u5B9A\u7684\uFF09\uFF0C\u628A\u4ED6\u91CD\u65B0\u653E\u5728</strong> <strong>ModelAndViewContainer</strong></p><p><strong>3\u3001\u4EFB\u4F55\u76EE\u6807\u65B9\u6CD5\u6267\u884C\u5B8C\u6210\u4EE5\u540E\u90FD\u4F1A\u8FD4\u56DE ModelAndView\uFF08<strong><strong>\u6570\u636E\u548C\u89C6\u56FE\u5730\u5740</strong></strong>\uFF09\u3002</strong></p><p>**4\u3001**<strong>processDispatchResult \u5904\u7406\u6D3E\u53D1\u7ED3\u679C\uFF08\u9875\u9762\u6539\u5982\u4F55\u54CD\u5E94\uFF09</strong></p><ul><li><p>1\u3001<strong>render</strong>(<strong>mv</strong>, request, response); \u8FDB\u884C\u9875\u9762\u6E32\u67D3\u903B\u8F91</p></li><li><ul><li>1\u3001\u6839\u636E\u65B9\u6CD5\u7684String\u8FD4\u56DE\u503C\u5F97\u5230 <strong>View</strong> \u5BF9\u8C61\u3010\u5B9A\u4E49\u4E86\u9875\u9762\u7684\u6E32\u67D3\u903B\u8F91\u3011</li></ul></li><li><ul><li><ul><li>1\u3001\u6240\u6709\u7684\u89C6\u56FE\u89E3\u6790\u5668\u5C1D\u8BD5\u662F\u5426\u80FD\u6839\u636E\u5F53\u524D\u8FD4\u56DE\u503C\u5F97\u5230<strong>View</strong>\u5BF9\u8C61</li><li>2\u3001\u5F97\u5230\u4E86 <strong>redirect:/main.html</strong> --&gt; Thymeleaf new <strong>RedirectView</strong>()</li><li>3\u3001ContentNegotiationViewResolver \u91CC\u9762\u5305\u542B\u4E86\u4E0B\u9762\u6240\u6709\u7684\u89C6\u56FE\u89E3\u6790\u5668\uFF0C\u5185\u90E8\u8FD8\u662F\u5229\u7528\u4E0B\u9762\u6240\u6709\u89C6\u56FE\u89E3\u6790\u5668\u5F97\u5230\u89C6\u56FE\u5BF9\u8C61\u3002</li><li>4\u3001view.render(mv.getModelInternal(), request, response); \u89C6\u56FE\u5BF9\u8C61\u8C03\u7528\u81EA\u5B9A\u4E49\u7684render\u8FDB\u884C\u9875\u9762\u6E32\u67D3\u5DE5\u4F5C</li></ul></li></ul></li><li><ul><li><ul><li><ul><li><strong>RedirectView \u5982\u4F55\u6E32\u67D3\u3010\u91CD\u5B9A\u5411\u5230\u4E00\u4E2A\u9875\u9762\u3011</strong></li><li><strong>1\u3001\u83B7\u53D6\u76EE\u6807url\u5730\u5740</strong></li><li>**2\u3001**<strong>response.sendRedirect(encodedURL);</strong></li></ul></li></ul></li></ul></li></ul><p><strong>\u89C6\u56FE\u89E3\u6790\uFF1A</strong></p><ul><li><ul><li><strong>\u8FD4\u56DE\u503C\u4EE5 forward: \u5F00\u59CB\uFF1A new InternalResourceView(forwardUrl); --&gt; \u8F6C\u53D1****request.getRequestDispatcher(path).forward(request, response);</strong></li><li><strong>\u8FD4\u56DE\u503C\u4EE5</strong> <strong>redirect: \u5F00\u59CB\uFF1A</strong> <strong>new RedirectView() --\u300B render\u5C31\u662F\u91CD\u5B9A\u5411</strong></li><li><strong>\u8FD4\u56DE\u503C\u662F\u666E\u901A\u5B57\u7B26\u4E32\uFF1A new ThymeleafView\uFF08\uFF09---&gt;</strong></li></ul></li></ul><p>\u81EA\u5B9A\u4E49\u89C6\u56FE\u89E3\u6790\u5668+\u81EA\u5B9A\u4E49\u89C6\u56FE\uFF1B <strong>\u5927\u5382\u5B66\u9662\u3002</strong></p><p><img src="http://qnimg.gisfsde.com/work/1605680247945-088b0f17-185c-490b-8889-103e8b4d8c07.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1605679959020-54b96fe7-f2fc-4b4d-a392-426e1d5413de.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1605679471537-7db702dc-b165-4dc6-b64a-26459ee5fd6c.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1605679913592-151a616a-c754-4da3-a2c1-91dc0230a48d.png" alt="img" loading="lazy"></p><h4 id="_2\u3001\u6A21\u677F\u5F15\u64CE-thymeleaf" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6A21\u677F\u5F15\u64CE-thymeleaf" aria-hidden="true">#</a> 2\u3001\u6A21\u677F\u5F15\u64CE-Thymeleaf</h4><h5 id="_1\u3001thymeleaf\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_1\u3001thymeleaf\u7B80\u4ECB" aria-hidden="true">#</a> 1\u3001thymeleaf\u7B80\u4ECB</h5><p>Thymeleaf is a modern server-side Java template engine for both web and standalone environments, capable of processing HTML, XML, JavaScript, CSS and even plain text.</p><p><strong>\u73B0\u4EE3\u5316\u3001\u670D\u52A1\u7AEFJava\u6A21\u677F\u5F15\u64CE</strong></p><h5 id="_2\u3001\u57FA\u672C\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u57FA\u672C\u8BED\u6CD5" aria-hidden="true">#</a> 2\u3001\u57FA\u672C\u8BED\u6CD5</h5><h6 id="_1\u3001\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> 1\u3001\u8868\u8FBE\u5F0F</h6>`,45),$n=n("table",null,[n("thead",null,[n("tr",null,[n("th",null,"\u8868\u8FBE\u5F0F\u540D\u5B57"),n("th",null,"\u8BED\u6CD5"),n("th",null,"\u7528\u9014")])]),n("tbody",null,[n("tr",null,[n("td",null,"\u53D8\u91CF\u53D6\u503C"),n("td",{"css-module":"."},"$"),n("td",null,"\u83B7\u53D6\u8BF7\u6C42\u57DF\u3001session\u57DF\u3001\u5BF9\u8C61\u7B49\u503C")]),n("tr",null,[n("td",null,"\u9009\u62E9\u53D8\u91CF"),n("td",{"css-module":"."},"*"),n("td",null,"\u83B7\u53D6\u4E0A\u4E0B\u6587\u5BF9\u8C61\u503C")]),n("tr",null,[n("td",null,"\u6D88\u606F"),n("td",{"css-module":"."},"#"),n("td",null,"\u83B7\u53D6\u56FD\u9645\u5316\u7B49\u503C")]),n("tr",null,[n("td",null,"\u94FE\u63A5"),n("td",{"css-module":"."},"@"),n("td",null,"\u751F\u6210\u94FE\u63A5")]),n("tr",null,[n("td",null,"\u7247\u6BB5\u8868\u8FBE\u5F0F"),n("td",{"css-module":"."},"~"),n("td",null,"jsp:include \u4F5C\u7528\uFF0C\u5F15\u5165\u516C\u5171\u9875\u9762\u7247\u6BB5")])])],-1),Qn=e(`<h6 id="_2\u3001\u5B57\u9762\u91CF" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5B57\u9762\u91CF" aria-hidden="true">#</a> 2\u3001\u5B57\u9762\u91CF</h6><p>\u6587\u672C\u503C: <strong>&#39;one text&#39;</strong> <strong>,</strong> <strong>&#39;Another one!&#39;</strong> **,\u2026**\u6570\u5B57: <strong>0</strong> <strong>,</strong> <strong>34</strong> <strong>,</strong> <strong>3.0</strong> <strong>,</strong> <strong>12.3</strong> **,\u2026**\u5E03\u5C14\u503C: <strong>true</strong> <strong>,</strong> <strong>false</strong></p><p>\u7A7A\u503C: <strong>null</strong></p><p>\u53D8\u91CF\uFF1A one\uFF0Ctwo\uFF0C.... \u53D8\u91CF\u4E0D\u80FD\u6709\u7A7A\u683C</p><h6 id="_3\u3001\u6587\u672C\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u6587\u672C\u64CD\u4F5C" aria-hidden="true">#</a> 3\u3001\u6587\u672C\u64CD\u4F5C</h6><p>\u5B57\u7B26\u4E32\u62FC\u63A5: <strong>+</strong></p><p>\u53D8\u91CF\u66FF\u6362: <strong>|The name is \${name}|</strong></p><h6 id="_4\u3001\u6570\u5B66\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6570\u5B66\u8FD0\u7B97" aria-hidden="true">#</a> 4\u3001\u6570\u5B66\u8FD0\u7B97</h6><p>\u8FD0\u7B97\u7B26: + , - , * , / , %</p><h6 id="_5\u3001\u5E03\u5C14\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u5E03\u5C14\u8FD0\u7B97" aria-hidden="true">#</a> 5\u3001\u5E03\u5C14\u8FD0\u7B97</h6><p>\u8FD0\u7B97\u7B26: <strong>and</strong> <strong>,</strong> <strong>or</strong></p><p>\u4E00\u5143\u8FD0\u7B97: <strong>!</strong> <strong>,</strong> <strong>not</strong></p><h6 id="_6\u3001\u6BD4\u8F83\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u6BD4\u8F83\u8FD0\u7B97" aria-hidden="true">#</a> 6\u3001\u6BD4\u8F83\u8FD0\u7B97</h6><p>\u6BD4\u8F83: <strong>&gt;</strong> <strong>,</strong> <strong>&lt;</strong> <strong>,</strong> <strong>&gt;=</strong> <strong>,</strong> <strong>&lt;=</strong> <strong>(</strong> <strong>gt</strong> <strong>,</strong> <strong>lt</strong> <strong>,</strong> <strong>ge</strong> <strong>,</strong> <strong>le</strong> **)**\u7B49\u5F0F: <strong>==</strong> <strong>,</strong> <strong>!=</strong> <strong>(</strong> <strong>eq</strong> <strong>,</strong> <strong>ne</strong> <strong>)</strong></p><h6 id="_7\u3001\u6761\u4EF6\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u6761\u4EF6\u8FD0\u7B97" aria-hidden="true">#</a> 7\u3001\u6761\u4EF6\u8FD0\u7B97</h6><p>If-then: <strong>(if) ? (then)</strong></p><p>If-then-else: <strong>(if) ? (then) : (else)</strong></p><p>Default: (value) <strong>?: (defaultvalue)</strong></p><h6 id="_8\u3001\u7279\u6B8A\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#_8\u3001\u7279\u6B8A\u64CD\u4F5C" aria-hidden="true">#</a> 8\u3001\u7279\u6B8A\u64CD\u4F5C</h6><p>\u65E0\u64CD\u4F5C\uFF1A _</p><h5 id="_3\u3001\u8BBE\u7F6E\u5C5E\u6027\u503C-th-attr" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u8BBE\u7F6E\u5C5E\u6027\u503C-th-attr" aria-hidden="true">#</a> 3\u3001\u8BBE\u7F6E\u5C5E\u6027\u503C-th:attr</h5><p>\u8BBE\u7F6E\u5355\u4E2A\u503C</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribe.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action=@{/subscribe}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>fieldset</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Subscribe!<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>value=#{subscribe.submit}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>fieldset</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u591A\u4E2A\u503C</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../images/gtvglogo.png<span class="token punctuation">&quot;</span></span>  <span class="token attr-name"><span class="token namespace">th:</span>attr</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>src=@{/images/gtvglogo.png},title=#{logo},alt=#{logo}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4E24\u4E2A\u7684\u4EE3\u66FF\u5199\u6CD5 th:xxxx</p><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Subscribe!<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{subscribe.submit}<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>subscribe.html<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/subscribe}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6240\u6709h5\u517C\u5BB9\u7684\u6807\u7B7E\u5199\u6CD5</p>`,28),Kn={href:"https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes",target:"_blank",rel:"noopener noreferrer"},Zn=s("https://www.thymeleaf.org/doc/tutorials/3.0/usingthymeleaf.html#setting-value-to-specific-attributes"),ns=e(`<h5 id="_4\u3001\u8FED\u4EE3" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u8FED\u4EE3" aria-hidden="true">#</a> 4\u3001\u8FED\u4EE3</h5><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod : \${prods}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${prod.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Onions\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${prod.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.41\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${prod.inStock}? #{true} : #{false}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yes\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prod,iterStat : \${prods}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${iterStat.odd}? <span class="token punctuation">&#39;</span>odd<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${prod.name}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Onions\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${prod.price}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>2.41\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${prod.inStock}? #{true} : #{false}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>yes\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_5\u3001\u6761\u4EF6\u8FD0\u7B97" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u6761\u4EF6\u8FD0\u7B97" aria-hidden="true">#</a> 5\u3001\u6761\u4EF6\u8FD0\u7B97</h5><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comments.html<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@{/product/comments(prodId=\${prod.id})}<span class="token punctuation">&quot;</span></span>
<span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${not #lists.isEmpty(prod.comments)}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>view\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>switch</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${user.role}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&#39;</span>admin<span class="token punctuation">&#39;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is an administrator\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>#{roles.manager}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is a manager\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>*<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>User is some other thing\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6\u3001\u5C5E\u6027\u4F18\u5148\u7EA7" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u5C5E\u6027\u4F18\u5148\u7EA7" aria-hidden="true">#</a> 6\u3001\u5C5E\u6027\u4F18\u5148\u7EA7</h5><p><img src="http://qnimg.gisfsde.com/work/1605498132699-4fae6085-a207-456c-89fa-e571ff1663da.png" alt="img" loading="lazy"></p><h4 id="_3\u3001thymeleaf\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_3\u3001thymeleaf\u4F7F\u7528" aria-hidden="true">#</a> 3\u3001thymeleaf\u4F7F\u7528</h4><h6 id="_1\u3001\u5F15\u5165starter" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5F15\u5165starter" aria-hidden="true">#</a> 1\u3001\u5F15\u5165Starter</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>        \\<span class="token generics"><span class="token punctuation">&lt;</span>dependency<span class="token punctuation">&gt;</span></span>
            \\<span class="token generics"><span class="token punctuation">&lt;</span>groupId<span class="token punctuation">&gt;</span></span>org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot\\<span class="token operator">&lt;</span><span class="token operator">/</span>groupId<span class="token operator">&gt;</span>
            \\<span class="token generics"><span class="token punctuation">&lt;</span>artifactId<span class="token punctuation">&gt;</span></span>spring<span class="token operator">-</span>boot<span class="token operator">-</span>starter<span class="token operator">-</span>thymeleaf\\<span class="token operator">&lt;</span><span class="token operator">/</span>artifactId<span class="token operator">&gt;</span>
        \\<span class="token operator">&lt;</span><span class="token operator">/</span>dependency<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2\u3001\u81EA\u52A8\u914D\u7F6E\u597D\u4E86thymeleaf" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u81EA\u52A8\u914D\u7F6E\u597D\u4E86thymeleaf" aria-hidden="true">#</a> 2\u3001\u81EA\u52A8\u914D\u7F6E\u597D\u4E86thymeleaf</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">ThymeleafProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">TemplateMode</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">SpringTemplateEngine</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">WebMvcAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">WebFluxAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ThymeleafAutoConfiguration</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u81EA\u52A8\u914D\u597D\u7684\u7B56\u7565</p><ul><li>1\u3001\u6240\u6709thymeleaf\u7684\u914D\u7F6E\u503C\u90FD\u5728 ThymeleafProperties</li><li>2\u3001\u914D\u7F6E\u597D\u4E86 <strong>SpringTemplateEngine</strong></li><li><strong>3\u3001\u914D\u597D\u4E86</strong> <strong>ThymeleafViewResolver</strong></li><li>4\u3001\u6211\u4EEC\u53EA\u9700\u8981\u76F4\u63A5\u5F00\u53D1\u9875\u9762</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_PREFIX <span class="token operator">=</span> <span class="token string">&quot;classpath:/templates/&quot;</span><span class="token punctuation">;</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> DEFAULT_SUFFIX <span class="token operator">=</span> <span class="token string">&quot;.html&quot;</span><span class="token punctuation">;</span>  <span class="token comment">//xxx.html</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_3\u3001\u9875\u9762\u5F00\u53D1" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u9875\u9762\u5F00\u53D1" aria-hidden="true">#</a> 3\u3001\u9875\u9762\u5F00\u53D1</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>\\<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
\\<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span> xmlns<span class="token operator">:</span>th<span class="token operator">=</span><span class="token string">&quot;http://www.thymeleaf.org&quot;</span><span class="token operator">&gt;</span>
\\<span class="token generics"><span class="token punctuation">&lt;</span>head<span class="token punctuation">&gt;</span></span>
    \\<span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
    \\<span class="token generics"><span class="token punctuation">&lt;</span>title<span class="token punctuation">&gt;</span></span><span class="token class-name">Title</span>\\<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
\\<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
\\<span class="token generics"><span class="token punctuation">&lt;</span>body<span class="token punctuation">&gt;</span></span>
\\<span class="token operator">&lt;</span>h1 th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;\${msg}&quot;</span><span class="token operator">&gt;</span>\u54C8\u54C8\\<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>
\\<span class="token generics"><span class="token punctuation">&lt;</span>h2<span class="token punctuation">&gt;</span></span>
    \\<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;www.atguigu.com&quot;</span> th<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;\${link}&quot;</span><span class="token operator">&gt;</span>\u53BB\u767E\u5EA6\\<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>  \\<span class="token operator">&lt;</span>br<span class="token operator">/</span><span class="token operator">&gt;</span>
    \\<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;www.atguigu.com&quot;</span> th<span class="token operator">:</span>href<span class="token operator">=</span><span class="token string">&quot;@{link}&quot;</span><span class="token operator">&gt;</span>\u53BB\u767E\u5EA6<span class="token number">2</span>\\<span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
\\<span class="token operator">&lt;</span><span class="token operator">/</span>h2<span class="token operator">&gt;</span>
\\<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
\\<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u6784\u5EFA\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6784\u5EFA\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF" aria-hidden="true">#</a> 4\u3001\u6784\u5EFA\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF</h4><h5 id="_1\u3001\u9879\u76EE\u521B\u5EFA" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u9879\u76EE\u521B\u5EFA" aria-hidden="true">#</a> 1\u3001\u9879\u76EE\u521B\u5EFA</h5><p>thymeleaf\u3001web-starter\u3001devtools\u3001lombok</p><h5 id="_2\u3001\u9759\u6001\u8D44\u6E90\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u9759\u6001\u8D44\u6E90\u5904\u7406" aria-hidden="true">#</a> 2\u3001\u9759\u6001\u8D44\u6E90\u5904\u7406</h5><p>\u81EA\u52A8\u914D\u7F6E\u597D\uFF0C\u6211\u4EEC\u53EA\u9700\u8981\u628A\u6240\u6709\u9759\u6001\u8D44\u6E90\u653E\u5230 static \u6587\u4EF6\u5939\u4E0B</p><h5 id="_3\u3001\u8DEF\u5F84\u6784\u5EFA" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u8DEF\u5F84\u6784\u5EFA" aria-hidden="true">#</a> 3\u3001\u8DEF\u5F84\u6784\u5EFA</h5><p>th:action=&quot;@{/login}&quot;</p><h5 id="_4\u3001\u6A21\u677F\u62BD\u53D6" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6A21\u677F\u62BD\u53D6" aria-hidden="true">#</a> 4\u3001\u6A21\u677F\u62BD\u53D6</h5><p>th:insert/replace/include</p><h5 id="_5\u3001\u9875\u9762\u8DF3\u8F6C" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u9875\u9762\u8DF3\u8F6C" aria-hidden="true">#</a> 5\u3001\u9875\u9762\u8DF3\u8F6C</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">User</span> user<span class="token punctuation">,</span> <span class="token class-name">HttpSession</span> session<span class="token punctuation">,</span> <span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">hasLength</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getUserName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span><span class="token function">getPassword</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u628A\u767B\u9646\u6210\u529F\u7684\u7528\u6237\u4FDD\u5B58\u8D77\u6765</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;loginUser&quot;</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u767B\u5F55\u6210\u529F\u91CD\u5B9A\u5411\u5230main.html;  \u91CD\u5B9A\u5411\u9632\u6B62\u8868\u5355\u91CD\u590D\u63D0\u4EA4</span>
            <span class="token keyword">return</span> <span class="token string">&quot;redirect:/main.html&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8D26\u53F7\u5BC6\u7801\u9519\u8BEF&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//\u56DE\u5230\u767B\u5F55\u9875\u9762</span>
            <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_6\u3001\u6570\u636E\u6E32\u67D3" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u6570\u636E\u6E32\u67D3" aria-hidden="true">#</a> 6\u3001\u6570\u636E\u6E32\u67D3</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/dynamic_table&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">dynamic_table</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u8868\u683C\u5185\u5BB9\u7684\u904D\u5386</span>
        <span class="token class-name">List</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> users <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123456&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;123444&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;haha&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aaaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">&quot;hehe &quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;aaddd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span>users<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">&quot;table/dynamic_table&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
        \\<span class="token operator">&lt;</span>table <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;display table table-bordered&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;hidden-table-info&quot;</span><span class="token operator">&gt;</span>
        \\<span class="token generics"><span class="token punctuation">&lt;</span>thead<span class="token punctuation">&gt;</span></span>
        \\<span class="token generics"><span class="token punctuation">&lt;</span>tr<span class="token punctuation">&gt;</span></span>
            \\<span class="token generics"><span class="token punctuation">&lt;</span>th<span class="token punctuation">&gt;</span></span>#\\<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
            \\<span class="token generics"><span class="token punctuation">&lt;</span>th<span class="token punctuation">&gt;</span></span>\u7528\u6237\u540D\\<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
            \\<span class="token generics"><span class="token punctuation">&lt;</span>th<span class="token punctuation">&gt;</span></span>\u5BC6\u7801\\<span class="token operator">&lt;</span><span class="token operator">/</span>th<span class="token operator">&gt;</span>
        \\<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
        \\<span class="token operator">&lt;</span><span class="token operator">/</span>thead<span class="token operator">&gt;</span>
        \\<span class="token generics"><span class="token punctuation">&lt;</span>tbody<span class="token punctuation">&gt;</span></span>
        \\<span class="token operator">&lt;</span>tr <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;gradeX&quot;</span> th<span class="token operator">:</span>each<span class="token operator">=</span><span class="token string">&quot;user,stats:\${users}&quot;</span><span class="token operator">&gt;</span>
            \\<span class="token operator">&lt;</span>td th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;\${stats.count}&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Trident</span>\\<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            \\<span class="token operator">&lt;</span>td th<span class="token operator">:</span>text<span class="token operator">=</span><span class="token string">&quot;\${user.userName}&quot;</span><span class="token operator">&gt;</span><span class="token class-name">Internet</span>\\<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
            \\<span class="token generics"><span class="token punctuation">&lt;</span>td <span class="token punctuation">&gt;</span></span><span class="token punctuation">[</span><span class="token punctuation">[</span>$<span class="token punctuation">{</span>user<span class="token punctuation">.</span>password<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span>\\<span class="token operator">&lt;</span><span class="token operator">/</span>td<span class="token operator">&gt;</span>
        \\<span class="token operator">&lt;</span><span class="token operator">/</span>tr<span class="token operator">&gt;</span>
        \\<span class="token operator">&lt;</span><span class="token operator">/</span>tbody<span class="token operator">&gt;</span>
        \\<span class="token operator">&lt;</span><span class="token operator">/</span>table<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6\u3001\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u62E6\u622A\u5668" aria-hidden="true">#</a> 6\u3001\u62E6\u622A\u5668</h3><h4 id="_1\u3001handlerinterceptor-\u63A5\u53E3" tabindex="-1"><a class="header-anchor" href="#_1\u3001handlerinterceptor-\u63A5\u53E3" aria-hidden="true">#</a> 1\u3001HandlerInterceptor \u63A5\u53E3</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * \u767B\u5F55\u68C0\u67E5
 * 1\u3001\u914D\u7F6E\u597D\u62E6\u622A\u5668\u8981\u62E6\u622A\u54EA\u4E9B\u8BF7\u6C42
 * 2\u3001\u628A\u8FD9\u4E9B\u914D\u7F6E\u653E\u5728\u5BB9\u5668\u4E2D
 */</span>
<span class="token annotation punctuation">@Slf4j</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginInterceptor</span> <span class="token keyword">implements</span> <span class="token class-name">HandlerInterceptor</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * \u76EE\u6807\u65B9\u6CD5\u6267\u884C\u4E4B\u524D
     * <span class="token keyword">@param</span> <span class="token parameter">request</span>
     * <span class="token keyword">@param</span> <span class="token parameter">response</span>
     * <span class="token keyword">@param</span> <span class="token parameter">handler</span>
     * <span class="token keyword">@return</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">preHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token class-name">String</span> requestURI <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;preHandle\u62E6\u622A\u7684\u8BF7\u6C42\u8DEF\u5F84\u662F{}&quot;</span><span class="token punctuation">,</span>requestURI<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//\u767B\u5F55\u68C0\u67E5\u903B\u8F91</span>
        <span class="token class-name">HttpSession</span> session <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Object</span> loginUser <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;loginUser&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>loginUser <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u653E\u884C</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">//\u62E6\u622A\u4F4F\u3002\u672A\u767B\u5F55\u3002\u8DF3\u8F6C\u5230\u767B\u5F55\u9875</span>
        request<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8BF7\u5148\u767B\u5F55&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        re.sendRedirect(&quot;/&quot;);</span>
        request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u76EE\u6807\u65B9\u6CD5\u6267\u884C\u5B8C\u6210\u4EE5\u540E
     * <span class="token keyword">@param</span> <span class="token parameter">request</span>
     * <span class="token keyword">@param</span> <span class="token parameter">response</span>
     * <span class="token keyword">@param</span> <span class="token parameter">handler</span>
     * <span class="token keyword">@param</span> <span class="token parameter">modelAndView</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postHandle</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">ModelAndView</span> modelAndView<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;postHandle\u6267\u884C{}&quot;</span><span class="token punctuation">,</span>modelAndView<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * \u9875\u9762\u6E32\u67D3\u4EE5\u540E
     * <span class="token keyword">@param</span> <span class="token parameter">request</span>
     * <span class="token keyword">@param</span> <span class="token parameter">response</span>
     * <span class="token keyword">@param</span> <span class="token parameter">handler</span>
     * <span class="token keyword">@param</span> <span class="token parameter">ex</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">afterCompletion</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token class-name">Object</span> handler<span class="token punctuation">,</span> <span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;afterCompletion\u6267\u884C\u5F02\u5E38{}&quot;</span><span class="token punctuation">,</span>ex<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u914D\u7F6E\u62E6\u622A\u5668" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u914D\u7F6E\u62E6\u622A\u5668" aria-hidden="true">#</a> 2\u3001\u914D\u7F6E\u62E6\u622A\u5668</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 1\u3001\u7F16\u5199\u4E00\u4E2A\u62E6\u622A\u5668\u5B9E\u73B0HandlerInterceptor\u63A5\u53E3
 * 2\u3001\u62E6\u622A\u5668\u6CE8\u518C\u5230\u5BB9\u5668\u4E2D\uFF08\u5B9E\u73B0WebMvcConfigurer\u7684addInterceptors\uFF09
 * 3\u3001\u6307\u5B9A\u62E6\u622A\u89C4\u5219\u3010\u5982\u679C\u662F\u62E6\u622A\u6240\u6709\uFF0C\u9759\u6001\u8D44\u6E90\u4E5F\u4F1A\u88AB\u62E6\u622A\u3011
 */</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminWebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LoginInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addPathPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//\u6240\u6709\u8BF7\u6C42\u90FD\u88AB\u62E6\u622A\u5305\u62EC\u9759\u6001\u8D44\u6E90</span>
                <span class="token punctuation">.</span><span class="token function">excludePathPatterns</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/css/**&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/fonts/**&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/images/**&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/js/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u653E\u884C\u7684\u8BF7\u6C42</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u62E6\u622A\u5668\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u62E6\u622A\u5668\u539F\u7406" aria-hidden="true">#</a> 3\u3001\u62E6\u622A\u5668\u539F\u7406</h4><p>1\u3001\u6839\u636E\u5F53\u524D\u8BF7\u6C42\uFF0C\u627E\u5230**HandlerExecutionChain\u3010**\u53EF\u4EE5\u5904\u7406\u8BF7\u6C42\u7684handler\u4EE5\u53CAhandler\u7684\u6240\u6709 \u62E6\u622A\u5668\u3011</p><p>2\u3001\u5148\u6765<strong>\u987A\u5E8F\u6267\u884C</strong> \u6240\u6709\u62E6\u622A\u5668\u7684 preHandle\u65B9\u6CD5</p><ul><li>1\u3001\u5982\u679C\u5F53\u524D\u62E6\u622A\u5668prehandler\u8FD4\u56DE\u4E3Atrue\u3002\u5219\u6267\u884C\u4E0B\u4E00\u4E2A\u62E6\u622A\u5668\u7684preHandle</li><li>2\u3001\u5982\u679C\u5F53\u524D\u62E6\u622A\u5668\u8FD4\u56DE\u4E3Afalse\u3002\u76F4\u63A5 \u5012\u5E8F\u6267\u884C\u6240\u6709\u5DF2\u7ECF\u6267\u884C\u4E86\u7684\u62E6\u622A\u5668\u7684 afterCompletion\uFF1B</li></ul><p><strong>3\u3001\u5982\u679C\u4EFB\u4F55\u4E00\u4E2A\u62E6\u622A\u5668\u8FD4\u56DEfalse\u3002\u76F4\u63A5\u8DF3\u51FA\u4E0D\u6267\u884C\u76EE\u6807\u65B9\u6CD5</strong></p><p><strong>4\u3001\u6240\u6709\u62E6\u622A\u5668\u90FD\u8FD4\u56DETrue\u3002\u6267\u884C\u76EE\u6807\u65B9\u6CD5</strong></p><p><strong>5\u3001\u5012\u5E8F\u6267\u884C\u6240\u6709\u62E6\u622A\u5668\u7684postHandle\u65B9\u6CD5\u3002</strong></p><p><strong>6\u3001\u524D\u9762\u7684\u6B65\u9AA4\u6709\u4EFB\u4F55\u5F02\u5E38\u90FD\u4F1A\u76F4\u63A5\u5012\u5E8F\u89E6\u53D1</strong> afterCompletion</p><p>7\u3001\u9875\u9762\u6210\u529F\u6E32\u67D3\u5B8C\u6210\u4EE5\u540E\uFF0C\u4E5F\u4F1A\u5012\u5E8F\u89E6\u53D1 afterCompletion</p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1605764129365-5b31a748-1541-4bee-9692-1917b3364bc6.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_44%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1605765121071-64cfc649-4892-49a3-ac08-88b52fb4286f.png" alt="img" loading="lazy"></p><h3 id="_7\u3001\u6587\u4EF6\u4E0A\u4F20" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u6587\u4EF6\u4E0A\u4F20" aria-hidden="true">#</a> 7\u3001\u6587\u4EF6\u4E0A\u4F20</h3><h4 id="_1\u3001\u9875\u9762\u8868\u5355" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u9875\u9762\u8868\u5355" aria-hidden="true">#</a> 1\u3001\u9875\u9762\u8868\u5355</h4><div class="language-html ext-html line-numbers-mode"><pre class="language-html"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/upload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enctype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multipart/form-data<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submit<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\u63D0\u4EA4<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u6587\u4EF6\u4E0A\u4F20\u4EE3\u7801" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6587\u4EF6\u4E0A\u4F20\u4EE3\u7801" aria-hidden="true">#</a> 2\u3001\u6587\u4EF6\u4E0A\u4F20\u4EE3\u7801</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token doc-comment comment">/**
     * MultipartFile \u81EA\u52A8\u5C01\u88C5\u4E0A\u4F20\u8FC7\u6765\u7684\u6587\u4EF6
     * <span class="token keyword">@param</span> <span class="token parameter">email</span>
     * <span class="token keyword">@param</span> <span class="token parameter">username</span>
     * <span class="token keyword">@param</span> <span class="token parameter">headerImg</span>
     * <span class="token keyword">@param</span> <span class="token parameter">photos</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;headerImg&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> headerImg<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;photos&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span><span class="token punctuation">[</span><span class="token punctuation">]</span> photos<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>

        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u4E0A\u4F20\u7684\u4FE1\u606F\uFF1Aemail={}\uFF0Cusername={}\uFF0CheaderImg={}\uFF0Cphotos={}&quot;</span><span class="token punctuation">,</span>
                email<span class="token punctuation">,</span>username<span class="token punctuation">,</span>headerImg<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>photos<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>headerImg<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//\u4FDD\u5B58\u5230\u6587\u4EF6\u670D\u52A1\u5668\uFF0COSS\u670D\u52A1\u5668</span>
            <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> headerImg<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            headerImg<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;H:\\\\cache\\\\&quot;</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span>photos<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">MultipartFile</span> photo <span class="token operator">:</span> photos<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>photo<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token class-name">String</span> originalFilename <span class="token operator">=</span> photo<span class="token punctuation">.</span><span class="token function">getOriginalFilename</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    photo<span class="token punctuation">.</span><span class="token function">transferTo</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;H:\\\\cache\\\\&quot;</span><span class="token operator">+</span>originalFilename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>


        <span class="token keyword">return</span> <span class="token string">&quot;main&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u81EA\u52A8\u914D\u7F6E\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u81EA\u52A8\u914D\u7F6E\u539F\u7406" aria-hidden="true">#</a> 3\u3001\u81EA\u52A8\u914D\u7F6E\u539F\u7406</h4><p>**\u6587\u4EF6\u4E0A\u4F20\u81EA\u52A8\u914D\u7F6E\u7C7B-MultipartAutoConfiguration-**<strong>MultipartProperties</strong></p><ul><li><p>\u81EA\u52A8\u914D\u7F6E\u597D\u4E86 <strong>StandardServletMultipartResolver \u3010\u6587\u4EF6\u4E0A\u4F20\u89E3\u6790\u5668\u3011</strong></p></li><li><p><strong>\u539F\u7406\u6B65\u9AA4</strong></p></li><li><ul><li><strong>1\u3001\u8BF7\u6C42\u8FDB\u6765\u4F7F\u7528\u6587\u4EF6\u4E0A\u4F20\u89E3\u6790\u5668\u5224\u65AD\uFF08<strong>isMultipart</strong>\uFF09\u5E76\u5C01\u88C5\uFF08<strong>resolveMultipart\uFF0C<strong>\u8FD4\u56DE</strong>MultipartHttpServletRequest</strong>\uFF09\u6587\u4EF6\u4E0A\u4F20\u8BF7\u6C42</strong></li><li><strong>2\u3001\u53C2\u6570\u89E3\u6790\u5668\u6765\u89E3\u6790\u8BF7\u6C42\u4E2D\u7684\u6587\u4EF6\u5185\u5BB9\u5C01\u88C5\u6210MultipartFile</strong></li><li>**3\u3001\u5C06request\u4E2D\u6587\u4EF6\u4FE1\u606F\u5C01\u88C5\u4E3A\u4E00\u4E2AMap\uFF1B**MultiValueMap&lt;String, MultipartFile&gt;</li></ul></li></ul><p><strong>FileCopyUtils</strong>\u3002\u5B9E\u73B0\u6587\u4EF6\u6D41\u7684\u62F7\u8D1D</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@PostMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/upload&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">upload</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;email&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> email<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">)</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;headerImg&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span> headerImg<span class="token punctuation">,</span>
                         <span class="token annotation punctuation">@RequestPart</span><span class="token punctuation">(</span><span class="token string">&quot;photos&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MultipartFile</span><span class="token punctuation">[</span><span class="token punctuation">]</span> photos<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1605847414866-32b6cc9c-5191-4052-92eb-069d652dfbf9.png" alt="img" loading="lazy"></p><h3 id="_8\u3001\u5F02\u5E38\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_8\u3001\u5F02\u5E38\u5904\u7406" aria-hidden="true">#</a> 8\u3001\u5F02\u5E38\u5904\u7406</h3><h4 id="_1\u3001\u9519\u8BEF\u5904\u7406" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u9519\u8BEF\u5904\u7406" aria-hidden="true">#</a> 1\u3001\u9519\u8BEF\u5904\u7406</h4><h6 id="_1\u3001\u9ED8\u8BA4\u89C4\u5219" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u9ED8\u8BA4\u89C4\u5219" aria-hidden="true">#</a> 1\u3001\u9ED8\u8BA4\u89C4\u5219</h6><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CSpring Boot\u63D0\u4F9B<code>/error</code>\u5904\u7406\u6240\u6709\u9519\u8BEF\u7684\u6620\u5C04</p><p>\u5BF9\u4E8E\u673A\u5668\u5BA2\u6237\u7AEF\uFF0C\u5B83\u5C06\u751F\u6210JSON\u54CD\u5E94\uFF0C\u5176\u4E2D\u5305\u542B\u9519\u8BEF\uFF0CHTTP\u72B6\u6001\u548C\u5F02\u5E38\u6D88\u606F\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002\u5BF9\u4E8E\u6D4F\u89C8\u5668\u5BA2\u6237\u7AEF\uFF0C\u54CD\u5E94\u4E00\u4E2A\u201C whitelabel\u201D\u9519\u8BEF\u89C6\u56FE\uFF0C\u4EE5HTML\u683C\u5F0F\u5448\u73B0\u76F8\u540C\u7684\u6570\u636E\u3002</p><p>\u673A\u5668\u5BA2\u6237\u7AEF\uFF08PostMan\uFF09</p><p><img src="http://qnimg.gisfsde.com/work/1606024421363-77083c34-0b0e-4698-bb72-42da351d3944.png" alt="img" loading="lazy"></p><p>\u6D4F\u89C8\u5668\u5BA2\u6237\u7AEF</p><p><img src="http://qnimg.gisfsde.com/work/1606024616835-bc491bf0-c3b1-4ac3-b886-d4ff3c9874ce.png" alt="img" loading="lazy"></p><p><strong>\u8981\u5BF9\u5176\u8FDB\u884C\u81EA\u5B9A\u4E49\uFF0C\u6DFB\u52A0</strong><code>View</code><strong>\u89E3\u6790\u4E3A</strong><code>error</code></p><p>\u8981\u5B8C\u5168\u66FF\u6362\u9ED8\u8BA4\u884C\u4E3A\uFF0C\u53EF\u4EE5\u5B9E\u73B0 <code>ErrorController </code>\u5E76\u6CE8\u518C\u8BE5\u7C7B\u578B\u7684Bean\u5B9A\u4E49\uFF0C\u6216\u6DFB\u52A0<code>ErrorAttributes\u7C7B\u578B\u7684\u7EC4\u4EF6</code>\u4EE5\u4F7F\u7528\u73B0\u6709\u673A\u5236\u4F46\u66FF\u6362\u5176\u5185\u5BB9\u3002</p><p>error/\u4E0B\u76844xx\uFF0C5xx\u9875\u9762\u4F1A\u88AB<strong>\u81EA\u52A8\u89E3\u6790</strong>\uFF1B</p><ul><li><img src="http://qnimg.gisfsde.com/work/1606024592756-d4ab8a6b-ec37-426b-8b39-010463603d57.png" alt="img" loading="lazy"></li></ul><h6 id="_2\u3001\u5B9A\u5236\u9519\u8BEF\u5904\u7406\u903B\u8F91" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5B9A\u5236\u9519\u8BEF\u5904\u7406\u903B\u8F91" aria-hidden="true">#</a> 2\u3001\u5B9A\u5236\u9519\u8BEF\u5904\u7406\u903B\u8F91</h6><p>\u81EA\u5B9A\u4E49\u9519\u8BEF\u9875</p><ul><li>error/404.html error/5xx.html\uFF1B\u6709\u7CBE\u786E\u7684\u9519\u8BEF\u72B6\u6001\u7801\u9875\u9762\u5C31\u5339\u914D\u7CBE\u786E\uFF0C\u6CA1\u6709\u5C31\u627E 4xx.html\uFF1B\u5982\u679C\u90FD\u6CA1\u6709\u5C31\u89E6\u53D1\u767D\u9875</li></ul><p>@ControllerAdvice+@ExceptionHandler\u5904\u7406\u5168\u5C40\u5F02\u5E38\uFF1B\u5E95\u5C42\u662F <strong>ExceptionHandlerExceptionResolver \u652F\u6301\u7684</strong></p><p>@ResponseStatus+\u81EA\u5B9A\u4E49\u5F02\u5E38 \uFF1B\u5E95\u5C42\u662F <strong>ResponseStatusExceptionResolver \uFF0C\u628Aresponsestatus\u6CE8\u89E3\u7684\u4FE1\u606F\u5E95\u5C42\u8C03\u7528</strong> <strong>response.sendError(statusCode, resolvedReason)\uFF1Btomcat\u53D1\u9001\u7684/error</strong></p><p>Spring\u5E95\u5C42\u7684\u5F02\u5E38\uFF0C\u5982 \u53C2\u6570\u7C7B\u578B\u8F6C\u6362\u5F02\u5E38\uFF1B<strong>DefaultHandlerExceptionResolver \u5904\u7406\u6846\u67B6\u5E95\u5C42\u7684\u5F02\u5E38\u3002</strong></p><ul><li>response.sendError(HttpServletResponse.<strong>SC_BAD_REQUEST</strong>, ex.getMessage());</li><li><img src="http://qnimg.gisfsde.com/work/1606114118010-f4aaf5ee-2747-4402-bc82-08321b2490ed.png" alt="img" loading="lazy"></li></ul><p>\u81EA\u5B9A\u4E49\u5B9E\u73B0 HandlerExceptionResolver \u5904\u7406\u5F02\u5E38\uFF1B\u53EF\u4EE5\u4F5C\u4E3A\u9ED8\u8BA4\u7684\u5168\u5C40\u5F02\u5E38\u5904\u7406\u89C4\u5219</p><ul><li><img src="http://qnimg.gisfsde.com/work/1606114688649-e6502134-88b3-48db-a463-04c23eddedc7.png" alt="img" loading="lazy"></li></ul><p><strong>ErrorViewResolver</strong> \u5B9E\u73B0\u81EA\u5B9A\u4E49\u5904\u7406\u5F02\u5E38\uFF1B</p><ul><li>response.sendError \u3002error\u8BF7\u6C42\u5C31\u4F1A\u8F6C\u7ED9controller</li><li>\u4F60\u7684\u5F02\u5E38\u6CA1\u6709\u4EFB\u4F55\u4EBA\u80FD\u5904\u7406\u3002tomcat\u5E95\u5C42 response.sendError\u3002error\u8BF7\u6C42\u5C31\u4F1A\u8F6C\u7ED9controller</li><li><strong>basicErrorController \u8981\u53BB\u7684\u9875\u9762\u5730\u5740\u662F</strong> <strong>ErrorViewResolver</strong> \uFF1B</li></ul><h6 id="_3\u3001\u5F02\u5E38\u5904\u7406\u81EA\u52A8\u914D\u7F6E\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5F02\u5E38\u5904\u7406\u81EA\u52A8\u914D\u7F6E\u539F\u7406" aria-hidden="true">#</a> 3\u3001\u5F02\u5E38\u5904\u7406\u81EA\u52A8\u914D\u7F6E\u539F\u7406</h6><p><strong>ErrorMvcAutoConfiguration \u81EA\u52A8\u914D\u7F6E\u5F02\u5E38\u5904\u7406\u89C4\u5219</strong></p><ul><li><p><strong>\u5BB9\u5668\u4E2D\u7684\u7EC4\u4EF61\uFF1A\u7C7B\u578B\uFF1ADefaultErrorAttributes -&gt;</strong> <strong>id\uFF1AerrorAttributes</strong></p></li><li><ul><li><strong>public class</strong> <strong>DefaultErrorAttributes</strong> <strong>implements</strong> <strong>ErrorAttributes</strong>, <strong>HandlerExceptionResolver</strong></li><li><strong>DefaultErrorAttributes</strong>\uFF1A\u5B9A\u4E49\u9519\u8BEF\u9875\u9762\u4E2D\u53EF\u4EE5\u5305\u542B\u54EA\u4E9B\u6570\u636E\u3002</li><li><img src="http://qnimg.gisfsde.com/work/1606044430037-8d599e30-1679-407c-96b7-4df345848fa4.png" alt="img" style="zoom:80%;"></li><li><img src="http://qnimg.gisfsde.com/work/1606044487738-8cb1dcda-08c5-4104-a634-b2468512e60f.png" alt="img" style="zoom:80%;"></li></ul></li><li><p>**\u5BB9\u5668\u4E2D\u7684\u7EC4\u4EF62\uFF1A\u7C7B\u578B\uFF1A**<strong>BasicErrorController --&gt; id\uFF1AbasicErrorController\uFF08json+\u767D\u9875 \u9002\u914D\u54CD\u5E94\uFF09</strong></p></li><li><ul><li><strong>\u5904\u7406\u9ED8\u8BA4</strong> <strong>/error \u8DEF\u5F84\u7684\u8BF7\u6C42\uFF1B\u9875\u9762\u54CD\u5E94</strong> <strong>new</strong> ModelAndView(<strong>&quot;error&quot;</strong>, model)\uFF1B</li><li><strong>\u5BB9\u5668\u4E2D\u6709\u7EC4\u4EF6 View</strong>-&gt;<strong>id\u662Ferror</strong>\uFF1B\uFF08\u54CD\u5E94\u9ED8\u8BA4\u9519\u8BEF\u9875\uFF09</li><li>\u5BB9\u5668\u4E2D\u653E\u7EC4\u4EF6 <strong>BeanNameViewResolver\uFF08\u89C6\u56FE\u89E3\u6790\u5668\uFF09\uFF1B\u6309\u7167\u8FD4\u56DE\u7684\u89C6\u56FE\u540D\u4F5C\u4E3A\u7EC4\u4EF6\u7684id\u53BB\u5BB9\u5668\u4E2D\u627EView\u5BF9\u8C61\u3002</strong></li></ul></li><li><p>**\u5BB9\u5668\u4E2D\u7684\u7EC4\u4EF63\uFF1A**\u7C7B\u578B\uFF1A**DefaultErrorViewResolver -&gt; id\uFF1A**conventionErrorViewResolver</p></li><li><ul><li>\u5982\u679C\u53D1\u751F\u9519\u8BEF\uFF0C\u4F1A\u4EE5HTTP\u7684\u72B6\u6001\u7801 \u4F5C\u4E3A\u89C6\u56FE\u9875\u5730\u5740\uFF08viewName\uFF09\uFF0C\u627E\u5230\u771F\u6B63\u7684\u9875\u9762</li><li>error/404\u30015xx.html</li></ul></li></ul><p>\u5982\u679C\u60F3\u8981\u8FD4\u56DE\u9875\u9762\uFF1B\u5C31\u4F1A\u627Eerror\u89C6\u56FE\u3010<strong>StaticView</strong>\u3011\u3002(\u9ED8\u8BA4\u662F\u4E00\u4E2A\u767D\u9875)</p><p><img src="http://qnimg.gisfsde.com/work/1606043870164-3770e116-344f-448e-8bff-8f32438edc9a.png" alt="img" loading="lazy"></p><p>\u5199\u51FA\u53BBjson</p><p><img src="http://qnimg.gisfsde.com/work/1606043904074-50b7f088-2d2b-4da5-85e2-0a756da74dca.png" alt="img" loading="lazy"></p><p>\u9519\u8BEF\u9875</p><h6 id="_4\u3001\u5F02\u5E38\u5904\u7406\u6B65\u9AA4\u6D41\u7A0B" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u5F02\u5E38\u5904\u7406\u6B65\u9AA4\u6D41\u7A0B" aria-hidden="true">#</a> 4\u3001\u5F02\u5E38\u5904\u7406\u6B65\u9AA4\u6D41\u7A0B</h6><p>1\u3001\u6267\u884C\u76EE\u6807\u65B9\u6CD5\uFF0C\u76EE\u6807\u65B9\u6CD5\u8FD0\u884C\u671F\u95F4\u6709\u4EFB\u4F55\u5F02\u5E38\u90FD\u4F1A\u88ABcatch\u3001\u800C\u4E14\u6807\u5FD7\u5F53\u524D\u8BF7\u6C42\u7ED3\u675F\uFF1B\u5E76\u4E14\u7528 <strong>dispatchException</strong></p><p>2\u3001\u8FDB\u5165\u89C6\u56FE\u89E3\u6790\u6D41\u7A0B\uFF08\u9875\u9762\u6E32\u67D3\uFF1F\uFF09</p><p>processDispatchResult(processedRequest, response, mappedHandler, <strong>mv</strong>, <strong>dispatchException</strong>);</p><p>3\u3001<strong>mv</strong> = <strong>processHandlerException</strong>\uFF1B\u5904\u7406handler\u53D1\u751F\u7684\u5F02\u5E38\uFF0C\u5904\u7406\u5B8C\u6210\u8FD4\u56DEModelAndView\uFF1B</p><p>1\u3001\u904D\u5386\u6240\u6709\u7684 <strong>handlerExceptionResolvers\uFF0C\u770B\u8C01\u80FD\u5904\u7406\u5F53\u524D\u5F02\u5E38\u3010<strong><strong>HandlerExceptionResolver\u5904\u7406\u5668\u5F02\u5E38\u89E3\u6790\u5668</strong></strong>\u3011</strong></p><p><img src="http://qnimg.gisfsde.com/work/1606047252166-ce71c3a1-0e0e-4499-90f4-6d80014ca19f.png" alt="img" loading="lazy"></p><p><strong>2\u3001\u7CFB\u7EDF\u9ED8\u8BA4\u7684 \u5F02\u5E38\u89E3\u6790\u5668\uFF1B</strong></p><p><img src="http://qnimg.gisfsde.com/work/1606047109161-c68a46c1-202a-4db1-bbeb-23fcae49bbe9.png" alt="img" loading="lazy"></p><ul><li><p><strong>1\u3001DefaultErrorAttributes\u5148\u6765\u5904\u7406\u5F02\u5E38\u3002\u628A\u5F02\u5E38\u4FE1\u606F\u4FDD\u5B58\u5230rrequest\u57DF\uFF0C\u5E76\u4E14\u8FD4\u56DEnull\uFF1B</strong></p></li><li><p><strong>2\u3001\u9ED8\u8BA4\u6CA1\u6709\u4EFB\u4F55\u4EBA\u80FD\u5904\u7406\u5F02\u5E38\uFF0C\u6240\u4EE5\u5F02\u5E38\u4F1A\u88AB\u629B\u51FA</strong></p></li><li><ul><li><strong>1\u3001\u5982\u679C\u6CA1\u6709\u4EFB\u4F55\u4EBA\u80FD\u5904\u7406\u6700\u7EC8\u5E95\u5C42\u5C31\u4F1A\u53D1\u9001 /error \u8BF7\u6C42\u3002\u4F1A\u88AB\u5E95\u5C42\u7684BasicErrorController\u5904\u7406</strong></li><li><strong>2\u3001\u89E3\u6790\u9519\u8BEF\u89C6\u56FE\uFF1B\u904D\u5386\u6240\u6709\u7684</strong> <strong>ErrorViewResolver \u770B\u8C01\u80FD\u89E3\u6790\u3002</strong></li><li><img src="http://qnimg.gisfsde.com/work/1606047900473-e31c1dc3-7a5f-4f70-97de-5203429781fa.png" alt="img" loading="lazy"></li><li><strong>3\u3001\u9ED8\u8BA4\u7684</strong> <strong>DefaultErrorViewResolver ,\u4F5C\u7528\u662F\u628A\u54CD\u5E94\u72B6\u6001\u7801\u4F5C\u4E3A\u9519\u8BEF\u9875\u7684\u5730\u5740\uFF0Cerror/500.html</strong></li><li><strong>4\u3001\u6A21\u677F\u5F15\u64CE\u6700\u7EC8\u54CD\u5E94\u8FD9\u4E2A\u9875\u9762</strong> <strong>error/500.html</strong></li></ul></li></ul><h3 id="_9\u3001web\u539F\u751F\u7EC4\u4EF6\u6CE8\u5165-servlet\u3001filter\u3001listener" tabindex="-1"><a class="header-anchor" href="#_9\u3001web\u539F\u751F\u7EC4\u4EF6\u6CE8\u5165-servlet\u3001filter\u3001listener" aria-hidden="true">#</a> 9\u3001Web\u539F\u751F\u7EC4\u4EF6\u6CE8\u5165\uFF08Servlet\u3001Filter\u3001Listener\uFF09</h3><h4 id="_1\u3001\u4F7F\u7528servlet-api" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u4F7F\u7528servlet-api" aria-hidden="true">#</a> 1\u3001\u4F7F\u7528Servlet API</h4><p>@ServletComponentScan(basePackages = <strong>&quot;com.atguigu.admin&quot;</strong>) :\u6307\u5B9A\u539F\u751FServlet\u7EC4\u4EF6\u90FD\u653E\u5728\u90A3\u91CC</p><p>@WebServlet(urlPatterns = <strong>&quot;/my&quot;</strong>)\uFF1A\u6548\u679C\uFF1A\u76F4\u63A5\u54CD\u5E94\uFF0C<strong>\u6CA1\u6709\u7ECF\u8FC7Spring\u7684\u62E6\u622A\u5668\uFF1F</strong></p><p>@WebFilter(urlPatterns={<strong>&quot;/css/*&quot;</strong>,<strong>&quot;/images/*&quot;</strong>})</p><p>@WebListener</p><p>\u63A8\u8350\u53EF\u4EE5\u8FD9\u79CD\u65B9\u5F0F\uFF1B</p><p>\u6269\u5C55\uFF1ADispatchServlet \u5982\u4F55\u6CE8\u518C\u8FDB\u6765</p><ul><li>\u5BB9\u5668\u4E2D\u81EA\u52A8\u914D\u7F6E\u4E86 DispatcherServlet \u5C5E\u6027\u7ED1\u5B9A\u5230 WebMvcProperties\uFF1B\u5BF9\u5E94\u7684\u914D\u7F6E\u6587\u4EF6\u914D\u7F6E\u9879\u662F <strong>spring.mvc\u3002</strong></li><li><strong>\u901A\u8FC7</strong> <strong>ServletRegistrationBean</strong>&lt;DispatcherServlet&gt; \u628A DispatcherServlet \u914D\u7F6E\u8FDB\u6765\u3002</li><li>\u9ED8\u8BA4\u6620\u5C04\u7684\u662F / \u8DEF\u5F84\u3002</li></ul><p><img src="http://qnimg.gisfsde.com/work/1606284869220-8b63d54b-39c4-40f6-b226-f5f095ef9304.png" alt="img" loading="lazy"></p><p>Tomcat-Servlet\uFF1B</p><p>\u591A\u4E2AServlet\u90FD\u80FD\u5904\u7406\u5230\u540C\u4E00\u5C42\u8DEF\u5F84\uFF0C\u7CBE\u786E\u4F18\u9009\u539F\u5219</p><p>A\uFF1A /my/</p><p>B\uFF1A /my/1</p><h4 id="_2\u3001\u4F7F\u7528registrationbean" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u4F7F\u7528registrationbean" aria-hidden="true">#</a> 2\u3001\u4F7F\u7528RegistrationBean</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ServletRegistrationBean\`, \`FilterRegistrationBean\`, and \`ServletListenerRegistrationBean
@Configuration
public class MyRegistConfig {

    @Bean
    public ServletRegistrationBean myServlet(){
        MyServlet myServlet = new MyServlet();

        return new ServletRegistrationBean(myServlet,&quot;/my&quot;,&quot;/my02&quot;);
    }


    @Bean
    public FilterRegistrationBean myFilter(){

        MyFilter myFilter = new MyFilter();
//        return new FilterRegistrationBean(myFilter,myServlet());
        FilterRegistrationBean filterRegistrationBean = new FilterRegistrationBean(myFilter);
        filterRegistrationBean.setUrlPatterns(Arrays.asList(&quot;/my&quot;,&quot;/css/*&quot;));
        return filterRegistrationBean;
    }

    @Bean
    public ServletListenerRegistrationBean myListener(){
        MySwervletContextListener mySwervletContextListener = new MySwervletContextListener();
        return new ServletListenerRegistrationBean(mySwervletContextListener);
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10\u3001\u5D4C\u5165\u5F0Fservlet\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_10\u3001\u5D4C\u5165\u5F0Fservlet\u5BB9\u5668" aria-hidden="true">#</a> 10\u3001\u5D4C\u5165\u5F0FServlet\u5BB9\u5668</h3><h4 id="_1\u3001\u5207\u6362\u5D4C\u5165\u5F0Fservlet\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5207\u6362\u5D4C\u5165\u5F0Fservlet\u5BB9\u5668" aria-hidden="true">#</a> 1\u3001\u5207\u6362\u5D4C\u5165\u5F0FServlet\u5BB9\u5668</h4><ul><li><p>\u9ED8\u8BA4\u652F\u6301\u7684webServer</p></li><li><ul><li><code>Tomcat</code>, <code>Jetty</code>, or <code>Undertow</code></li><li><code>ServletWebServerApplicationContext \u5BB9\u5668\u542F\u52A8\u5BFB\u627EServletWebServerFactory \u5E76\u5F15\u5BFC\u521B\u5EFA\u670D\u52A1\u5668</code></li></ul></li><li><p>\u5207\u6362\u670D\u52A1\u5668</p></li></ul><p><img src="http://qnimg.gisfsde.com/work/1606280937533-504d0889-b893-4a01-af68-2fc31ffce9fc.png" alt="img" loading="lazy"></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-tomcat\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>\u539F\u7406</p></li><li><ul><li>SpringBoot\u5E94\u7528\u542F\u52A8\u53D1\u73B0\u5F53\u524D\u662FWeb\u5E94\u7528\u3002web\u573A\u666F\u5305-\u5BFC\u5165tomcat</li><li>web\u5E94\u7528\u4F1A\u521B\u5EFA\u4E00\u4E2Aweb\u7248\u7684ioc\u5BB9\u5668 <code>ServletWebServerApplicationContext</code></li><li><code>ServletWebServerApplicationContext</code> \u542F\u52A8\u7684\u65F6\u5019\u5BFB\u627E <code>**ServletWebServerFactory**\`\`\uFF08Servlet \u7684web\u670D\u52A1\u5668\u5DE5\u5382---&gt; Servlet \u7684web\u670D\u52A1\u5668\uFF09</code></li><li>SpringBoot\u5E95\u5C42\u9ED8\u8BA4\u6709\u5F88\u591A\u7684WebServer\u5DE5\u5382\uFF1B<code>TomcatServletWebServerFactory</code>, <code>JettyServletWebServerFactory</code>, or <code>UndertowServletWebServerFactory</code></li><li><code>\u5E95\u5C42\u76F4\u63A5\u4F1A\u6709\u4E00\u4E2A\u81EA\u52A8\u914D\u7F6E\u7C7B\u3002ServletWebServerFactoryAutoConfiguration</code></li><li><code>ServletWebServerFactoryAutoConfiguration\u5BFC\u5165\u4E86ServletWebServerFactoryConfiguration\uFF08\u914D\u7F6E\u7C7B\uFF09</code></li><li><code>ServletWebServerFactoryConfiguration \u914D\u7F6E\u7C7B \u6839\u636E\u52A8\u6001\u5224\u65AD\u7CFB\u7EDF\u4E2D\u5230\u5E95\u5BFC\u5165\u4E86\u90A3\u4E2AWeb\u670D\u52A1\u5668\u7684\u5305\u3002\uFF08\u9ED8\u8BA4\u662Fweb-starter\u5BFC\u5165tomcat\u5305\uFF09\uFF0C\u5BB9\u5668\u4E2D\u5C31\u6709 TomcatServletWebServerFactory</code></li><li><code>TomcatServletWebServerFactory \u521B\u5EFA\u51FATomcat\u670D\u52A1\u5668\u5E76\u542F\u52A8\uFF1BTomcatWebServer \u7684\u6784\u9020\u5668\u62E5\u6709\u521D\u59CB\u5316\u65B9\u6CD5initialize---this.tomcat.start();</code></li><li><code>\u5185\u5D4C\u670D\u52A1\u5668\uFF0C\u5C31\u662F\u624B\u52A8\u628A\u542F\u52A8\u670D\u52A1\u5668\u7684\u4EE3\u7801\u8C03\u7528\uFF08tomcat\u6838\u5FC3jar\u5305\u5B58\u5728\uFF09</code></li></ul></li><li><p>\`\`</p></li></ul><h4 id="_2\u3001\u5B9A\u5236servlet\u5BB9\u5668" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5B9A\u5236servlet\u5BB9\u5668" aria-hidden="true">#</a> 2\u3001\u5B9A\u5236Servlet\u5BB9\u5668</h4>`,123),ss=n("li",null,[n("p",null,[s("\u5B9E\u73B0 "),n("strong",null,"WebServerFactoryCu"),s("stomizer<ConfigurableServletWebServerFactory>")])],-1),as=n("li",null,[n("ul",null,[n("li",null,[s("\u628A\u914D\u7F6E\u6587\u4EF6\u7684\u503C\u548C"),n("code",null,"**ServletWebServerFactory \u8FDB\u884C\u7ED1\u5B9A**")])])],-1),ts=s("\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6 "),es={href:"http://server.xxx",target:"_blank",rel:"noopener noreferrer"},ps=s("server.xxx"),os=n("li",null,[n("p",null,[s("\u76F4\u63A5\u81EA\u5B9A\u4E49 "),n("strong",null,"ConfigurableServletWebServerFactory")])],-1),cs=e(`<p><strong>xxxxx<strong><strong>Customizer</strong></strong>\uFF1A\u5B9A\u5236\u5316\u5668\uFF0C\u53EF\u4EE5\u6539\u53D8xxxx\u7684\u9ED8\u8BA4\u89C4\u5219</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">WebServerFactoryCustomizer</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>web<span class="token punctuation">.</span>servlet<span class="token punctuation">.</span>server<span class="token punctuation">.</span></span><span class="token class-name">ConfigurableServletWebServerFactory</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CustomizationBean</span> <span class="token keyword">implements</span> <span class="token class-name">WebServerFactoryCustomizer</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">ConfigurableServletWebServerFactory</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">customize</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableServletWebServerFactory</span> server<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        server<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11\u3001\u5B9A\u5236\u5316\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_11\u3001\u5B9A\u5236\u5316\u539F\u7406" aria-hidden="true">#</a> 11\u3001\u5B9A\u5236\u5316\u539F\u7406</h3><h4 id="_1\u3001\u5B9A\u5236\u5316\u7684\u5E38\u89C1\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5B9A\u5236\u5316\u7684\u5E38\u89C1\u65B9\u5F0F" aria-hidden="true">#</a> 1\u3001\u5B9A\u5236\u5316\u7684\u5E38\u89C1\u65B9\u5F0F</h4><ul><li>\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF1B</li><li><strong>xxxxxCustomizer\uFF1B</strong></li><li><strong>\u7F16\u5199\u81EA\u5B9A\u4E49\u7684\u914D\u7F6E\u7C7B xxxConfiguration\uFF1B+</strong> <strong>@Bean\u66FF\u6362\u3001\u589E\u52A0\u5BB9\u5668\u4E2D\u9ED8\u8BA4\u7EC4\u4EF6\uFF1B\u89C6\u56FE\u89E3\u6790\u5668</strong></li><li><strong>Web\u5E94\u7528 \u7F16\u5199\u4E00\u4E2A\u914D\u7F6E\u7C7B\u5B9E\u73B0</strong> <strong>WebMvcConfigurer \u5373\u53EF\u5B9A\u5236\u5316web\u529F\u80FD\uFF1B+ @Bean\u7ED9\u5BB9\u5668\u4E2D\u518D\u6269\u5C55\u4E00\u4E9B\u7EC4\u4EF6</strong></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdminWebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>@EnableWebMvc + WebMvcConfigurer \u2014\u2014 @Bean \u53EF\u4EE5\u5168\u9762\u63A5\u7BA1SpringMVC\uFF0C\u6240\u6709\u89C4\u5219\u5168\u90E8\u81EA\u5DF1\u91CD\u65B0\u914D\u7F6E\uFF1B \u5B9E\u73B0\u5B9A\u5236\u548C\u6269\u5C55\u529F\u80FD</p></li><li><ul><li>\u539F\u7406</li><li>1\u3001WebMvcAutoConfiguration \u9ED8\u8BA4\u7684SpringMVC\u7684\u81EA\u52A8\u914D\u7F6E\u529F\u80FD\u7C7B\u3002\u9759\u6001\u8D44\u6E90\u3001\u6B22\u8FCE\u9875.....</li><li>2\u3001\u4E00\u65E6\u4F7F\u7528 @EnableWebMvc \u3001\u3002\u4F1A @Import(DelegatingWebMvcConfiguration.<strong>class</strong>)</li><li>3\u3001<strong>DelegatingWebMvcConfiguration</strong> \u7684 \u4F5C\u7528\uFF0C\u53EA\u4FDD\u8BC1SpringMVC\u6700\u57FA\u672C\u7684\u4F7F\u7528</li></ul></li><li><ul><li><ul><li>\u628A\u6240\u6709\u7CFB\u7EDF\u4E2D\u7684 WebMvcConfigurer \u62FF\u8FC7\u6765\u3002\u6240\u6709\u529F\u80FD\u7684\u5B9A\u5236\u90FD\u662F\u8FD9\u4E9B WebMvcConfigurer \u5408\u8D77\u6765\u4E00\u8D77\u751F\u6548</li><li>\u81EA\u52A8\u914D\u7F6E\u4E86\u4E00\u4E9B\u975E\u5E38\u5E95\u5C42\u7684\u7EC4\u4EF6\u3002<strong>RequestMappingHandlerMapping</strong>\u3001\u8FD9\u4E9B\u7EC4\u4EF6\u4F9D\u8D56\u7684\u7EC4\u4EF6\u90FD\u662F\u4ECE\u5BB9\u5668\u4E2D\u83B7\u53D6</li><li><strong>public class</strong> DelegatingWebMvcConfiguration <strong>extends</strong> <strong>WebMvcConfigurationSupport</strong></li></ul></li></ul></li><li><ul><li>4\u3001<strong>WebMvcAutoConfiguration</strong> \u91CC\u9762\u7684\u914D\u7F6E\u8981\u80FD\u751F\u6548 \u5FC5\u987B @ConditionalOnMissingBean(<strong>WebMvcConfigurationSupport</strong>.<strong>class</strong>)</li><li>5\u3001@EnableWebMvc \u5BFC\u81F4\u4E86 <strong>WebMvcAutoConfiguration \u6CA1\u6709\u751F\u6548\u3002</strong></li></ul></li><li><p>... ...</p></li></ul><h4 id="_2\u3001\u539F\u7406\u5206\u6790\u5957\u8DEF" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u539F\u7406\u5206\u6790\u5957\u8DEF" aria-hidden="true">#</a> 2\u3001\u539F\u7406\u5206\u6790\u5957\u8DEF</h4><p><strong>\u573A\u666Fstarter</strong> <strong>- xxxxAutoConfiguration - \u5BFC\u5165xxx\u7EC4\u4EF6 - \u7ED1\u5B9AxxxProperties --</strong> <strong>\u7ED1\u5B9A\u914D\u7F6E\u6587\u4EF6\u9879</strong></p><h2 id="_3-\u6570\u636E\u8BBF\u95EE" tabindex="-1"><a class="header-anchor" href="#_3-\u6570\u636E\u8BBF\u95EE" aria-hidden="true">#</a> 3.\u6570\u636E\u8BBF\u95EE</h2><h3 id="_1\u3001sql" tabindex="-1"><a class="header-anchor" href="#_1\u3001sql" aria-hidden="true">#</a> 1\u3001SQL</h3><h4 id="_1\u3001\u6570\u636E\u6E90\u7684\u81EA\u52A8\u914D\u7F6E-hikaridatasource" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u6570\u636E\u6E90\u7684\u81EA\u52A8\u914D\u7F6E-hikaridatasource" aria-hidden="true">#</a> 1\u3001\u6570\u636E\u6E90\u7684\u81EA\u52A8\u914D\u7F6E-<strong>HikariDataSource</strong></h4><h5 id="_1\u3001\u5BFC\u5165jdbc\u573A\u666F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5BFC\u5165jdbc\u573A\u666F" aria-hidden="true">#</a> 1\u3001\u5BFC\u5165JDBC\u573A\u666F</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-jdbc\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/1354552/1606366100317-5e0199fa-6709-4d32-bce3-bb262e2e5e6a.png?x-oss-process=image%2Fwatermark%2Ctype_d3F5LW1pY3JvaGVp%2Csize_20%2Ctext_YXRndWlndS5jb20g5bCa56GF6LC3%2Ccolor_FFFFFF%2Cshadow_50%2Ct_80%2Cg_se%2Cx_10%2Cy_10" alt="img" loading="lazy"></p><p>\u6570\u636E\u5E93\u9A71\u52A8\uFF1F</p><p>\u4E3A\u4EC0\u4E48\u5BFC\u5165JDBC\u573A\u666F\uFF0C\u5B98\u65B9\u4E0D\u5BFC\u5165\u9A71\u52A8\uFF1F\u5B98\u65B9\u4E0D\u77E5\u9053\u6211\u4EEC\u63A5\u4E0B\u8981\u64CD\u4F5C\u4EC0\u4E48\u6570\u636E\u5E93\u3002</p><p>\u6570\u636E\u5E93\u7248\u672C\u548C\u9A71\u52A8\u7248\u672C\u5BF9\u5E94</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\u9ED8\u8BA4\u7248\u672C\uFF1A\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>8.0.22\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>

        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--            \\&lt;version&gt;5.1.49\\&lt;/version&gt;--&gt;</span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
\u60F3\u8981\u4FEE\u6539\u7248\u672C
1\u3001\u76F4\u63A5\u4F9D\u8D56\u5F15\u5165\u5177\u4F53\u7248\u672C\uFF08maven\u7684\u5C31\u8FD1\u4F9D\u8D56\u539F\u5219\uFF09
2\u3001\u91CD\u65B0\u58F0\u660E\u7248\u672C\uFF08maven\u7684\u5C5E\u6027\u7684\u5C31\u8FD1\u4F18\u5148\u539F\u5219\uFF09
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mysql.version</span><span class="token punctuation">&gt;</span></span>5.1.49\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mysql.version</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2\u3001\u5206\u6790\u81EA\u52A8\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5206\u6790\u81EA\u52A8\u914D\u7F6E" aria-hidden="true">#</a> 2\u3001\u5206\u6790\u81EA\u52A8\u914D\u7F6E</h5><h6 id="_1\u3001\u81EA\u52A8\u914D\u7F6E\u7684\u7C7B" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u81EA\u52A8\u914D\u7F6E\u7684\u7C7B" aria-hidden="true">#</a> 1\u3001\u81EA\u52A8\u914D\u7F6E\u7684\u7C7B</h6><ul><li><p>DataSourceAutoConfiguration \uFF1A \u6570\u636E\u6E90\u7684\u81EA\u52A8\u914D\u7F6E</p></li><li><ul><li>\u4FEE\u6539\u6570\u636E\u6E90\u76F8\u5173\u7684\u914D\u7F6E\uFF1A<strong>spring.datasource</strong></li><li><strong>\u6570\u636E\u5E93\u8FDE\u63A5\u6C60\u7684\u914D\u7F6E\uFF0C\u662F\u81EA\u5DF1\u5BB9\u5668\u4E2D\u6CA1\u6709DataSource\u624D\u81EA\u52A8\u914D\u7F6E\u7684</strong></li><li>\u5E95\u5C42\u914D\u7F6E\u597D\u7684\u8FDE\u63A5\u6C60\u662F\uFF1A<strong>HikariDataSource</strong></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>	<span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">PooledDataSourceCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">XADataSource</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Hikari</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Tomcat</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
			<span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Dbcp2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>OracleUcp</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span>
			<span class="token class-name">DataSourceConfiguration<span class="token punctuation">.</span>Generic</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">DataSourceJmxConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token keyword">protected</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">PooledDataSourceConfiguration</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>DataSourceTransactionManagerAutoConfiguration\uFF1A \u4E8B\u52A1\u7BA1\u7406\u5668\u7684\u81EA\u52A8\u914D\u7F6E</p></li><li><p>JdbcTemplateAutoConfiguration\uFF1A <strong>JdbcTemplate\u7684\u81EA\u52A8\u914D\u7F6E\uFF0C\u53EF\u4EE5\u6765\u5BF9\u6570\u636E\u5E93\u8FDB\u884Ccrud</strong></p></li><li><ul><li>\u53EF\u4EE5\u4FEE\u6539\u8FD9\u4E2A\u914D\u7F6E\u9879@ConfigurationProperties(prefix = <strong>&quot;spring.jdbc&quot;</strong>) \u6765\u4FEE\u6539JdbcTemplate</li><li>@Bean@Primary JdbcTemplate\uFF1B\u5BB9\u5668\u4E2D\u6709\u8FD9\u4E2A\u7EC4\u4EF6</li></ul></li><li><p>JndiDataSourceAutoConfiguration\uFF1A jndi\u7684\u81EA\u52A8\u914D\u7F6E</p></li><li><p>XADataSourceAutoConfiguration\uFF1A \u5206\u5E03\u5F0F\u4E8B\u52A1\u76F8\u5173\u7684</p></li></ul><h5 id="_3\u3001\u4FEE\u6539\u914D\u7F6E\u9879" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u4FEE\u6539\u914D\u7F6E\u9879" aria-hidden="true">#</a> 3\u3001\u4FEE\u6539\u914D\u7F6E\u9879</h5><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/db_account
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_4\u3001\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6D4B\u8BD5" aria-hidden="true">#</a> 4\u3001\u6D4B\u8BD5</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Boot05WebAdminApplicationTests</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">JdbcTemplate</span> jdbcTemplate<span class="token punctuation">;</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token comment">//        jdbcTemplate.queryForObject(&quot;select * from account_tbl&quot;)</span>
<span class="token comment">//        jdbcTemplate.queryForList(&quot;select * from account_tbl&quot;,)</span>
        <span class="token class-name">Long</span> aLong <span class="token operator">=</span> jdbcTemplate<span class="token punctuation">.</span><span class="token function">queryForObject</span><span class="token punctuation">(</span><span class="token string">&quot;select count(*) from account_tbl&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;\u8BB0\u5F55\u603B\u6570\uFF1A{}&quot;</span><span class="token punctuation">,</span>aLong<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u4F7F\u7528druid\u6570\u636E\u6E90" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u4F7F\u7528druid\u6570\u636E\u6E90" aria-hidden="true">#</a> 2\u3001\u4F7F\u7528Druid\u6570\u636E\u6E90</h4><h5 id="_1\u3001druid\u5B98\u65B9github\u5730\u5740" tabindex="-1"><a class="header-anchor" href="#_1\u3001druid\u5B98\u65B9github\u5730\u5740" aria-hidden="true">#</a> 1\u3001druid\u5B98\u65B9github\u5730\u5740</h5>`,30),is={href:"https://github.com/alibaba/druid",target:"_blank",rel:"noopener noreferrer"},ls=s("https://github.com/alibaba/druid"),us=e(`<p>\u6574\u5408\u7B2C\u4E09\u65B9\u6280\u672F\u7684\u4E24\u79CD\u65B9\u5F0F</p><ul><li>\u81EA\u5B9A\u4E49</li><li>\u627Estarter</li></ul><h5 id="_2\u3001\u81EA\u5B9A\u4E49\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u81EA\u5B9A\u4E49\u65B9\u5F0F" aria-hidden="true">#</a> 2\u3001\u81EA\u5B9A\u4E49\u65B9\u5F0F</h5><h5 id="_1\u3001\u521B\u5EFA\u6570\u636E\u6E90" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u521B\u5EFA\u6570\u636E\u6E90" aria-hidden="true">#</a> 1\u3001\u521B\u5EFA\u6570\u636E\u6E90</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.17\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.pool.DruidDataSource<span class="token punctuation">&quot;</span></span>
		<span class="token attr-name">destroy-method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>close<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.url}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.username}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>\${jdbc.password}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxActive<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>initialSize<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxWait<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>timeBetweenEvictionRunsMillis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>60000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>minEvictableIdleTimeMillis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testWhileIdle<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testOnBorrow<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>testOnReturn<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>poolPreparedStatements<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>maxOpenPreparedStatements<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2\u3001statviewservlet" tabindex="-1"><a class="header-anchor" href="#_2\u3001statviewservlet" aria-hidden="true">#</a> 2\u3001StatViewServlet</h6><p>StatViewServlet\u7684\u7528\u9014\u5305\u62EC\uFF1A</p><ul><li>\u63D0\u4F9B\u76D1\u63A7\u4FE1\u606F\u5C55\u793A\u7684html\u9875\u9762</li><li>\u63D0\u4F9B\u76D1\u63A7\u4FE1\u606F\u7684JSON API</li></ul><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>	\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet</span><span class="token punctuation">&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DruidStatView\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-class</span><span class="token punctuation">&gt;</span></span>com.alibaba.druid.support.http.StatViewServlet\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-class</span><span class="token punctuation">&gt;</span></span>
	\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet</span><span class="token punctuation">&gt;</span></span>
	\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servlet-name</span><span class="token punctuation">&gt;</span></span>DruidStatView\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-name</span><span class="token punctuation">&gt;</span></span>
		\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url-pattern</span><span class="token punctuation">&gt;</span></span>/druid/*\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url-pattern</span><span class="token punctuation">&gt;</span></span>
	\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servlet-mapping</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_3\u3001statfilter" tabindex="-1"><a class="header-anchor" href="#_3\u3001statfilter" aria-hidden="true">#</a> 3\u3001StatFilter</h6><p>\u7528\u4E8E\u7EDF\u8BA1\u76D1\u63A7\u4FE1\u606F\uFF1B\u5982SQL\u76D1\u63A7\u3001URI\u76D1\u63A7</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\u9700\u8981\u7ED9\u6570\u636E\u6E90\u4E2D\u914D\u7F6E\u5982\u4E0B\u5C5E\u6027\uFF1B\u53EF\u4EE5\u5141\u8BB8\u591A\u4E2Afilter\uFF0C\u591A\u4E2A\u7528\uFF0C\u5206\u5272\uFF1B\u5982\uFF1A

\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>filters<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stat,slf4j<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7CFB\u7EDF\u4E2D\u6240\u6709filter\uFF1A</p><table><thead><tr><th>\u522B\u540D</th><th>Filter\u7C7B\u540D</th></tr></thead><tbody><tr><td>default</td><td>com.alibaba.druid.filter.stat.StatFilter</td></tr><tr><td>stat</td><td>com.alibaba.druid.filter.stat.StatFilter</td></tr><tr><td>mergeStat</td><td>com.alibaba.druid.filter.stat.MergeStatFilter</td></tr><tr><td>encoding</td><td>com.alibaba.druid.filter.encoding.EncodingConvertFilter</td></tr><tr><td>log4j</td><td>com.alibaba.druid.filter.logging.Log4jFilter</td></tr><tr><td>log4j2</td><td>com.alibaba.druid.filter.logging.Log4j2Filter</td></tr><tr><td>slf4j</td><td>com.alibaba.druid.filter.logging.Slf4jLogFilter</td></tr><tr><td>commonlogging</td><td>com.alibaba.druid.filter.logging.CommonsLogFilter</td></tr></tbody></table><p><strong>\u6162SQL\u8BB0\u5F55\u914D\u7F6E</strong></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stat-filter<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>com.alibaba.druid.filter.stat.StatFilter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>slowSqlMillis<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>logSlowSql<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>

\u4F7F\u7528 slowSqlMillis \u5B9A\u4E49\u6162SQL\u7684\u65F6\u957F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3\u3001\u4F7F\u7528\u5B98\u65B9starter\u65B9\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u4F7F\u7528\u5B98\u65B9starter\u65B9\u5F0F" aria-hidden="true">#</a> 3\u3001\u4F7F\u7528\u5B98\u65B9starter\u65B9\u5F0F</h5><h6 id="_1\u3001\u5F15\u5165druid-starter" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5F15\u5165druid-starter" aria-hidden="true">#</a> 1\u3001\u5F15\u5165druid-starter</h6><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.alibaba\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>druid-spring-boot-starter\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.1.17\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2\u3001\u5206\u6790\u81EA\u52A8\u914D\u7F6E-1" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5206\u6790\u81EA\u52A8\u914D\u7F6E-1" aria-hidden="true">#</a> 2\u3001\u5206\u6790\u81EA\u52A8\u914D\u7F6E</h6><ul><li>\u6269\u5C55\u914D\u7F6E\u9879 <strong>spring.datasource.druid</strong></li><li>DruidSpringAopConfiguration.<strong>class</strong>, \u76D1\u63A7SpringBean\u7684\uFF1B\u914D\u7F6E\u9879\uFF1A<strong>spring.datasource.druid.aop-patterns</strong></li><li>DruidStatViewServletConfiguration.<strong>class</strong>, \u76D1\u63A7\u9875\u7684\u914D\u7F6E\uFF1A<strong>spring.datasource.druid.stat-view-servlet\uFF1B\u9ED8\u8BA4\u5F00\u542F</strong></li><li>DruidWebStatFilterConfiguration.<strong>class</strong>, web\u76D1\u63A7\u914D\u7F6E\uFF1B<strong>spring.datasource.druid.web-stat-filter\uFF1B\u9ED8\u8BA4\u5F00\u542F</strong></li><li>DruidFilterConfiguration.<strong>class</strong>}) \u6240\u6709Druid\u81EA\u5DF1filter\u7684\u914D\u7F6E</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_STAT_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.stat&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_CONFIG_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.config&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_ENCODING_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.encoding&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_SLF4J_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.slf4j&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_LOG4J_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.log4j&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_LOG4J2_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.log4j2&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_COMMONS_LOG_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.commons-log&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> FILTER_WALL_PREFIX <span class="token operator">=</span> <span class="token string">&quot;spring.datasource.druid.filter.wall&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_3\u3001\u914D\u7F6E\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u914D\u7F6E\u793A\u4F8B" aria-hidden="true">#</a> 3\u3001\u914D\u7F6E\u793A\u4F8B</h6><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//localhost<span class="token punctuation">:</span>3306/db_account
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
    <span class="token key atrule">driver-class-name</span><span class="token punctuation">:</span> com.mysql.jdbc.Driver

    <span class="token key atrule">druid</span><span class="token punctuation">:</span>
      <span class="token key atrule">aop-patterns</span><span class="token punctuation">:</span> com.atguigu.admin.*  <span class="token comment">#\u76D1\u63A7SpringBean</span>
      <span class="token key atrule">filters</span><span class="token punctuation">:</span> stat<span class="token punctuation">,</span>wall     <span class="token comment"># \u5E95\u5C42\u5F00\u542F\u529F\u80FD\uFF0Cstat\uFF08sql\u76D1\u63A7\uFF09\uFF0Cwall\uFF08\u9632\u706B\u5899\uFF09</span>

      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span>   <span class="token comment"># \u914D\u7F6E\u76D1\u63A7\u9875\u529F\u80FD</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> admin
        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> admin
        <span class="token key atrule">resetEnable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>

      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>  <span class="token comment"># \u76D1\u63A7web</span>
        <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">urlPattern</span><span class="token punctuation">:</span> /*
        <span class="token key atrule">exclusions</span><span class="token punctuation">:</span> <span class="token string">&#39;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&#39;</span>


      <span class="token key atrule">filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">stat</span><span class="token punctuation">:</span>    <span class="token comment"># \u5BF9\u4E0A\u9762filters\u91CC\u9762\u7684stat\u7684\u8BE6\u7EC6\u914D\u7F6E</span>
          <span class="token key atrule">slow-sql-millis</span><span class="token punctuation">:</span> <span class="token number">1000</span>
          <span class="token key atrule">logSlowSql</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
        <span class="token key atrule">wall</span><span class="token punctuation">:</span>
          <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
          <span class="token key atrule">config</span><span class="token punctuation">:</span>
            <span class="token key atrule">drop-table-allow</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>SpringBoot\u914D\u7F6E\u793A\u4F8B</p>`,25),rs={href:"https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter",target:"_blank",rel:"noopener noreferrer"},ds=s("https://github.com/alibaba/druid/tree/master/druid-spring-boot-starter"),ks=s("\u914D\u7F6E\u9879\u5217\u8868"),ms={href:"https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8",target:"_blank",rel:"noopener noreferrer"},vs=s("https://github.com/alibaba/druid/wiki/DruidDataSource%E9%85%8D%E7%BD%AE%E5%B1%9E%E6%80%A7%E5%88%97%E8%A1%A8"),gs=n("h4",{id:"_3\u3001\u6574\u5408mybatis\u64CD\u4F5C",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3\u3001\u6574\u5408mybatis\u64CD\u4F5C","aria-hidden":"true"},"#"),s(" 3\u3001\u6574\u5408MyBatis\u64CD\u4F5C")],-1),bs={href:"https://github.com/mybatis",target:"_blank",rel:"noopener noreferrer"},hs=s("https://github.com/mybatis"),fs=e(`<p>starter</p><p>SpringBoot\u5B98\u65B9\u7684Starter\uFF1Aspring-boot-starter-*</p><p>\u7B2C\u4E09\u65B9\u7684\uFF1A *-spring-boot-starter</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.1.4\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1606704096118-53001250-a04a-4210-80ee-6de6a370be2e.png" alt="img" loading="lazy"></p><h5 id="_1\u3001\u914D\u7F6E\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u914D\u7F6E\u6A21\u5F0F" aria-hidden="true">#</a> 1\u3001\u914D\u7F6E\u6A21\u5F0F</h5><ul><li>\u5168\u5C40\u914D\u7F6E\u6587\u4EF6</li><li>SqlSessionFactory: \u81EA\u52A8\u914D\u7F6E\u597D\u4E86</li><li>SqlSession\uFF1A\u81EA\u52A8\u914D\u7F6E\u4E86 <strong>SqlSessionTemplate \u7EC4\u5408\u4E86SqlSession</strong></li><li>@Import(<strong>AutoConfiguredMapperScannerRegistrar</strong>.<strong>class</strong>\uFF09\uFF1B</li><li>Mapper\uFF1A \u53EA\u8981\u6211\u4EEC\u5199\u7684\u64CD\u4F5CMyBatis\u7684\u63A5\u53E3\u6807\u51C6\u4E86 <strong>@Mapper \u5C31\u4F1A\u88AB\u81EA\u52A8\u626B\u63CF\u8FDB\u6765</strong></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">MybatisProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> \uFF1A <span class="token class-name">MyBatis</span>\u914D\u7F6E\u9879\u7ED1\u5B9A\u7C7B\u3002
<span class="token annotation punctuation">@AutoConfigureAfter</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">DataSourceAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MybatisLanguageDriverAutoConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisAutoConfiguration</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;mybatis&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MybatisProperties</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u4E2D mybatis \u5F00\u59CB\u7684\u6240\u6709\uFF1B</p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># \u914D\u7F6Emybatis\u89C4\u5219</span>
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">config-location</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mybatis<span class="token punctuation">-</span>config.xml  <span class="token comment">#\u5168\u5C40\u914D\u7F6E\u6587\u4EF6\u4F4D\u7F6E</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mapper/<span class="token important">*.xml</span>  <span class="token comment">#sql\u6620\u5C04\u6587\u4EF6\u4F4D\u7F6E</span>
  
Mapper\u63A5\u53E3<span class="token punctuation">---</span><span class="token punctuation">&gt;</span>\u7ED1\u5B9AXml
\\&lt;<span class="token punctuation">?</span>xml version=&quot;1.0&quot; encoding=&quot;UTF<span class="token punctuation">-</span>8&quot; <span class="token punctuation">?</span><span class="token punctuation">&gt;</span>
\\&lt;<span class="token tag">!DOCTYPE</span> mapper
        PUBLIC &quot;<span class="token punctuation">-</span>//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http<span class="token punctuation">:</span>//mybatis.org/dtd/mybatis<span class="token punctuation">-</span>3<span class="token punctuation">-</span>mapper.dtd&quot;<span class="token punctuation">&gt;</span>
\\&lt;mapper namespace=&quot;com.atguigu.admin.mapper.AccountMapper&quot;<span class="token punctuation">&gt;</span>
&lt;<span class="token tag">!--</span>    public Account getAcct(Long id); <span class="token punctuation">-</span><span class="token punctuation">-</span><span class="token punctuation">&gt;</span><span class="token scalar string">
    \\&lt;select id=&quot;getAcct&quot; resultType=&quot;com.atguigu.admin.bean.Account&quot;&gt;
        select * from  account_tbl where  id=#{id}
    \\&lt;/select&gt;</span>
\\&lt;/mapper<span class="token punctuation">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u914D\u7F6E <strong>private</strong> Configuration <strong>configuration</strong>; mybatis.<strong>configuration\u4E0B\u9762\u7684\u6240\u6709\uFF0C\u5C31\u662F\u76F8\u5F53\u4E8E\u6539mybatis\u5168\u5C40\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u503C</strong></p><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token comment"># \u914D\u7F6Emybatis\u89C4\u5219</span>
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
<span class="token comment">#  config-location: classpath:mybatis/mybatis-config.xml</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>mybatis/mapper/<span class="token important">*.xml</span>
  <span class="token key atrule">configuration</span><span class="token punctuation">:</span>
    <span class="token key atrule">map-underscore-to-camel-case</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    
 \u53EF\u4EE5\u4E0D\u5199\u5168\u5C40\uFF1B\u914D\u7F6E\u6587\u4EF6\uFF0C\u6240\u6709\u5168\u5C40\u914D\u7F6E\u6587\u4EF6\u7684\u914D\u7F6E\u90FD\u653E\u5728configuration\u914D\u7F6E\u9879\u4E2D\u5373\u53EF
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5BFC\u5165mybatis\u5B98\u65B9starter</li><li>\u7F16\u5199mapper\u63A5\u53E3\u3002\u6807\u51C6@Mapper\u6CE8\u89E3</li><li>\u7F16\u5199sql\u6620\u5C04\u6587\u4EF6\u5E76\u7ED1\u5B9Amapper\u63A5\u53E3</li><li>\u5728application.yaml\u4E2D\u6307\u5B9AMapper\u914D\u7F6E\u6587\u4EF6\u7684\u4F4D\u7F6E\uFF0C\u4EE5\u53CA\u6307\u5B9A\u5168\u5C40\u914D\u7F6E\u6587\u4EF6\u7684\u4FE1\u606F \uFF08\u5EFA\u8BAE\uFF1B<strong>\u914D\u7F6E\u5728mybatis.configuration</strong>\uFF09</li></ul><h5 id="_2\u3001\u6CE8\u89E3\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6CE8\u89E3\u6A21\u5F0F" aria-hidden="true">#</a> 2\u3001\u6CE8\u89E3\u6A21\u5F0F</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CityMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from city where id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">City</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">City</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3\u3001\u6DF7\u5408\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u6DF7\u5408\u6A21\u5F0F" aria-hidden="true">#</a> 3\u3001\u6DF7\u5408\u6A21\u5F0F</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CityMapper</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from city where id=#{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">City</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token class-name">Long</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">City</span> city<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u6700\u4F73\u5B9E\u6218\uFF1A</strong></p><ul><li>\u5F15\u5165mybatis-starter</li><li><strong>\u914D\u7F6Eapplication.yaml\u4E2D\uFF0C\u6307\u5B9Amapper-location\u4F4D\u7F6E\u5373\u53EF</strong></li><li>\u7F16\u5199Mapper\u63A5\u53E3\u5E76\u6807\u6CE8@Mapper\u6CE8\u89E3</li><li>\u7B80\u5355\u65B9\u6CD5\u76F4\u63A5\u6CE8\u89E3\u65B9\u5F0F</li><li>\u590D\u6742\u65B9\u6CD5\u7F16\u5199mapper.xml\u8FDB\u884C\u7ED1\u5B9A\u6620\u5C04</li><li><em>@MapperScan(&quot;com.atguigu.admin.mapper&quot;) \u7B80\u5316\uFF0C\u5176\u4ED6\u7684\u63A5\u53E3\u5C31\u53EF\u4EE5\u4E0D\u7528\u6807\u6CE8@Mapper\u6CE8\u89E3</em></li></ul><h4 id="_4\u3001\u6574\u5408-mybatis-plus-\u5B8C\u6210crud" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6574\u5408-mybatis-plus-\u5B8C\u6210crud" aria-hidden="true">#</a> 4\u3001\u6574\u5408 MyBatis-Plus \u5B8C\u6210CRUD</h4><h5 id="_1\u3001\u4EC0\u4E48\u662Fmybatis-plus" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u4EC0\u4E48\u662Fmybatis-plus" aria-hidden="true">#</a> 1\u3001\u4EC0\u4E48\u662FMyBatis-Plus</h5>`,21),ys={href:"https://github.com/baomidou/mybatis-plus",target:"_blank",rel:"noopener noreferrer"},ws=s("MyBatis-Plus"),qs=s("\uFF08\u7B80\u79F0 MP\uFF09\u662F\u4E00\u4E2A "),_s={href:"http://www.mybatis.org/mybatis-3/",target:"_blank",rel:"noopener noreferrer"},xs=s("MyBatis"),Ss=s(" \u7684\u589E\u5F3A\u5DE5\u5177\uFF0C\u5728 MyBatis \u7684\u57FA\u7840\u4E0A\u53EA\u505A\u589E\u5F3A\u4E0D\u505A\u6539\u53D8\uFF0C\u4E3A\u7B80\u5316\u5F00\u53D1\u3001\u63D0\u9AD8\u6548\u7387\u800C\u751F\u3002"),Cs={href:"https://baomidou.com/",target:"_blank",rel:"noopener noreferrer"},As=s("mybatis plus \u5B98\u7F51"),Ms=e(`<p>\u5EFA\u8BAE\u5B89\u88C5 <strong>MybatisX</strong> \u63D2\u4EF6</p><h5 id="_2\u3001\u6574\u5408mybatis-plus" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6574\u5408mybatis-plus" aria-hidden="true">#</a> 2\u3001\u6574\u5408MyBatis-Plus</h5><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.baomidou\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-plus-boot-starter\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.4.1\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u81EA\u52A8\u914D\u7F6E</p><ul><li>MybatisPlusAutoConfiguration \u914D\u7F6E\u7C7B\uFF0CMybatisPlusProperties \u914D\u7F6E\u9879\u7ED1\u5B9A\u3002<strong>mybatis-plus\uFF1Axxx \u5C31\u662F\u5BF9****mybatis-plus\u7684\u5B9A\u5236</strong></li><li><strong>SqlSessionFactory \u81EA\u52A8\u914D\u7F6E\u597D\u3002\u5E95\u5C42\u662F\u5BB9\u5668\u4E2D\u9ED8\u8BA4\u7684\u6570\u636E\u6E90</strong></li><li>**mapperLocations \u81EA\u52A8\u914D\u7F6E\u597D\u7684\u3002\u6709\u9ED8\u8BA4\u503C\u3002*<strong><em>classpath*:/mapper/*</em>/*.xml\uFF1B\u4EFB\u610F\u5305\u7684\u7C7B\u8DEF\u5F84\u4E0B\u7684\u6240\u6709mapper\u6587\u4EF6\u5939\u4E0B\u4EFB\u610F\u8DEF\u5F84\u4E0B\u7684\u6240\u6709xml\u90FD\u662Fsql\u6620\u5C04\u6587\u4EF6\u3002 \u5EFA\u8BAE\u4EE5\u540Esql\u6620\u5C04\u6587\u4EF6\uFF0C\u653E\u5728 mapper\u4E0B</strong></li><li><strong>\u5BB9\u5668\u4E2D\u4E5F\u81EA\u52A8\u914D\u7F6E\u597D\u4E86</strong> <strong>SqlSessionTemplate</strong></li><li><strong>@Mapper \u6807\u6CE8\u7684\u63A5\u53E3\u4E5F\u4F1A\u88AB\u81EA\u52A8\u626B\u63CF\uFF1B\u5EFA\u8BAE\u76F4\u63A5</strong> @MapperScan(<strong>&quot;com.atguigu.admin.mapper&quot;</strong>) \u6279\u91CF\u626B\u63CF\u5C31\u884C</li></ul><p><strong>\u4F18\u70B9\uFF1A</strong></p><ul><li>\u53EA\u9700\u8981\u6211\u4EEC\u7684Mapper\u7EE7\u627F <strong>BaseMapper</strong> \u5C31\u53EF\u4EE5\u62E5\u6709crud\u80FD\u529B</li></ul><h5 id="_3\u3001crud\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_3\u3001crud\u529F\u80FD" aria-hidden="true">#</a> 3\u3001CRUD\u529F\u80FD</h5><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/user/delete/{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">deleteUser</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Long</span> id<span class="token punctuation">,</span>
                             <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;pn&quot;</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token class-name">Integer</span> pn<span class="token punctuation">,</span>
                             <span class="token class-name">RedirectAttributes</span> ra<span class="token punctuation">)</span><span class="token punctuation">{</span>

        userService<span class="token punctuation">.</span><span class="token function">removeById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>

        ra<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;pn&quot;</span><span class="token punctuation">,</span>pn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;redirect:/dynamic_table&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/dynamic_table&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">dynamic_table</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token string">&quot;pn&quot;</span><span class="token punctuation">,</span>defaultValue <span class="token operator">=</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> pn<span class="token punctuation">,</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//\u8868\u683C\u5185\u5BB9\u7684\u904D\u5386</span>
<span class="token comment">//        response.sendError</span>
<span class="token comment">//     List\\&lt;User&gt; users = Arrays.asList(new User(&quot;zhangsan&quot;, &quot;123456&quot;),</span>
<span class="token comment">//                new User(&quot;lisi&quot;, &quot;123444&quot;),</span>
<span class="token comment">//                new User(&quot;haha&quot;, &quot;aaaaa&quot;),</span>
<span class="token comment">//                new User(&quot;hehe &quot;, &quot;aaddd&quot;));</span>
<span class="token comment">//        model.addAttribute(&quot;users&quot;,users);</span>
<span class="token comment">//</span>
<span class="token comment">//        if(users.size()&gt;3){</span>
<span class="token comment">//            throw new UserTooManyException();</span>
<span class="token comment">//        }</span>
        <span class="token comment">//\u4ECE\u6570\u636E\u5E93\u4E2D\u67E5\u51FAuser\u8868\u4E2D\u7684\u7528\u6237\u8FDB\u884C\u5C55\u793A</span>

        <span class="token comment">//\u6784\u9020\u5206\u9875\u53C2\u6570</span>
        <span class="token class-name">Page</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> page <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Page</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span>pn<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//\u8C03\u7528page\u8FDB\u884C\u5206\u9875</span>
        <span class="token class-name">Page</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> userPage <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span>page<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">//        userPage.getRecords()</span>
<span class="token comment">//        userPage.getCurrent()</span>
<span class="token comment">//        userPage.getPages()</span>


        model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;users&quot;</span><span class="token punctuation">,</span>userPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token string">&quot;table/dynamic_table&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceImpl</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">UserMapper</span><span class="token punctuation">,</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>


<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">UserService</span> <span class="token keyword">extends</span> <span class="token class-name">IService</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">User</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001nosql" tabindex="-1"><a class="header-anchor" href="#_2\u3001nosql" aria-hidden="true">#</a> 2\u3001NoSQL</h3>`,11),js=s("Redis \u662F\u4E00\u4E2A\u5F00\u6E90\uFF08BSD\u8BB8\u53EF\uFF09\u7684\uFF0C\u5185\u5B58\u4E2D\u7684\u6570\u636E\u7ED3\u6784\u5B58\u50A8\u7CFB\u7EDF\uFF0C\u5B83\u53EF\u4EE5\u7528\u4F5C\u6570\u636E\u5E93\u3001"),Rs=n("strong",null,"\u7F13\u5B58",-1),Ps=s("\u548C\u6D88\u606F\u4E2D\u95F4\u4EF6\u3002 \u5B83\u652F\u6301\u591A\u79CD\u7C7B\u578B\u7684\u6570\u636E\u7ED3\u6784\uFF0C\u5982 "),Es={href:"http://www.redis.cn/topics/data-types-intro.html#strings",target:"_blank",rel:"noopener noreferrer"},Is=s("\u5B57\u7B26\u4E32\uFF08strings\uFF09"),Ts=s("\uFF0C "),Bs={href:"http://www.redis.cn/topics/data-types-intro.html#hashes",target:"_blank",rel:"noopener noreferrer"},Fs=s("\u6563\u5217\uFF08hashes\uFF09"),Hs=s("\uFF0C "),Ls={href:"http://www.redis.cn/topics/data-types-intro.html#lists",target:"_blank",rel:"noopener noreferrer"},Ds=s("\u5217\u8868\uFF08lists\uFF09"),Ns=s("\uFF0C "),Os={href:"http://www.redis.cn/topics/data-types-intro.html#sets",target:"_blank",rel:"noopener noreferrer"},Vs=s("\u96C6\u5408\uFF08sets\uFF09"),Us=s("\uFF0C "),Ws={href:"http://www.redis.cn/topics/data-types-intro.html#sorted-sets",target:"_blank",rel:"noopener noreferrer"},zs=s("\u6709\u5E8F\u96C6\u5408\uFF08sorted sets\uFF09"),Js=s(" \u4E0E\u8303\u56F4\u67E5\u8BE2\uFF0C "),Ys={href:"http://www.redis.cn/topics/data-types-intro.html#bitmaps",target:"_blank",rel:"noopener noreferrer"},Gs=s("bitmaps"),Xs=s("\uFF0C "),$s={href:"http://www.redis.cn/topics/data-types-intro.html#hyperloglogs",target:"_blank",rel:"noopener noreferrer"},Qs=s("hyperloglogs"),Ks=s(" \u548C "),Zs={href:"http://www.redis.cn/commands/geoadd.html",target:"_blank",rel:"noopener noreferrer"},na=s("\u5730\u7406\u7A7A\u95F4\uFF08geospatial\uFF09"),sa=s(" \u7D22\u5F15\u534A\u5F84\u67E5\u8BE2\u3002 Redis \u5185\u7F6E\u4E86 "),aa={href:"http://www.redis.cn/topics/replication.html",target:"_blank",rel:"noopener noreferrer"},ta=s("\u590D\u5236\uFF08replication\uFF09"),ea=s("\uFF0C"),pa={href:"http://www.redis.cn/commands/eval.html",target:"_blank",rel:"noopener noreferrer"},oa=s("LUA\u811A\u672C\uFF08Lua scripting\uFF09"),ca=s("\uFF0C "),ia={href:"http://www.redis.cn/topics/lru-cache.html",target:"_blank",rel:"noopener noreferrer"},la=s("LRU\u9A71\u52A8\u4E8B\u4EF6\uFF08LRU eviction\uFF09"),ua=s("\uFF0C"),ra={href:"http://www.redis.cn/topics/transactions.html",target:"_blank",rel:"noopener noreferrer"},da=s("\u4E8B\u52A1\uFF08transactions\uFF09"),ka=s(" \u548C\u4E0D\u540C\u7EA7\u522B\u7684 "),ma={href:"http://www.redis.cn/topics/persistence.html",target:"_blank",rel:"noopener noreferrer"},va=s("\u78C1\u76D8\u6301\u4E45\u5316\uFF08persistence\uFF09"),ga=s("\uFF0C \u5E76\u901A\u8FC7 "),ba={href:"http://www.redis.cn/topics/sentinel.html",target:"_blank",rel:"noopener noreferrer"},ha=s("Redis\u54E8\u5175\uFF08Sentinel\uFF09"),fa=s("\u548C\u81EA\u52A8 "),ya={href:"http://www.redis.cn/topics/cluster-tutorial.html",target:"_blank",rel:"noopener noreferrer"},wa=s("\u5206\u533A\uFF08Cluster\uFF09"),qa=s("\u63D0\u4F9B\u9AD8\u53EF\u7528\u6027\uFF08high availability\uFF09\u3002"),_a=e(`<h4 id="_1\u3001redis\u81EA\u52A8\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_1\u3001redis\u81EA\u52A8\u914D\u7F6E" aria-hidden="true">#</a> 1\u3001Redis\u81EA\u52A8\u914D\u7F6E</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1606745732785-17d1227a-75b9-4f00-a3f1-7fc4137b5113.png" alt="img" loading="lazy"></p><p>\u81EA\u52A8\u914D\u7F6E\uFF1A</p><ul><li>RedisAutoConfiguration \u81EA\u52A8\u914D\u7F6E\u7C7B\u3002RedisProperties \u5C5E\u6027\u7C7B --&gt; <strong>spring.redis.xxx\u662F\u5BF9redis\u7684\u914D\u7F6E</strong></li><li>\u8FDE\u63A5\u5DE5\u5382\u662F\u51C6\u5907\u597D\u7684\u3002<strong>Lettuce</strong>ConnectionConfiguration\u3001<strong>Jedis</strong>ConnectionConfiguration</li><li><strong>\u81EA\u52A8\u6CE8\u5165\u4E86RedisTemplate</strong>&lt;<strong>Object</strong>, <strong>Object</strong>&gt; \uFF1A xxxTemplate\uFF1B</li><li><strong>\u81EA\u52A8\u6CE8\u5165\u4E86StringRedisTemplate\uFF1Bk\uFF1Av\u90FD\u662FString</strong></li><li><strong>key\uFF1Avalue</strong></li><li><strong>\u5E95\u5C42\u53EA\u8981\u6211\u4EEC\u4F7F\u7528</strong> **StringRedisTemplate\u3001**<strong>RedisTemplate\u5C31\u53EF\u4EE5\u64CD\u4F5Credis</strong></li></ul><p><strong>redis\u73AF\u5883\u642D\u5EFA</strong></p><p><strong>1\u3001\u963F\u91CC\u4E91\u6309\u91CF\u4ED8\u8D39redis\u3002\u7ECF\u5178\u7F51\u7EDC</strong></p><p><strong>2\u3001\u7533\u8BF7redis\u7684\u516C\u7F51\u8FDE\u63A5\u5730\u5740</strong></p><p><strong>3\u3001\u4FEE\u6539\u767D\u540D\u5355 \u5141\u8BB80.0.0.0/0 \u8BBF\u95EE</strong></p><h4 id="_2\u3001redistemplate\u4E0Elettuce" tabindex="-1"><a class="header-anchor" href="#_2\u3001redistemplate\u4E0Elettuce" aria-hidden="true">#</a> 2\u3001RedisTemplate\u4E0ELettuce</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">testRedis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">ValueOperations</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> operations <span class="token operator">=</span> redisTemplate<span class="token punctuation">.</span><span class="token function">opsForValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        operations<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">String</span> hello <span class="token operator">=</span> operations<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>hello<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u5207\u6362\u81F3jedis" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5207\u6362\u81F3jedis" aria-hidden="true">#</a> 3\u3001\u5207\u6362\u81F3jedis</h4><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-data-redis\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!--        \u5BFC\u5165jedis--&gt;</span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>redis.clients\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>jedis\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
spring:
  redis:
      host: r-bp1nc7reqesxisgxpipd.redis.rds.aliyuncs.com
      port: 6379
      password: lfy:Lfy123456
      client-type: jedis
      jedis:
        pool:
          max-active: 10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_4-\u5355\u5143\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_4-\u5355\u5143\u6D4B\u8BD5" aria-hidden="true">#</a> 4.\u5355\u5143\u6D4B\u8BD5</h2><h3 id="_1\u3001junit5-\u7684\u53D8\u5316" tabindex="-1"><a class="header-anchor" href="#_1\u3001junit5-\u7684\u53D8\u5316" aria-hidden="true">#</a> 1\u3001JUnit5 \u7684\u53D8\u5316</h3><p><strong>Spring Boot 2.2.0 \u7248\u672C\u5F00\u59CB\u5F15\u5165 JUnit 5 \u4F5C\u4E3A\u5355\u5143\u6D4B\u8BD5\u9ED8\u8BA4\u5E93</strong></p><p>\u4F5C\u4E3A\u6700\u65B0\u7248\u672C\u7684JUnit\u6846\u67B6\uFF0CJUnit5\u4E0E\u4E4B\u524D\u7248\u672C\u7684Junit\u6846\u67B6\u6709\u5F88\u5927\u7684\u4E0D\u540C\u3002\u7531\u4E09\u4E2A\u4E0D\u540C\u5B50\u9879\u76EE\u7684\u51E0\u4E2A\u4E0D\u540C\u6A21\u5757\u7EC4\u6210\u3002</p><p><strong>JUnit 5 = JUnit Platform + JUnit Jupiter + JUnit Vintage</strong></p><p><strong>JUnit Platform</strong>: Junit Platform\u662F\u5728JVM\u4E0A\u542F\u52A8\u6D4B\u8BD5\u6846\u67B6\u7684\u57FA\u7840\uFF0C\u4E0D\u4EC5\u652F\u6301Junit\u81EA\u5236\u7684\u6D4B\u8BD5\u5F15\u64CE\uFF0C\u5176\u4ED6\u6D4B\u8BD5\u5F15\u64CE\u4E5F\u90FD\u53EF\u4EE5\u63A5\u5165\u3002</p><p><strong>JUnit Jupiter</strong>: JUnit Jupiter\u63D0\u4F9B\u4E86JUnit5\u7684\u65B0\u7684\u7F16\u7A0B\u6A21\u578B\uFF0C\u662FJUnit5\u65B0\u7279\u6027\u7684\u6838\u5FC3\u3002\u5185\u90E8 \u5305\u542B\u4E86\u4E00\u4E2A<strong>\u6D4B\u8BD5\u5F15\u64CE</strong>\uFF0C\u7528\u4E8E\u5728Junit Platform\u4E0A\u8FD0\u884C\u3002</p><p><strong>JUnit Vintage</strong>: \u7531\u4E8EJUint\u5DF2\u7ECF\u53D1\u5C55\u591A\u5E74\uFF0C\u4E3A\u4E86\u7167\u987E\u8001\u7684\u9879\u76EE\uFF0CJUnit Vintage\u63D0\u4F9B\u4E86\u517C\u5BB9JUnit4.x,Junit3.x\u7684\u6D4B\u8BD5\u5F15\u64CE\u3002</p><p><img src="http://qnimg.gisfsde.com/work/1606796395719-eb57ab48-ae44-45e5-8d2e-c4d507aff49a.png" alt="img" loading="lazy"></p><p>\u6CE8\u610F\uFF1A</p><p><strong>SpringBoot 2.4 \u4EE5\u4E0A\u7248\u672C\u79FB\u9664\u4E86\u9ED8\u8BA4\u5BF9</strong> <strong>Vintage \u7684\u4F9D\u8D56\u3002\u5982\u679C\u9700\u8981\u517C\u5BB9junit4\u9700\u8981\u81EA\u884C\u5F15\u5165\uFF08\u4E0D\u80FD\u4F7F\u7528junit4\u7684\u529F\u80FD @Test</strong>**\uFF09**</p><p><strong>JUnit 5\u2019s Vintage Engine Removed from</strong> <code>**spring-boot-starter-test,\u5982\u679C\u9700\u8981\u7EE7\u7EED\u517C\u5BB9junit4\u9700\u8981\u81EA\u884C\u5F15\u5165vintage**</code></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.vintage\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-vintage-engine\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.hamcrest\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>hamcrest-core\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
    \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1606797616337-e73010e9-9cac-496d-a177-64b677af5a3d.png" alt="img" loading="lazy"></p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\u7248\u672C\uFF1A</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootTest</span>
<span class="token keyword">class</span> <span class="token class-name">Boot05WebAdminApplicationTests</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">void</span> <span class="token function">contextLoads</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u524D\uFF1A</p><p>@SpringBootTest + @RunWith(SpringTest.class)</p><p>SpringBoot\u6574\u5408Junit\u4EE5\u540E\u3002</p><ul><li>\u7F16\u5199\u6D4B\u8BD5\u65B9\u6CD5\uFF1A@Test\u6807\u6CE8\uFF08\u6CE8\u610F\u9700\u8981\u4F7F\u7528junit5\u7248\u672C\u7684\u6CE8\u89E3\uFF09</li><li>Junit\u7C7B\u5177\u6709Spring\u7684\u529F\u80FD\uFF0C@Autowired\u3001\u6BD4\u5982 @Transactional \u6807\u6CE8\u6D4B\u8BD5\u65B9\u6CD5\uFF0C\u6D4B\u8BD5\u5B8C\u6210\u540E\u81EA\u52A8\u56DE\u6EDA</li></ul><h3 id="_2\u3001junit5\u5E38\u7528\u6CE8\u89E3" tabindex="-1"><a class="header-anchor" href="#_2\u3001junit5\u5E38\u7528\u6CE8\u89E3" aria-hidden="true">#</a> 2\u3001JUnit5\u5E38\u7528\u6CE8\u89E3</h3><p>JUnit5\u7684\u6CE8\u89E3\u4E0EJUnit4\u7684\u6CE8\u89E3\u6709\u6240\u53D8\u5316</p>`,36),xa={href:"https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations",target:"_blank",rel:"noopener noreferrer"},Sa=s("https://junit.org/junit5/docs/current/user-guide/#writing-tests-annotations"),Ca=e(`<ul><li>**@Test \u{1F617}*\u8868\u793A\u65B9\u6CD5\u662F\u6D4B\u8BD5\u65B9\u6CD5\u3002\u4F46\u662F\u4E0EJUnit4\u7684@Test\u4E0D\u540C\uFF0C\u4ED6\u7684\u804C\u8D23\u975E\u5E38\u5355\u4E00\u4E0D\u80FD\u58F0\u660E\u4EFB\u4F55\u5C5E\u6027\uFF0C\u62D3\u5C55\u7684\u6D4B\u8BD5\u5C06\u4F1A\u7531Jupiter\u63D0\u4F9B\u989D\u5916\u6D4B\u8BD5</li><li>**@ParameterizedTest \u{1F617}*\u8868\u793A\u65B9\u6CD5\u662F\u53C2\u6570\u5316\u6D4B\u8BD5\uFF0C\u4E0B\u65B9\u4F1A\u6709\u8BE6\u7EC6\u4ECB\u7ECD</li><li>**@RepeatedTest \u{1F617}*\u8868\u793A\u65B9\u6CD5\u53EF\u91CD\u590D\u6267\u884C\uFF0C\u4E0B\u65B9\u4F1A\u6709\u8BE6\u7EC6\u4ECB\u7ECD</li><li>**@DisplayName \u{1F617}*\u4E3A\u6D4B\u8BD5\u7C7B\u6216\u8005\u6D4B\u8BD5\u65B9\u6CD5\u8BBE\u7F6E\u5C55\u793A\u540D\u79F0</li><li>**@BeforeEach \u{1F617}*\u8868\u793A\u5728\u6BCF\u4E2A\u5355\u5143\u6D4B\u8BD5\u4E4B\u524D\u6267\u884C</li><li>**@AfterEach \u{1F617}*\u8868\u793A\u5728\u6BCF\u4E2A\u5355\u5143\u6D4B\u8BD5\u4E4B\u540E\u6267\u884C</li><li>**@BeforeAll \u{1F617}*\u8868\u793A\u5728\u6240\u6709\u5355\u5143\u6D4B\u8BD5\u4E4B\u524D\u6267\u884C</li><li>**@AfterAll \u{1F617}*\u8868\u793A\u5728\u6240\u6709\u5355\u5143\u6D4B\u8BD5\u4E4B\u540E\u6267\u884C</li><li>**@Tag \u{1F617}*\u8868\u793A\u5355\u5143\u6D4B\u8BD5\u7C7B\u522B\uFF0C\u7C7B\u4F3C\u4E8EJUnit4\u4E2D\u7684@Categories</li><li>**@Disabled \u{1F617}*\u8868\u793A\u6D4B\u8BD5\u7C7B\u6216\u6D4B\u8BD5\u65B9\u6CD5\u4E0D\u6267\u884C\uFF0C\u7C7B\u4F3C\u4E8EJUnit4\u4E2D\u7684@Ignore</li><li>**@Timeout \u{1F617}*\u8868\u793A\u6D4B\u8BD5\u65B9\u6CD5\u8FD0\u884C\u5982\u679C\u8D85\u8FC7\u4E86\u6307\u5B9A\u65F6\u95F4\u5C06\u4F1A\u8FD4\u56DE\u9519\u8BEF</li><li>**@ExtendWith \u{1F617}*\u4E3A\u6D4B\u8BD5\u7C7B\u6216\u6D4B\u8BD5\u65B9\u6CD5\u63D0\u4F9B\u6269\u5C55\u7C7B\u5F15\u7528</li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>jupiter<span class="token punctuation">.</span>api<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span> <span class="token comment">//\u6CE8\u610F\u8FD9\u91CC\u4F7F\u7528\u7684\u662Fjupiter\u7684Test\u6CE8\u89E3\uFF01\uFF01</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TestDemo</span> <span class="token punctuation">{</span>

  <span class="token annotation punctuation">@Test</span>
  <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;\u7B2C\u4E00\u6B21\u6D4B\u8BD5&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">firstTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3\u3001\u65AD\u8A00-assertions" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u65AD\u8A00-assertions" aria-hidden="true">#</a> 3\u3001\u65AD\u8A00\uFF08assertions\uFF09</h3><p>\u65AD\u8A00\uFF08assertions\uFF09\u662F\u6D4B\u8BD5\u65B9\u6CD5\u4E2D\u7684\u6838\u5FC3\u90E8\u5206\uFF0C\u7528\u6765\u5BF9\u6D4B\u8BD5\u9700\u8981\u6EE1\u8DB3\u7684\u6761\u4EF6\u8FDB\u884C\u9A8C\u8BC1\u3002<strong>\u8FD9\u4E9B\u65AD\u8A00\u65B9\u6CD5\u90FD\u662F org.junit.jupiter.api.Assertions \u7684\u9759\u6001\u65B9\u6CD5</strong>\u3002JUnit 5 \u5185\u7F6E\u7684\u65AD\u8A00\u53EF\u4EE5\u5206\u6210\u5982\u4E0B\u51E0\u4E2A\u7C7B\u522B\uFF1A</p><p><strong>\u68C0\u67E5\u4E1A\u52A1\u903B\u8F91\u8FD4\u56DE\u7684\u6570\u636E\u662F\u5426\u5408\u7406\u3002</strong></p><p><strong>\u6240\u6709\u7684\u6D4B\u8BD5\u8FD0\u884C\u7ED3\u675F\u4EE5\u540E\uFF0C\u4F1A\u6709\u4E00\u4E2A\u8BE6\u7EC6\u7684\u6D4B\u8BD5\u62A5\u544A\uFF1B</strong></p><h4 id="_1\u3001\u7B80\u5355\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u7B80\u5355\u65AD\u8A00" aria-hidden="true">#</a> 1\u3001\u7B80\u5355\u65AD\u8A00</h4><p>\u7528\u6765\u5BF9\u5355\u4E2A\u503C\u8FDB\u884C\u7B80\u5355\u7684\u9A8C\u8BC1\u3002\u5982\uFF1A</p><table><thead><tr><th>\u65B9\u6CD5</th><th>\u8BF4\u660E</th></tr></thead><tbody><tr><td>assertEquals</td><td>\u5224\u65AD\u4E24\u4E2A\u5BF9\u8C61\u6216\u4E24\u4E2A\u539F\u59CB\u7C7B\u578B\u662F\u5426\u76F8\u7B49</td></tr><tr><td>assertNotEquals</td><td>\u5224\u65AD\u4E24\u4E2A\u5BF9\u8C61\u6216\u4E24\u4E2A\u539F\u59CB\u7C7B\u578B\u662F\u5426\u4E0D\u76F8\u7B49</td></tr><tr><td>assertSame</td><td>\u5224\u65AD\u4E24\u4E2A\u5BF9\u8C61\u5F15\u7528\u662F\u5426\u6307\u5411\u540C\u4E00\u4E2A\u5BF9\u8C61</td></tr><tr><td>assertNotSame</td><td>\u5224\u65AD\u4E24\u4E2A\u5BF9\u8C61\u5F15\u7528\u662F\u5426\u6307\u5411\u4E0D\u540C\u7684\u5BF9\u8C61</td></tr><tr><td>assertTrue</td><td>\u5224\u65AD\u7ED9\u5B9A\u7684\u5E03\u5C14\u503C\u662F\u5426\u4E3A true</td></tr><tr><td>assertFalse</td><td>\u5224\u65AD\u7ED9\u5B9A\u7684\u5E03\u5C14\u503C\u662F\u5426\u4E3A false</td></tr><tr><td>assertNull</td><td>\u5224\u65AD\u7ED9\u5B9A\u7684\u5BF9\u8C61\u5F15\u7528\u662F\u5426\u4E3A null</td></tr><tr><td>assertNotNull</td><td>\u5224\u65AD\u7ED9\u5B9A\u7684\u5BF9\u8C61\u5F15\u7528\u662F\u5426\u4E0D\u4E3A null</td></tr></tbody></table><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;simple assertion&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">simple</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;simple math&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertNotEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token function">assertNotSame</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token class-name">Object</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertSame</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token function">assertFalse</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token number">1</span> \\<span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token function">assertNull</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token function">assertNotNull</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u6570\u7EC4\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u6570\u7EC4\u65AD\u8A00" aria-hidden="true">#</a> 2\u3001\u6570\u7EC4\u65AD\u8A00</h4><p>\u901A\u8FC7 assertArrayEquals \u65B9\u6CD5\u6765\u5224\u65AD\u4E24\u4E2A\u5BF9\u8C61\u6216\u539F\u59CB\u7C7B\u578B\u7684\u6570\u7EC4\u662F\u5426\u76F8\u7B49</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;array assertion&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function">assertArrayEquals</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001\u7EC4\u5408\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u7EC4\u5408\u65AD\u8A00" aria-hidden="true">#</a> 3\u3001\u7EC4\u5408\u65AD\u8A00</h4><p>assertAll \u65B9\u6CD5\u63A5\u53D7\u591A\u4E2A org.junit.jupiter.api.Executable \u51FD\u6570\u5F0F\u63A5\u53E3\u7684\u5B9E\u4F8B\u4F5C\u4E3A\u8981\u9A8C\u8BC1\u7684\u65AD\u8A00\uFF0C\u53EF\u4EE5\u901A\u8FC7 lambda \u8868\u8FBE\u5F0F\u5F88\u5BB9\u6613\u7684\u63D0\u4F9B\u8FD9\u4E9B\u65AD\u8A00</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;assert all&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function">assertAll</span><span class="token punctuation">(</span><span class="token string">&quot;Math&quot;</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
 <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u5F02\u5E38\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u5F02\u5E38\u65AD\u8A00" aria-hidden="true">#</a> 4\u3001\u5F02\u5E38\u65AD\u8A00</h4><p>\u5728JUnit4\u65F6\u671F\uFF0C\u60F3\u8981\u6D4B\u8BD5\u65B9\u6CD5\u7684\u5F02\u5E38\u60C5\u51B5\u65F6\uFF0C\u9700\u8981\u7528**@Rule<strong>\u6CE8\u89E3\u7684ExpectedException\u53D8\u91CF\u8FD8\u662F\u6BD4\u8F83\u9EBB\u70E6\u7684\u3002\u800CJUnit5\u63D0\u4F9B\u4E86\u4E00\u79CD\u65B0\u7684\u65AD\u8A00\u65B9\u5F0F</strong>Assertions.assertThrows()** ,\u914D\u5408\u51FD\u6570\u5F0F\u7F16\u7A0B\u5C31\u53EF\u4EE5\u8FDB\u884C\u4F7F\u7528\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;\u5F02\u5E38\u6D4B\u8BD5&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">exceptionTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">ArithmeticException</span> exception <span class="token operator">=</span> <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertThrows</span><span class="token punctuation">(</span>
           <span class="token comment">//\u6254\u51FA\u65AD\u8A00\u5F02\u5E38</span>
            <span class="token class-name">ArithmeticException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">%</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5\u3001\u8D85\u65F6\u65AD\u8A00" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u8D85\u65F6\u65AD\u8A00" aria-hidden="true">#</a> 5\u3001\u8D85\u65F6\u65AD\u8A00</h4><p>Junit5\u8FD8\u63D0\u4F9B\u4E86<strong>Assertions.assertTimeout()</strong> \u4E3A\u6D4B\u8BD5\u65B9\u6CD5\u8BBE\u7F6E\u4E86\u8D85\u65F6\u65F6\u95F4</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;\u8D85\u65F6\u6D4B\u8BD5&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">timeoutTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//\u5982\u679C\u6D4B\u8BD5\u65B9\u6CD5\u65F6\u95F4\u8D85\u8FC71s\u5C06\u4F1A\u5F02\u5E38</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTimeout</span><span class="token punctuation">(</span><span class="token class-name">Duration</span><span class="token punctuation">.</span><span class="token function">ofMillis</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6\u3001\u5FEB\u901F\u5931\u8D25" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u5FEB\u901F\u5931\u8D25" aria-hidden="true">#</a> 6\u3001\u5FEB\u901F\u5931\u8D25</h4><p>\u901A\u8FC7 fail \u65B9\u6CD5\u76F4\u63A5\u4F7F\u5F97\u6D4B\u8BD5\u5931\u8D25</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;fail&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">shouldFail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;This should fail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4\u3001\u524D\u7F6E\u6761\u4EF6-assumptions" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u524D\u7F6E\u6761\u4EF6-assumptions" aria-hidden="true">#</a> 4\u3001\u524D\u7F6E\u6761\u4EF6\uFF08assumptions\uFF09</h3><p>JUnit 5 \u4E2D\u7684\u524D\u7F6E\u6761\u4EF6\uFF08<strong>assumptions\u3010\u5047\u8BBE\u3011</strong>\uFF09\u7C7B\u4F3C\u4E8E\u65AD\u8A00\uFF0C\u4E0D\u540C\u4E4B\u5904\u5728\u4E8E<strong>\u4E0D\u6EE1\u8DB3\u7684\u65AD\u8A00\u4F1A\u4F7F\u5F97\u6D4B\u8BD5\u65B9\u6CD5\u5931\u8D25</strong>\uFF0C\u800C\u4E0D\u6EE1\u8DB3\u7684<strong>\u524D\u7F6E\u6761\u4EF6\u53EA\u4F1A\u4F7F\u5F97\u6D4B\u8BD5\u65B9\u6CD5\u7684\u6267\u884C\u7EC8\u6B62</strong>\u3002\u524D\u7F6E\u6761\u4EF6\u53EF\u4EE5\u770B\u6210\u662F\u6D4B\u8BD5\u65B9\u6CD5\u6267\u884C\u7684\u524D\u63D0\uFF0C\u5F53\u8BE5\u524D\u63D0\u4E0D\u6EE1\u8DB3\u65F6\uFF0C\u5C31\u6CA1\u6709\u7EE7\u7EED\u6267\u884C\u7684\u5FC5\u8981\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;\u524D\u7F6E\u6761\u4EF6&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AssumptionsTest</span> <span class="token punctuation">{</span>
 <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">String</span> environment <span class="token operator">=</span> <span class="token string">&quot;DEV&quot;</span><span class="token punctuation">;</span>
 
 <span class="token annotation punctuation">@Test</span>
 <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;simple&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">simpleAssume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">assumeTrue</span><span class="token punctuation">(</span><span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>environment<span class="token punctuation">,</span> <span class="token string">&quot;DEV&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">assumeFalse</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>environment<span class="token punctuation">,</span> <span class="token string">&quot;PROD&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 
 <span class="token annotation punctuation">@Test</span>
 <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;assume then do&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">assumeThenDo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">assumingThat</span><span class="token punctuation">(</span>
       <span class="token class-name">Objects</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>environment<span class="token punctuation">,</span> <span class="token string">&quot;DEV&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;In DEV&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>assumeTrue \u548C assumFalse \u786E\u4FDD\u7ED9\u5B9A\u7684\u6761\u4EF6\u4E3A true \u6216 false\uFF0C\u4E0D\u6EE1\u8DB3\u6761\u4EF6\u4F1A\u4F7F\u5F97\u6D4B\u8BD5\u6267\u884C\u7EC8\u6B62\u3002assumingThat \u7684\u53C2\u6570\u662F\u8868\u793A\u6761\u4EF6\u7684\u5E03\u5C14\u503C\u548C\u5BF9\u5E94\u7684 Executable \u63A5\u53E3\u7684\u5B9E\u73B0\u5BF9\u8C61\u3002\u53EA\u6709\u6761\u4EF6\u6EE1\u8DB3\u65F6\uFF0CExecutable \u5BF9\u8C61\u624D\u4F1A\u88AB\u6267\u884C\uFF1B\u5F53\u6761\u4EF6\u4E0D\u6EE1\u8DB3\u65F6\uFF0C\u6D4B\u8BD5\u6267\u884C\u5E76\u4E0D\u4F1A\u7EC8\u6B62\u3002</p><h3 id="_5\u3001\u5D4C\u5957\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_5\u3001\u5D4C\u5957\u6D4B\u8BD5" aria-hidden="true">#</a> 5\u3001\u5D4C\u5957\u6D4B\u8BD5</h3><p>JUnit 5 \u53EF\u4EE5\u901A\u8FC7 Java \u4E2D\u7684\u5185\u90E8\u7C7B\u548C@Nested \u6CE8\u89E3\u5B9E\u73B0\u5D4C\u5957\u6D4B\u8BD5\uFF0C\u4ECE\u800C\u53EF\u4EE5\u66F4\u597D\u7684\u628A\u76F8\u5173\u7684\u6D4B\u8BD5\u65B9\u6CD5\u7EC4\u7EC7\u5728\u4E00\u8D77\u3002\u5728\u5185\u90E8\u7C7B\u4E2D\u53EF\u4EE5\u4F7F\u7528@BeforeEach \u548C@AfterEach \u6CE8\u89E3\uFF0C\u800C\u4E14\u5D4C\u5957\u7684\u5C42\u6B21\u6CA1\u6709\u9650\u5236\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;A stack&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">TestingAStackDemo</span> <span class="token punctuation">{</span>

    <span class="token class-name">Stack</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> stack<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;is instantiated with new Stack()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">void</span> <span class="token function">isInstantiatedWithNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Stack</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Nested</span>
    <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;when new&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">class</span> <span class="token class-name">WhenNew</span> <span class="token punctuation">{</span>

        <span class="token annotation punctuation">@BeforeEach</span>
        <span class="token keyword">void</span> <span class="token function">createNewStack</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            stack <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Stack</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Test</span>
        <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;is empty&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">void</span> <span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">assertTrue</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Test</span>
        <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;throws EmptyStackException when popped&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">void</span> <span class="token function">throwsExceptionWhenPopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">assertThrows</span><span class="token punctuation">(</span><span class="token class-name">EmptyStackException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> stack<span class="token operator">::</span><span class="token function">pop</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Test</span>
        <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;throws EmptyStackException when peeked&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">void</span> <span class="token function">throwsExceptionWhenPeeked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">assertThrows</span><span class="token punctuation">(</span><span class="token class-name">EmptyStackException</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> stack<span class="token operator">::</span><span class="token function">peek</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Nested</span>
        <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;after pushing an element&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">class</span> <span class="token class-name">AfterPushing</span> <span class="token punctuation">{</span>

            <span class="token class-name">String</span> anElement <span class="token operator">=</span> <span class="token string">&quot;an element&quot;</span><span class="token punctuation">;</span>

            <span class="token annotation punctuation">@BeforeEach</span>
            <span class="token keyword">void</span> <span class="token function">pushAnElement</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>anElement<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Test</span>
            <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;it is no longer empty&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">void</span> <span class="token function">isNotEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">assertFalse</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Test</span>
            <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;returns the element when popped and is empty&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">void</span> <span class="token function">returnElementWhenPopped</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">assertEquals</span><span class="token punctuation">(</span>anElement<span class="token punctuation">,</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">assertTrue</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token annotation punctuation">@Test</span>
            <span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;returns the element when peeked but remains not empty&quot;</span><span class="token punctuation">)</span>
            <span class="token keyword">void</span> <span class="token function">returnElementWhenPeeked</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">assertEquals</span><span class="token punctuation">(</span>anElement<span class="token punctuation">,</span> stack<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">assertFalse</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6\u3001\u53C2\u6570\u5316\u6D4B\u8BD5" tabindex="-1"><a class="header-anchor" href="#_6\u3001\u53C2\u6570\u5316\u6D4B\u8BD5" aria-hidden="true">#</a> 6\u3001\u53C2\u6570\u5316\u6D4B\u8BD5</h3><p>\u53C2\u6570\u5316\u6D4B\u8BD5\u662FJUnit5\u5F88\u91CD\u8981\u7684\u4E00\u4E2A\u65B0\u7279\u6027\uFF0C\u5B83\u4F7F\u5F97\u7528\u4E0D\u540C\u7684\u53C2\u6570\u591A\u6B21\u8FD0\u884C\u6D4B\u8BD5\u6210\u4E3A\u4E86\u53EF\u80FD\uFF0C\u4E5F\u4E3A\u6211\u4EEC\u7684\u5355\u5143\u6D4B\u8BD5\u5E26\u6765\u8BB8\u591A\u4FBF\u5229\u3002</p><p>\u5229\u7528**@ValueSource**\u7B49\u6CE8\u89E3\uFF0C\u6307\u5B9A\u5165\u53C2\uFF0C\u6211\u4EEC\u5C06\u53EF\u4EE5\u4F7F\u7528\u4E0D\u540C\u7684\u53C2\u6570\u8FDB\u884C\u591A\u6B21\u5355\u5143\u6D4B\u8BD5\uFF0C\u800C\u4E0D\u9700\u8981\u6BCF\u65B0\u589E\u4E00\u4E2A\u53C2\u6570\u5C31\u65B0\u589E\u4E00\u4E2A\u5355\u5143\u6D4B\u8BD5\uFF0C\u7701\u53BB\u4E86\u5F88\u591A\u5197\u4F59\u4EE3\u7801\u3002</p><p><strong>@ValueSource</strong>: \u4E3A\u53C2\u6570\u5316\u6D4B\u8BD5\u6307\u5B9A\u5165\u53C2\u6765\u6E90\uFF0C\u652F\u6301\u516B\u5927\u57FA\u7840\u7C7B\u4EE5\u53CAString\u7C7B\u578B,Class\u7C7B\u578B</p><p><strong>@NullSource</strong>: \u8868\u793A\u4E3A\u53C2\u6570\u5316\u6D4B\u8BD5\u63D0\u4F9B\u4E00\u4E2Anull\u7684\u5165\u53C2</p><p><strong>@EnumSource</strong>: \u8868\u793A\u4E3A\u53C2\u6570\u5316\u6D4B\u8BD5\u63D0\u4F9B\u4E00\u4E2A\u679A\u4E3E\u5165\u53C2</p><p><strong>@CsvFileSource</strong>\uFF1A\u8868\u793A\u8BFB\u53D6\u6307\u5B9ACSV\u6587\u4EF6\u5185\u5BB9\u4F5C\u4E3A\u53C2\u6570\u5316\u6D4B\u8BD5\u5165\u53C2</p><p><strong>@MethodSource</strong>\uFF1A\u8868\u793A\u8BFB\u53D6\u6307\u5B9A\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u4F5C\u4E3A\u53C2\u6570\u5316\u6D4B\u8BD5\u5165\u53C2(\u6CE8\u610F\u65B9\u6CD5\u8FD4\u56DE\u9700\u8981\u662F\u4E00\u4E2A\u6D41)</p><p>\u5F53\u7136\u5982\u679C\u53C2\u6570\u5316\u6D4B\u8BD5\u4EC5\u4EC5\u53EA\u80FD\u505A\u5230\u6307\u5B9A\u666E\u901A\u7684\u5165\u53C2\u8FD8\u8FBE\u4E0D\u5230\u8BA9\u6211\u89C9\u5F97\u60CA\u8273\u7684\u5730\u6B65\u3002\u8BA9\u6211\u771F\u6B63\u611F\u5230\u4ED6\u7684\u5F3A\u5927\u4E4B\u5904\u7684\u5730\u65B9\u5728\u4E8E\u4ED6\u53EF\u4EE5\u652F\u6301\u5916\u90E8\u7684\u5404\u7C7B\u5165\u53C2\u3002\u5982:CSV,YML,JSON \u6587\u4EF6\u751A\u81F3\u65B9\u6CD5\u7684\u8FD4\u56DE\u503C\u4E5F\u53EF\u4EE5\u4F5C\u4E3A\u5165\u53C2\u3002\u53EA\u9700\u8981\u53BB\u5B9E\u73B0<strong>ArgumentsProvider</strong>\u63A5\u53E3\uFF0C\u4EFB\u4F55\u5916\u90E8\u6587\u4EF6\u90FD\u53EF\u4EE5\u4F5C\u4E3A\u5B83\u7684\u5165\u53C2\u3002</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@ParameterizedTest</span>
<span class="token annotation punctuation">@ValueSource</span><span class="token punctuation">(</span>strings <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;two&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;three&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;\u53C2\u6570\u5316\u6D4B\u8BD51&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">parameterizedTest1</span><span class="token punctuation">(</span><span class="token class-name">String</span> string<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isNotBlank</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token annotation punctuation">@ParameterizedTest</span>
<span class="token annotation punctuation">@MethodSource</span><span class="token punctuation">(</span><span class="token string">&quot;method&quot;</span><span class="token punctuation">)</span>    <span class="token comment">//\u6307\u5B9A\u65B9\u6CD5\u540D</span>
<span class="token annotation punctuation">@DisplayName</span><span class="token punctuation">(</span><span class="token string">&quot;\u65B9\u6CD5\u6765\u6E90\u53C2\u6570&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testWithExplicitLocalMethodSource</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Assertions</span><span class="token punctuation">.</span><span class="token function">assertNotNull</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">static</span> <span class="token class-name">Stream</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token string">&quot;apple&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;banana&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7\u3001\u8FC1\u79FB\u6307\u5357" tabindex="-1"><a class="header-anchor" href="#_7\u3001\u8FC1\u79FB\u6307\u5357" aria-hidden="true">#</a> 7\u3001\u8FC1\u79FB\u6307\u5357</h3><p>\u5728\u8FDB\u884C\u8FC1\u79FB\u7684\u65F6\u5019\u9700\u8981\u6CE8\u610F\u5982\u4E0B\u7684\u53D8\u5316\uFF1A</p><ul><li>\u6CE8\u89E3\u5728 org.junit.jupiter.api \u5305\u4E2D\uFF0C\u65AD\u8A00\u5728 org.junit.jupiter.api.Assertions \u7C7B\u4E2D\uFF0C\u524D\u7F6E\u6761\u4EF6\u5728 org.junit.jupiter.api.Assumptions \u7C7B\u4E2D\u3002</li><li>\u628A@Before \u548C@After \u66FF\u6362\u6210@BeforeEach \u548C@AfterEach\u3002</li><li>\u628A@BeforeClass \u548C@AfterClass \u66FF\u6362\u6210@BeforeAll \u548C@AfterAll\u3002</li><li>\u628A@Ignore \u66FF\u6362\u6210@Disabled\u3002</li><li>\u628A@Category \u66FF\u6362\u6210@Tag\u3002</li><li>\u628A@RunWith\u3001@Rule \u548C@ClassRule \u66FF\u6362\u6210@ExtendWith\u3002</li></ul><h2 id="_5-\u6307\u6807\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#_5-\u6307\u6807\u76D1\u63A7" aria-hidden="true">#</a> 5.\u6307\u6807\u76D1\u63A7</h2><h3 id="_1\u3001springboot-actuator" tabindex="-1"><a class="header-anchor" href="#_1\u3001springboot-actuator" aria-hidden="true">#</a> 1\u3001SpringBoot Actuator</h3><h4 id="_1\u3001\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u7B80\u4ECB" aria-hidden="true">#</a> 1\u3001\u7B80\u4ECB</h4><p>\u672A\u6765\u6BCF\u4E00\u4E2A\u5FAE\u670D\u52A1\u5728\u4E91\u4E0A\u90E8\u7F72\u4EE5\u540E\uFF0C\u6211\u4EEC\u90FD\u9700\u8981\u5BF9\u5176\u8FDB\u884C\u76D1\u63A7\u3001\u8FFD\u8E2A\u3001\u5BA1\u8BA1\u3001\u63A7\u5236\u7B49\u3002SpringBoot\u5C31\u62BD\u53D6\u4E86Actuator\u573A\u666F\uFF0C\u4F7F\u5F97\u6211\u4EEC\u6BCF\u4E2A\u5FAE\u670D\u52A1\u5FEB\u901F\u5F15\u7528\u5373\u53EF\u83B7\u5F97\u751F\u4EA7\u7EA7\u522B\u7684\u5E94\u7528\u76D1\u63A7\u3001\u5BA1\u8BA1\u7B49\u529F\u80FD\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-actuator\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1606886483335-697ee1c1-2f69-43ab-bddc-3a038382319c.png" alt="img" loading="lazy"></p><h4 id="_2\u30011-x\u4E0E2-x\u7684\u4E0D\u540C" tabindex="-1"><a class="header-anchor" href="#_2\u30011-x\u4E0E2-x\u7684\u4E0D\u540C" aria-hidden="true">#</a> 2\u30011.x\u4E0E2.x\u7684\u4E0D\u540C</h4><p><img src="http://qnimg.gisfsde.com/work/1606884394162-ac7f2d8e-7abb-44df-9998-fb0f2705f238.png" alt="img" loading="lazy"></p><h4 id="_3\u3001\u5982\u4F55\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5982\u4F55\u4F7F\u7528" aria-hidden="true">#</a> 3\u3001\u5982\u4F55\u4F7F\u7528</h4>`,54),Aa=n("li",null,"\u5F15\u5165\u573A\u666F",-1),Ma=s("\u8BBF\u95EE "),ja={href:"http://localhost:8080/actuator/",target:"_blank",rel:"noopener noreferrer"},Ra=s("http://localhost:8080/actuator/"),Pa=s("**"),Ea=n("li",null,"\u66B4\u9732\u6240\u6709\u76D1\u63A7\u4FE1\u606F\u4E3AHTTP",-1),Ia=e(`<div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled-by-default</span><span class="token punctuation">:</span> <span class="token boolean important">true</span> <span class="token comment">#\u66B4\u9732\u6240\u6709\u7AEF\u70B9\u4FE1\u606F</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>  <span class="token comment">#\u4EE5web\u65B9\u5F0F\u66B4\u9732</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6D4B\u8BD5</li></ul>`,2),Ta={href:"http://localhost:8080/actuator/beans",target:"_blank",rel:"noopener noreferrer"},Ba=s("http://localhost:8080/actuator/beans"),Fa={href:"http://localhost:8080/actuator/configprops",target:"_blank",rel:"noopener noreferrer"},Ha=s("http://localhost:8080/actuator/configprops"),La={href:"http://localhost:8080/actuator/metrics",target:"_blank",rel:"noopener noreferrer"},Da=s("http://localhost:8080/actuator/metrics"),Na={href:"http://localhost:8080/actuator/metrics/jvm.gc.pause",target:"_blank",rel:"noopener noreferrer"},Oa=s("http://localhost:8080/actuator/metrics/jvm.gc.pause"),Va={href:"http://localhost:8080/actuator/metrics",target:"_blank",rel:"noopener noreferrer"},Ua=s("http://localhost:8080/actuator/"),Wa=s("endpointName/detailPath \u3002\u3002\u3002\u3002\u3002\u3002"),za=n("h4",{id:"_4\u3001\u53EF\u89C6\u5316",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_4\u3001\u53EF\u89C6\u5316","aria-hidden":"true"},"#"),s(" 4\u3001\u53EF\u89C6\u5316")],-1),Ja={href:"https://github.com/codecentric/spring-boot-admin",target:"_blank",rel:"noopener noreferrer"},Ya=s("https://github.com/codecentric/spring-boot-admin"),Ga=e(`<h3 id="_2\u3001actuator-endpoint" tabindex="-1"><a class="header-anchor" href="#_2\u3001actuator-endpoint" aria-hidden="true">#</a> 2\u3001Actuator Endpoint</h3><h4 id="_1\u3001\u6700\u5E38\u4F7F\u7528\u7684\u7AEF\u70B9" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u6700\u5E38\u4F7F\u7528\u7684\u7AEF\u70B9" aria-hidden="true">#</a> 1\u3001\u6700\u5E38\u4F7F\u7528\u7684\u7AEF\u70B9</h4><table><thead><tr><th>ID</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><code>auditevents</code></td><td>\u66B4\u9732\u5F53\u524D\u5E94\u7528\u7A0B\u5E8F\u7684\u5BA1\u6838\u4E8B\u4EF6\u4FE1\u606F\u3002\u9700\u8981\u4E00\u4E2A<code>AuditEventRepository\u7EC4\u4EF6</code>\u3002</td></tr><tr><td><code>beans</code></td><td>\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u4E2D\u6240\u6709Spring Bean\u7684\u5B8C\u6574\u5217\u8868\u3002</td></tr><tr><td><code>caches</code></td><td>\u66B4\u9732\u53EF\u7528\u7684\u7F13\u5B58\u3002</td></tr><tr><td><code>conditions</code></td><td>\u663E\u793A\u81EA\u52A8\u914D\u7F6E\u7684\u6240\u6709\u6761\u4EF6\u4FE1\u606F\uFF0C\u5305\u62EC\u5339\u914D\u6216\u4E0D\u5339\u914D\u7684\u539F\u56E0\u3002</td></tr><tr><td><code>configprops</code></td><td>\u663E\u793A\u6240\u6709<code>@ConfigurationProperties</code>\u3002</td></tr><tr><td><code>env</code></td><td>\u66B4\u9732Spring\u7684\u5C5E\u6027<code>ConfigurableEnvironment</code></td></tr><tr><td><code>flyway</code></td><td>\u663E\u793A\u5DF2\u5E94\u7528\u7684\u6240\u6709Flyway\u6570\u636E\u5E93\u8FC1\u79FB\u3002 \u9700\u8981\u4E00\u4E2A\u6216\u591A\u4E2A<code>Flyway</code>\u7EC4\u4EF6\u3002</td></tr><tr><td><code>health</code></td><td>\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u8FD0\u884C\u72B6\u51B5\u4FE1\u606F\u3002</td></tr><tr><td><code>httptrace</code></td><td>\u663E\u793AHTTP\u8DDF\u8E2A\u4FE1\u606F\uFF08\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6700\u8FD1100\u4E2AHTTP\u8BF7\u6C42-\u54CD\u5E94\uFF09\u3002\u9700\u8981\u4E00\u4E2A<code>HttpTraceRepository</code>\u7EC4\u4EF6\u3002</td></tr><tr><td><code>info</code></td><td>\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u4FE1\u606F\u3002</td></tr><tr><td><code>integrationgraph</code></td><td>\u663E\u793ASpring <code>integrationgraph</code> \u3002\u9700\u8981\u4F9D\u8D56<code>spring-integration-core</code>\u3002</td></tr><tr><td><code>loggers</code></td><td>\u663E\u793A\u548C\u4FEE\u6539\u5E94\u7528\u7A0B\u5E8F\u4E2D\u65E5\u5FD7\u7684\u914D\u7F6E\u3002</td></tr><tr><td><code>liquibase</code></td><td>\u663E\u793A\u5DF2\u5E94\u7528\u7684\u6240\u6709Liquibase\u6570\u636E\u5E93\u8FC1\u79FB\u3002\u9700\u8981\u4E00\u4E2A\u6216\u591A\u4E2A<code>Liquibase</code>\u7EC4\u4EF6\u3002</td></tr><tr><td><code>metrics</code></td><td>\u663E\u793A\u5F53\u524D\u5E94\u7528\u7A0B\u5E8F\u7684\u201C\u6307\u6807\u201D\u4FE1\u606F\u3002</td></tr><tr><td><code>mappings</code></td><td>\u663E\u793A\u6240\u6709<code>@RequestMapping</code>\u8DEF\u5F84\u5217\u8868\u3002</td></tr><tr><td><code>scheduledtasks</code></td><td>\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u4E2D\u7684\u8BA1\u5212\u4EFB\u52A1\u3002</td></tr><tr><td><code>sessions</code></td><td>\u5141\u8BB8\u4ECESpring Session\u652F\u6301\u7684\u4F1A\u8BDD\u5B58\u50A8\u4E2D\u68C0\u7D22\u548C\u5220\u9664\u7528\u6237\u4F1A\u8BDD\u3002\u9700\u8981\u4F7F\u7528Spring Session\u7684\u57FA\u4E8EServlet\u7684Web\u5E94\u7528\u7A0B\u5E8F\u3002</td></tr><tr><td><code>shutdown</code></td><td>\u4F7F\u5E94\u7528\u7A0B\u5E8F\u6B63\u5E38\u5173\u95ED\u3002\u9ED8\u8BA4\u7981\u7528\u3002</td></tr><tr><td><code>startup</code></td><td>\u663E\u793A\u7531<code>ApplicationStartup</code>\u6536\u96C6\u7684\u542F\u52A8\u6B65\u9AA4\u6570\u636E\u3002\u9700\u8981\u4F7F\u7528<code>SpringApplication</code>\u8FDB\u884C\u914D\u7F6E<code>BufferingApplicationStartup</code>\u3002</td></tr><tr><td><code>threaddump</code></td><td>\u6267\u884C\u7EBF\u7A0B\u8F6C\u50A8\u3002</td></tr></tbody></table><p>\u5982\u679C\u60A8\u7684\u5E94\u7528\u7A0B\u5E8F\u662FWeb\u5E94\u7528\u7A0B\u5E8F\uFF08Spring MVC\uFF0CSpring WebFlux\u6216Jersey\uFF09\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u9644\u52A0\u7AEF\u70B9\uFF1A</p><table><thead><tr><th>ID</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><code>heapdump</code></td><td>\u8FD4\u56DE<code>hprof</code>\u5806\u8F6C\u50A8\u6587\u4EF6\u3002</td></tr><tr><td><code>jolokia</code></td><td>\u901A\u8FC7HTTP\u66B4\u9732JMX bean\uFF08\u9700\u8981\u5F15\u5165Jolokia\uFF0C\u4E0D\u9002\u7528\u4E8EWebFlux\uFF09\u3002\u9700\u8981\u5F15\u5165\u4F9D\u8D56<code>jolokia-core</code>\u3002</td></tr><tr><td><code>logfile</code></td><td>\u8FD4\u56DE\u65E5\u5FD7\u6587\u4EF6\u7684\u5185\u5BB9\uFF08\u5982\u679C\u5DF2\u8BBE\u7F6E<code>logging.file.name</code>\u6216<code>logging.file.path</code>\u5C5E\u6027\uFF09\u3002\u652F\u6301\u4F7F\u7528HTTP<code>Range</code>\u6807\u5934\u6765\u68C0\u7D22\u90E8\u5206\u65E5\u5FD7\u6587\u4EF6\u7684\u5185\u5BB9\u3002</td></tr><tr><td><code>prometheus</code></td><td>\u4EE5Prometheus\u670D\u52A1\u5668\u53EF\u4EE5\u6293\u53D6\u7684\u683C\u5F0F\u516C\u5F00\u6307\u6807\u3002\u9700\u8981\u4F9D\u8D56<code>micrometer-registry-prometheus</code>\u3002</td></tr></tbody></table><p>\u6700\u5E38\u7528\u7684Endpoint</p><ul><li><strong>Health\uFF1A\u76D1\u63A7\u72B6\u51B5</strong></li><li><strong>Metrics\uFF1A\u8FD0\u884C\u65F6\u6307\u6807</strong></li><li><strong>Loggers\uFF1A\u65E5\u5FD7\u8BB0\u5F55</strong></li></ul><h4 id="_2\u3001health-endpoint" tabindex="-1"><a class="header-anchor" href="#_2\u3001health-endpoint" aria-hidden="true">#</a> 2\u3001Health Endpoint</h4><p>\u5065\u5EB7\u68C0\u67E5\u7AEF\u70B9\uFF0C\u6211\u4EEC\u4E00\u822C\u7528\u4E8E\u5728\u4E91\u5E73\u53F0\uFF0C\u5E73\u53F0\u4F1A\u5B9A\u65F6\u7684\u68C0\u67E5\u5E94\u7528\u7684\u5065\u5EB7\u72B6\u51B5\uFF0C\u6211\u4EEC\u5C31\u9700\u8981Health Endpoint\u53EF\u4EE5\u4E3A\u5E73\u53F0\u8FD4\u56DE\u5F53\u524D\u5E94\u7528\u7684\u4E00\u7CFB\u5217\u7EC4\u4EF6\u5065\u5EB7\u72B6\u51B5\u7684\u96C6\u5408\u3002</p><p>\u91CD\u8981\u7684\u51E0\u70B9\uFF1A</p><ul><li>health endpoint\u8FD4\u56DE\u7684\u7ED3\u679C\uFF0C\u5E94\u8BE5\u662F\u4E00\u7CFB\u5217\u5065\u5EB7\u68C0\u67E5\u540E\u7684\u4E00\u4E2A\u6C47\u603B\u62A5\u544A</li><li>\u5F88\u591A\u7684\u5065\u5EB7\u68C0\u67E5\u9ED8\u8BA4\u5DF2\u7ECF\u81EA\u52A8\u914D\u7F6E\u597D\u4E86\uFF0C\u6BD4\u5982\uFF1A\u6570\u636E\u5E93\u3001redis\u7B49</li><li>\u53EF\u4EE5\u5F88\u5BB9\u6613\u7684\u6DFB\u52A0\u81EA\u5B9A\u4E49\u7684\u5065\u5EB7\u68C0\u67E5\u673A\u5236</li></ul><p><img src="http://qnimg.gisfsde.com/work/1606908975702-4f9a3208-15ca-4a78-9f76-939ef986db7e.png" alt="img" loading="lazy"></p><h4 id="_3\u3001metrics-endpoint" tabindex="-1"><a class="header-anchor" href="#_3\u3001metrics-endpoint" aria-hidden="true">#</a> 3\u3001Metrics Endpoint</h4><p>\u63D0\u4F9B\u8BE6\u7EC6\u7684\u3001\u5C42\u7EA7\u7684\u3001\u7A7A\u95F4\u6307\u6807\u4FE1\u606F\uFF0C\u8FD9\u4E9B\u4FE1\u606F\u53EF\u4EE5\u88ABpull\uFF08\u4E3B\u52A8\u63A8\u9001\uFF09\u6216\u8005push\uFF08\u88AB\u52A8\u83B7\u53D6\uFF09\u65B9\u5F0F\u5F97\u5230\uFF1B</p><ul><li>\u901A\u8FC7Metrics\u5BF9\u63A5\u591A\u79CD\u76D1\u63A7\u7CFB\u7EDF</li><li>\u7B80\u5316\u6838\u5FC3Metrics\u5F00\u53D1</li><li>\u6DFB\u52A0\u81EA\u5B9A\u4E49Metrics\u6216\u8005\u6269\u5C55\u5DF2\u6709Metrics</li></ul><p><img src="http://qnimg.gisfsde.com/work/1606909073222-c6e77ca3-4b1c-4f38-a1c6-8614dec4f7bc.png" alt="img" loading="lazy"></p><h4 id="_4\u3001\u7BA1\u7406endpoints" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u7BA1\u7406endpoints" aria-hidden="true">#</a> 4\u3001\u7BA1\u7406Endpoints</h4><h5 id="_1\u3001\u5F00\u542F\u4E0E\u7981\u7528endpoints" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5F00\u542F\u4E0E\u7981\u7528endpoints" aria-hidden="true">#</a> 1\u3001\u5F00\u542F\u4E0E\u7981\u7528Endpoints</h5><ul><li>\u9ED8\u8BA4\u6240\u6709\u7684Endpoint\u9664\u8FC7shutdown\u90FD\u662F\u5F00\u542F\u7684\u3002</li><li>\u9700\u8981\u5F00\u542F\u6216\u8005\u7981\u7528\u67D0\u4E2AEndpoint\u3002\u914D\u7F6E\u6A21\u5F0F\u4E3A <strong>management.endpoint.<strong><strong>&lt;endpointName&gt;</strong></strong>.enabled = true</strong></li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">beans</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u6216\u8005\u7981\u7528\u6240\u6709\u7684Endpoint\u7136\u540E\u624B\u52A8\u5F00\u542F\u6307\u5B9A\u7684Endpoint</li></ul><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">management</span><span class="token punctuation">:</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">enabled-by-default</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">beans</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">enabled</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_2\u3001\u66B4\u9732endpoints" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u66B4\u9732endpoints" aria-hidden="true">#</a> 2\u3001\u66B4\u9732Endpoints</h5><p>\u652F\u6301\u7684\u66B4\u9732\u65B9\u5F0F</p><ul><li>HTTP\uFF1A\u9ED8\u8BA4\u53EA\u66B4\u9732<strong>health</strong>\u548C<strong>info</strong> Endpoint</li><li><strong>JMX</strong>\uFF1A\u9ED8\u8BA4\u66B4\u9732\u6240\u6709Endpoint</li><li>\u9664\u8FC7health\u548Cinfo\uFF0C\u5269\u4E0B\u7684Endpoint\u90FD\u5E94\u8BE5\u8FDB\u884C\u4FDD\u62A4\u8BBF\u95EE\u3002\u5982\u679C\u5F15\u5165SpringSecurity\uFF0C\u5219\u4F1A\u9ED8\u8BA4\u914D\u7F6E\u5B89\u5168\u8BBF\u95EE\u89C4\u5219</li></ul><table><thead><tr><th>ID</th><th>JMX</th><th>Web</th></tr></thead><tbody><tr><td><code>auditevents</code></td><td>Yes</td><td>No</td></tr><tr><td><code>beans</code></td><td>Yes</td><td>No</td></tr><tr><td><code>caches</code></td><td>Yes</td><td>No</td></tr><tr><td><code>conditions</code></td><td>Yes</td><td>No</td></tr><tr><td><code>configprops</code></td><td>Yes</td><td>No</td></tr><tr><td><code>env</code></td><td>Yes</td><td>No</td></tr><tr><td><code>flyway</code></td><td>Yes</td><td>No</td></tr><tr><td><code>health</code></td><td>Yes</td><td>Yes</td></tr><tr><td><code>heapdump</code></td><td>N/A</td><td>No</td></tr><tr><td><code>httptrace</code></td><td>Yes</td><td>No</td></tr><tr><td><code>info</code></td><td>Yes</td><td>Yes</td></tr><tr><td><code>integrationgraph</code></td><td>Yes</td><td>No</td></tr><tr><td><code>jolokia</code></td><td>N/A</td><td>No</td></tr><tr><td><code>logfile</code></td><td>N/A</td><td>No</td></tr><tr><td><code>loggers</code></td><td>Yes</td><td>No</td></tr><tr><td><code>liquibase</code></td><td>Yes</td><td>No</td></tr><tr><td><code>metrics</code></td><td>Yes</td><td>No</td></tr><tr><td><code>mappings</code></td><td>Yes</td><td>No</td></tr><tr><td><code>prometheus</code></td><td>N/A</td><td>No</td></tr><tr><td><code>scheduledtasks</code></td><td>Yes</td><td>No</td></tr><tr><td><code>sessions</code></td><td>Yes</td><td>No</td></tr><tr><td><code>shutdown</code></td><td>Yes</td><td>No</td></tr><tr><td><code>startup</code></td><td>Yes</td><td>No</td></tr><tr><td><code>threaddump</code></td><td>Yes</td><td>No</td></tr></tbody></table><h3 id="_3\u3001\u5B9A\u5236-endpoint" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u5B9A\u5236-endpoint" aria-hidden="true">#</a> 3\u3001\u5B9A\u5236 Endpoint</h3><h4 id="_1\u3001\u5B9A\u5236-health-\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5B9A\u5236-health-\u4FE1\u606F" aria-hidden="true">#</a> 1\u3001\u5B9A\u5236 Health \u4FE1\u606F</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>actuate<span class="token punctuation">.</span>health<span class="token punctuation">.</span></span><span class="token class-name">Health</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>actuate<span class="token punctuation">.</span>health<span class="token punctuation">.</span></span><span class="token class-name">HealthIndicator</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyHealthIndicator</span> <span class="token keyword">implements</span> <span class="token class-name">HealthIndicator</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Health</span> <span class="token function">health</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> errorCode <span class="token operator">=</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// perform some specific health check</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>errorCode <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token class-name">Health</span><span class="token punctuation">.</span><span class="token function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;Error Code&quot;</span><span class="token punctuation">,</span> errorCode<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token class-name">Health</span><span class="token punctuation">.</span><span class="token function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

\u6784\u5EFA<span class="token class-name">Health</span>
<span class="token class-name">Health</span> build <span class="token operator">=</span> <span class="token class-name">Health</span><span class="token punctuation">.</span><span class="token function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;msg&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;error service&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;500&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withException</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
management<span class="token operator">:</span>
    health<span class="token operator">:</span>
      enabled<span class="token operator">:</span> <span class="token boolean">true</span>
      show<span class="token operator">-</span>details<span class="token operator">:</span> always #\u603B\u662F\u663E\u793A\u8BE6\u7EC6\u4FE1\u606F\u3002\u53EF\u663E\u793A\u6BCF\u4E2A\u6A21\u5757\u7684\u72B6\u6001\u4FE1\u606F
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyComHealthIndicator</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractHealthIndicator</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * \u771F\u5B9E\u7684\u68C0\u67E5\u65B9\u6CD5
     * <span class="token keyword">@param</span> <span class="token parameter">builder</span>
     * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doHealthCheck</span><span class="token punctuation">(</span><span class="token class-name">Health<span class="token punctuation">.</span>Builder</span> builder<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token comment">//mongodb\u3002  \u83B7\u53D6\u8FDE\u63A5\u8FDB\u884C\u6D4B\u8BD5</span>
        <span class="token class-name">Map</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span><span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// \u68C0\u67E5\u5B8C\u6210</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//            builder.up(); //\u5065\u5EB7</span>
            builder<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">Status</span><span class="token punctuation">.</span>UP<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;count&quot;</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ms&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
<span class="token comment">//            builder.down();</span>
            builder<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token class-name">Status</span><span class="token punctuation">.</span>OUT_OF_SERVICE<span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;err&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;\u8FDE\u63A5\u8D85\u65F6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">&quot;ms&quot;</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


        builder<span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">withDetails</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001\u5B9A\u5236info\u4FE1\u606F" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5B9A\u5236info\u4FE1\u606F" aria-hidden="true">#</a> 2\u3001\u5B9A\u5236info\u4FE1\u606F</h4><p>\u5E38\u7528\u4E24\u79CD\u65B9\u5F0F</p><h6 id="_1\u3001\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u7F16\u5199\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> 1\u3001\u7F16\u5199\u914D\u7F6E\u6587\u4EF6</h6><div class="language-yaml ext-yml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">info</span><span class="token punctuation">:</span>
  <span class="token key atrule">appName</span><span class="token punctuation">:</span> boot<span class="token punctuation">-</span>admin
  <span class="token key atrule">version</span><span class="token punctuation">:</span> 2.0.1
  <span class="token key atrule">mavenProjectName</span><span class="token punctuation">:</span> @project.artifactId@  <span class="token comment">#\u4F7F\u7528@@\u53EF\u4EE5\u83B7\u53D6maven\u7684pom\u6587\u4EF6\u503C</span>
  <span class="token key atrule">mavenProjectVersion</span><span class="token punctuation">:</span> @project.version@
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h6 id="_2\u3001\u7F16\u5199infocontributor" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u7F16\u5199infocontributor" aria-hidden="true">#</a> 2\u3001\u7F16\u5199InfoContributor</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">Collections</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>actuate<span class="token punctuation">.</span>info<span class="token punctuation">.</span></span><span class="token class-name">Info</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>actuate<span class="token punctuation">.</span>info<span class="token punctuation">.</span></span><span class="token class-name">InfoContributor</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span></span><span class="token class-name">Component</span></span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ExampleInfoContributor</span> <span class="token keyword">implements</span> <span class="token class-name">InfoContributor</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">contribute</span><span class="token punctuation">(</span><span class="token class-name">Info<span class="token punctuation">.</span>Builder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        builder<span class="token punctuation">.</span><span class="token function">withDetail</span><span class="token punctuation">(</span><span class="token string">&quot;example&quot;</span><span class="token punctuation">,</span>
                <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token string">&quot;key&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,36),Xa={href:"http://localhost:8080/actuator/info",target:"_blank",rel:"noopener noreferrer"},$a=s("http://localhost:8080/actuator/info"),Qa=s(" \u4F1A\u8F93\u51FA\u4EE5\u4E0A\u65B9\u5F0F\u8FD4\u56DE\u7684\u6240\u6709info\u4FE1\u606F"),Ka=n("h4",{id:"_3\u3001\u5B9A\u5236metrics\u4FE1\u606F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_3\u3001\u5B9A\u5236metrics\u4FE1\u606F","aria-hidden":"true"},"#"),s(" 3\u3001\u5B9A\u5236Metrics\u4FE1\u606F")],-1),Za=n("h6",{id:"_1\u3001springboot\u652F\u6301\u81EA\u52A8\u9002\u914D\u7684metrics",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#_1\u3001springboot\u652F\u6301\u81EA\u52A8\u9002\u914D\u7684metrics","aria-hidden":"true"},"#"),s(" 1\u3001SpringBoot\u652F\u6301\u81EA\u52A8\u9002\u914D\u7684Metrics")],-1),nt=e("<li><p>JVM metrics, report utilization of:</p></li><li><ul><li>Various memory and buffer pools</li><li>Statistics related to garbage collection</li><li>Threads utilization</li><li>Number of classes loaded/unloaded</li></ul></li><li><p>CPU metrics</p></li><li><p>File descriptor metrics</p></li><li><p>Kafka consumer and producer metrics</p></li><li><p>Log4j2 metrics: record the number of events logged to Log4j2 at each level</p></li><li><p>Logback metrics: record the number of events logged to Logback at each level</p></li><li><p>Uptime metrics: report a gauge for uptime and a fixed gauge representing the application\u2019s absolute start time</p></li><li><p>Tomcat metrics (<code>server.tomcat.mbeanregistry.enabled</code> must be set to <code>true</code> for all Tomcat metrics to be registered)</p></li>",9),st={href:"https://docs.spring.io/spring-integration/docs/5.4.1/reference/html/system-management.html#micrometer-integration",target:"_blank",rel:"noopener noreferrer"},at=s("Spring Integration"),tt=s(" metrics"),et=e(`<h6 id="_2\u3001\u589E\u52A0\u5B9A\u5236metrics" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u589E\u52A0\u5B9A\u5236metrics" aria-hidden="true">#</a> 2\u3001\u589E\u52A0\u5B9A\u5236Metrics</h6><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">MyService</span><span class="token punctuation">{</span>
    <span class="token class-name">Counter</span> counter<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">MyService</span><span class="token punctuation">(</span><span class="token class-name">MeterRegistry</span> meterRegistry<span class="token punctuation">)</span><span class="token punctuation">{</span>
         counter <span class="token operator">=</span> meterRegistry<span class="token punctuation">.</span><span class="token function">counter</span><span class="token punctuation">(</span><span class="token string">&quot;myservice.method.running.counter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        counter<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">//\u4E5F\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u7684\u65B9\u5F0F</span>
<span class="token annotation punctuation">@Bean</span>
<span class="token class-name">MeterBinder</span> <span class="token function">queueSize</span><span class="token punctuation">(</span><span class="token class-name">Queue</span> queue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>registry<span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">Gauge</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token string">&quot;queueSize&quot;</span><span class="token punctuation">,</span> queue<span class="token operator">::</span><span class="token function">size</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>registry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4\u3001\u5B9A\u5236endpoint" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u5B9A\u5236endpoint" aria-hidden="true">#</a> 4\u3001\u5B9A\u5236Endpoint</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Component</span>
<span class="token annotation punctuation">@Endpoint</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">&quot;container&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DockerEndpoint</span> <span class="token punctuation">{</span>


    <span class="token annotation punctuation">@ReadOperation</span>
    <span class="token keyword">public</span> <span class="token class-name">Map</span> <span class="token function">getDockerInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">singletonMap</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;docker started...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@WriteOperation</span>
    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">restartDocker</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;docker restarted....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u573A\u666F\uFF1A\u5F00\u53D1<strong>ReadinessEndpoint</strong>\u6765\u7BA1\u7406\u7A0B\u5E8F\u662F\u5426\u5C31\u7EEA\uFF0C\u6216\u8005<strong>Liveness****Endpoint</strong>\u6765\u7BA1\u7406\u7A0B\u5E8F\u662F\u5426\u5B58\u6D3B\uFF1B</p>`,5),pt=s("\u5F53\u7136\uFF0C\u8FD9\u4E2A\u4E5F\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528 "),ot={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-kubernetes-probes",target:"_blank",rel:"noopener noreferrer"},ct=s("https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-features.html#production-ready-kubernetes-probes"),it=e(`<h2 id="_6-\u539F\u7406\u89E3\u6790" tabindex="-1"><a class="header-anchor" href="#_6-\u539F\u7406\u89E3\u6790" aria-hidden="true">#</a> 6.\u539F\u7406\u89E3\u6790</h2><h3 id="_1\u3001profile\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_1\u3001profile\u529F\u80FD" aria-hidden="true">#</a> 1\u3001Profile\u529F\u80FD</h3><p>\u4E3A\u4E86\u65B9\u4FBF\u591A\u73AF\u5883\u9002\u914D\uFF0Cspringboot\u7B80\u5316\u4E86profile\u529F\u80FD\u3002</p><h4 id="_1\u3001application-profile\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_1\u3001application-profile\u529F\u80FD" aria-hidden="true">#</a> 1\u3001application-profile\u529F\u80FD</h4><ul><li><p>\u9ED8\u8BA4\u914D\u7F6E\u6587\u4EF6 application.yaml\uFF1B\u4EFB\u4F55\u65F6\u5019\u90FD\u4F1A\u52A0\u8F7D</p></li><li><p>\u6307\u5B9A\u73AF\u5883\u914D\u7F6E\u6587\u4EF6 application-{env}.yaml</p></li><li><p>\u6FC0\u6D3B\u6307\u5B9A\u73AF\u5883</p></li><li><ul><li>\u914D\u7F6E\u6587\u4EF6\u6FC0\u6D3B</li><li>\u547D\u4EE4\u884C\u6FC0\u6D3B\uFF1Ajava -jar xxx.jar --<strong>spring.profiles.active=prod --person.name=haha</strong></li></ul></li><li><ul><li><ul><li><strong>\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\u7684\u4EFB\u610F\u503C\uFF0C\u547D\u4EE4\u884C\u4F18\u5148</strong></li></ul></li></ul></li><li><p>\u9ED8\u8BA4\u914D\u7F6E\u4E0E\u73AF\u5883\u914D\u7F6E\u540C\u65F6\u751F\u6548</p></li><li><p>\u540C\u540D\u914D\u7F6E\u9879\uFF0Cprofile\u914D\u7F6E\u4F18\u5148</p></li></ul><h4 id="_2\u3001-profile\u6761\u4EF6\u88C5\u914D\u529F\u80FD" tabindex="-1"><a class="header-anchor" href="#_2\u3001-profile\u6761\u4EF6\u88C5\u914D\u529F\u80FD" aria-hidden="true">#</a> 2\u3001@Profile\u6761\u4EF6\u88C5\u914D\u529F\u80FD</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span><span class="token punctuation">(</span>proxyBeanMethods <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Profile</span><span class="token punctuation">(</span><span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ProductionConfiguration</span> <span class="token punctuation">{</span>

    <span class="token comment">// ...</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3\u3001profile\u5206\u7EC4" tabindex="-1"><a class="header-anchor" href="#_3\u3001profile\u5206\u7EC4" aria-hidden="true">#</a> 3\u3001profile\u5206\u7EC4</h4><div class="language-plain ext-plain line-numbers-mode"><pre class="language-plain"><code>spring.profiles.group.production[0]=proddb
spring.profiles.group.production[1]=prodmq

\u4F7F\u7528\uFF1A--spring.profiles.active=production  \u6FC0\u6D3B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2\u3001\u5916\u90E8\u5316\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u5916\u90E8\u5316\u914D\u7F6E" aria-hidden="true">#</a> 2\u3001\u5916\u90E8\u5316\u914D\u7F6E</h3>`,10),lt={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config",target:"_blank",rel:"noopener noreferrer"},ut=s("https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config"),rt=e("<li>Default properties (specified by setting <code>SpringApplication.setDefaultProperties</code>).</li><li><code>@PropertySource</code> annotations on your <code>@Configuration</code> classes. Please note that such property sources are not added to the <code>Environment</code> until the application context is being refreshed. This is too late to configure certain properties such as <code>logging.*</code> and <code>spring.main.*</code> which are read before refresh begins.</li><li><strong>Config data (such as</strong> <code>**application.properties**</code> <strong>files)</strong></li><li>A <code>RandomValuePropertySource</code> that has properties only in <code>random.*</code>.</li><li>OS environment variables.</li><li>Java System properties (<code>System.getProperties()</code>).</li><li>JNDI attributes from <code>java:comp/env</code>.</li><li><code>ServletContext</code> init parameters.</li><li><code>ServletConfig</code> init parameters.</li><li>Properties from <code>SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment variable or system property).</li><li>Command line arguments.</li>",11),dt=n("code",null,"properties",-1),kt=s(" attribute on your tests. Available on "),mt=n("code",null,"@SpringBootTest",-1),vt=s(" and the "),gt={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests",target:"_blank",rel:"noopener noreferrer"},bt=s("test annotations for testing a particular slice of your application"),ht=s("."),ft=n("li",null,[n("code",null,"@TestPropertySource"),s(" annotations on your tests.")],-1),yt={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/using-spring-boot.html#using-boot-devtools-globalsettings",target:"_blank",rel:"noopener noreferrer"},wt=s("Devtools global settings properties"),qt=s(" in the "),_t=n("code",null,"$HOME/.config/spring-boot",-1),xt=s(" directory when devtools is active."),St=e('<h4 id="_1\u3001\u5916\u90E8\u914D\u7F6E\u6E90" tabindex="-1"><a class="header-anchor" href="#_1\u3001\u5916\u90E8\u914D\u7F6E\u6E90" aria-hidden="true">#</a> 1\u3001\u5916\u90E8\u914D\u7F6E\u6E90</h4><p>\u5E38\u7528\uFF1A<strong>Java\u5C5E\u6027\u6587\u4EF6</strong>\u3001<strong>YAML\u6587\u4EF6</strong>\u3001<strong>\u73AF\u5883\u53D8\u91CF</strong>\u3001<strong>\u547D\u4EE4\u884C\u53C2\u6570</strong>\uFF1B</p><h4 id="_2\u3001\u914D\u7F6E\u6587\u4EF6\u67E5\u627E\u4F4D\u7F6E" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u914D\u7F6E\u6587\u4EF6\u67E5\u627E\u4F4D\u7F6E" aria-hidden="true">#</a> 2\u3001\u914D\u7F6E\u6587\u4EF6\u67E5\u627E\u4F4D\u7F6E</h4><p>(1) classpath \u6839\u8DEF\u5F84</p><p>(2) classpath \u6839\u8DEF\u5F84\u4E0Bconfig\u76EE\u5F55</p><p>(3) jar\u5305\u5F53\u524D\u76EE\u5F55</p><p>(4) jar\u5305\u5F53\u524D\u76EE\u5F55\u7684config\u76EE\u5F55</p><p>(5) /config\u5B50\u76EE\u5F55\u7684\u76F4\u63A5\u5B50\u76EE\u5F55</p><h4 id="_3\u3001\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u987A\u5E8F" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u987A\u5E8F" aria-hidden="true">#</a> 3\u3001\u914D\u7F6E\u6587\u4EF6\u52A0\u8F7D\u987A\u5E8F\uFF1A</h4><ol><li>\u5F53\u524Djar\u5305\u5185\u90E8\u7684application.properties\u548Capplication.yml</li><li>\u5F53\u524Djar\u5305\u5185\u90E8\u7684application-{profile}.properties \u548C application-{profile}.yml</li><li>\u5F15\u7528\u7684\u5916\u90E8jar\u5305\u7684application.properties\u548Capplication.yml</li><li>\u5F15\u7528\u7684\u5916\u90E8jar\u5305\u7684application-{profile}.properties \u548C application-{profile}.yml</li></ol><h4 id="_4\u3001\u6307\u5B9A\u73AF\u5883\u4F18\u5148-\u5916\u90E8\u4F18\u5148-\u540E\u9762\u7684\u53EF\u4EE5\u8986\u76D6\u524D\u9762\u7684\u540C\u540D\u914D\u7F6E\u9879" tabindex="-1"><a class="header-anchor" href="#_4\u3001\u6307\u5B9A\u73AF\u5883\u4F18\u5148-\u5916\u90E8\u4F18\u5148-\u540E\u9762\u7684\u53EF\u4EE5\u8986\u76D6\u524D\u9762\u7684\u540C\u540D\u914D\u7F6E\u9879" aria-hidden="true">#</a> 4\u3001\u6307\u5B9A\u73AF\u5883\u4F18\u5148\uFF0C\u5916\u90E8\u4F18\u5148\uFF0C\u540E\u9762\u7684\u53EF\u4EE5\u8986\u76D6\u524D\u9762\u7684\u540C\u540D\u914D\u7F6E\u9879</h4><h3 id="_3\u3001\u81EA\u5B9A\u4E49starter" tabindex="-1"><a class="header-anchor" href="#_3\u3001\u81EA\u5B9A\u4E49starter" aria-hidden="true">#</a> 3\u3001\u81EA\u5B9A\u4E49starter</h3><h4 id="_1\u3001starter\u542F\u52A8\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_1\u3001starter\u542F\u52A8\u539F\u7406" aria-hidden="true">#</a> 1\u3001starter\u542F\u52A8\u539F\u7406</h4><ul><li>starter-pom\u5F15\u5165 autoconfigurer \u5305</li></ul><p><img src="http://qnimg.gisfsde.com/work/1606995919308-b2c7ccaa-e720-4cc5-9801-2e170b3102e1.png" alt="img" loading="lazy"></p><ul><li><p>autoconfigure\u5305\u4E2D\u914D\u7F6E\u4F7F\u7528 <strong>META-INF/spring.factories</strong> \u4E2D <strong>EnableAutoConfiguration \u7684\u503C\uFF0C\u4F7F\u5F97\u9879\u76EE\u542F\u52A8\u52A0\u8F7D\u6307\u5B9A\u7684\u81EA\u52A8\u914D\u7F6E\u7C7B</strong></p></li><li><p><strong>\u7F16\u5199\u81EA\u52A8\u914D\u7F6E\u7C7B xxxAutoConfiguration -&gt; xxxxProperties</strong></p></li><li><ul><li><strong>@Configuration</strong></li><li><strong>@Conditional</strong></li><li><strong>@EnableConfigurationProperties</strong></li><li><strong>@Bean</strong></li><li>......</li></ul></li></ul><p><strong>\u5F15\u5165starter</strong> <strong>--- xxxAutoConfiguration --- \u5BB9\u5668\u4E2D\u653E\u5165\u7EC4\u4EF6 ---- \u7ED1\u5B9AxxxProperties ----</strong> <strong>\u914D\u7F6E\u9879</strong></p><h4 id="_2\u3001\u81EA\u5B9A\u4E49starter" tabindex="-1"><a class="header-anchor" href="#_2\u3001\u81EA\u5B9A\u4E49starter" aria-hidden="true">#</a> 2\u3001\u81EA\u5B9A\u4E49starter</h4><p><strong>atguigu-hello-spring-boot-starter\uFF08\u542F\u52A8\u5668\uFF09</strong></p><p><strong>atguigu-hello-spring-boot-starter-autoconfigure\uFF08\u81EA\u52A8\u914D\u7F6E\u5305\uFF09</strong></p><h3 id="_4\u3001springboot\u539F\u7406" tabindex="-1"><a class="header-anchor" href="#_4\u3001springboot\u539F\u7406" aria-hidden="true">#</a> 4\u3001SpringBoot\u539F\u7406</h3>',21),Ct=s("Spring\u539F\u7406\u3010"),At={href:"https://www.bilibili.com/video/BV1gW411W7wy?p=1",target:"_blank",rel:"noopener noreferrer"},Mt=s("Spring\u6CE8\u89E3"),jt=s("\u3011\u3001"),Rt=n("strong",null,"SpringMVC",-1),Pt=s("\u539F\u7406\u3001"),Et=n("strong",null,"\u81EA\u52A8\u914D\u7F6E\u539F\u7406",-1),It=s("\u3001SpringBoot\u539F\u7406"),Tt=e(`<h4 id="_1\u3001springboot\u542F\u52A8\u8FC7\u7A0B" tabindex="-1"><a class="header-anchor" href="#_1\u3001springboot\u542F\u52A8\u8FC7\u7A0B" aria-hidden="true">#</a> 1\u3001SpringBoot\u542F\u52A8\u8FC7\u7A0B</h4><ul><li><p>\u521B\u5EFA <strong>SpringApplication</strong></p></li><li><ul><li>\u4FDD\u5B58\u4E00\u4E9B\u4FE1\u606F\u3002</li><li>\u5224\u5B9A\u5F53\u524D\u5E94\u7528\u7684\u7C7B\u578B\u3002ClassUtils\u3002Servlet</li><li><strong>bootstrappers</strong>**\uFF1A\u521D\u59CB\u542F\u52A8\u5F15\u5BFC\u5668\uFF08<strong>List&lt;Bootstrapper&gt;</strong>\uFF09\uFF1A\u53BBspring.factories\u6587\u4EF6\u4E2D\u627E** org.springframework.boot.<strong>Bootstrapper</strong></li><li>\u627E <strong>ApplicationContextInitializer</strong>\uFF1B\u53BB<strong>spring.factories****\u627E</strong> <strong>ApplicationContextInitializer</strong></li></ul></li><li><ul><li><ul><li>List&lt;ApplicationContextInitializer&lt;?&gt;&gt; <strong>initializers</strong></li></ul></li></ul></li><li><ul><li><strong>\u627E</strong> <strong>ApplicationListener \uFF1B\u5E94\u7528\u76D1\u542C\u5668\u3002<strong>\u53BB</strong>spring.factories****\u627E</strong> <strong>ApplicationListener</strong></li></ul></li><li><ul><li><ul><li>List&lt;ApplicationListener&lt;?&gt;&gt; <strong>listeners</strong></li></ul></li></ul></li><li><p>\u8FD0\u884C <strong>SpringApplication</strong></p></li><li><ul><li><strong>StopWatch</strong></li><li><strong>\u8BB0\u5F55\u5E94\u7528\u7684\u542F\u52A8\u65F6\u95F4</strong></li><li>**\u521B\u5EFA\u5F15\u5BFC\u4E0A\u4E0B\u6587\uFF08Context\u73AF\u5883\uFF09**<strong>createBootstrapContext()</strong></li></ul></li><li><ul><li><ul><li>\u83B7\u53D6\u5230\u6240\u6709\u4E4B\u524D\u7684 <strong>bootstrappers \u6328\u4E2A\u6267\u884C</strong> intitialize() \u6765\u5B8C\u6210\u5BF9\u5F15\u5BFC\u542F\u52A8\u5668\u4E0A\u4E0B\u6587\u73AF\u5883\u8BBE\u7F6E</li></ul></li></ul></li><li><ul><li>\u8BA9\u5F53\u524D\u5E94\u7528\u8FDB\u5165<strong>headless</strong>\u6A21\u5F0F\u3002<strong>java.awt.headless</strong></li><li><strong>\u83B7\u53D6\u6240\u6709</strong> <strong>RunListener</strong>**\uFF08\u8FD0\u884C\u76D1\u542C\u5668\uFF09\u3010\u4E3A\u4E86\u65B9\u4FBF\u6240\u6709Listener\u8FDB\u884C\u4E8B\u4EF6\u611F\u77E5\u3011**</li></ul></li><li><ul><li><ul><li>getSpringFactoriesInstances \u53BB<strong>spring.factories****\u627E</strong> <strong>SpringApplicationRunListener</strong>.</li></ul></li></ul></li><li><ul><li>\u904D\u5386 <strong>SpringApplicationRunListener \u8C03\u7528 starting \u65B9\u6CD5\uFF1B</strong></li></ul></li><li><ul><li><ul><li><strong>\u76F8\u5F53\u4E8E\u901A\u77E5\u6240\u6709\u611F\u5174\u8DA3\u7CFB\u7EDF\u6B63\u5728\u542F\u52A8\u8FC7\u7A0B\u7684\u4EBA\uFF0C\u9879\u76EE\u6B63\u5728 starting\u3002</strong></li></ul></li></ul></li><li><ul><li>\u4FDD\u5B58\u547D\u4EE4\u884C\u53C2\u6570\uFF1BApplicationArguments</li><li>\u51C6\u5907\u73AF\u5883 prepareEnvironment\uFF08\uFF09;</li></ul></li><li><ul><li><ul><li>\u8FD4\u56DE\u6216\u8005\u521B\u5EFA\u57FA\u7840\u73AF\u5883\u4FE1\u606F\u5BF9\u8C61\u3002<strong>StandardServletEnvironment</strong></li><li><strong>\u914D\u7F6E\u73AF\u5883\u4FE1\u606F\u5BF9\u8C61\u3002</strong></li></ul></li></ul></li><li><ul><li><ul><li><ul><li><strong>\u8BFB\u53D6\u6240\u6709\u7684\u914D\u7F6E\u6E90\u7684\u914D\u7F6E\u5C5E\u6027\u503C\u3002</strong></li></ul></li></ul></li></ul></li><li><ul><li><ul><li>\u7ED1\u5B9A\u73AF\u5883\u4FE1\u606F</li><li>\u76D1\u542C\u5668\u8C03\u7528 listener.environmentPrepared()\uFF1B\u901A\u77E5\u6240\u6709\u7684\u76D1\u542C\u5668\u5F53\u524D\u73AF\u5883\u51C6\u5907\u5B8C\u6210</li></ul></li></ul></li><li><ul><li>\u521B\u5EFAIOC\u5BB9\u5668\uFF08createApplicationContext\uFF08\uFF09\uFF09</li></ul></li><li><ul><li><ul><li>\u6839\u636E\u9879\u76EE\u7C7B\u578B\uFF08Servlet\uFF09\u521B\u5EFA\u5BB9\u5668\uFF0C</li><li>\u5F53\u524D\u4F1A\u521B\u5EFA <strong>AnnotationConfigServletWebServerApplicationContext</strong></li></ul></li></ul></li><li><ul><li><strong>\u51C6\u5907ApplicationContext IOC\u5BB9\u5668\u7684\u57FA\u672C\u4FE1\u606F</strong> <strong>prepareContext()</strong></li></ul></li><li><ul><li><ul><li>\u4FDD\u5B58\u73AF\u5883\u4FE1\u606F</li><li>IOC\u5BB9\u5668\u7684\u540E\u7F6E\u5904\u7406\u6D41\u7A0B\u3002</li><li>\u5E94\u7528\u521D\u59CB\u5316\u5668\uFF1BapplyInitializers\uFF1B</li></ul></li></ul></li><li><ul><li><ul><li><ul><li>\u904D\u5386\u6240\u6709\u7684 <strong>ApplicationContextInitializer \u3002\u8C03\u7528</strong> <strong>initialize.\u3002\u6765\u5BF9ioc\u5BB9\u5668\u8FDB\u884C\u521D\u59CB\u5316\u6269\u5C55\u529F\u80FD</strong></li><li>\u904D\u5386\u6240\u6709\u7684 listener \u8C03\u7528 <strong>contextPrepared\u3002EventPublishRunListenr\uFF1B\u901A\u77E5\u6240\u6709\u7684\u76D1\u542C\u5668****contextPrepared</strong></li></ul></li></ul></li></ul></li><li><ul><li><ul><li><strong>\u6240\u6709\u7684\u76D1\u542C\u5668 \u8C03\u7528</strong> <strong>contextLoaded\u3002\u901A\u77E5\u6240\u6709\u7684\u76D1\u542C\u5668</strong> <strong>contextLoaded\uFF1B</strong></li></ul></li></ul></li><li><ul><li>**\u5237\u65B0IOC\u5BB9\u5668\u3002**refreshContext</li></ul></li><li><ul><li><ul><li>\u521B\u5EFA\u5BB9\u5668\u4E2D\u7684\u6240\u6709\u7EC4\u4EF6\uFF08Spring\u6CE8\u89E3\uFF09</li></ul></li></ul></li><li><ul><li>\u5BB9\u5668\u5237\u65B0\u5B8C\u6210\u540E\u5DE5\u4F5C\uFF1FafterRefresh</li><li>\u6240\u6709\u76D1\u542C \u5668 \u8C03\u7528 listeners.<strong>started</strong>(context); <strong>\u901A\u77E5\u6240\u6709\u7684\u76D1\u542C\u5668</strong> <strong>started</strong></li><li>**\u8C03\u7528\u6240\u6709runners\uFF1B**callRunners()</li></ul></li><li><ul><li><ul><li><strong>\u83B7\u53D6\u5BB9\u5668\u4E2D\u7684</strong> <strong>ApplicationRunner</strong></li><li><strong>\u83B7\u53D6\u5BB9\u5668\u4E2D\u7684</strong> <strong>CommandLineRunner</strong></li><li><strong>\u5408\u5E76\u6240\u6709runner\u5E76\u4E14\u6309\u7167@Order\u8FDB\u884C\u6392\u5E8F</strong></li><li><strong>\u904D\u5386\u6240\u6709\u7684runner\u3002\u8C03\u7528 run</strong> <strong>\u65B9\u6CD5</strong></li></ul></li></ul></li><li><ul><li><strong>\u5982\u679C\u4EE5\u4E0A\u6709\u5F02\u5E38\uFF0C</strong></li></ul></li><li><ul><li><ul><li><strong>\u8C03\u7528Listener \u7684 failed</strong></li></ul></li></ul></li><li><ul><li><strong>\u8C03\u7528\u6240\u6709\u76D1\u542C\u5668\u7684 running \u65B9\u6CD5</strong> listeners.running(context); <strong>\u901A\u77E5\u6240\u6709\u7684\u76D1\u542C\u5668</strong> <strong>running</strong></li><li>**running\u5982\u679C\u6709\u95EE\u9898\u3002\u7EE7\u7EED\u901A\u77E5 failed \u3002**<strong>\u8C03\u7528\u6240\u6709 Listener \u7684</strong> **failed\uFF1B**<strong>\u901A\u77E5\u6240\u6709\u7684\u76D1\u542C\u5668</strong> <strong>failed</strong></li></ul></li></ul><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Bootstrapper</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * Initialize the given <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">BootstrapRegistry</span></span><span class="token punctuation">}</span> with any required registrations.
	 * <span class="token keyword">@param</span> <span class="token parameter">registry</span> the registry to initialize
	 */</span>
	<span class="token keyword">void</span> <span class="token function">intitialize</span><span class="token punctuation">(</span><span class="token class-name">BootstrapRegistry</span> registry<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/1607005958877-bf152e3e-4d2d-42b6-a08c-ceef9870f3b6.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1607004823889-8373cea4-6305-40c1-af3b-921b071a28a8.png" alt="img" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/1607006112013-6ed5c0a0-3e02-4bf1-bdb7-423e0a0b3f3c.png" alt="img" loading="lazy"></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">ApplicationRunner</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * Callback used to run the bean.
	 * <span class="token keyword">@param</span> <span class="token parameter">args</span> incoming application arguments
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span> on error
	 */</span>
	<span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">ApplicationArguments</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token annotation punctuation">@FunctionalInterface</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">CommandLineRunner</span> <span class="token punctuation">{</span>

	<span class="token doc-comment comment">/**
	 * Callback used to run the bean.
	 * <span class="token keyword">@param</span> <span class="token parameter">args</span> incoming main method arguments
	 * <span class="token keyword">@throws</span> <span class="token reference"><span class="token class-name">Exception</span></span> on error
	 */</span>
	<span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2\u3001application-events-and-listeners" tabindex="-1"><a class="header-anchor" href="#_2\u3001application-events-and-listeners" aria-hidden="true">#</a> 2\u3001Application Events and Listeners</h4>`,8),Bt={href:"https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-application-events-and-listeners",target:"_blank",rel:"noopener noreferrer"},Ft=s("https://docs.spring.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-application-events-and-listeners"),Ht=e(`<p><strong>ApplicationContextInitializer</strong></p><p><strong>ApplicationListener</strong></p><p><strong>SpringApplicationRunListener</strong></p><h4 id="_3\u3001applicationrunner-\u4E0E-commandlinerunner" tabindex="-1"><a class="header-anchor" href="#_3\u3001applicationrunner-\u4E0E-commandlinerunner" aria-hidden="true">#</a> 3\u3001ApplicationRunner \u4E0E CommandLineRunner</h4><h1 id="\u516D\u3001\u57FA\u672C\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001\u57FA\u672C\u7EC4\u4EF6" aria-hidden="true">#</a> \u516D\u3001\u57FA\u672C\u7EC4\u4EF6</h1><h2 id="spring-profiles" tabindex="-1"><a class="header-anchor" href="#spring-profiles" aria-hidden="true">#</a> Spring Profiles</h2><p>\u4E0D\u540C\u73AF\u5883\u4E0D\u540C\u914D\u7F6E\u6587\u4EF6</p><div class="language-properties ext-properties line-numbers-mode"><pre class="language-properties"><code>application.properties\uFF08\u9ED8\u8BA4\uFF0C\u914D\u7F6E\u9009\u62E9\u5176\u4ED6
<span class="token comment">#spring.profiles.active=test\uFF08\u5176\u4ED6\u914D\u7F6E\u6587\u4EF6\u7684profile\uFF09\u6307\u5B9A\u4E0D\u540C\u73AF\u5883\u914D\u7F6Eapplication-{profile}.properties\uFF09</span>
\u8FD9\u6837\u6BCF\u6B21\u90E8\u7F72\u9700\u8981\u4FEE\u6539\u914D\u7F6E\u6587\u4EF6\uFF0C\u4E5F\u53EF\u901A\u8FC7jar\u5305\u8FD0\u884C\u65F6\u7684\u547D\u4EE4\u5982\u4E0B\uFF1A
<span class="token key attr-name">java</span> <span class="token value attr-value">-jar target/spring-boot-helloworld-0.0.1.jar --spring.profiles.active=prod</span>

application-dev.properties
application-prod.properties
application-test.properties
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="spring-batch-todo" tabindex="-1"><a class="header-anchor" href="#spring-batch-todo" aria-hidden="true">#</a> spring batch[TODO]</h2><h2 id="swagger" tabindex="-1"><a class="header-anchor" href="#swagger" aria-hidden="true">#</a> Swagger</h2><p>\u63A5\u53E3\u6587\u6863\uFF0C\u63A5\u53E3\u6D4B\u8BD5</p><p><strong>\u542F\u52A8\u7C7B\u6DFB\u52A0\u6CE8\u89E3@EnableSwagger2Doc</strong></p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>@Api\uFF1A\u7528\u5728\u8BF7\u6C42\u7684\u7C7B\u4E0A\uFF0C\u8868\u793A\u5BF9\u7C7B\u7684\u8BF4\u660E
    tags=&quot;\u8BF4\u660E\u8BE5\u7C7B\u7684\u4F5C\u7528\uFF0C\u53EF\u4EE5\u5728UI\u754C\u9762\u4E0A\u770B\u5230\u7684\u6CE8\u89E3&quot;
    value=&quot;\u8BE5\u53C2\u6570\u6CA1\u4EC0\u4E48\u610F\u4E49\uFF0C\u5728UI\u754C\u9762\u4E0A\u4E5F\u770B\u5230\uFF0C\u6240\u4EE5\u4E0D\u9700\u8981\u914D\u7F6E&quot;
 
 
@ApiOperation\uFF1A\u7528\u5728\u8BF7\u6C42\u7684\u65B9\u6CD5\u4E0A\uFF0C\u8BF4\u660E\u65B9\u6CD5\u7684\u7528\u9014\u3001\u4F5C\u7528
    value=&quot;\u8BF4\u660E\u65B9\u6CD5\u7684\u7528\u9014\u3001\u4F5C\u7528&quot;
    notes=&quot;\u65B9\u6CD5\u7684\u5907\u6CE8\u8BF4\u660E&quot;
 
 
@ApiImplicitParams\uFF1A\u7528\u5728\u8BF7\u6C42\u7684\u65B9\u6CD5\u4E0A\uFF0C\u8868\u793A\u4E00\u7EC4\u53C2\u6570\u8BF4\u660E
    @ApiImplicitParam\uFF1A\u7528\u5728@ApiImplicitParams\u6CE8\u89E3\u4E2D\uFF0C\u6307\u5B9A\u4E00\u4E2A\u8BF7\u6C42\u53C2\u6570\u7684\u5404\u4E2A\u65B9\u9762
        name\uFF1A\u53C2\u6570\u540D
        value\uFF1A\u53C2\u6570\u7684\u6C49\u5B57\u8BF4\u660E\u3001\u89E3\u91CA
        required\uFF1A\u53C2\u6570\u662F\u5426\u5FC5\u987B\u4F20
        paramType\uFF1A\u53C2\u6570\u653E\u5728\u54EA\u4E2A\u5730\u65B9
            \xB7 header --&gt; \u8BF7\u6C42\u53C2\u6570\u7684\u83B7\u53D6\uFF1A@RequestHeader
            \xB7 query --&gt; \u8BF7\u6C42\u53C2\u6570\u7684\u83B7\u53D6\uFF1A@RequestParam
            \xB7 path\uFF08\u7528\u4E8Erestful\u63A5\u53E3\uFF09--&gt; \u8BF7\u6C42\u53C2\u6570\u7684\u83B7\u53D6\uFF1A@PathVariable
            \xB7 body\uFF08\u4E0D\u5E38\u7528\uFF09
            \xB7 form\uFF08\u4E0D\u5E38\u7528\uFF09    
        dataType\uFF1A\u53C2\u6570\u7C7B\u578B\uFF0C\u9ED8\u8BA4String\uFF0C\u5176\u5B83\u503CdataType=&quot;Integer&quot;       
        defaultValue\uFF1A\u53C2\u6570\u7684\u9ED8\u8BA4\u503C
 
 
@ApiResponses\uFF1A\u7528\u5728\u8BF7\u6C42\u7684\u65B9\u6CD5\u4E0A\uFF0C\u8868\u793A\u4E00\u7EC4\u54CD\u5E94
    @ApiResponse\uFF1A\u7528\u5728@ApiResponses\u4E2D\uFF0C\u4E00\u822C\u7528\u4E8E\u8868\u8FBE\u4E00\u4E2A\u9519\u8BEF\u7684\u54CD\u5E94\u4FE1\u606F
        code\uFF1A\u6570\u5B57\uFF0C\u4F8B\u5982400
        message\uFF1A\u4FE1\u606F\uFF0C\u4F8B\u5982&quot;\u8BF7\u6C42\u53C2\u6570\u6CA1\u586B\u597D&quot;
        response\uFF1A\u629B\u51FA\u5F02\u5E38\u7684\u7C7B
 
 
@ApiModel\uFF1A\u7528\u4E8E\u54CD\u5E94\u7C7B\u4E0A\uFF0C\u8868\u793A\u4E00\u4E2A\u8FD4\u56DE\u54CD\u5E94\u6570\u636E\u7684\u4FE1\u606F
            \uFF08\u8FD9\u79CD\u4E00\u822C\u7528\u5728post\u521B\u5EFA\u7684\u65F6\u5019\uFF0C\u4F7F\u7528@RequestBody\u8FD9\u6837\u7684\u573A\u666F\uFF0C
            \u8BF7\u6C42\u53C2\u6570\u65E0\u6CD5\u4F7F\u7528@ApiImplicitParam\u6CE8\u89E3\u8FDB\u884C\u63CF\u8FF0\u7684\u65F6\u5019\uFF09
    @ApiModelProperty\uFF1A\u7528\u5728\u5C5E\u6027\u4E0A\uFF0C\u63CF\u8FF0\u54CD\u5E94\u7C7B\u7684\u5C5E\u6027
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u4E03\u3001\u5B9E\u9645\u5E94\u7528" tabindex="-1"><a class="header-anchor" href="#\u4E03\u3001\u5B9E\u9645\u5E94\u7528" aria-hidden="true">#</a> \u4E03\u3001\u5B9E\u9645\u5E94\u7528</h1><h2 id="_1-springboot\u542F\u52A8\u7F13\u6162" tabindex="-1"><a class="header-anchor" href="#_1-springboot\u542F\u52A8\u7F13\u6162" aria-hidden="true">#</a> 1.springboot\u542F\u52A8\u7F13\u6162</h2><p>\u95EE\u9898\uFF1A\u5361\u5728</p><p>Mapped URL path [/v2/api-docs] onto method [public org.springframework.http.ResponseEntity&lt;springfox.documentation.spring.web.json.Json&gt; springfox.documentation.swagger2.web.Swagger2Controller.getDocumentation(java.lang.String,javax.servlet.http.HttpServletRequest)]</p><p>\u89E3\u51B3\uFF1A\u628A\u9879\u76EE\u4E0B\u7684 .idea \u6587\u4EF6\u5220\u9664\uFF0C\u7136\u540E\u5173\u95EDidea\uFF0C\u91CD\u65B0\u5BFC\u5165</p><p>2.\u89E3\u51B3Long \u578BID\u4F20\u7ED9\u524D\u7AEF js\u7CBE\u5EA6\u7F3A\u5931\u95EE\u9898</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token annotation punctuation">@JsonFormat</span><span class="token punctuation">(</span>shape <span class="token operator">=</span> <span class="token class-name">JsonFormat<span class="token punctuation">.</span>Shape</span><span class="token punctuation">.</span>STRING<span class="token punctuation">)</span>
<span class="token class-name">Long</span> id\uFF1B
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="maven\u51FA\u9519" tabindex="-1"><a class="header-anchor" href="#maven\u51FA\u9519" aria-hidden="true">#</a> Maven\u51FA\u9519</h2><h3 id="_1-\u68C0\u67E5\u6240\u6709jdk\u7248\u672C\u914D\u7F6E\u662F\u5426\u4E3A\u6B63\u786E\u7248\u672C" tabindex="-1"><a class="header-anchor" href="#_1-\u68C0\u67E5\u6240\u6709jdk\u7248\u672C\u914D\u7F6E\u662F\u5426\u4E3A\u6B63\u786E\u7248\u672C" aria-hidden="true">#</a> 1.\u68C0\u67E5\u6240\u6709JDK\u7248\u672C\u914D\u7F6E\u662F\u5426\u4E3A\u6B63\u786E\u7248\u672C</h3><h4 id="_1-idea-setting\u4E2D" tabindex="-1"><a class="header-anchor" href="#_1-idea-setting\u4E2D" aria-hidden="true">#</a> 1\uFF09IDEA setting\u4E2D</h4><p><img src="http://qnimg.gisfsde.com/work/image-20220515025745139.png" alt="image-20220515025745139" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220515030705080.png" alt="image-20220515030705080" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220515030729166.png" alt="image-20220515030729166" loading="lazy"></p><p>\u8BBE\u7F6E\u5B8C\u540E\u6E05\u695AIDEA\u7F13\u5B58\u91CD\u542F</p>`,27);function Lt(Dt,Nt){const a=o("ExternalLinkIcon");return c(),i("div",null,[n("blockquote",null,[u,r,n("p",null,[d,k,m,v,g,b,n("a",h,[f,t(a)]),y,n("a",w,[q,t(a)]),_,n("a",x,[S,t(a)]),C,A,M,j])]),R,n("h1",P,[E,I,n("a",T,[B,t(a)])]),F,n("h3",H,[L,D,n("a",N,[O,t(a)])]),n("p",null,[V,n("a",U,[W,t(a)])]),z,n("h3",J,[Y,G,n("a",X,[$,t(a)])]),Q,n("p",null,[n("a",K,[Z,t(a)])]),nn,n("ul",null,[sn,n("li",null,[n("ul",null,[n("li",null,[n("a",an,[tn,t(a)])])])]),en,pn,on,cn,n("li",null,[n("ul",null,[n("li",null,[n("ul",null,[n("li",null,[n("a",ln,[un,t(a)])]),rn])])])]),dn,kn,mn,vn]),gn,bn,hn,fn,yn,wn,qn,n("p",null,[_n,n("a",xn,[Sn,t(a)]),Cn]),An,n("h3",Mn,[jn,Rn,n("a",Pn,[En,t(a)])]),In,n("p",null,[Tn,n("a",Bn,[Fn,t(a)])]),n("p",null,[Hn,n("a",Ln,[Dn,t(a)]),Nn]),On,n("p",null,[Vn,n("a",Un,[Wn,t(a)])]),n("p",null,[zn,n("a",Jn,[Yn,t(a)]),Gn]),Xn,$n,Qn,n("p",null,[n("a",Kn,[Zn,t(a)])]),ns,n("ul",null,[ss,as,n("li",null,[n("p",null,[ts,n("strong",null,[n("a",es,[ps,t(a)])])])]),os]),cs,n("p",null,[n("a",is,[ls,t(a)])]),us,n("p",null,[n("a",rs,[ds,t(a)])]),n("p",null,[ks,n("a",ms,[vs,t(a)])]),gs,n("p",null,[n("a",bs,[hs,t(a)])]),fs,n("p",null,[n("a",ys,[ws,t(a)]),qs,n("a",_s,[xs,t(a)]),Ss]),n("p",null,[n("a",Cs,[As,t(a)])]),Ms,n("p",null,[js,Rs,Ps,n("a",Es,[Is,t(a)]),Ts,n("a",Bs,[Fs,t(a)]),Hs,n("a",Ls,[Ds,t(a)]),Ns,n("a",Os,[Vs,t(a)]),Us,n("a",Ws,[zs,t(a)]),Js,n("a",Ys,[Gs,t(a)]),Xs,n("a",$s,[Qs,t(a)]),Ks,n("a",Zs,[na,t(a)]),sa,n("a",aa,[ta,t(a)]),ea,n("a",pa,[oa,t(a)]),ca,n("a",ia,[la,t(a)]),ua,n("a",ra,[da,t(a)]),ka,n("a",ma,[va,t(a)]),ga,n("a",ba,[ha,t(a)]),fa,n("a",ya,[wa,t(a)]),qa]),_a,n("p",null,[n("a",xa,[Sa,t(a)])]),Ca,n("ul",null,[Aa,n("li",null,[Ma,n("a",ja,[Ra,t(a)]),Pa]),Ea]),Ia,n("p",null,[n("a",Ta,[Ba,t(a)])]),n("p",null,[n("a",Fa,[Ha,t(a)])]),n("p",null,[n("a",La,[Da,t(a)])]),n("p",null,[n("a",Na,[Oa,t(a)])]),n("p",null,[n("a",Va,[Ua,t(a)]),Wa]),za,n("p",null,[n("a",Ja,[Ya,t(a)])]),Ga,n("p",null,[n("a",Xa,[$a,t(a)]),Qa]),Ka,Za,n("ul",null,[nt,n("li",null,[n("p",null,[n("a",st,[at,t(a)]),tt])])]),et,n("p",null,[pt,n("a",ot,[ct,t(a)])]),it,n("p",null,[n("a",lt,[ut,t(a)])]),n("ol",null,[rt,n("li",null,[dt,kt,mt,vt,n("a",gt,[bt,t(a)]),ht]),ft,n("li",null,[n("a",yt,[wt,t(a)]),qt,_t,xt])]),St,n("p",null,[Ct,n("a",At,[Mt,t(a)]),jt,Rt,Pt,Et,It]),Tt,n("p",null,[n("a",Bt,[Ft,t(a)])]),Ht])}var Ut=p(l,[["render",Lt],["__file","SpringBoot.html.vue"]]);export{Ut as default};
