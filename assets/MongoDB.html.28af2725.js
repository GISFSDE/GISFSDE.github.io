import{_ as o}from"./plugin-vue_export-helper.21dcd24c.js";import{r as p,o as l,c as i,a as n,b as t,d as s,e}from"./app.95807bc9.js";const u={},c=n("blockquote",null,[n("p",null,"\u6700\u50CF\u5173\u7CFB\u578B\u6570\u636E\u5E93\u7684\u975E\u5173\u7CFB\u578B\u6570\u636E\u5E93")],-1),d=n("h1",{id:"\u65B0\u5B66\u56DB\u95EE",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u65B0\u5B66\u56DB\u95EE","aria-hidden":"true"},"#"),s(" \u65B0\u5B66\u56DB\u95EE")],-1),r=n("strong",null,"WHY\u3010\u4E0E\u524D\u4EE3\u4F18\u5316\u4E86\u4EC0\u4E48\uFF0C\u5F25\u8865\u4E86\u4EC0\u4E48\u7A7A\u767D\u3011\uFF1A",-1),k=n("br",null,null,-1),m=n("strong",null,"WHAT\u3010\u6846\u67B6\uFF0C\u601D\u7EF4\u5BFC\u56FE\uFF0C\u4E3B\u9898\u6846\u67B6\u3011\uFF1A",-1),b=n("br",null,null,-1),g=n("strong",null,"HOW\u3010\u5982\u4F55\u8BB0\u5FC6\uFF0C\u5B66\u4E60\u8D44\u6E90\u3011",-1),v=s("\uFF1A"),q={href:"https://www.runoob.com/mongodb/mongodb-intro.html",target:"_blank",rel:"noopener noreferrer"},h=s("\u83DC\u9E1F"),f=s("\u3001"),x={href:"https://docs.mongodb.com/manual/introduction/",target:"_blank",rel:"noopener noreferrer"},_=s("\u5B98\u65B9\u6587\u6863"),y=n("br",null,null,-1),I=n("strong",null,"LEVEL\u3010\u4E0D\u662F\u6BCF\u4E2A\u90FD\u5B66\u7CBE\u3011\uFF1A",-1),M={id:"\u8FDB\u5EA6-\u3010\u4E00\u5929\u3011",tabindex:"-1"},O=n("a",{class:"header-anchor",href:"#\u8FDB\u5EA6-\u3010\u4E00\u5929\u3011","aria-hidden":"true"},"#",-1),j=s(" \u8FDB\u5EA6\uFF1A\u3010"),w={href:"https://www.runoob.com/mongodb/mongodb-operators.html",target:"_blank",rel:"noopener noreferrer"},D=s("\u4E00\u5929"),B=s("\u3011"),S=e(`<h1 id="\u5FEB\u67E5" tabindex="-1"><a class="header-anchor" href="#\u5FEB\u67E5" aria-hidden="true">#</a> \u5FEB\u67E5</h1><table><thead><tr><th>\u547D\u4EE4</th><th>\u89E3\u91CA</th><th>\u5907\u6CE8</th></tr></thead><tbody><tr><td>show dbs</td><td>\u67E5\u770B\u6240\u6709\u6570\u636E\u5E93</td><td></td></tr><tr><td>db</td><td>\u663E\u793A\u5F53\u524D\u6570\u636E\u5E93\u5BF9\u8C61\u6216\u96C6\u5408</td><td></td></tr><tr><td>use</td><td>\u8FDE\u63A5\u5230\u4E00\u4E2A\u6307\u5B9A\u7684\u6570\u636E\u5E93</td><td></td></tr><tr><td>db.createCollection(name, options)</td><td>\u521B\u5EFA\u96C6\u5408</td><td></td></tr><tr><td>show collections \u6216 show tables</td><td>\u67E5\u770B\u96C6\u5408</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p>\u5173\u7CFB\u56FE</p><h1 id="\u4E00\u3001\u7B80\u4ECB" tabindex="-1"><a class="header-anchor" href="#\u4E00\u3001\u7B80\u4ECB" aria-hidden="true">#</a> \u4E00\u3001\u7B80\u4ECB</h1><p>C++\u8BED\u8A00\u7F16\u5199\u7684\uFF0C\u662F\u4E00\u4E2A\u57FA\u4E8E\u5206\u5E03\u5F0F\u6587\u4EF6\u5B58\u50A8\u7684\u5F00\u6E90\u6570\u636E\u5E93\u7CFB\u7EDF\u3002</p><p>\u5728\u9AD8\u8D1F\u8F7D\u7684\u60C5\u51B5\u4E0B\uFF0C\u6DFB\u52A0\u66F4\u591A\u7684\u8282\u70B9\uFF0C\u53EF\u4EE5\u4FDD\u8BC1\u670D\u52A1\u5668\u6027\u80FD\u3002</p><p>MongoDB \u65E8\u5728\u4E3AWEB\u5E94\u7528\u63D0\u4F9B\u53EF\u6269\u5C55\u7684\u9AD8\u6027\u80FD\u6570\u636E\u5B58\u50A8\u89E3\u51B3\u65B9\u6848\u3002</p><p>MongoDB \u5C06\u6570\u636E\u5B58\u50A8\u4E3A\u4E00\u4E2A\u6587\u6863\uFF0C\u6570\u636E\u7ED3\u6784\u7531\u952E\u503C(key=&gt;value)\u5BF9\u7EC4\u6210\u3002MongoDB \u6587\u6863\u7C7B\u4F3C\u4E8E JSON \u5BF9\u8C61\u3002\u5B57\u6BB5\u503C\u53EF\u4EE5\u5305\u542B\u5176\u4ED6\u6587\u6863\uFF0C\u6570\u7EC4\u53CA\u6587\u6863\u6570\u7EC4\u3002</p><p>\u73AF\u5883\uFF1Awin10</p><h1 id="\u4E8C\u3001\u57FA\u7840\u6982\u5FF5" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u3001\u57FA\u7840\u6982\u5FF5" aria-hidden="true">#</a> \u4E8C\u3001\u57FA\u7840\u6982\u5FF5</h1><table><thead><tr><th style="text-align:left;">SQL\u672F\u8BED/\u6982\u5FF5</th><th style="text-align:left;">MongoDB\u672F\u8BED/\u6982\u5FF5</th><th style="text-align:left;">\u89E3\u91CA/\u8BF4\u660E</th></tr></thead><tbody><tr><td style="text-align:left;">database</td><td style="text-align:left;">database</td><td style="text-align:left;">\u6570\u636E\u5E93</td></tr><tr><td style="text-align:left;">table</td><td style="text-align:left;">collection</td><td style="text-align:left;">\u6570\u636E\u5E93\u8868/\u96C6\u5408</td></tr><tr><td style="text-align:left;">row</td><td style="text-align:left;">document</td><td style="text-align:left;">\u6570\u636E\u8BB0\u5F55\u884C/\u6587\u6863</td></tr><tr><td style="text-align:left;">column</td><td style="text-align:left;">field</td><td style="text-align:left;">\u6570\u636E\u5B57\u6BB5/\u57DF</td></tr><tr><td style="text-align:left;">index</td><td style="text-align:left;">index</td><td style="text-align:left;">\u7D22\u5F15</td></tr><tr><td style="text-align:left;">table joins</td><td style="text-align:left;"></td><td style="text-align:left;">\u8868\u8FDE\u63A5,MongoDB\u4E0D\u652F\u6301</td></tr><tr><td style="text-align:left;">primary key</td><td style="text-align:left;">primary key</td><td style="text-align:left;">\u4E3B\u952E,MongoDB\u81EA\u52A8\u5C06_id\u5B57\u6BB5\u8BBE\u7F6E\u4E3A\u4E3B\u952E</td></tr></tbody></table><p>\u9ED8\u8BA4\u6570\u636E\u5E93\u4E3Adb\u6587\u4EF6\u5939\u9700\u8981\u81EA\u5DF1\u521B\u5EFA\uFF0C\u6570\u636E\u653E\u5728data\u6587\u4EF6\u5939\u4E2D</p><h2 id="\u6587\u6863-document" tabindex="-1"><a class="header-anchor" href="#\u6587\u6863-document" aria-hidden="true">#</a> \u6587\u6863(Document)</h2><p>\u200B \u6587\u6863\u662F\u4E00\u7EC4\u952E\u503C(key-value)\u5BF9(\u5373 BSON)\u3002MongoDB \u7684\u6587\u6863\u4E0D\u9700\u8981\u8BBE\u7F6E\u76F8\u540C\u7684\u5B57\u6BB5\uFF0C\u5E76\u4E14\u76F8\u540C\u7684\u5B57\u6BB5\u4E0D\u9700\u8981\u76F8\u540C\u7684\u6570\u636E\u7C7B\u578B\uFF0C\u8FD9\u4E0E\u5173\u7CFB\u578B\u6570\u636E\u5E93\u6709\u5F88\u5927\u7684\u533A\u522B\uFF0C\u4E5F\u662F MongoDB \u975E\u5E38\u7A81\u51FA\u7684\u7279\u70B9\u3002\u4E00\u4E2A\u7B80\u5355\u7684\u6587\u6863\u4F8B\u5B50\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{&quot;site&quot;:&quot;www.runoob.com&quot;, &quot;name&quot;:&quot;\u83DC\u9E1F\u6559\u7A0B&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0B\u8868\u5217\u51FA\u4E86 RDBMS \u4E0E MongoDB \u5BF9\u5E94\u7684\u672F\u8BED\uFF1A</p><table><thead><tr><th style="text-align:center;">RDBMS</th><th style="text-align:left;">MongoDB</th></tr></thead><tbody><tr><td style="text-align:center;">\u6570\u636E\u5E93</td><td style="text-align:left;">\u6570\u636E\u5E93</td></tr><tr><td style="text-align:center;">\u8868\u683C</td><td style="text-align:left;">\u96C6\u5408</td></tr><tr><td style="text-align:center;">\u884C</td><td style="text-align:left;">\u6587\u6863</td></tr><tr><td style="text-align:center;">\u5217</td><td style="text-align:left;">\u5B57\u6BB5</td></tr><tr><td style="text-align:center;">\u8868\u8054\u5408</td><td style="text-align:left;">\u5D4C\u5165\u6587\u6863</td></tr><tr><td style="text-align:center;">\u4E3B\u952E</td><td style="text-align:left;">\u4E3B\u952E (MongoDB \u63D0\u4F9B\u4E86 key \u4E3A _id )</td></tr><tr><td style="text-align:center;">\u6570\u636E\u5E93\u670D\u52A1\u548C\u5BA2\u6237\u7AEF</td><td style="text-align:left;"></td></tr><tr><td style="text-align:center;">Mysqld/Oracle</td><td style="text-align:left;">mongod</td></tr><tr><td style="text-align:center;">mysql/sqlplus</td><td style="text-align:left;">mongo</td></tr></tbody></table><p>\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF1A</p><ol><li>\u6587\u6863\u4E2D\u7684\u952E/\u503C\u5BF9\u662F<strong>\u6709\u5E8F</strong>\u7684\u3002</li><li>\u6587\u6863\u4E2D\u7684\u503C\u4E0D\u4EC5\u53EF\u4EE5\u662F\u5728\u53CC\u5F15\u53F7\u91CC\u9762\u7684\u5B57\u7B26\u4E32\uFF0C\u8FD8\u53EF\u4EE5\u662F\u5176\u4ED6\u51E0\u79CD\u6570\u636E\u7C7B\u578B\uFF08\u751A\u81F3\u53EF\u4EE5\u662F\u6574\u4E2A\u5D4C\u5165\u7684\u6587\u6863)\u3002</li><li>MongoDB<strong>\u533A\u5206\u7C7B\u578B\u548C\u5927\u5C0F\u5199</strong>\u3002</li><li>MongoDB\u7684\u6587\u6863<strong>\u4E0D\u80FD\u6709\u91CD\u590D\u7684\u952E</strong>\u3002</li><li>\u6587\u6863\u7684<strong>\u952E\u662F\u5B57\u7B26\u4E32</strong>\u3002\u9664\u4E86\u5C11\u6570\u4F8B\u5916\u60C5\u51B5\uFF0C\u952E\u53EF\u4EE5\u4F7F\u7528\u4EFB\u610FUTF-8\u5B57\u7B26\u3002</li></ol><p><strong>\u6587\u6863\u952E\u547D\u540D\u89C4\u8303</strong>\uFF1A</p><ul><li>\u952E\u4E0D\u80FD\u542B\u6709\\0 (\u7A7A\u5B57\u7B26)\u3002\u8FD9\u4E2A\u5B57\u7B26\u7528\u6765\u8868\u793A\u952E\u7684\u7ED3\u5C3E\u3002</li><li>.\u548C$\u6709\u7279\u522B\u7684\u610F\u4E49\uFF0C\u53EA\u6709\u5728\u7279\u5B9A\u73AF\u5883\u4E0B\u624D\u80FD\u4F7F\u7528\u3002</li><li>\u4EE5\u4E0B\u5212\u7EBF&quot;_&quot;\u5F00\u5934\u7684\u952E\u662F\u4FDD\u7559\u7684(\u4E0D\u662F\u4E25\u683C\u8981\u6C42\u7684)\u3002</li></ul><hr><h2 id="\u96C6\u5408-\u8868" tabindex="-1"><a class="header-anchor" href="#\u96C6\u5408-\u8868" aria-hidden="true">#</a> \u96C6\u5408 / \u8868</h2><p>\u96C6\u5408\u5C31\u662F MongoDB \u6587\u6863\u7EC4\uFF0C\u7C7B\u4F3C\u4E8E RDBMS \uFF08\u5173\u7CFB\u6570\u636E\u5E93\u7BA1\u7406\u7CFB\u7EDF\uFF1ARelational Database Management System)\u4E2D\u7684\u8868\u683C\u3002</p><p>\u96C6\u5408\u5B58\u5728\u4E8E\u6570\u636E\u5E93\u4E2D\uFF0C\u96C6\u5408<strong>\u6CA1\u6709\u56FA\u5B9A\u7684\u7ED3\u6784</strong>\uFF0C\u8FD9\u610F\u5473\u7740\u4F60\u5728\u5BF9\u96C6\u5408<strong>\u53EF\u4EE5\u63D2\u5165\u4E0D\u540C\u683C\u5F0F\u548C\u7C7B\u578B\u7684\u6570\u636E</strong>\uFF0C\u4F46\u901A\u5E38\u60C5\u51B5\u4E0B\u6211\u4EEC\u63D2\u5165\u96C6\u5408\u7684\u6570\u636E\u90FD\u4F1A\u6709\u4E00\u5B9A\u7684\u5173\u8054\u6027\u3002</p><p>\u6BD4\u5982\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5C06\u4EE5\u4E0B\u4E0D\u540C\u6570\u636E\u7ED3\u6784\u7684\u6587\u6863\u63D2\u5165\u5230\u96C6\u5408\u4E2D\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{&quot;site&quot;:&quot;www.baidu.com&quot;}
{&quot;site&quot;:&quot;www.google.com&quot;,&quot;name&quot;:&quot;Google&quot;}
{&quot;site&quot;:&quot;www.runoob.com&quot;,&quot;name&quot;:&quot;\u83DC\u9E1F\u6559\u7A0B&quot;,&quot;num&quot;:5}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5F53<strong>\u7B2C\u4E00\u4E2A\u6587\u6863\u63D2\u5165\u65F6\uFF0C\u96C6\u5408\u5C31\u4F1A\u88AB\u521B\u5EFA</strong>\u3002</p><h3 id="\u5408\u6CD5\u7684\u96C6\u5408\u540D" tabindex="-1"><a class="header-anchor" href="#\u5408\u6CD5\u7684\u96C6\u5408\u540D" aria-hidden="true">#</a> \u5408\u6CD5\u7684\u96C6\u5408\u540D</h3><ul><li>\u96C6\u5408\u540D\u4E0D\u80FD\u662F\u7A7A\u5B57\u7B26\u4E32&quot;&quot;\u3002</li><li>\u96C6\u5408\u540D\u4E0D\u80FD\u542B\u6709\\0\u5B57\u7B26\uFF08\u7A7A\u5B57\u7B26)\uFF0C\u8FD9\u4E2A\u5B57\u7B26\u8868\u793A\u96C6\u5408\u540D\u7684\u7ED3\u5C3E\u3002</li><li>\u96C6\u5408\u540D\u4E0D\u80FD\u4EE5&quot;system.&quot;\u5F00\u5934\uFF0C\u8FD9\u662F\u4E3A\u7CFB\u7EDF\u96C6\u5408\u4FDD\u7559\u7684\u524D\u7F00\u3002</li><li>\u7528\u6237\u521B\u5EFA\u7684\u96C6\u5408\u540D\u5B57\u4E0D\u80FD\u542B\u6709\u4FDD\u7559\u5B57\u7B26\u3002\u6709\u4E9B\u9A71\u52A8\u7A0B\u5E8F\u7684\u786E\u652F\u6301\u5728\u96C6\u5408\u540D\u91CC\u9762\u5305\u542B\uFF0C\u8FD9\u662F\u56E0\u4E3A\u67D0\u4E9B\u7CFB\u7EDF\u751F\u6210\u7684\u96C6\u5408\u4E2D\u5305\u542B\u8BE5\u5B57\u7B26\u3002\u9664\u975E\u4F60\u8981\u8BBF\u95EE\u8FD9\u79CD\u7CFB\u7EDF\u521B\u5EFA\u7684\u96C6\u5408\uFF0C\u5426\u5219\u5343\u4E07\u4E0D\u8981\u5728\u540D\u5B57\u91CC\u51FA\u73B0$\u3002</li></ul><p>\u5982\u4E0B\u5B9E\u4F8B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.col.findOne()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="capped-collections" tabindex="-1"><a class="header-anchor" href="#capped-collections" aria-hidden="true">#</a> capped collections</h3><p>Capped collections \u5C31\u662F<strong>\u56FA\u5B9A\u5927\u5C0F\u7684collection</strong>\u3002</p><p>\u5B83\u6709<strong>\u5F88\u9AD8\u7684\u6027\u80FD\u4EE5\u53CA\u961F\u5217\u8FC7\u671F\u7684\u7279\u6027</strong>(\u8FC7\u671F\u6309\u7167\u63D2\u5165\u7684\u987A\u5E8F). \u6709\u70B9\u548C &quot;RRD&quot; \u6982\u5FF5\u7C7B\u4F3C\u3002</p><p>Capped collections \u662F\u9AD8\u6027\u80FD\u81EA\u52A8\u7684\u7EF4\u62A4\u5BF9\u8C61\u7684\u63D2\u5165\u987A\u5E8F\u3002\u5B83\u975E\u5E38<strong>\u9002\u5408\u7C7B\u4F3C\u8BB0\u5F55\u65E5\u5FD7\u7684\u529F\u80FD</strong>\uFF0C\u548C\u6807\u51C6\u7684 collection \u4E0D\u540C\uFF0C\u4F60\u5FC5\u987B\u8981\u663E\u5F0F\u7684\u521B\u5EFA\u4E00\u4E2Acapped collection\uFF0C<strong>\u6307\u5B9A</strong>\u4E00\u4E2A collection \u7684<strong>\u5927\u5C0F</strong>\uFF0C<strong>\u5355\u4F4D\u662F\u5B57\u8282</strong>\u3002collection \u7684\u6570\u636E\u5B58\u50A8\u7A7A\u95F4\u503C\u63D0\u524D\u5206\u914D\u7684\u3002</p><p>Capped collections \u53EF\u4EE5\u6309\u7167\u6587\u6863\u7684\u63D2\u5165\u987A\u5E8F\u4FDD\u5B58\u5230\u96C6\u5408\u4E2D\uFF0C\u800C\u4E14\u8FD9\u4E9B\u6587\u6863\u5728\u78C1\u76D8\u4E0A\u5B58\u653E\u4F4D\u7F6E\u4E5F\u662F\u6309\u7167\u63D2\u5165\u987A\u5E8F\u6765\u4FDD\u5B58\u7684\uFF0C\u6240\u4EE5\u5F53\u6211\u4EEC\u66F4\u65B0Capped collections \u4E2D\u6587\u6863\u7684\u65F6\u5019\uFF0C\u66F4\u65B0\u540E\u7684\u6587\u6863\u4E0D\u53EF\u4EE5\u8D85\u8FC7\u4E4B\u524D\u6587\u6863\u7684\u5927\u5C0F\uFF0C\u8FD9\u6837\u8BDD\u5C31\u53EF\u4EE5\u786E\u4FDD\u6240\u6709\u6587\u6863\u5728\u78C1\u76D8\u4E0A\u7684\u4F4D\u7F6E\u4E00\u76F4\u4FDD\u6301\u4E0D\u53D8\u3002</p>`,37),$=s("\u7531\u4E8E Capped collection \u662F\u6309\u7167\u6587\u6863\u7684\u63D2\u5165\u987A\u5E8F\u800C\u4E0D\u662F\u4F7F\u7528\u7D22\u5F15\u786E\u5B9A\u63D2\u5165\u4F4D\u7F6E\uFF0C\u8FD9\u6837\u7684\u8BDD\u53EF\u4EE5\u63D0\u9AD8\u589E\u6DFB\u6570\u636E\u7684\u6548\u7387\u3002MongoDB \u7684\u64CD\u4F5C\u65E5\u5FD7\u6587\u4EF6 "),C={href:"http://oplog.rs",target:"_blank",rel:"noopener noreferrer"},T=s("oplog.rs"),R=s(" \u5C31\u662F\u5229\u7528 Capped Collection \u6765\u5B9E\u73B0\u7684\u3002"),A=e(`<p>\u8981\u6CE8\u610F\u7684\u662F\u6307\u5B9A\u7684\u5B58\u50A8\u5927\u5C0F\u5305\u542B\u4E86\u6570\u636E\u5E93\u7684\u5934\u4FE1\u606F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.createCollection(&quot;mycoll&quot;, {capped:true, size:100000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>\u5728 capped collection \u4E2D\uFF0C\u4F60\u80FD\u6DFB\u52A0\u65B0\u7684\u5BF9\u8C61\u3002</li><li><strong>\u80FD\u8FDB\u884C\u66F4\u65B0\uFF0C\u7136\u800C\uFF0C\u5BF9\u8C61\u4E0D\u4F1A\u589E\u52A0\u5B58\u50A8\u7A7A\u95F4\u3002\u5982\u679C\u589E\u52A0\uFF0C\u66F4\u65B0\u5C31\u4F1A\u5931\u8D25</strong> \u3002</li><li>\u4F7F\u7528 Capped Collection \u4E0D\u80FD\u5220\u9664\u4E00\u4E2A\u6587\u6863\uFF0C\u53EF\u4EE5\u4F7F\u7528 drop() \u65B9\u6CD5\u5220\u9664 collection \u6240\u6709\u7684\u884C\u3002</li><li>\u5220\u9664\u4E4B\u540E\uFF0C\u4F60\u5FC5\u987B\u663E\u5F0F\u7684\u91CD\u65B0\u521B\u5EFA\u8FD9\u4E2A collection\u3002</li><li>\u5728<strong>32bit</strong>\u673A\u5668\u4E2D\uFF0Ccapped collection <strong>\u6700\u5927\u5B58\u50A8\u4E3A 1e9( 1X109)\u4E2A\u5B57\u8282</strong>\u3002</li></ul><hr><h2 id="\u5143\u6570\u636E" tabindex="-1"><a class="header-anchor" href="#\u5143\u6570\u636E" aria-hidden="true">#</a> \u5143\u6570\u636E</h2><p>\u6570\u636E\u5E93\u7684\u4FE1\u606F\u662F\u5B58\u50A8\u5728\u96C6\u5408\u4E2D\u3002\u5B83\u4EEC\u4F7F\u7528\u4E86\u7CFB\u7EDF\u7684\u547D\u540D\u7A7A\u95F4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dbname.system.*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728MongoDB\u6570\u636E\u5E93\u4E2D\u540D\u5B57\u7A7A\u95F4 &lt;dbname&gt;.system.* \u662F\u5305\u542B\u591A\u79CD\u7CFB\u7EDF\u4FE1\u606F\u7684\u7279\u6B8A\u96C6\u5408(Collection)\uFF0C\u5982\u4E0B:</p><table><thead><tr><th style="text-align:left;">\u96C6\u5408\u547D\u540D\u7A7A\u95F4</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:left;">dbname.system.namespaces</td><td style="text-align:left;">\u5217\u51FA\u6240\u6709\u540D\u5B57\u7A7A\u95F4\u3002</td></tr><tr><td style="text-align:left;">dbname.system.indexes</td><td style="text-align:left;">\u5217\u51FA\u6240\u6709\u7D22\u5F15\u3002</td></tr><tr><td style="text-align:left;">dbname.system.profile</td><td style="text-align:left;">\u5305\u542B\u6570\u636E\u5E93\u6982\u8981(profile)\u4FE1\u606F\u3002</td></tr><tr><td style="text-align:left;">dbname.system.users</td><td style="text-align:left;">\u5217\u51FA\u6240\u6709\u53EF\u8BBF\u95EE\u6570\u636E\u5E93\u7684\u7528\u6237\u3002</td></tr><tr><td style="text-align:left;">dbname.local.sources</td><td style="text-align:left;">\u5305\u542B\u590D\u5236\u5BF9\u7AEF\uFF08slave\uFF09\u7684\u670D\u52A1\u5668\u4FE1\u606F\u548C\u72B6\u6001\u3002</td></tr></tbody></table><p>\u5BF9\u4E8E\u4FEE\u6539\u7CFB\u7EDF\u96C6\u5408\u4E2D\u7684\u5BF9\u8C61\u6709\u5982\u4E0B\u9650\u5236\u3002</p><p>\u5728system.indexes\u63D2\u5165\u6570\u636E\uFF0C\u53EF\u4EE5\u521B\u5EFA\u7D22\u5F15\u3002\u4F46\u9664\u6B64\u4E4B\u5916\u8BE5\u8868\u4FE1\u606F\u662F\u4E0D\u53EF\u53D8\u7684(\u7279\u6B8A\u7684drop index\u547D\u4EE4\u5C06\u81EA\u52A8\u66F4\u65B0\u76F8\u5173\u4FE1\u606F)\u3002</p><p>system.users\u662F\u53EF\u4FEE\u6539\u7684\u3002 system.profile\u662F\u53EF\u5220\u9664\u7684\u3002</p><hr><h2 id="mongodb-\u6570\u636E\u7C7B\u578B" tabindex="-1"><a class="header-anchor" href="#mongodb-\u6570\u636E\u7C7B\u578B" aria-hidden="true">#</a> MongoDB \u6570\u636E\u7C7B\u578B</h2><p>\u4E0B\u8868\u4E3AMongoDB\u4E2D\u5E38\u7528\u7684\u51E0\u79CD\u6570\u636E\u7C7B\u578B\u3002</p><table><thead><tr><th style="text-align:left;">\u6570\u636E\u7C7B\u578B</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:left;">String</td><td style="text-align:left;">\u5B57\u7B26\u4E32\u3002\u5B58\u50A8\u6570\u636E\u5E38\u7528\u7684\u6570\u636E\u7C7B\u578B\u3002\u5728 MongoDB \u4E2D\uFF0CUTF-8 \u7F16\u7801\u7684\u5B57\u7B26\u4E32\u624D\u662F\u5408\u6CD5\u7684\u3002</td></tr><tr><td style="text-align:left;">Integer</td><td style="text-align:left;">\u6574\u578B\u6570\u503C\u3002\u7528\u4E8E\u5B58\u50A8\u6570\u503C\u3002\u6839\u636E\u4F60\u6240\u91C7\u7528\u7684\u670D\u52A1\u5668\uFF0C\u53EF\u5206\u4E3A 32 \u4F4D\u6216 64 \u4F4D\u3002</td></tr><tr><td style="text-align:left;">Boolean</td><td style="text-align:left;">\u5E03\u5C14\u503C\u3002\u7528\u4E8E\u5B58\u50A8\u5E03\u5C14\u503C\uFF08\u771F/\u5047\uFF09\u3002</td></tr><tr><td style="text-align:left;">Double</td><td style="text-align:left;">\u53CC\u7CBE\u5EA6\u6D6E\u70B9\u503C\u3002\u7528\u4E8E\u5B58\u50A8\u6D6E\u70B9\u503C\u3002</td></tr><tr><td style="text-align:left;">Min/Max keys</td><td style="text-align:left;">\u5C06\u4E00\u4E2A\u503C\u4E0E BSON\uFF08\u4E8C\u8FDB\u5236\u7684 JSON\uFF09\u5143\u7D20\u7684\u6700\u4F4E\u503C\u548C\u6700\u9AD8\u503C\u76F8\u5BF9\u6BD4\u3002</td></tr><tr><td style="text-align:left;">Array</td><td style="text-align:left;">\u7528\u4E8E\u5C06\u6570\u7EC4\u6216\u5217\u8868\u6216\u591A\u4E2A\u503C\u5B58\u50A8\u4E3A\u4E00\u4E2A\u952E\u3002</td></tr><tr><td style="text-align:left;">Timestamp</td><td style="text-align:left;">\u65F6\u95F4\u6233\u3002\u8BB0\u5F55\u6587\u6863\u4FEE\u6539\u6216\u6DFB\u52A0\u7684\u5177\u4F53\u65F6\u95F4\u3002</td></tr><tr><td style="text-align:left;">Object</td><td style="text-align:left;"><strong>\u7528\u4E8E\u5185\u5D4C\u6587\u6863\u3002</strong></td></tr><tr><td style="text-align:left;">Null</td><td style="text-align:left;">\u7528\u4E8E\u521B\u5EFA\u7A7A\u503C\u3002</td></tr><tr><td style="text-align:left;">Symbol</td><td style="text-align:left;">\u7B26\u53F7\u3002\u8BE5\u6570\u636E\u7C7B\u578B\u57FA\u672C\u4E0A\u7B49\u540C\u4E8E\u5B57\u7B26\u4E32\u7C7B\u578B\uFF0C\u4F46\u4E0D\u540C\u7684\u662F\uFF0C\u5B83\u4E00\u822C\u7528\u4E8E\u91C7\u7528\u7279\u6B8A\u7B26\u53F7\u7C7B\u578B\u7684\u8BED\u8A00\u3002</td></tr><tr><td style="text-align:left;">Date</td><td style="text-align:left;">\u65E5\u671F\u65F6\u95F4\u3002\u7528 UNIX \u65F6\u95F4\u683C\u5F0F\u6765\u5B58\u50A8\u5F53\u524D\u65E5\u671F\u6216\u65F6\u95F4\u3002\u4F60\u53EF\u4EE5\u6307\u5B9A\u81EA\u5DF1\u7684\u65E5\u671F\u65F6\u95F4\uFF1A\u521B\u5EFA Date \u5BF9\u8C61\uFF0C\u4F20\u5165\u5E74\u6708\u65E5\u4FE1\u606F\u3002</td></tr><tr><td style="text-align:left;">Object ID</td><td style="text-align:left;">\u5BF9\u8C61 ID\u3002\u7528\u4E8E\u521B\u5EFA\u6587\u6863\u7684 ID\u3002</td></tr><tr><td style="text-align:left;">Binary Data</td><td style="text-align:left;">\u4E8C\u8FDB\u5236\u6570\u636E\u3002\u7528\u4E8E\u5B58\u50A8\u4E8C\u8FDB\u5236\u6570\u636E\u3002</td></tr><tr><td style="text-align:left;">Code</td><td style="text-align:left;"><strong>\u4EE3\u7801\u7C7B\u578B\u3002\u7528\u4E8E\u5728\u6587\u6863\u4E2D\u5B58\u50A8 JavaScript \u4EE3\u7801\u3002</strong></td></tr><tr><td style="text-align:left;">Regular expression</td><td style="text-align:left;"><strong>\u6B63\u5219\u8868\u8FBE\u5F0F\u7C7B\u578B\u3002\u7528\u4E8E\u5B58\u50A8\u6B63\u5219\u8868\u8FBE\u5F0F\u3002</strong></td></tr></tbody></table><p>\u4E0B\u9762\u8BF4\u660E\u4E0B\u51E0\u79CD\u91CD\u8981\u7684\u6570\u636E\u7C7B\u578B\u3002</p><h3 id="objectid" tabindex="-1"><a class="header-anchor" href="#objectid" aria-hidden="true">#</a> ObjectId</h3><p>ObjectId \u7C7B\u4F3C\u552F\u4E00\u4E3B\u952E\uFF0C\u53EF\u4EE5\u5F88\u5FEB\u7684\u53BB\u751F\u6210\u548C\u6392\u5E8F\uFF0C\u5305\u542B 12 bytes\uFF0C\u542B\u4E49\u662F\uFF1A</p><ul><li>\u524D 4 \u4E2A\u5B57\u8282\u8868\u793A\u521B\u5EFA <strong>unix</strong> \u65F6\u95F4\u6233,\u683C\u6797\u5C3C\u6CBB\u65F6\u95F4 <strong>UTC</strong> \u65F6\u95F4\uFF0C\u6BD4\u5317\u4EAC\u65F6\u95F4\u665A\u4E86 8 \u4E2A\u5C0F\u65F6</li><li>\u63A5\u4E0B\u6765\u7684 3 \u4E2A\u5B57\u8282\u662F\u673A\u5668\u6807\u8BC6\u7801</li><li>\u7D27\u63A5\u7684\u4E24\u4E2A\u5B57\u8282\u7531\u8FDB\u7A0B id \u7EC4\u6210 PID</li><li>\u6700\u540E\u4E09\u4E2A\u5B57\u8282\u662F\u968F\u673A\u6570</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2013/10/2875754375-5a19268f0fd9b_articlex.jpeg" alt="img" loading="lazy"></p><p>MongoDB \u4E2D\u5B58\u50A8\u7684\u6587\u6863\u5FC5\u987B\u6709\u4E00\u4E2A _id \u952E\u3002\u8FD9\u4E2A\u952E\u7684\u503C\u53EF\u4EE5\u662F\u4EFB\u4F55\u7C7B\u578B\u7684\uFF0C\u9ED8\u8BA4\u662F\u4E2A ObjectId \u5BF9\u8C61</p><p>\u7531\u4E8E ObjectId \u4E2D\u4FDD\u5B58\u4E86\u521B\u5EFA\u7684\u65F6\u95F4\u6233\uFF0C\u6240\u4EE5\u4F60\u4E0D\u9700\u8981\u4E3A\u4F60\u7684\u6587\u6863\u4FDD\u5B58\u65F6\u95F4\u6233\u5B57\u6BB5\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 getTimestamp \u51FD\u6570\u6765\u83B7\u53D6\u6587\u6863\u7684\u521B\u5EFA\u65F6\u95F4:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; var newObject = ObjectId()
&gt; newObject.getTimestamp()
ISODate(&quot;2017-11-25T07:21:10Z&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ObjectId \u8F6C\u4E3A\u5B57\u7B26\u4E32</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; newObject.str
5a1919e63df83ce79df8b38f
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5B57\u7B26\u4E32" tabindex="-1"><a class="header-anchor" href="#\u5B57\u7B26\u4E32" aria-hidden="true">#</a> \u5B57\u7B26\u4E32</h3><p><strong>BSON \u5B57\u7B26\u4E32\u90FD\u662F UTF-8 \u7F16\u7801\u3002</strong></p><h3 id="\u65F6\u95F4\u6233" tabindex="-1"><a class="header-anchor" href="#\u65F6\u95F4\u6233" aria-hidden="true">#</a> \u65F6\u95F4\u6233</h3><p>BSON \u6709\u4E00\u4E2A\u7279\u6B8A\u7684\u65F6\u95F4\u6233\u7C7B\u578B\u7528\u4E8E MongoDB \u5185\u90E8\u4F7F\u7528\uFF0C\u4E0E\u666E\u901A\u7684 \u65E5\u671F \u7C7B\u578B\u4E0D\u76F8\u5173\u3002 \u65F6\u95F4\u6233\u503C\u662F\u4E00\u4E2A 64 \u4F4D\u7684\u503C\u3002\u5176\u4E2D\uFF1A</p><ul><li>\u524D32\u4F4D\u662F\u4E00\u4E2A time_t \u503C\uFF08\u4E0EUnix\u65B0\u7EAA\u5143\u76F8\u5DEE\u7684\u79D2\u6570\uFF09</li><li>\u540E32\u4F4D\u662F\u5728\u67D0\u79D2\u4E2D\u64CD\u4F5C\u7684\u4E00\u4E2A\u9012\u589E\u7684<code>\u5E8F\u6570</code></li></ul><p>\u5728\u5355\u4E2A mongod \u5B9E\u4F8B\u4E2D\uFF0C\u65F6\u95F4\u6233\u503C\u901A\u5E38\u662F\u552F\u4E00\u7684\u3002</p><p>\u5728\u590D\u5236\u96C6\u4E2D\uFF0C oplog \u6709\u4E00\u4E2A ts \u5B57\u6BB5\u3002\u8FD9\u4E2A\u5B57\u6BB5\u4E2D\u7684\u503C\u4F7F\u7528BSON\u65F6\u95F4\u6233\u8868\u793A\u4E86\u64CD\u4F5C\u65F6\u95F4\u3002</p><blockquote><p>BSON \u65F6\u95F4\u6233\u7C7B\u578B\u4E3B\u8981\u7528\u4E8E MongoDB \u5185\u90E8\u4F7F\u7528\u3002\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B\u7684\u5E94\u7528\u5F00\u53D1\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528 BSON \u65E5\u671F\u7C7B\u578B\u3002</p></blockquote><h3 id="\u65E5\u671F" tabindex="-1"><a class="header-anchor" href="#\u65E5\u671F" aria-hidden="true">#</a> \u65E5\u671F</h3><p>\u8868\u793A\u5F53\u524D\u8DDD\u79BB Unix\u65B0\u7EAA\u5143\uFF081970\u5E741\u67081\u65E5\uFF09\u7684\u6BEB\u79D2\u6570\u3002\u65E5\u671F\u7C7B\u578B\u662F\u6709\u7B26\u53F7\u7684, \u8D1F\u6570\u8868\u793A 1970 \u5E74\u4E4B\u524D\u7684\u65E5\u671F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; var mydate1 = new Date()     //\u683C\u6797\u5C3C\u6CBB\u65F6\u95F4
&gt; mydate1
ISODate(&quot;2018-03-04T14:58:51.233Z&quot;)
&gt; typeof mydate1
object
&gt; var mydate2 = ISODate() //\u683C\u6797\u5C3C\u6CBB\u65F6\u95F4
&gt; mydate2
ISODate(&quot;2018-03-04T15:00:45.479Z&quot;)
&gt; typeof mydate2
object
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u6837\u521B\u5EFA\u7684\u65F6\u95F4\u662F\u65E5\u671F\u7C7B\u578B\uFF0C\u53EF\u4EE5\u4F7F\u7528 JS \u4E2D\u7684 Date \u7C7B\u578B\u7684\u65B9\u6CD5\u3002</p><p>\u8FD4\u56DE\u4E00\u4E2A\u65F6\u95F4\u7C7B\u578B\u7684\u5B57\u7B26\u4E32\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; var mydate1str = mydate1.toString()
&gt; mydate1str
Sun Mar 04 2018 14:58:51 GMT+0000 (UTC) 
&gt; typeof mydate1str
string
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6216\u8005</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; Date()
Sun Mar 04 2018 15:02:59 GMT+0000 (UTC) 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u4E09\u3001\u5B89\u88C5-win" tabindex="-1"><a class="header-anchor" href="#\u4E09\u3001\u5B89\u88C5-win" aria-hidden="true">#</a> \u4E09\u3001\u5B89\u88C5\uFF08win\uFF09</h1>`,43),E={id:"\u4E0B\u8F7D",tabindex:"-1"},N=n("a",{class:"header-anchor",href:"#\u4E0B\u8F7D","aria-hidden":"true"},"#",-1),P=s(),W={href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/",target:"_blank",rel:"noopener noreferrer"},L=s("\u4E0B\u8F7D"),z={id:"\u5B89\u88C5",tabindex:"-1"},U=n("a",{class:"header-anchor",href:"#\u5B89\u88C5","aria-hidden":"true"},"#",-1),F=s(),V={href:"https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/",target:"_blank",rel:"noopener noreferrer"},G=s("\u5B89\u88C5"),H=e(`<h2 id="\u521B\u5EFA\u9ED8\u8BA4\u6570\u636E\u6587\u4EF6\u5939-data-db-\u4E0E-data-log-mongodb-log\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u9ED8\u8BA4\u6570\u636E\u6587\u4EF6\u5939-data-db-\u4E0E-data-log-mongodb-log\u6587\u4EF6" aria-hidden="true">#</a> \u521B\u5EFA\u9ED8\u8BA4\u6570\u636E\u6587\u4EF6\u5939 \\data\\db \u4E0E \\data\\log \\MongoDB.log\u6587\u4EF6</h2><h2 id="\u624B\u52A8\u8FD0\u884Cmongodb\u670D\u52A1\u5668" tabindex="-1"><a class="header-anchor" href="#\u624B\u52A8\u8FD0\u884Cmongodb\u670D\u52A1\u5668" aria-hidden="true">#</a> \u624B\u52A8\u8FD0\u884CMongoDB\u670D\u52A1\u5668</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u5B89\u88C5\u76EE\u5F55\\bin\\mongod --dbpath \u81EA\u5DF1\u5B9A\u4E49\u7684\u6570\u636E\u6587\u4EF6\u5939\uFF08c:\\data\\db\uFF09</span>
F:<span class="token punctuation">\\</span>Softs<span class="token punctuation">\\</span>Installed<span class="token punctuation">\\</span>MongoDB<span class="token punctuation">\\</span>bin<span class="token punctuation">\\</span>mongod --dbpath F:<span class="token punctuation">\\</span>Softs<span class="token punctuation">\\</span>Installed<span class="token punctuation">\\</span>MongoDB<span class="token punctuation">\\</span>data<span class="token punctuation">\\</span>db


<span class="token comment">#\u6210\u529F\u7ED3\u679C\uFF1A</span>
<span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;<span class="token variable">$date</span>&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2022-01-18T14:50:04.760+08:00&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;s&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;I&quot;</span>,  <span class="token string">&quot;c&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CONTROL&quot;</span>,  <span class="token string">&quot;id&quot;</span>:23285,   <span class="token string">&quot;ctx&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;-&quot;</span>,<span class="token string">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols &#39;none&#39;&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;<span class="token variable">$date</span>&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2022-01-18T14:50:04.761+08:00&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;s&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;I&quot;</span>,  <span class="token string">&quot;c&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;NETWORK&quot;</span>,  <span class="token string">&quot;id&quot;</span>:4915701, <span class="token string">&quot;ctx&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;-&quot;</span>,<span class="token string">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Initialized wire specification&quot;</span>,<span class="token string">&quot;attr&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;spec&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;incomingExternalClient&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;minWireVersion&quot;</span>:0,<span class="token string">&quot;maxWireVersion&quot;</span>:13<span class="token punctuation">}</span>,<span class="token string">&quot;incomingInternalClient&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;minWireVersion&quot;</span>:0,<span class="token string">&quot;maxWireVersion&quot;</span>:13<span class="token punctuation">}</span>,<span class="token string">&quot;outgoing&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;minWireVersion&quot;</span>:0,<span class="token string">&quot;maxWireVersion&quot;</span>:13<span class="token punctuation">}</span>,<span class="token string">&quot;isInternalClient&quot;</span>:true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
\u3002\u3002\u3002
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u56DB\u3001\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u56DB\u3001\u8FDE\u63A5" aria-hidden="true">#</a> \u56DB\u3001\u8FDE\u63A5</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u4E00</span>
<span class="token comment">#\u5C06\u5176\u914D\u7F6E\u6210\u670D\u52A1\u540E\u542F\u52A8\u670D\u52A1</span>
mongod --dbpath <span class="token string">&quot;F:\\Softs\\Installed\\MongoDB\\data\\db&quot;</span> --logpath <span class="token string">&quot;F:\\Softs\\Installed\\MongoDB\\data\\log\\MongoDB.log&quot;</span> --install --serviceName <span class="token string">&quot;MongoDB&quot;</span>
PS F:<span class="token punctuation">\\</span>Softs<span class="token punctuation">\\</span>Installed<span class="token punctuation">\\</span>MongoDB<span class="token punctuation">\\</span>bin<span class="token operator">&gt;</span> net start mongodb
\u8BF7\u6C42\u7684\u670D\u52A1\u5DF2\u7ECF\u542F\u52A8\u3002

<span class="token comment">#\u4E8C</span>
<span class="token comment">#\u914D\u7F6Ebin\u76EE\u5F55\u73AF\u5883\u53D8\u91CF\u540E\uFF0C\u7528mongo\u8FDE\u63A5</span>
C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span>mongo
MongoDB shell version v5.0.6-rc0
connecting to: mongodb://127.0.0.1:27017/?compressors<span class="token operator">=</span>disabled<span class="token operator">&amp;</span><span class="token assign-left variable">gssapiServiceName</span><span class="token operator">=</span>mongodb
Implicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;4f5de15b-0c12-4dde-8cc4-325ae6b23114&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version: <span class="token number">5.0</span>.6-rc0



<span class="token comment">#\u5173\u95ED</span>

<span class="token comment">#\u4E0D\u4E3A\u7CFB\u7EDF\u670D\u52A1\u65F6</span>
\u5173\u95EDmongo\u547D\u4EE4\u7A97\u53E3
<span class="token comment">#\u7CFB\u7EDF\u670D\u52A1</span>
NET stop MongoDB <span class="token punctuation">(</span>\u5173\u95ED\u670D\u52A1<span class="token punctuation">)</span>

<span class="token comment">#\u5220\u9664\u8FDB\u7A0B</span>
mongod --dbpath <span class="token string">&quot;d:\\mongodb\\data\\db&quot;</span> --logpath <span class="token string">&quot;d:\\mongodb\\data\\log\\MongoDB.log&quot;</span> --remove --serviceName <span class="token string">&quot;MongoDB&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u4E94\u3001\u6570\u636E\u5E93" tabindex="-1"><a class="header-anchor" href="#\u4E94\u3001\u6570\u636E\u5E93" aria-hidden="true">#</a> \u4E94\u3001\u6570\u636E\u5E93</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u521B\u5EFA\u6570\u636E\u5E93\uFF0C\u6CA1\u6709\u521B\u5EFA\uFF0C\u6709\u5219\u5207\u6362\uFF0C</span>

<span class="token comment">#\u6570\u636E\u547D\u540D\u89C4\u5219\uFF1A</span>
<span class="token comment">#\u4E0D\u80FD\u662F\u7A7A\u5B57\u7B26\u4E32\uFF08&quot;&quot;)\u3002</span>
<span class="token comment">#\u4E0D\u5F97\u542B\u6709&#39; &#39;\uFF08\u7A7A\u683C)\u3001.\u3001$\u3001/\u3001\\\u548C\\0 (\u7A7A\u5B57\u7B26)\u3002</span>
<span class="token comment">#\u5E94\u5168\u90E8\u5C0F\u5199\u3002</span>
<span class="token comment">#\u6700\u591A64\u5B57\u8282\u3002</span>

<span class="token comment">#\u6709\u4E00\u4E9B\u6570\u636E\u5E93\u540D\u662F\u4FDD\u7559\u7684\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E9B\u6709\u7279\u6B8A\u4F5C\u7528\u7684\u6570\u636E\u5E93\u3002</span>
<span class="token comment">#admin\uFF1A \u4ECE\u6743\u9650\u7684\u89D2\u5EA6\u6765\u770B\uFF0C\u8FD9\u662F&quot;root&quot;\u6570\u636E\u5E93\u3002\u8981\u662F\u5C06\u4E00\u4E2A\u7528\u6237\u6DFB\u52A0\u5230\u8FD9\u4E2A\u6570\u636E\u5E93\uFF0C\u8FD9\u4E2A\u7528\u6237\u81EA\u52A8\u7EE7\u627F\u6240\u6709\u6570\u636E\u5E93\u7684\u6743\u9650\u3002\u4E00\u4E9B\u7279\u5B9A\u7684\u670D\u52A1\u5668\u7AEF\u547D\u4EE4\u4E5F\u53EA\u80FD\u4ECE\u8FD9\u4E2A\u6570\u636E\u5E93\u8FD0\u884C\uFF0C\u6BD4\u5982\u5217\u51FA\u6240\u6709\u7684\u6570\u636E\u5E93\u6216\u8005\u5173\u95ED\u670D\u52A1\u5668\u3002</span>
<span class="token comment">#local: \u8FD9\u4E2A\u6570\u636E\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u590D\u5236\uFF0C\u53EF\u4EE5\u7528\u6765\u5B58\u50A8\u9650\u4E8E\u672C\u5730\u5355\u53F0\u670D\u52A1\u5668\u7684\u4EFB\u610F\u96C6\u5408</span>
<span class="token comment">#config: \u5F53Mongo\u7528\u4E8E\u5206\u7247\u8BBE\u7F6E\u65F6\uFF0Cconfig\u6570\u636E\u5E93\u5728\u5185\u90E8\u4F7F\u7528\uFF0C\u7528\u4E8E\u4FDD\u5B58\u5206\u7247\u7684\u76F8\u5173\u4FE1\u606F\u3002</span>

<span class="token operator">&gt;</span> use user
switched to db user
<span class="token comment">#\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u540D</span>
<span class="token operator">&gt;</span> db
user
<span class="token comment">#\u63D2\u5165\u6570\u636E</span>
<span class="token operator">&gt;</span> db.user.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#\u67E5\u770B\u6570\u636E\u5E93\u5217\u8868\uFF0C\u6709\u6570\u636E\u7684\u6570\u636E\u5E93\u624D\u4F1A\u663E\u793A</span>
<span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
user    <span class="token number">0</span>.000GB
<span class="token comment">#\u5220\u9664\u6570\u636E\u5E93</span>
<span class="token operator">&gt;</span> use user
switched to db user
<span class="token operator">&gt;</span> db.<span class="token function-name function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u516D\u3001\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u516D\u3001\u96C6\u5408" aria-hidden="true">#</a> \u516D\u3001\u96C6\u5408</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u67E5\u770B\u6240\u6709\u6570\u636E\u5E93</span>
<span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
<span class="token operator">&gt;</span> use student
switched to db student
<span class="token comment">#\u521B\u5EFA\u96C6\u5408\u6570\u636E</span>
<span class="token operator">&gt;</span> db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;students&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u67E5\u770B\u96C6\u5408show collections \u6216 show tables</span>
<span class="token operator">&gt;</span> show tables
students
<span class="token operator">&gt;</span> db.student.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">false</span>
<span class="token comment">#\u5220\u9664\u96C6\u5408\u6570\u636E</span>
<span class="token operator">&gt;</span> db.students.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">true</span>
<span class="token operator">&gt;</span> show tables
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>options \u53C2\u6570\uFF1A</p><table><thead><tr><th style="text-align:left;">\u5B57\u6BB5</th><th style="text-align:left;">\u7C7B\u578B</th><th style="text-align:left;">\u63CF\u8FF0</th></tr></thead><tbody><tr><td style="text-align:left;">capped</td><td style="text-align:left;">\u5E03\u5C14</td><td style="text-align:left;">\uFF08\u53EF\u9009\uFF09\u5982\u679C\u4E3A true\uFF0C\u5219\u521B\u5EFA\u56FA\u5B9A\u96C6\u5408\u3002\u56FA\u5B9A\u96C6\u5408\u662F\u6307\u6709\u7740\u56FA\u5B9A\u5927\u5C0F\u7684\u96C6\u5408\uFF0C\u5F53\u8FBE\u5230\u6700\u5927\u503C\u65F6\uFF0C\u5B83\u4F1A\u81EA\u52A8\u8986\u76D6\u6700\u65E9\u7684\u6587\u6863\u3002 <strong>\u5F53\u8BE5\u503C\u4E3A true \u65F6\uFF0C\u5FC5\u987B\u6307\u5B9A size \u53C2\u6570\u3002</strong></td></tr><tr><td style="text-align:left;">autoIndexId</td><td style="text-align:left;">\u5E03\u5C14</td><td style="text-align:left;">3.2 \u4E4B\u540E\u4E0D\u518D\u652F\u6301\u8BE5\u53C2\u6570\u3002\uFF08\u53EF\u9009\uFF09\u5982\u4E3A true\uFF0C\u81EA\u52A8\u5728 _id \u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\u3002\u9ED8\u8BA4\u4E3A false\u3002</td></tr><tr><td style="text-align:left;">size</td><td style="text-align:left;">\u6570\u503C</td><td style="text-align:left;">\uFF08\u53EF\u9009\uFF09\u4E3A\u56FA\u5B9A\u96C6\u5408\u6307\u5B9A\u4E00\u4E2A\u6700\u5927\u503C\uFF0C\u5373\u5B57\u8282\u6570\u3002 <strong>\u5982\u679C capped \u4E3A true\uFF0C\u4E5F\u9700\u8981\u6307\u5B9A\u8BE5\u5B57\u6BB5\u3002</strong></td></tr><tr><td style="text-align:left;">max</td><td style="text-align:left;">\u6570\u503C</td><td style="text-align:left;">\uFF08\u53EF\u9009\uFF09\u6307\u5B9A\u56FA\u5B9A\u96C6\u5408\u4E2D\u5305\u542B\u6587\u6863\u7684\u6700\u5927\u6570\u91CF\u3002</td></tr></tbody></table><h1 id="\u4E03\u3001\u6587\u6863" tabindex="-1"><a class="header-anchor" href="#\u4E03\u3001\u6587\u6863" aria-hidden="true">#</a> \u4E03\u3001\u6587\u6863</h1><h2 id="\u589E" tabindex="-1"><a class="header-anchor" href="#\u589E" aria-hidden="true">#</a> \u589E</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> show tables
<span class="token operator">&gt;</span> db
student
<span class="token operator">&gt;</span> show collections
<span class="token operator">&gt;</span> db
student
<span class="token comment">#\u63D2\u5165\u6587\u6863  insert\uFF08\uFF09</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token string">&quot;lxl&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#\u67E5\u770B\u6587\u6863  find()</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token comment"># \u5C06\u6587\u6863\u58F0\u660E\u6210\u53D8\u91CF\u518D\u63D2\u5165</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age:18<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,age:19<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token comment"># \u63D2\u5165\u6587\u6863 save\uFF08\uFF09\uFF0C\u6709_id\u65F6\u91CD\u590D\u5219\u4FEE\u6539</span>
<span class="token operator">&gt;</span> db.student.save<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,age:20<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token comment">#\u63D2\u5165\u6587\u6863 insetOne\uFF08\uFF09id\u91CD\u590D\u62A5\u9519  db.collection.insertMany()\u4E00\u6B21\u63D2\u5165\u591A\u4E2A\u6587\u6863</span>
<span class="token operator">&gt;</span> db.student.insertOne<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: student.student index: _id_ dup key: { _id: ObjectId(&#39;61e7ae456e48f4bf534731d7&#39;) }&quot;</span>,
        <span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin class-name">:</span>
WriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: student.student index: _id_ dup key: { _id: ObjectId(&#39;61e7ae456e48f4bf534731d7&#39;) }&quot;</span>,
        <span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteError@src/mongo/shell/bulk_api.js:465:48
mergeBatchResults@src/mongo/shell/bulk_api.js:871:49
executeBatch@src/mongo/shell/bulk_api.js:940:13
Bulk/this.execute@src/mongo/shell/bulk_api.js:1182:21
DBCollection.prototype.insertOne@src/mongo/shell/crud_api.js:264:9
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token comment">#\u63D2\u5165\u6587\u6863replaceOne\uFF08\uFF09</span>
<span class="token operator">&gt;</span> db.student.replaceOne<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
uncaught exception: TypeError: can&#39;t convert undefined to object <span class="token builtin class-name">:</span>
DBCollection.prototype.replaceOne@src/mongo/shell/crud_api.js:477:16
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6539" tabindex="-1"><a class="header-anchor" href="#\u6539" aria-hidden="true">#</a> \u6539</h2><p>\u6A21\u677F</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.collection.update<span class="token punctuation">(</span>
   <span class="token punctuation">\\</span><span class="token operator">&lt;</span>query<span class="token operator">&gt;</span>,
   <span class="token punctuation">\\</span><span class="token operator">&lt;</span>update<span class="token operator">&gt;</span>,
   <span class="token punctuation">{</span>
     upsert: <span class="token punctuation">\\</span><span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>,
     multi: <span class="token punctuation">\\</span><span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>,
     writeConcern: <span class="token punctuation">\\</span><span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u53C2\u6570\u8BF4\u660E\uFF1A</strong></p>`,18),Z=n("ul",null,[n("li",null,[n("strong",null,"query"),s(" : update\u7684\u67E5\u8BE2\u6761\u4EF6\uFF0C\u7C7B\u4F3Csql update\u67E5\u8BE2\u5185where\u540E\u9762\u7684\u3002")]),n("li",null,[n("strong",null,"update"),s(" : update\u7684\u5BF9\u8C61\u548C\u4E00\u4E9B\u66F4\u65B0\u7684\u64CD\u4F5C\u7B26\uFF08\u5982"),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mo",{separator:"true"},",")]),n("annotation",{encoding:"application/x-tex"},",")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.3em","vertical-align":"-0.1944em"}}),n("span",{class:"mpunct"},",")])])]),s("inc...\uFF09\u7B49\uFF0C\u4E5F\u53EF\u4EE5\u7406\u89E3\u4E3Asql update\u67E5\u8BE2\u5185set\u540E\u9762\u7684")]),n("li",null,[n("strong",null,"upsert"),s(" : \u53EF\u9009\uFF0C\u5982\u679C\u4E0D\u5B58\u5728update\u7684\u8BB0\u5F55\uFF0C\u662F\u5426\u63D2\u5165objNew,true\u4E3A\u63D2\u5165\uFF0C\u9ED8\u8BA4\u662Ffalse\uFF0C\u4E0D\u63D2\u5165\u3002")]),n("li",null,[n("strong",null,"multi"),s(" : \u53EF\u9009\uFF0Cmongodb \u9ED8\u8BA4\u662Ffalse,\u53EA\u66F4\u65B0\u627E\u5230\u7684\u7B2C\u4E00\u6761\u8BB0\u5F55\uFF0C\u5982\u679C\u8FD9\u4E2A\u53C2\u6570\u4E3Atrue,\u5C31\u628A\u6309\u6761\u4EF6\u67E5\u51FA\u6765\u591A\u6761\u8BB0\u5F55\u5168\u90E8\u66F4\u65B0\u3002")]),n("li",null,[n("strong",null,"writeConcern"),s(" :\u53EF\u9009\uFF0C\u629B\u51FA\u5F02\u5E38\u7684\u7EA7\u522B\u3002")])],-1),K=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token comment">#\u66F4\u65B0\u7B2C\u4E00\u6761\u6587\u6863</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lll&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age:21<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age:21<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#\u66F4\u65B0\u7C7B\u578B\u5FC5\u987B\u76F8\u540C</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;21&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#\u591A\u6761\u6587\u6863\u76F8\u540C\u53EA\u66F4\u65B0\u7B2C\u4E00\u6761</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#,{multi:true}\u5C06\u5168\u90E8\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\u90FD\u66F4\u65B0</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>multi:true<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5220" tabindex="-1"><a class="header-anchor" href="#\u5220" aria-hidden="true">#</a> \u5220</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.collection.remove(
   \\&lt;query&gt;,
   {
     justOne: \\&lt;boolean&gt;,
     writeConcern: \\&lt;document&gt;
   }
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>\u53C2\u6570\u8BF4\u660E\uFF1A</strong></p><ul><li><strong>query</strong> :\uFF08\u53EF\u9009\uFF09\u5220\u9664\u7684\u6587\u6863\u7684\u6761\u4EF6\u3002</li><li><strong>justOne</strong> : \uFF08\u53EF\u9009\uFF09\u5982\u679C\u8BBE\u4E3A true \u6216 1\uFF0C\u5219\u53EA\u5220\u9664\u4E00\u4E2A\u6587\u6863\uFF0C\u5982\u679C\u4E0D\u8BBE\u7F6E\u8BE5\u53C2\u6570\uFF0C\u6216\u4F7F\u7528\u9ED8\u8BA4\u503C false\uFF0C\u5219\u5220\u9664\u6240\u6709\u5339\u914D\u6761\u4EF6\u7684\u6587\u6863\u3002</li><li><strong>writeConcern</strong> :\uFF08\u53EF\u9009\uFF09\u629B\u51FA\u5F02\u5E38\u7684\u7EA7\u522B</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token comment">#\u5220\u9664\u6240\u6709\u590D\u5408\u6761\u4EF6\u7684\u6587\u6863</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b3d76e48f4bf534731da&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b3d96e48f4bf534731db&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#\u8BBE\u7F6EjustOne\u4E3Atrue\u62161\uFF0C\u5220\u9664\u7B26\u5408\u6761\u4EF6\u7684\u7B2C\u4E00\u6761\u6587\u6863</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span>,1<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span>,1<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b3d96e48f4bf534731db&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#\u5220\u9664\u6240\u6709\u6587\u6863</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">)</span>
uncaught exception: Error: remove needs a query <span class="token builtin class-name">:</span>
DBCollection.prototype._parseRemove@src/mongo/shell/collection.js:364:15
DBCollection.prototype.remove@src/mongo/shell/collection.js:394:18
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u67E5" tabindex="-1"><a class="header-anchor" href="#\u67E5" aria-hidden="true">#</a> \u67E5</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.collection.find(query, projection)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>query</strong> \uFF1A\u53EF\u9009\uFF0C\u4F7F\u7528\u67E5\u8BE2\u64CD\u4F5C\u7B26\u6307\u5B9A\u67E5\u8BE2\u6761\u4EF6</li><li><strong>projection</strong> \uFF1A\u53EF\u9009\uFF0C\u4F7F\u7528\u6295\u5F71\u64CD\u4F5C\u7B26\u6307\u5B9A\u8FD4\u56DE\u7684\u952E\u3002\u67E5\u8BE2\u65F6\u8FD4\u56DE\u6587\u6863\u4E2D\u6240\u6709\u952E\u503C\uFF0C \u53EA\u9700\u7701\u7565\u8BE5\u53C2\u6570\u5373\u53EF\uFF08\u9ED8\u8BA4\u7701\u7565\uFF09\u3002</li></ul><p>\u5982\u679C\u4F60\u9700\u8981\u4EE5\u6613\u8BFB\u7684\u65B9\u5F0F\u6765\u8BFB\u53D6\u6570\u636E\uFF0C\u53EF\u4EE5\u4F7F\u7528 pretty() \u65B9\u6CD5\uFF0C\u8BED\u6CD5\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.col.find().pretty()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>pretty() \u65B9\u6CD5\u4EE5\u683C\u5F0F\u5316\u7684\u65B9\u5F0F\u6765\u663E\u793A\u6240\u6709\u6587\u6863\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22,name:<span class="token string">&quot;a1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:11,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>                                                                         
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#\u67E5\u8BE2\u7B2C\u4E00\u4E2A</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.<span class="token function-name function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>

<span class="token comment">#\u67E5\u8BE2\u5168\u90E8</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  \u5C0F\u4E8E$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u67E5\u8BE2\u5C0F\u4E8E$lt\u7684\u6307\u5B9A\u5B57\u6BB5</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span>\uFF0C<span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token comment">#\u67E5\u8BE2\u5C0F\u4E8E$lt\u7684\u6307\u5B9A\u5916\u5B57\u6BB5</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span>\uFF0C<span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  \u5C0F\u4E8E\u6216\u7B49\u4E8E$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lte</span>:22<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  \u5927\u4E8E$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$gt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  \u5927\u4E8E\u6216\u7B49\u4E8E$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$gte</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  \u4E0D\u7B49\u4E8E$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:11,name:<span class="token string">&quot;a3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  and  $ne</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:22<span class="token punctuation">}</span>,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:33,name:<span class="token string">&quot;a3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  or $or  \u7F3A\u5C11\u5192\u53F7</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span><span class="token punctuation">[</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span>,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: SyntaxError: missing <span class="token builtin class-name">:</span> after property <span class="token function">id</span> <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:20
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  or $or  \u7F3A\u5C11\u62EC\u53F7</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span>:<span class="token punctuation">[</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span>,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: SyntaxError: missing <span class="token punctuation">]</span> after element list <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:25
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  or $or</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u67E5\u8BE2  or + and</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token string">&quot;a3&quot;</span>,<span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="type-\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#type-\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> $type \u64CD\u4F5C\u7B26</h3><table><thead><tr><th style="text-align:left;"><strong>\u7C7B\u578B</strong></th><th style="text-align:left;"><strong>\u6570\u5B57</strong></th><th style="text-align:left;"><strong>\u5907\u6CE8</strong></th></tr></thead><tbody><tr><td style="text-align:left;">Double</td><td style="text-align:left;">1</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">String</td><td style="text-align:left;">2</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Object</td><td style="text-align:left;">3</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Array</td><td style="text-align:left;">4</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Binary data</td><td style="text-align:left;">5</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Undefined</td><td style="text-align:left;">6</td><td style="text-align:left;">\u5DF2\u5E9F\u5F03\u3002</td></tr><tr><td style="text-align:left;">Object id</td><td style="text-align:left;">7</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Boolean</td><td style="text-align:left;">8</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Date</td><td style="text-align:left;">9</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Null</td><td style="text-align:left;">10</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Regular Expression</td><td style="text-align:left;">11</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">JavaScript</td><td style="text-align:left;">13</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Symbol</td><td style="text-align:left;">14</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">JavaScript (with scope)</td><td style="text-align:left;">15</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">32-bit integer</td><td style="text-align:left;">16</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Timestamp</td><td style="text-align:left;">17</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">64-bit integer</td><td style="text-align:left;">18</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Min key</td><td style="text-align:left;">255</td><td style="text-align:left;">Query with <code>-1</code>.</td></tr><tr><td style="text-align:left;">Max key</td><td style="text-align:left;">127</td><td style="text-align:left;"></td></tr></tbody></table><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:33,name:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;32-bit integer&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
Error: error: <span class="token punctuation">{</span>
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Unknown type name alias: 32-bit integer&quot;</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;codeName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BadValue&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;integer&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
Error: error: <span class="token punctuation">{</span>
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Unknown type name alias: integer&quot;</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;codeName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BadValue&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:16<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:18<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#\u7C7B\u578B\u6570\u5B57\u9ED8\u8BA4\u4E3Adouble \u53731 \u7C7B\u578B</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;Double&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
Error: error: <span class="token punctuation">{</span>
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Unknown type name alias: Double&quot;</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;codeName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BadValue&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:Double<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: ReferenceError: Double is not defined <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:26
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:double<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: ReferenceError: double is not defined <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:26
<span class="token comment">#\u7C7B\u578B\u5C0F\u5199\u5F15\u53F7</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;double&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="limit-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#limit-\u65B9\u6CD5" aria-hidden="true">#</a> Limit() \u65B9\u6CD5</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u6761\u4EF6\u7B5B\u9009\u540E\u9650\u5236\u67E5\u8BE2\u6570\u91CF</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="skip-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#skip-\u65B9\u6CD5" aria-hidden="true">#</a> Skip() \u65B9\u6CD5</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#\u8DF3\u8FC7\u5BF9\u5E94\u6570\u91CF\u7684\u9650\u5236\u67E5\u8BE2\u7684\u6570\u636E</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sort-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#sort-\u65B9\u6CD5" aria-hidden="true">#</a> sort() \u65B9\u6CD5</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u516B\u3001\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u516B\u3001\u7D22\u5F15" aria-hidden="true">#</a> \u516B\u3001\u7D22\u5F15</h1><h2 id="createindex-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#createindex-\u65B9\u6CD5" aria-hidden="true">#</a> createIndex() \u65B9\u6CD5\`</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token comment">#\u521B\u5EFA\u7D22\u5F15  1\u4E3A\u6B63\u5E8F\uFF0C\u53EF\u4F7F\u7528\u591A\u4E2A\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15</span>
<span class="token operator">&gt;</span> db.student.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:-1,<span class="token string">&quot;name&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">4</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">background</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">\u5EFA\u7D22\u5F15\u8FC7\u7A0B\u4F1A\u963B\u585E\u5176\u5B83\u6570\u636E\u5E93\u64CD\u4F5C\uFF0Cbackground\u53EF\u6307\u5B9A\u4EE5\u540E\u53F0\u65B9\u5F0F\u521B\u5EFA\u7D22\u5F15\uFF0C\u5373\u589E\u52A0 &quot;background&quot; \u53EF\u9009\u53C2\u6570\u3002 &quot;background&quot; \u9ED8\u8BA4\u503C\u4E3A<strong>false</strong>\u3002</td></tr><tr><td style="text-align:left;">unique</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">\u5EFA\u7ACB\u7684\u7D22\u5F15\u662F\u5426\u552F\u4E00\u3002\u6307\u5B9A\u4E3Atrue\u521B\u5EFA\u552F\u4E00\u7D22\u5F15\u3002\u9ED8\u8BA4\u503C\u4E3A<strong>false</strong>.</td></tr><tr><td style="text-align:left;">name</td><td style="text-align:left;">string</td><td style="text-align:left;">\u7D22\u5F15\u7684\u540D\u79F0\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0CMongoDB\u7684\u901A\u8FC7\u8FDE\u63A5\u7D22\u5F15\u7684\u5B57\u6BB5\u540D\u548C\u6392\u5E8F\u987A\u5E8F\u751F\u6210\u4E00\u4E2A\u7D22\u5F15\u540D\u79F0\u3002</td></tr><tr><td style="text-align:left;">dropDups</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">**3.0+\u7248\u672C\u5DF2\u5E9F\u5F03\u3002**\u5728\u5EFA\u7ACB\u552F\u4E00\u7D22\u5F15\u65F6\u662F\u5426\u5220\u9664\u91CD\u590D\u8BB0\u5F55,\u6307\u5B9A true \u521B\u5EFA\u552F\u4E00\u7D22\u5F15\u3002\u9ED8\u8BA4\u503C\u4E3A <strong>false</strong>.</td></tr><tr><td style="text-align:left;">sparse</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">\u5BF9\u6587\u6863\u4E2D\u4E0D\u5B58\u5728\u7684\u5B57\u6BB5\u6570\u636E\u4E0D\u542F\u7528\u7D22\u5F15\uFF1B\u8FD9\u4E2A\u53C2\u6570\u9700\u8981\u7279\u522B\u6CE8\u610F\uFF0C\u5982\u679C\u8BBE\u7F6E\u4E3Atrue\u7684\u8BDD\uFF0C\u5728\u7D22\u5F15\u5B57\u6BB5\u4E2D\u4E0D\u4F1A\u67E5\u8BE2\u51FA\u4E0D\u5305\u542B\u5BF9\u5E94\u5B57\u6BB5\u7684\u6587\u6863.\u3002\u9ED8\u8BA4\u503C\u4E3A <strong>false</strong>.</td></tr><tr><td style="text-align:left;">expireAfterSeconds</td><td style="text-align:left;">integer</td><td style="text-align:left;">\u6307\u5B9A\u4E00\u4E2A\u4EE5\u79D2\u4E3A\u5355\u4F4D\u7684\u6570\u503C\uFF0C\u5B8C\u6210 TTL\u8BBE\u5B9A\uFF0C\u8BBE\u5B9A\u96C6\u5408\u7684\u751F\u5B58\u65F6\u95F4\u3002</td></tr><tr><td style="text-align:left;">v</td><td style="text-align:left;">index version</td><td style="text-align:left;">\u7D22\u5F15\u7684\u7248\u672C\u53F7\u3002\u9ED8\u8BA4\u7684\u7D22\u5F15\u7248\u672C\u53D6\u51B3\u4E8Emongod\u521B\u5EFA\u7D22\u5F15\u65F6\u8FD0\u884C\u7684\u7248\u672C\u3002</td></tr><tr><td style="text-align:left;">weights</td><td style="text-align:left;">document</td><td style="text-align:left;">\u7D22\u5F15\u6743\u91CD\u503C\uFF0C\u6570\u503C\u5728 1 \u5230 99,999 \u4E4B\u95F4\uFF0C\u8868\u793A\u8BE5\u7D22\u5F15\u76F8\u5BF9\u4E8E\u5176\u4ED6\u7D22\u5F15\u5B57\u6BB5\u7684\u5F97\u5206\u6743\u91CD\u3002</td></tr><tr><td style="text-align:left;">default_language</td><td style="text-align:left;">string</td><td style="text-align:left;">\u5BF9\u4E8E\u6587\u672C\u7D22\u5F15\uFF0C\u8BE5\u53C2\u6570\u51B3\u5B9A\u4E86\u505C\u7528\u8BCD\u53CA\u8BCD\u5E72\u548C\u8BCD\u5668\u7684\u89C4\u5219\u7684\u5217\u8868\u3002 \u9ED8\u8BA4\u4E3A\u82F1\u8BED</td></tr><tr><td style="text-align:left;">language_override</td><td style="text-align:left;">string</td><td style="text-align:left;">\u5BF9\u4E8E\u6587\u672C\u7D22\u5F15\uFF0C\u8BE5\u53C2\u6570\u6307\u5B9A\u4E86\u5305\u542B\u5728\u6587\u6863\u4E2D\u7684\u5B57\u6BB5\u540D\uFF0C\u8BED\u8A00\u8986\u76D6\u9ED8\u8BA4\u7684language\uFF0C\u9ED8\u8BA4\u503C\u4E3A language.</td></tr></tbody></table><h1 id="\u4E5D\u3001\u805A\u5408" tabindex="-1"><a class="header-anchor" href="#\u4E5D\u3001\u805A\u5408" aria-hidden="true">#</a> \u4E5D\u3001\u805A\u5408</h1><h2 id="aggregate-\u65B9\u6CD5" tabindex="-1"><a class="header-anchor" href="#aggregate-\u65B9\u6CD5" aria-hidden="true">#</a> aggregate() \u65B9\u6CD5</h2><p>\u5904\u7406\u6570\u636E(\u8BF8\u5982\u7EDF\u8BA1\u5E73\u5747\u503C\uFF0C\u6C42\u548C\u7B49)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u901A\u8FC7name\u5224\u65AD\u76F8\u540Cname\u6709\u591A\u5C11\u6570\u636E</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token variable">$group</span>:<span class="token punctuation">{</span>_id:<span class="token string">&quot;<span class="token variable">$name</span>&quot;</span>,num_tutorial:<span class="token punctuation">{</span><span class="token variable">$sum</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u805A\u5408\u7684\u8868\u8FBE\u5F0F:</p>`,31),J=n("table",null,[n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},"\u8868\u8FBE\u5F0F"),n("th",{style:{"text-align":"left"}},"\u63CF\u8FF0"),n("th",{style:{"text-align":"left"}},"\u5B9E\u4F8B")])]),n("tbody",null,[n("tr",null,[n("td",{style:{"text-align":"left"}},"$sum"),n("td",{style:{"text-align":"left"}},"\u8BA1\u7B97\u603B\u548C\u3002"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", num_tutorial : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"s"),n("mi",null,"u"),n("mi",null,"m"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'sum : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.4306em"}}),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"u"),n("span",{class:"mord mathnormal"},"m"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('likes"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$avg"),n("td",{style:{"text-align":"left"}},"\u8BA1\u7B97\u5E73\u5747\u503C"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", num_tutorial : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"a"),n("mi",null,"v"),n("mi",null,"g"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'avg : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.625em","vertical-align":"-0.1944em"}}),n("span",{class:"mord mathnormal"},"a"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.03588em"}},"vg"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('likes"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$min"),n("td",{style:{"text-align":"left"}},"\u83B7\u53D6\u96C6\u5408\u4E2D\u6240\u6709\u6587\u6863\u5BF9\u5E94\u503C\u5F97\u6700\u5C0F\u503C\u3002"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", num_tutorial : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"m"),n("mi",null,"i"),n("mi",null,"n"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'min : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6595em"}}),n("span",{class:"mord mathnormal"},"min"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('likes"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$max"),n("td",{style:{"text-align":"left"}},"\u83B7\u53D6\u96C6\u5408\u4E2D\u6240\u6709\u6587\u6863\u5BF9\u5E94\u503C\u5F97\u6700\u5927\u503C\u3002"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", num_tutorial : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"m"),n("mi",null,"a"),n("mi",null,"x"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'max : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.4306em"}}),n("span",{class:"mord mathnormal"},"ma"),n("span",{class:"mord mathnormal"},"x"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('likes"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$push"),n("td",{style:{"text-align":"left"}},"\u5C06\u503C\u52A0\u5165\u4E00\u4E2A\u6570\u7EC4\u4E2D\uFF0C\u4E0D\u4F1A\u5224\u65AD\u662F\u5426\u6709\u91CD\u590D\u7684\u503C\u3002"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", url : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"p"),n("mi",null,"u"),n("mi",null,"s"),n("mi",null,"h"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'push: "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord mathnormal"},"p"),n("span",{class:"mord mathnormal"},"u"),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"h"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('url"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$addToSet"),n("td",{style:{"text-align":"left"}},"\u5C06\u503C\u52A0\u5165\u4E00\u4E2A\u6570\u7EC4\u4E2D\uFF0C\u4F1A\u5224\u65AD\u662F\u5426\u6709\u91CD\u590D\u7684\u503C\uFF0C\u82E5\u76F8\u540C\u7684\u503C\u5728\u6570\u7EC4\u4E2D\u5DF2\u7ECF\u5B58\u5728\u4E86\uFF0C\u5219\u4E0D\u52A0\u5165\u3002"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", url : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"a"),n("mi",null,"d"),n("mi",null,"d"),n("mi",null,"T"),n("mi",null,"o"),n("mi",null,"S"),n("mi",null,"e"),n("mi",null,"t"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'addToSet : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord mathnormal"},"a"),n("span",{class:"mord mathnormal"},"dd"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.13889em"}},"T"),n("span",{class:"mord mathnormal"},"o"),n("span",{class:"mord mathnormal",style:{"margin-right":"0.05764em"}},"S"),n("span",{class:"mord mathnormal"},"e"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('url"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$first"),n("td",{style:{"text-align":"left"}},"\u6839\u636E\u8D44\u6E90\u6587\u6863\u7684\u6392\u5E8F\u83B7\u53D6\u7B2C\u4E00\u4E2A\u6587\u6863\u6570\u636E\u3002"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", first_url : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"f"),n("mi",null,"i"),n("mi",null,"r"),n("mi",null,"s"),n("mi",null,"t"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'first : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.8889em","vertical-align":"-0.1944em"}}),n("span",{class:"mord mathnormal",style:{"margin-right":"0.10764em"}},"f"),n("span",{class:"mord mathnormal"},"i"),n("span",{class:"mord mathnormal"},"rs"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('url"}}}])')])]),n("tr",null,[n("td",{style:{"text-align":"left"}},"$last"),n("td",{style:{"text-align":"left"}},"\u6839\u636E\u8D44\u6E90\u6587\u6863\u7684\u6392\u5E8F\u83B7\u53D6\u6700\u540E\u4E00\u4E2A\u6587\u6863\u6570\u636E"),n("td",{style:{"text-align":"left"}},[s("db.mycol.aggregate([{"),n("span",{class:"katex-error",title:`ParseError: KaTeX parse error: Expected '}', got 'EOF' at end of input: \u2026roup : {_id : "`},'group : {_id : "'),s('by_user", last_url : {'),n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"l"),n("mi",null,"a"),n("mi",null,"s"),n("mi",null,"t"),n("mo",null,":"),n("mi",{mathvariant:"normal"},'"')]),n("annotation",{encoding:"application/x-tex"},'last : "')])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord mathnormal",style:{"margin-right":"0.01968em"}},"l"),n("span",{class:"mord mathnormal"},"a"),n("span",{class:"mord mathnormal"},"s"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}}),n("span",{class:"mrel"},":"),n("span",{class:"mspace",style:{"margin-right":"0.2778em"}})]),n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord"},'"')])])]),s('url"}}}])')])])])],-1),X=n("h2",{id:"\u7BA1\u9053",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7BA1\u9053","aria-hidden":"true"},"#"),s(" \u7BA1\u9053")],-1),Q=n("p",null,"\u7BA1\u9053\u5728Unix\u548CLinux\u4E2D\u4E00\u822C\u7528\u4E8E\u5C06\u5F53\u524D\u547D\u4EE4\u7684\u8F93\u51FA\u7ED3\u679C\u4F5C\u4E3A\u4E0B\u4E00\u4E2A\u547D\u4EE4\u7684\u53C2\u6570\u3002",-1),Y=n("p",null,"MongoDB\u7684\u805A\u5408\u7BA1\u9053\u5C06MongoDB\u6587\u6863\u5728\u4E00\u4E2A\u7BA1\u9053\u5904\u7406\u5B8C\u6BD5\u540E\u5C06\u7ED3\u679C\u4F20\u9012\u7ED9\u4E0B\u4E00\u4E2A\u7BA1\u9053\u5904\u7406\u3002\u7BA1\u9053\u64CD\u4F5C\u662F\u53EF\u4EE5\u91CD\u590D\u7684\u3002",-1),nn=n("p",null,"\u8868\u8FBE\u5F0F\uFF1A\u5904\u7406\u8F93\u5165\u6587\u6863\u5E76\u8F93\u51FA\u3002\u8868\u8FBE\u5F0F\u662F\u65E0\u72B6\u6001\u7684\uFF0C\u53EA\u80FD\u7528\u4E8E\u8BA1\u7B97\u5F53\u524D\u805A\u5408\u7BA1\u9053\u7684\u6587\u6863\uFF0C\u4E0D\u80FD\u5904\u7406\u5176\u5B83\u7684\u6587\u6863\u3002",-1),sn=n("p",null,"\u8FD9\u91CC\u6211\u4EEC\u4ECB\u7ECD\u4E00\u4E0B\u805A\u5408\u6846\u67B6\u4E2D\u5E38\u7528\u7684\u51E0\u4E2A\u64CD\u4F5C\uFF1A",-1),an=n("ul",null,[n("li",null,"$project\uFF1A\u4FEE\u6539\u8F93\u5165\u6587\u6863\u7684\u7ED3\u6784\u3002\u53EF\u4EE5\u7528\u6765\u91CD\u547D\u540D\u3001\u589E\u52A0\u6216\u5220\u9664\u57DF\uFF0C\u4E5F\u53EF\u4EE5\u7528\u4E8E\u521B\u5EFA\u8BA1\u7B97\u7ED3\u679C\u4EE5\u53CA\u5D4C\u5957\u6587\u6863\u3002"),n("li",null,[n("span",{class:"katex"},[n("span",{class:"katex-mathml"},[n("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[n("semantics",null,[n("mrow",null,[n("mi",null,"m"),n("mi",null,"a"),n("mi",null,"t"),n("mi",null,"c"),n("mi",null,"h"),n("mtext",null,"\uFF1A\u7528\u4E8E\u8FC7\u6EE4\u6570\u636E\uFF0C\u53EA\u8F93\u51FA\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\u3002")]),n("annotation",{encoding:"application/x-tex"},"match\uFF1A\u7528\u4E8E\u8FC7\u6EE4\u6570\u636E\uFF0C\u53EA\u8F93\u51FA\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\u3002")])])]),n("span",{class:"katex-html","aria-hidden":"true"},[n("span",{class:"base"},[n("span",{class:"strut",style:{height:"0.6944em"}}),n("span",{class:"mord mathnormal"},"ma"),n("span",{class:"mord mathnormal"},"t"),n("span",{class:"mord mathnormal"},"c"),n("span",{class:"mord mathnormal"},"h"),n("span",{class:"mord cjk_fallback"},"\uFF1A\u7528\u4E8E\u8FC7\u6EE4\u6570\u636E\uFF0C\u53EA\u8F93\u51FA\u7B26\u5408\u6761\u4EF6\u7684\u6587\u6863\u3002")])])]),s("match\u4F7F\u7528MongoDB\u7684\u6807\u51C6\u67E5\u8BE2\u64CD\u4F5C\u3002")]),n("li",null,"$limit\uFF1A\u7528\u6765\u9650\u5236MongoDB\u805A\u5408\u7BA1\u9053\u8FD4\u56DE\u7684\u6587\u6863\u6570\u3002"),n("li",null,"$skip\uFF1A\u5728\u805A\u5408\u7BA1\u9053\u4E2D\u8DF3\u8FC7\u6307\u5B9A\u6570\u91CF\u7684\u6587\u6863\uFF0C\u5E76\u8FD4\u56DE\u4F59\u4E0B\u7684\u6587\u6863\u3002"),n("li",null,"$unwind\uFF1A\u5C06\u6587\u6863\u4E2D\u7684\u67D0\u4E00\u4E2A\u6570\u7EC4\u7C7B\u578B\u5B57\u6BB5\u62C6\u5206\u6210\u591A\u6761\uFF0C\u6BCF\u6761\u5305\u542B\u6570\u7EC4\u4E2D\u7684\u4E00\u4E2A\u503C\u3002"),n("li",null,"$group\uFF1A\u5C06\u96C6\u5408\u4E2D\u7684\u6587\u6863\u5206\u7EC4\uFF0C\u53EF\u7528\u4E8E\u7EDF\u8BA1\u7ED3\u679C\u3002"),n("li",null,"$sort\uFF1A\u5C06\u8F93\u5165\u6587\u6863\u6392\u5E8F\u540E\u8F93\u51FA\u3002"),n("li",null,"$geoNear\uFF1A\u8F93\u51FA\u63A5\u8FD1\u67D0\u4E00\u5730\u7406\u4F4D\u7F6E\u7684\u6709\u5E8F\u6587\u6863\u3002")],-1),tn=e(`<div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u53EA\u663E\u793A\u9ED8\u8BA4\u7684id\u4E0Ename</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$project</span>:<span class="token punctuation">{</span>name:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u53BB\u6389\u9ED8\u8BA4id\uFF0C\u53EA\u663E\u793Aname</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$project</span>:<span class="token punctuation">{</span>_id:0,name:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u663E\u793A\u524D\u4E09\u6761\u4E4B\u540E\u7684\u6570\u636E</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$skip</span>:3<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#\u663E\u793A\u5927\u4E8E10 \u5C0F\u4E8E\u7B49\u4E8E25\u7684\u4E00\u6761\u6570\u636E</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token variable">$match</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> age <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$gt</span>:10,<span class="token variable">$lte</span>:25<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token variable">$group</span>:<span class="token punctuation">{</span> _id: null, count: <span class="token punctuation">{</span> <span class="token variable">$sum</span><span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> null, <span class="token string">&quot;count&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u5341\u3001\u590D\u5236" tabindex="-1"><a class="header-anchor" href="#\u5341\u3001\u590D\u5236" aria-hidden="true">#</a> \u5341\u3001\u590D\u5236</h1><p>\u6570\u636E\u5197\u4F59\u5907\u4EFD\uFF0C\u786C\u4EF6\u6545\u969C\uFF0C\u670D\u52A1\u4E2D\u65AD\u6570\u636E\u6062\u590D\u3002\u65E0\u9700\u505C\u673A\u7EF4\u62A4\uFF0C\u5206\u5E03\u5F0F\u8BFB\u53D6\u6570\u636E\u3002</p><p>mongodb\u7684\u590D\u5236\u81F3\u5C11\u9700\u8981\u4E24\u4E2A\u8282\u70B9\u3002\u5176\u4E2D\u4E00\u4E2A\u662F\u4E3B\u8282\u70B9\uFF0C\u8D1F\u8D23\u5904\u7406\u5BA2\u6237\u7AEF\u8BF7\u6C42\uFF0C\u5176\u4F59\u7684\u90FD\u662F\u4ECE\u8282\u70B9\uFF0C\u8D1F\u8D23\u590D\u5236\u4E3B\u8282\u70B9\u4E0A\u7684\u6570\u636E\u3002</p><p>mongodb\u5404\u4E2A\u8282\u70B9\u5E38\u89C1\u7684\u642D\u914D\u65B9\u5F0F\u4E3A\uFF1A\u4E00\u4E3B\u4E00\u4ECE\u3001\u4E00\u4E3B\u591A\u4ECE\u3002</p><p>\u4E3B\u8282\u70B9\u8BB0\u5F55\u5728\u5176\u4E0A\u7684\u6240\u6709\u64CD\u4F5Coplog\uFF0C\u4ECE\u8282\u70B9\u5B9A\u671F\u8F6E\u8BE2\u4E3B\u8282\u70B9\u83B7\u53D6\u8FD9\u4E9B\u64CD\u4F5C\uFF0C\u7136\u540E\u5BF9\u81EA\u5DF1\u7684\u6570\u636E\u526F\u672C\u6267\u884C\u8FD9\u4E9B\u64CD\u4F5C\uFF0C\u4ECE\u800C\u4FDD\u8BC1\u4ECE\u8282\u70B9\u7684\u6570\u636E\u4E0E\u4E3B\u8282\u70B9\u4E00\u81F4\u3002</p><p>MongoDB\u590D\u5236\u7ED3\u6784\u56FE\u5982\u4E0B\u6240\u793A\uFF1A</p><img src="https://www.runoob.com/wp-content/uploads/2013/12/replication.png" alt="MongoDB\u590D\u5236\u7ED3\u6784\u56FE" style="zoom:67%;"><p>\u4EE5\u4E0A\u7ED3\u6784\u56FE\u4E2D\uFF0C\u5BA2\u6237\u7AEF\u4ECE\u4E3B\u8282\u70B9\u8BFB\u53D6\u6570\u636E\uFF0C\u5728\u5BA2\u6237\u7AEF\u5199\u5165\u6570\u636E\u5230\u4E3B\u8282\u70B9\u65F6\uFF0C \u4E3B\u8282\u70B9\u4E0E\u4ECE\u8282\u70B9\u8FDB\u884C\u6570\u636E\u4EA4\u4E92\u4FDD\u969C\u6570\u636E\u7684\u4E00\u81F4\u6027\u3002</p><h2 id="\u526F\u672C\u96C6\u7279\u5F81" tabindex="-1"><a class="header-anchor" href="#\u526F\u672C\u96C6\u7279\u5F81" aria-hidden="true">#</a> \u526F\u672C\u96C6\u7279\u5F81\uFF1A</h2><ul><li>N \u4E2A\u8282\u70B9\u7684\u96C6\u7FA4</li><li>\u4EFB\u4F55\u8282\u70B9\u53EF\u4F5C\u4E3A\u4E3B\u8282\u70B9</li><li>\u6240\u6709\u5199\u5165\u64CD\u4F5C\u90FD\u5728\u4E3B\u8282\u70B9\u4E0A</li><li>\u81EA\u52A8\u6545\u969C\u8F6C\u79FB</li><li>\u81EA\u52A8\u6062\u590D</li></ul><hr><h2 id="mongodb\u526F\u672C\u96C6\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#mongodb\u526F\u672C\u96C6\u8BBE\u7F6E" aria-hidden="true">#</a> MongoDB\u526F\u672C\u96C6\u8BBE\u7F6E</h2><p>\u5728\u672C\u6559\u7A0B\u4E2D\u6211\u4EEC\u4F7F\u7528\u540C\u4E00\u4E2AMongoDB\u6765\u505AMongoDB\u4E3B\u4ECE\u7684\u5B9E\u9A8C\uFF0C \u64CD\u4F5C\u6B65\u9AA4\u5982\u4E0B\uFF1A</p><p>1\u3001\u5173\u95ED\u6B63\u5728\u8FD0\u884C\u7684MongoDB\u670D\u52A1\u5668\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u901A\u8FC7\u6307\u5B9A --replSet \u9009\u9879\u6765\u542F\u52A8mongoDB\u3002--replSet \u57FA\u672C\u8BED\u6CD5\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mongod --port &quot;PORT&quot; --dbpath &quot;YOUR_DB_DATA_PATH&quot; --replSet &quot;REPLICA_SET_INSTANCE_NAME&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u793A\u4F8B</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mongod --port <span class="token number">27017</span> --dbpath <span class="token string">&quot;F:\\Softs\\Installed\\MongoDB\\data&quot;</span> --replSet rs0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u793A\u4F8B\u542F\u52A8\u4E00\u4E2A\u540D\u4E3Ars0\u7684MongoDB\u5B9E\u4F8B\uFF0C\u5176\u7AEF\u53E3\u53F7\u4E3A27017\u3002\u542F\u52A8\u540E\u6253\u5F00\u547D\u4EE4\u63D0\u793A\u6846\u5E76\u8FDE\u63A5\u4E0AmongoDB\u670D\u52A1\u3002\u5728Mongo\u5BA2\u6237\u7AEF\u4F7F\u7528\u547D\u4EE4rs.initiate()\u6765\u542F\u52A8\u4E00\u4E2A\u65B0\u7684\u526F\u672C\u96C6\u3002\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528rs.conf()\u6765\u67E5\u770B\u526F\u672C\u96C6\u7684\u914D\u7F6E\u67E5\u770B\u526F\u672C\u96C6\u72B6\u6001\u4F7F\u7528 rs.status() \u547D\u4EE4</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#\u5173\u95ED\u670D\u52A1</span>
C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span>net stop mongodb
<span class="token comment">#\u521B\u5EFArs0\u5B9E\u4F8B</span>
C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span>mongod --port <span class="token number">27017</span> --dbpath <span class="token string">&quot;F:\\Softs\\Installed\\MongoDB\\data&quot;</span> --replSet rs0
<span class="token comment">#\u542F\u52A8</span>
C:<span class="token punctuation">\\</span>Users<span class="token punctuation">\\</span>Administrator<span class="token operator">&gt;</span>mongo
MongoDB shell version v5.0.6-rc0
connecting to: mongodb://127.0.0.1:27017/?compressors<span class="token operator">=</span>disabled<span class="token operator">&amp;</span><span class="token assign-left variable">gssapiServiceName</span><span class="token operator">=</span>mongodb
Implicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;a7bc72f5-0db4-4de3-b3c1-4f457b526e8b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version: <span class="token number">5.0</span>.6-rc0
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Warning: the <span class="token string">&quot;mongo&quot;</span> shell has been superseded by <span class="token string">&quot;mongosh&quot;</span>,
<span class="token function">which</span> delivers improved usability and compatibility.The <span class="token string">&quot;mongo&quot;</span> shell has been deprecated and will be removed <span class="token keyword">in</span>
an upcoming release.
For installation instructions, see
https://docs.mongodb.com/mongodb-shell/install/
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token comment">#\u542F\u52A8\u65B0\u7684\u526F\u672C\u96C6</span>
<span class="token operator">&gt;</span> rs.<span class="token function-name function">initiate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;info2&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;no configuration specified. Using a default configuration for the set&quot;</span>,
        <span class="token string">&quot;me&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost:27017&quot;</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
\u67E5\u770B\u526F\u672C\u914D\u7F6E
rs0:SECONDARY<span class="token operator">&gt;</span> rs.<span class="token function-name function">conf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;rs0&quot;</span>,
        <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;members&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
                        <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost:27017&quot;</span>,
                        <span class="token string">&quot;arbiterOnly&quot;</span> <span class="token builtin class-name">:</span> false,
                        <span class="token string">&quot;buildIndexes&quot;</span> <span class="token builtin class-name">:</span> true,
                        <span class="token string">&quot;hidden&quot;</span> <span class="token builtin class-name">:</span> false,
                        <span class="token string">&quot;priority&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>

                        <span class="token punctuation">}</span>,
                        <span class="token string">&quot;secondaryDelaySecs&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;votes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
        <span class="token string">&quot;protocolVersion&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;writeConcernMajorityJournalDefault&quot;</span> <span class="token builtin class-name">:</span> true,
        <span class="token string">&quot;settings&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;chainingAllowed&quot;</span> <span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;heartbeatIntervalMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2000</span>,
                <span class="token string">&quot;heartbeatTimeoutSecs&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">10</span>,
                <span class="token string">&quot;electionTimeoutMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">10000</span>,
                <span class="token string">&quot;catchUpTimeoutMillis&quot;</span> <span class="token builtin class-name">:</span> -1,
                <span class="token string">&quot;catchUpTakeoverDelayMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">30000</span>,
                <span class="token string">&quot;getLastErrorModes&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>,
                <span class="token string">&quot;getLastErrorDefaults&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;w&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;wtimeout&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;replicaSetId&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61ea43d55303298c0a702c41&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">#\u67E5\u770B\u526F\u672C\u96C6\u72B6\u6001</span>
rs0:PRIMARY<span class="token operator">&gt;</span> rs.<span class="token function-name function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;set&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;rs0&quot;</span>,
        <span class="token string">&quot;date&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:33.032Z&quot;</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;myState&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;term&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;syncSourceHost&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;syncSourceId&quot;</span> <span class="token builtin class-name">:</span> -1,
        <span class="token string">&quot;heartbeatIntervalMillis&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;majorityVoteCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;writeMajorityCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;votingMembersCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;writableVotingMembersCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;optimes&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;lastCommittedOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;lastCommittedWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;readConcernMajorityOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;appliedOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;durableOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;lastAppliedWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;lastDurableWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;lastStableRecoveryTimestamp&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742741</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;electionCandidateMetrics&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;lastElectionReason&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;electionTimeout&quot;</span>,
                <span class="token string">&quot;lastElectionDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:42.687Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;electionTerm&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;lastCommittedOpTimeAtElection&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742741</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span>-1<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;lastSeenOpTimeAtElection&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742741</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span>-1<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;numVotesNeeded&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                <span class="token string">&quot;priorityAtElection&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                <span class="token string">&quot;electionTimeoutMillis&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;newTermStartDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:42.963Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;wMajorityWriteAvailabilityDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:43.131Z&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;members&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
                        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost:27017&quot;</span>,
                        <span class="token string">&quot;health&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;state&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;stateStr&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;PRIMARY&quot;</span>,
                        <span class="token string">&quot;uptime&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">203</span>,
                        <span class="token string">&quot;optime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                                <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>,
                        <span class="token string">&quot;optimeDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;lastAppliedWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;lastDurableWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;syncSourceHost&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                        <span class="token string">&quot;syncSourceId&quot;</span> <span class="token builtin class-name">:</span> -1,
                        <span class="token string">&quot;infoMessage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Could not find member to sync from&quot;</span>,
                        <span class="token string">&quot;electionTime&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742742</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;electionDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:42Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;configVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;configTerm&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;self&quot;</span> <span class="token builtin class-name">:</span> true,
                        <span class="token string">&quot;lastHeartbeatMessage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;<span class="token variable">$clusterTime</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;clusterTime&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;signature&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;hash&quot;</span> <span class="token builtin class-name">:</span> BinData<span class="token punctuation">(</span><span class="token number">0</span>,<span class="token string">&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;keyId&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;operationTime&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
rs0:PRIMARY<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u526F\u672C\u96C6\u6DFB\u52A0\u6210\u5458" tabindex="-1"><a class="header-anchor" href="#\u526F\u672C\u96C6\u6DFB\u52A0\u6210\u5458" aria-hidden="true">#</a> \u526F\u672C\u96C6\u6DFB\u52A0\u6210\u5458</h2><p>\u6DFB\u52A0\u526F\u672C\u96C6\u7684\u6210\u5458\uFF0C\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u591A\u53F0\u670D\u52A1\u5668\u6765\u542F\u52A8mongo\u670D\u52A1\u3002\u8FDB\u5165Mongo\u5BA2\u6237\u7AEF\uFF0C\u5E76\u4F7F\u7528rs.add()\u65B9\u6CD5\u6765\u6DFB\u52A0\u526F\u672C\u96C6\u7684\u6210\u5458\u3002</p><h3 id="\u8BED\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u8BED\u6CD5" aria-hidden="true">#</a> \u8BED\u6CD5</h3><p>rs.add() \u547D\u4EE4\u57FA\u672C\u8BED\u6CD5\u683C\u5F0F\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;rs.add(HOST_NAME:PORT)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u4F8B" aria-hidden="true">#</a> \u5B9E\u4F8B</h3>`,27),en={href:"http://xn--mongod1-4t3kgmkf76ai3f15dw8ldsfopam48kyv9ilm3b.net",target:"_blank",rel:"noopener noreferrer"},on=s("\u5047\u8BBE\u4F60\u5DF2\u7ECF\u542F\u52A8\u4E86\u4E00\u4E2A\u540D\u4E3Amongod1.net"),pn=s("\uFF0C\u7AEF\u53E3\u53F7\u4E3A27017\u7684Mongo\u670D\u52A1\u3002 \u5728\u5BA2\u6237\u7AEF\u547D\u4EE4\u7A97\u53E3\u4F7F\u7528rs.add() \u547D\u4EE4\u5C06\u5176\u6DFB\u52A0\u5230\u526F\u672C\u96C6\u4E2D\uFF0C\u547D\u4EE4\u5982\u4E0B\u6240\u793A\uFF1A"),ln=e(`<div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;rs.add(&quot;mongod1.net:27017&quot;)
&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>MongoDB\u4E2D\u4F60\u53EA\u80FD\u901A\u8FC7\u4E3B\u8282\u70B9\u5C06Mongo\u670D\u52A1\u6DFB\u52A0\u5230\u526F\u672C\u96C6\u4E2D\uFF0C \u5224\u65AD\u5F53\u524D\u8FD0\u884C\u7684Mongo\u670D\u52A1\u662F\u5426\u4E3A\u4E3B\u8282\u70B9\u53EF\u4EE5\u4F7F\u7528\u547D\u4EE4db.isMaster() \u3002</p><p>MongoDB\u7684\u526F\u672C\u96C6\u4E0E\u6211\u4EEC\u5E38\u89C1\u7684\u4E3B\u4ECE\u6709\u6240\u4E0D\u540C\uFF0C\u4E3B\u4ECE\u5728\u4E3B\u673A\u5B95\u673A\u540E\u6240\u6709\u670D\u52A1\u5C06\u505C\u6B62\uFF0C\u800C\u526F\u672C\u96C6\u5728\u4E3B\u673A\u5B95\u673A\u540E\uFF0C\u526F\u672C\u4F1A\u63A5\u7BA1\u4E3B\u8282\u70B9\u6210\u4E3A\u4E3B\u8282\u70B9\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u5B95\u673A\u7684\u60C5\u51B5\u3002</p><h1 id="\u5341\u4E00\u3001\u5206\u7247" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E00\u3001\u5206\u7247" aria-hidden="true">#</a> \u5341\u4E00\u3001\u5206\u7247</h1><hr><h2 id="\u5206\u7247" tabindex="-1"><a class="header-anchor" href="#\u5206\u7247" aria-hidden="true">#</a> \u5206\u7247</h2><p>\u5728Mongodb\u91CC\u9762\u5B58\u5728\u53E6\u4E00\u79CD\u96C6\u7FA4\uFF0C\u5C31\u662F\u5206\u7247\u6280\u672F,\u53EF\u4EE5\u6EE1\u8DB3MongoDB\u6570\u636E\u91CF\u5927\u91CF\u589E\u957F\u7684\u9700\u6C42\u3002</p><p>\u5F53MongoDB\u5B58\u50A8\u6D77\u91CF\u7684\u6570\u636E\u65F6\uFF0C\u4E00\u53F0\u673A\u5668\u53EF\u80FD\u4E0D\u8DB3\u4EE5\u5B58\u50A8\u6570\u636E\uFF0C\u4E5F\u53EF\u80FD\u4E0D\u8DB3\u4EE5\u63D0\u4F9B\u53EF\u63A5\u53D7\u7684\u8BFB\u5199\u541E\u5410\u91CF\u3002\u8FD9\u65F6\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7\u5728\u591A\u53F0\u673A\u5668\u4E0A\u5206\u5272\u6570\u636E\uFF0C\u4F7F\u5F97\u6570\u636E\u5E93\u7CFB\u7EDF\u80FD\u5B58\u50A8\u548C\u5904\u7406\u66F4\u591A\u7684\u6570\u636E\u3002</p><hr><h2 id="\u4E3A\u4EC0\u4E48\u4F7F\u7528\u5206\u7247" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u4F7F\u7528\u5206\u7247" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u4F7F\u7528\u5206\u7247</h2><ul><li>\u590D\u5236\u6240\u6709\u7684\u5199\u5165\u64CD\u4F5C\u5230\u4E3B\u8282\u70B9</li><li>\u5EF6\u8FDF\u7684\u654F\u611F\u6570\u636E\u4F1A\u5728\u4E3B\u8282\u70B9\u67E5\u8BE2</li><li>\u5355\u4E2A\u526F\u672C\u96C6\u9650\u5236\u572812\u4E2A\u8282\u70B9</li><li>\u5F53\u8BF7\u6C42\u91CF\u5DE8\u5927\u65F6\u4F1A\u51FA\u73B0\u5185\u5B58\u4E0D\u8DB3\u3002</li><li>\u672C\u5730\u78C1\u76D8\u4E0D\u8DB3</li><li>\u5782\u76F4\u6269\u5C55\u4EF7\u683C\u6602\u8D35</li></ul><hr><h2 id="mongodb\u5206\u7247" tabindex="-1"><a class="header-anchor" href="#mongodb\u5206\u7247" aria-hidden="true">#</a> MongoDB\u5206\u7247</h2><p>\u4E0B\u56FE\u5C55\u793A\u4E86\u5728MongoDB\u4E2D\u4F7F\u7528\u5206\u7247\u96C6\u7FA4\u7ED3\u6784\u5206\u5E03\uFF1A</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/sharding.png" alt="img" loading="lazy"></p><p>\u4E0A\u56FE\u4E2D\u4E3B\u8981\u6709\u5982\u4E0B\u6240\u8FF0\u4E09\u4E2A\u4E3B\u8981\u7EC4\u4EF6\uFF1A</p><ul><li><p>Shard:</p><p>\u7528\u4E8E\u5B58\u50A8\u5B9E\u9645\u7684\u6570\u636E\u5757\uFF0C\u5B9E\u9645\u751F\u4EA7\u73AF\u5883\u4E2D\u4E00\u4E2Ashard server\u89D2\u8272\u53EF\u7531\u51E0\u53F0\u673A\u5668\u7EC4\u4E2A\u4E00\u4E2Areplica set\u627F\u62C5\uFF0C\u9632\u6B62\u4E3B\u673A\u5355\u70B9\u6545\u969C</p></li><li><p>Config Server:</p><p>mongod \u5B9E\u4F8B\uFF0C\u5B58\u50A8\u4E86\u6574\u4E2A ClusterMetadata\uFF0C\u5176\u4E2D\u5305\u62EC chunk \u4FE1\u606F\u3002</p></li><li><p>Query Routers:</p><p>\u524D\u7AEF\u8DEF\u7531\uFF0C\u5BA2\u6237\u7AEF\u7531\u6B64\u63A5\u5165\uFF0C\u4E14\u8BA9\u6574\u4E2A\u96C6\u7FA4\u770B\u4E0A\u53BB\u50CF\u5355\u4E00\u6570\u636E\u5E93\uFF0C\u524D\u7AEF\u5E94\u7528\u53EF\u4EE5\u900F\u660E\u4F7F\u7528\u3002</p></li></ul><hr><h2 id="\u5206\u7247\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u5206\u7247\u5B9E\u4F8B" aria-hidden="true">#</a> \u5206\u7247\u5B9E\u4F8B</h2><p>\u5206\u7247\u7ED3\u6784\u7AEF\u53E3\u5206\u5E03\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Shard Server 1\uFF1A27020
Shard Server 2\uFF1A27021
Shard Server 3\uFF1A27022
Shard Server 4\uFF1A27023
Config Server \uFF1A27100
Route Process\uFF1A40000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B65\u9AA4\u4E00\uFF1A\u542F\u52A8Shard Server</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@100 /]# mkdir -p /www/mongoDB/shard/s0
[root@100 /]# mkdir -p /www/mongoDB/shard/s1
[root@100 /]# mkdir -p /www/mongoDB/shard/s2
[root@100 /]# mkdir -p /www/mongoDB/shard/s3
[root@100 /]# mkdir -p /www/mongoDB/shard/log
[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27020 --dbpath=/www/mongoDB/shard/s0 --logpath=/www/mongoDB/shard/log/s0.log --logappend --fork
....
[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27023 --dbpath=/www/mongoDB/shard/s3 --logpath=/www/mongoDB/shard/log/s3.log --logappend --fork
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B65\u9AA4\u4E8C\uFF1A \u542F\u52A8Config Server</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@100 /]# mkdir -p /www/mongoDB/shard/config
[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27100 --dbpath=/www/mongoDB/shard/config --logpath=/www/mongoDB/shard/log/config.log --logappend --fork
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>**\u6CE8\u610F\uFF1A**\u8FD9\u91CC\u6211\u4EEC\u5B8C\u5168\u53EF\u4EE5\u50CF\u542F\u52A8\u666E\u901Amongodb\u670D\u52A1\u4E00\u6837\u542F\u52A8\uFF0C\u4E0D\u9700\u8981\u6DFB\u52A0\u2014shardsvr\u548Cconfigsvr\u53C2\u6570\u3002\u56E0\u4E3A\u8FD9\u4E24\u4E2A\u53C2\u6570\u7684\u4F5C\u7528\u5C31\u662F\u6539\u53D8\u542F\u52A8\u7AEF\u53E3\u7684\uFF0C\u6240\u4EE5\u6211\u4EEC\u81EA\u884C\u6307\u5B9A\u4E86\u7AEF\u53E3\u5C31\u53EF\u4EE5\u3002</p><p>\u6B65\u9AA4\u4E09\uFF1A \u542F\u52A8Route Process</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/usr/local/mongoDB/bin/mongos --port 40000 --configdb localhost:27100 --fork --logpath=/www/mongoDB/shard/log/route.log --chunkSize 500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>mongos\u542F\u52A8\u53C2\u6570\u4E2D\uFF0CchunkSize\u8FD9\u4E00\u9879\u662F\u7528\u6765\u6307\u5B9Achunk\u7684\u5927\u5C0F\u7684\uFF0C\u5355\u4F4D\u662FMB\uFF0C\u9ED8\u8BA4\u5927\u5C0F\u4E3A200MB.</p><p>\u6B65\u9AA4\u56DB\uFF1A \u914D\u7F6ESharding</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u4F7F\u7528MongoDB Shell\u767B\u5F55\u5230mongos\uFF0C\u6DFB\u52A0Shard\u8282\u70B9</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@100 shard]# /usr/local/mongoDB/bin/mongo admin --port 40000
MongoDB shell version: 2.0.7
connecting to: 127.0.0.1:40000/admin
mongos&gt; db.runCommand({ addshard:&quot;localhost:27020&quot; })
{ &quot;shardAdded&quot; : &quot;shard0000&quot;, &quot;ok&quot; : 1 }
......
mongos&gt; db.runCommand({ addshard:&quot;localhost:27029&quot; })
{ &quot;shardAdded&quot; : &quot;shard0009&quot;, &quot;ok&quot; : 1 }
mongos&gt; db.runCommand({ enablesharding:&quot;test&quot; }) #\u8BBE\u7F6E\u5206\u7247\u5B58\u50A8\u7684\u6570\u636E\u5E93
{ &quot;ok&quot; : 1 }
mongos&gt; db.runCommand({ shardcollection: &quot;test.log&quot;, key: { id:1,time:1}})
{ &quot;collectionsharded&quot; : &quot;test.log&quot;, &quot;ok&quot; : 1 }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6B65\u9AA4\u4E94\uFF1A \u7A0B\u5E8F\u4EE3\u7801\u5185\u65E0\u9700\u592A\u5927\u66F4\u6539\uFF0C\u76F4\u63A5\u6309\u7167\u8FDE\u63A5\u666E\u901A\u7684mongo\u6570\u636E\u5E93\u90A3\u6837\uFF0C\u5C06\u6570\u636E\u5E93\u8FDE\u63A5\u63A5\u5165\u63A5\u53E340000</p><h1 id="\u5341\u4E8C\u3001\u5B89\u88C5\u5176\u4ED6\u5DE5\u5177" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E8C\u3001\u5B89\u88C5\u5176\u4ED6\u5DE5\u5177" aria-hidden="true">#</a> \u5341\u4E8C\u3001\u5B89\u88C5\u5176\u4ED6\u5DE5\u5177</h1><p>\u4E0B\u8F7D\u540E\u5C06\u5176bin\u76EE\u5F55\u4E0B\u590D\u5236\u5230data\u4E0Bbin\u76EE\u5F55\u4E0B\uFF1A</p>`,35),un={href:"https://www.mongodb.com/try/download/database-tools",target:"_blank",rel:"noopener noreferrer"},cn=s("https://www.mongodb.com/try/download/database-tools"),dn=e(`<p><img src="http://qnimg.gisfsde.com/work/image-20220121145921692.png" alt="image-20220121145921692" loading="lazy"></p><h1 id="\u5341\u4E09\u3001\u5907\u4EFD-\u6062\u590D" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E09\u3001\u5907\u4EFD-\u6062\u590D" aria-hidden="true">#</a> \u5341\u4E09\u3001\u5907\u4EFD / \u6062\u590D</h1><hr><h2 id="\u6570\u636E\u5907\u4EFD" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u5907\u4EFD" aria-hidden="true">#</a> \u6570\u636E\u5907\u4EFD</h2><p>\u5907\u4EFD(mongodump)\u4E0E\u6062\u590D(mongorestore)\u3002\u5728Mongodb\u4E2D\u6211\u4EEC\u4F7F\u7528mongodump\u547D\u4EE4\u6765\u5907\u4EFDMongoDB\u6570\u636E\u3002\u8BE5\u547D\u4EE4\u53EF\u4EE5\u5BFC\u51FA\u6240\u6709\u6570\u636E\u5230\u6307\u5B9A\u76EE\u5F55\u4E2D\u3002</p><p>mongodump\u547D\u4EE4\u53EF\u4EE5\u901A\u8FC7\u53C2\u6570\u6307\u5B9A\u5BFC\u51FA\u7684\u6570\u636E\u91CF\u7EA7\u8F6C\u5B58\u7684\u670D\u52A1\u5668\u3002</p><h3 id="\u8BED\u6CD5-1" tabindex="-1"><a class="header-anchor" href="#\u8BED\u6CD5-1" aria-hidden="true">#</a> \u8BED\u6CD5</h3><p>mongodump\u547D\u4EE4\u811A\u672C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongodump -h dbhost -d dbname -o dbdirectory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>-h\uFF1A</p><p>MongoDB \u6240\u5728\u670D\u52A1\u5668\u5730\u5740\uFF0C\u4F8B\u5982\uFF1A127.0.0.1\uFF0C\u5F53\u7136\u4E5F\u53EF\u4EE5\u6307\u5B9A\u7AEF\u53E3\u53F7\uFF1A127.0.0.1:27017</p></li><li><p>-d\uFF1A</p><p>\u9700\u8981\u5907\u4EFD\u7684\u6570\u636E\u5E93\u5B9E\u4F8B\uFF0C\u4F8B\u5982\uFF1Atest</p></li><li><p>-o\uFF1A</p><p>\u5907\u4EFD\u7684\u6570\u636E\u5B58\u653E\u4F4D\u7F6E\uFF0C\u4F8B\u5982\uFF1Ac:\\data\\dump\uFF0C\u5F53\u7136\u8BE5\u76EE\u5F55\u9700\u8981\u63D0\u524D\u5EFA\u7ACB\uFF0C\u5728\u5907\u4EFD\u5B8C\u6210\u540E\uFF0C\u7CFB\u7EDF\u81EA\u52A8\u5728dump\u76EE\u5F55\u4E0B\u5EFA\u7ACB\u4E00\u4E2Atest\u76EE\u5F55\uFF0C\u8FD9\u4E2A\u76EE\u5F55\u91CC\u9762\u5B58\u653E\u8BE5\u6570\u636E\u5E93\u5B9E\u4F8B\u7684\u5907\u4EFD\u6570\u636E\u3002</p></li></ul><h3 id="\u5B9E\u4F8B-1" tabindex="-1"><a class="header-anchor" href="#\u5B9E\u4F8B-1" aria-hidden="true">#</a> \u5B9E\u4F8B</h3><p>\u5728\u672C\u5730\u4F7F\u7528 27017 \u542F\u52A8\u4F60\u7684mongod\u670D\u52A1\u3002\u6253\u5F00\u547D\u4EE4\u63D0\u793A\u7B26\u7A97\u53E3\uFF0C\u8FDB\u5165MongoDB\u5B89\u88C5\u76EE\u5F55\u7684bin\u76EE\u5F55\u8F93\u5165\u547D\u4EE4mongodump:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>mongodump <span class="token comment">#\u5373mongod</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884C\u4EE5\u4E0A\u547D\u4EE4\u540E\uFF0C\u5BA2\u6237\u7AEF\u4F1A\u8FDE\u63A5\u5230ip\u4E3A 127.0.0.1 \u7AEF\u53E3\u53F7\u4E3A 27017 \u7684MongoDB\u670D\u52A1\u4E0A\uFF0C\u5E76\u5907\u4EFD\u6240\u6709\u6570\u636E\u5230 bin/dump/ \u76EE\u5F55\u4E2D\u3002\u547D\u4EE4\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongodump.png" alt="MongoDB\u6570\u636E\u5907\u4EFD" loading="lazy"></p><p>mongodump \u547D\u4EE4\u53EF\u9009\u53C2\u6570\u5217\u8868\u5982\u4E0B\u6240\u793A\uFF1A</p>`,16),rn=n("thead",null,[n("tr",null,[n("th",{style:{"text-align":"left"}},"\u8BED\u6CD5"),n("th",{style:{"text-align":"left"}},"\u63CF\u8FF0"),n("th",{style:{"text-align":"left"}},"\u5B9E\u4F8B")])],-1),kn=n("td",{style:{"text-align":"left"}},"mongodump --host HOST_NAME --port PORT_NUMBER",-1),mn=n("td",{style:{"text-align":"left"}},"\u8BE5\u547D\u4EE4\u5C06\u5907\u4EFD\u6240\u6709MongoDB\u6570\u636E",-1),bn={style:{"text-align":"left"}},gn=s("mongodump --host "),vn={href:"http://runoob.com",target:"_blank",rel:"noopener noreferrer"},qn=s("runoob.com"),hn=s(" --port 27017"),fn=n("tr",null,[n("td",{style:{"text-align":"left"}},"mongodump --dbpath DB_PATH --out BACKUP_DIRECTORY"),n("td",{style:{"text-align":"left"}}),n("td",{style:{"text-align":"left"}},"mongodump --dbpath /data/db/ --out /data/backup/")],-1),xn=n("tr",null,[n("td",{style:{"text-align":"left"}},"mongodump --collection COLLECTION --db DB_NAME"),n("td",{style:{"text-align":"left"}},"\u8BE5\u547D\u4EE4\u5C06\u5907\u4EFD\u6307\u5B9A\u6570\u636E\u5E93\u7684\u96C6\u5408\u3002"),n("td",{style:{"text-align":"left"}},"mongodump --collection mycol --db test")],-1),_n=e(`<hr><h2 id="\u6570\u636E\u6062\u590D" tabindex="-1"><a class="header-anchor" href="#\u6570\u636E\u6062\u590D" aria-hidden="true">#</a> \u6570\u636E\u6062\u590D</h2><p>mongodb\u4F7F\u7528 mongorestore \u547D\u4EE4\u6765\u6062\u590D\u5907\u4EFD\u7684\u6570\u636E\u3002</p><h3 id="\u8BED\u6CD5-2" tabindex="-1"><a class="header-anchor" href="#\u8BED\u6CD5-2" aria-hidden="true">#</a> \u8BED\u6CD5</h3><p>mongorestore\u547D\u4EE4\u811A\u672C\u8BED\u6CD5\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongorestore -h \\&lt;hostname&gt;\\&lt;:port&gt; -d dbname \\&lt;path&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>--host &lt;:port&gt;, -h &lt;:port&gt;\uFF1A</p><p>MongoDB\u6240\u5728\u670D\u52A1\u5668\u5730\u5740\uFF0C\u9ED8\u8BA4\u4E3A\uFF1A localhost:27017</p></li><li><p>--db , -d \uFF1A</p><p>\u9700\u8981\u6062\u590D\u7684\u6570\u636E\u5E93\u5B9E\u4F8B\uFF0C\u4F8B\u5982\uFF1Atest\uFF0C\u5F53\u7136\u8FD9\u4E2A\u540D\u79F0\u4E5F\u53EF\u4EE5\u548C\u5907\u4EFD\u65F6\u5019\u7684\u4E0D\u4E00\u6837\uFF0C\u6BD4\u5982test2</p></li><li><p>--drop\uFF1A</p><p>\u6062\u590D\u7684\u65F6\u5019\uFF0C\u5148\u5220\u9664\u5F53\u524D\u6570\u636E\uFF0C\u7136\u540E\u6062\u590D\u5907\u4EFD\u7684\u6570\u636E\u3002\u5C31\u662F\u8BF4\uFF0C\u6062\u590D\u540E\uFF0C\u5907\u4EFD\u540E\u6DFB\u52A0\u4FEE\u6539\u7684\u6570\u636E\u90FD\u4F1A\u88AB\u5220\u9664\uFF0C\u614E\u7528\u54E6\uFF01</p></li><li><p>&lt;path&gt;\uFF1A</p><p>mongorestore \u6700\u540E\u7684\u4E00\u4E2A\u53C2\u6570\uFF0C\u8BBE\u7F6E\u5907\u4EFD\u6570\u636E\u6240\u5728\u4F4D\u7F6E\uFF0C\u4F8B\u5982\uFF1Ac:\\data\\dump\\test\u3002</p><p>\u4F60\u4E0D\u80FD\u540C\u65F6\u6307\u5B9A &lt;path&gt; \u548C --dir \u9009\u9879\uFF0C--dir\u4E5F\u53EF\u4EE5\u8BBE\u7F6E\u5907\u4EFD\u76EE\u5F55\u3002</p></li><li><p>--dir\uFF1A</p><p>\u6307\u5B9A\u5907\u4EFD\u7684\u76EE\u5F55</p><p>\u4F60\u4E0D\u80FD\u540C\u65F6\u6307\u5B9A &lt;path&gt; \u548C --dir \u9009\u9879\u3002</p></li></ul><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongorestore
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6267\u884C\u4EE5\u4E0A\u547D\u4EE4\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongorestore.png" alt="MongoDB\u6570\u636E\u6062\u590D" loading="lazy"></p><h1 id="\u5341\u56DB\u3001\u76D1\u63A7" tabindex="-1"><a class="header-anchor" href="#\u5341\u56DB\u3001\u76D1\u63A7" aria-hidden="true">#</a> \u5341\u56DB\u3001\u76D1\u63A7</h1><p>\u5728\u4F60\u5DF2\u7ECF\u5B89\u88C5\u90E8\u7F72\u5E76\u5141\u8BB8MongoDB\u670D\u52A1\u540E\uFF0C\u4F60\u5FC5\u987B\u8981\u4E86\u89E3MongoDB\u7684\u8FD0\u884C\u60C5\u51B5\uFF0C\u5E76\u67E5\u770BMongoDB\u7684\u6027\u80FD\u3002\u8FD9\u6837\u5728\u5927\u6D41\u91CF\u5F97\u60C5\u51B5\u4E0B\u53EF\u4EE5\u5F88\u597D\u7684\u5E94\u5BF9\u5E76\u4FDD\u8BC1MongoDB\u6B63\u5E38\u8FD0\u4F5C\u3002</p><p>MongoDB\u4E2D\u63D0\u4F9B\u4E86mongostat \u548C mongotop \u4E24\u4E2A\u547D\u4EE4\u6765\u76D1\u63A7MongoDB\u7684\u8FD0\u884C\u60C5\u51B5\u3002</p><hr><h2 id="mongostat-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#mongostat-\u547D\u4EE4" aria-hidden="true">#</a> mongostat \u547D\u4EE4</h2><p>mongostat\u662Fmongodb\u81EA\u5E26\u7684\u72B6\u6001\u68C0\u6D4B\u5DE5\u5177\uFF0C\u5728\u547D\u4EE4\u884C\u4E0B\u4F7F\u7528\u3002\u5B83\u4F1A\u95F4\u9694\u56FA\u5B9A\u65F6\u95F4\u83B7\u53D6mongodb\u7684\u5F53\u524D\u8FD0\u884C\u72B6\u6001\uFF0C\u5E76\u8F93\u51FA\u3002\u5982\u679C\u4F60\u53D1\u73B0\u6570\u636E\u5E93\u7A81\u7136\u53D8\u6162\u6216\u8005\u6709\u5176\u4ED6\u95EE\u9898\u7684\u8BDD\uFF0C\u4F60\u7B2C\u4E00\u624B\u7684\u64CD\u4F5C\u5C31\u8003\u8651\u91C7\u7528mongostat\u6765\u67E5\u770Bmongo\u7684\u72B6\u6001\u3002</p><p>\u542F\u52A8\u4F60\u7684Mongod\u670D\u52A1\uFF0C\u8FDB\u5165\u5230\u4F60\u5B89\u88C5\u7684MongoDB\u76EE\u5F55\u4E0B\u7684bin\u76EE\u5F55\uFF0C \u7136\u540E\u8F93\u5165mongostat\u547D\u4EE4\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\\set up\\mongodb\\bin&gt;mongostat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u547D\u4EE4\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongostat.png" alt="img" loading="lazy"></p><h2 id="mongotop-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#mongotop-\u547D\u4EE4" aria-hidden="true">#</a> mongotop \u547D\u4EE4</h2><p>mongotop\u4E5F\u662Fmongodb\u4E0B\u7684\u4E00\u4E2A\u5185\u7F6E\u5DE5\u5177\uFF0Cmongotop\u63D0\u4F9B\u4E86\u4E00\u4E2A\u65B9\u6CD5\uFF0C\u7528\u6765\u8DDF\u8E2A\u4E00\u4E2AMongoDB\u7684\u5B9E\u4F8B\uFF0C\u67E5\u770B\u54EA\u4E9B\u5927\u91CF\u7684\u65F6\u95F4\u82B1\u8D39\u5728\u8BFB\u53D6\u548C\u5199\u5165\u6570\u636E\u3002 mongotop\u63D0\u4F9B\u6BCF\u4E2A\u96C6\u5408\u7684\u6C34\u5E73\u7684\u7EDF\u8BA1\u6570\u636E\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0Cmongotop\u8FD4\u56DE\u503C\u7684\u6BCF\u4E00\u79D2\u3002</p><p>\u542F\u52A8\u4F60\u7684Mongod\u670D\u52A1\uFF0C\u8FDB\u5165\u5230\u4F60\u5B89\u88C5\u7684MongoDB\u76EE\u5F55\u4E0B\u7684bin\u76EE\u5F55\uFF0C \u7136\u540E\u8F93\u5165mongotop\u547D\u4EE4\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\\set up\\mongodb\\bin&gt;mongotop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u547D\u4EE4\u6267\u884C\u8F93\u51FA\u7ED3\u679C\u5982\u4E0B\uFF1A</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongotop.png" alt="img" loading="lazy"></p><p>\u5E26\u53C2\u6570\u5B9E\u4F8B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> E:\\mongodb-win32-x86_64-2.2.1\\bin&gt;mongotop 10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/29122412-e32a9f09e46e496a8833433fdb421311.gif" alt="img" loading="lazy"></p><p>\u540E\u9762\u768410\u662F*&lt;sleeptime&gt;*\u53C2\u6570 \uFF0C\u53EF\u4EE5\u4E0D\u4F7F\u7528\uFF0C\u7B49\u5F85\u7684\u65F6\u95F4\u957F\u5EA6\uFF0C\u4EE5\u79D2\u4E3A\u5355\u4F4D\uFF0Cmongotop\u7B49\u5F85\u8C03\u7528\u4E4B\u95F4\u3002\u901A\u8FC7\u7684\u9ED8\u8BA4mongotop\u8FD4\u56DE\u6570\u636E\u7684\u6BCF\u4E00\u79D2\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> E:\\mongodb-win32-x86_64-2.2.1\\bin&gt;mongotop --locks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u62A5\u544A\u6BCF\u4E2A\u6570\u636E\u5E93\u7684\u9501\u7684\u4F7F\u7528\u4E2D\uFF0C\u4F7F\u7528mongotop - \u9501\uFF0C\u8FD9\u5C06\u4EA7\u751F\u4EE5\u4E0B\u8F93\u51FA\uFF1A</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/29122706-bfdd58e62c404b948f8039c489f8be81.gif" alt="img" loading="lazy"></p><p>\u8F93\u51FA\u7ED3\u679C\u5B57\u6BB5\u8BF4\u660E\uFF1A</p><ul><li><p>ns\uFF1A</p><p>\u5305\u542B\u6570\u636E\u5E93\u547D\u540D\u7A7A\u95F4\uFF0C\u540E\u8005\u7ED3\u5408\u4E86\u6570\u636E\u5E93\u540D\u79F0\u548C\u96C6\u5408\u3002</p></li><li><p><strong>db\uFF1A</strong></p><p>\u5305\u542B\u6570\u636E\u5E93\u7684\u540D\u79F0\u3002\u540D\u4E3A . \u7684\u6570\u636E\u5E93\u9488\u5BF9\u5168\u5C40\u9501\u5B9A\uFF0C\u800C\u975E\u7279\u5B9A\u6570\u636E\u5E93\u3002</p></li><li><p><strong>total\uFF1A</strong></p><p>mongod\u82B1\u8D39\u7684\u65F6\u95F4\u5DE5\u4F5C\u5728\u8FD9\u4E2A\u547D\u540D\u7A7A\u95F4\u63D0\u4F9B\u603B\u989D\u3002</p></li><li><p><strong>read\uFF1A</strong></p><p>\u63D0\u4F9B\u4E86\u5927\u91CF\u7684\u65F6\u95F4\uFF0C\u8FD9mongod\u82B1\u8D39\u5728\u6267\u884C\u8BFB\u64CD\u4F5C\uFF0C\u5728\u6B64\u547D\u540D\u7A7A\u95F4\u3002</p></li><li><p><strong>write\uFF1A</strong></p><p>\u63D0\u4F9B\u8FD9\u4E2A\u547D\u540D\u7A7A\u95F4\u8FDB\u884C\u5199\u64CD\u4F5C\uFF0C\u8FD9mongod\u82B1\u4E86\u5927\u91CF\u7684\u65F6\u95F4\u3002</p></li></ul><h1 id="\u5341\u4E94\u3001mongodbcompass\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E94\u3001mongodbcompass\u4F7F\u7528" aria-hidden="true">#</a> \u5341\u4E94\u3001MongoDBCompass\u4F7F\u7528</h1><p>MongoDB\u53EF\u89C6\u5316\u5DE5\u5177</p><p>mongo\u547D\u4EE4\u8FDE\u63A5\u670D\u52A1\u5668\u540E\u6253\u5F00\u5DE5\u5177</p><p>\u70B9\u51FB\u8FDE\u63A5\u9ED8\u8BA4\u7684\u670D\u52A1\u5668\u3001\u63A5\u53E3\u548CNone\u8BA4\u8BC1\u7684\u670D\u52A1</p><p><img src="http://qnimg.gisfsde.com/work/image-20220121155412364.png" alt="image-20220121155412364" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121155655870.png" alt="image-20220121155655870" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121160035165.png" alt="image-20220121160035165" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121160101367.png" alt="image-20220121160101367" loading="lazy"></p><h1 id="\u5341\u516D\u3001java\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5341\u516D\u3001java\u4F7F\u7528" aria-hidden="true">#</a> \u5341\u516D\u3001Java\u4F7F\u7528</h1>`,45),yn={href:"https://docs.mongodb.com/drivers/java/sync/current/quick-start/",target:"_blank",rel:"noopener noreferrer"},In=s("\u6587\u6863"),Mn=e(`<h2 id="\u5F15\u5165\u4F9D\u8D56" tabindex="-1"><a class="header-anchor" href="#\u5F15\u5165\u4F9D\u8D56" aria-hidden="true">#</a> \u5F15\u5165\u4F9D\u8D56</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--MongoDB--&gt;</span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mongodb\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mongodb-driver-sync\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   \\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.1\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
\\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u8FDE\u63A5" aria-hidden="true">#</a> \u8FDE\u63A5</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">pers<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>mylearnproject<span class="token punctuation">.</span>programbase<span class="token punctuation">.</span>nosql<span class="token punctuation">.</span>mongolearn</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Filters</span><span class="token punctuation">.</span><span class="token static">eq</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>bson<span class="token punctuation">.</span></span><span class="token class-name">Document</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoClients</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoCollection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoDatabase</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloMongoDB</span> <span class="token punctuation">{</span>
<span class="token comment">//1.\u6DFB\u52A0\u4F9D\u8D56</span>
<span class="token comment">//            \\&lt;dependency&gt;</span>
<span class="token comment">//            \\&lt;groupId&gt;org.mongodb\\&lt;/groupId&gt;</span>
<span class="token comment">//            \\&lt;artifactId&gt;mongodb-driver-sync\\&lt;/artifactId&gt;</span>
<span class="token comment">//            \\&lt;version&gt;4.4.1\\&lt;/version&gt;</span>
<span class="token comment">//        \\&lt;/dependency&gt;</span>

<span class="token comment">//    2.\u8FDE\u63A5\u5230\u6570\u636E\u5E93</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//    try{</span>
<span class="token comment">//        // \u8FDE\u63A5\u5230 mongodb \u670D\u52A1</span>
<span class="token comment">//        MongoClient mongoClient = new MongoClient( &quot;localhost&quot; , 27017 );</span>
<span class="token comment">//</span>
<span class="token comment">//        // \u8FDE\u63A5\u5230\u6570\u636E\u5E93</span>
<span class="token comment">//        MongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;mycol&quot;);</span>
<span class="token comment">//        System.out.println(&quot;Connect to database successfully&quot;);</span>
<span class="token comment">//</span>
<span class="token comment">//    }catch(Exception e){</span>
<span class="token comment">//        System.err.println( e.getClass().getName() + &quot;: &quot; + e.getMessage() );</span>
<span class="token comment">//    }</span>

<span class="token comment">// Replace the uri string with your MongoDB deployment&#39;s connection string</span>
<span class="token comment">//    IllegalArgumentException: Unsupported compressor &#39;disabled&#39;</span>
<span class="token comment">//    String uri = &quot;mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb&quot;;</span>
<span class="token comment">//    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/mongodb/internal/connection/InternalConnectionPoolSettings  \u5347\u7EA7springboot\u7248\u672C</span>
    <span class="token class-name">String</span> uri <span class="token operator">=</span> <span class="token string">&quot;mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">MongoClient</span> mongoClient <span class="token operator">=</span> <span class="token class-name">MongoClients</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        show dbs</span>
        <span class="token class-name">MongoDatabase</span> database <span class="token operator">=</span> mongoClient<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        show collections \u6216 show tables</span>
        <span class="token class-name">MongoCollection</span>\\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> collection <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">getCollection</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> doc <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u5341\u4E03\u3001\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E03\u3001\u5173\u7CFB" aria-hidden="true">#</a> \u5341\u4E03\u3001\u5173\u7CFB</h1><p>MongoDB \u7684\u5173\u7CFB\u8868\u793A\u591A\u4E2A\u6587\u6863\u4E4B\u95F4\u5728\u903B\u8F91\u4E0A\u7684\u76F8\u4E92\u8054\u7CFB\u3002</p><p>\u6587\u6863\u95F4\u53EF\u4EE5\u901A\u8FC7\u5D4C\u5165\u548C\u5F15\u7528\u6765\u5EFA\u7ACB\u8054\u7CFB\u3002</p><p>MongoDB \u4E2D\u7684\u5173\u7CFB\u53EF\u4EE5\u662F\uFF1A</p><ul><li>1:1 (1\u5BF91)</li><li>1: N (1\u5BF9\u591A)</li><li>N: 1 (\u591A\u5BF91)</li><li>N: N (\u591A\u5BF9\u591A)</li></ul><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u6765\u8003\u8651\u4E0B\u7528\u6237\u4E0E\u7528\u6237\u5730\u5740\u7684\u5173\u7CFB\u3002</p><p>\u4E00\u4E2A\u7528\u6237\u53EF\u4EE5\u6709\u591A\u4E2A\u5730\u5740\uFF0C\u6240\u4EE5\u662F\u4E00\u5BF9\u591A\u7684\u5173\u7CFB\u3002</p><p>\u4EE5\u4E0B\u662F <strong>user</strong> \u6587\u6863\u7684\u7B80\u5355\u7ED3\u6784\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;),
   &quot;name&quot;: &quot;Tom Hanks&quot;,
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0B\u662F <strong>address</strong> \u6587\u6863\u7684\u7B80\u5355\u7ED3\u6784\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc4a5d85242602e000000&quot;),
   &quot;building&quot;: &quot;22 A, Indiana Apt&quot;,
   &quot;pincode&quot;: 123456,
   &quot;city&quot;: &quot;Los Angeles&quot;,
   &quot;state&quot;: &quot;California&quot;
} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u5D4C\u5165\u5F0F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u5D4C\u5165\u5F0F\u5173\u7CFB" aria-hidden="true">#</a> \u5D4C\u5165\u5F0F\u5173\u7CFB</h2><p>\u4F7F\u7528\u5D4C\u5165\u5F0F\u65B9\u6CD5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u628A\u7528\u6237\u5730\u5740\u5D4C\u5165\u5230\u7528\u6237\u7684\u6587\u6863\u4E2D\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;),
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;,
   &quot;address&quot;: [
      {
         &quot;building&quot;: &quot;22 A, Indiana Apt&quot;,
         &quot;pincode&quot;: 123456,
         &quot;city&quot;: &quot;Los Angeles&quot;,
         &quot;state&quot;: &quot;California&quot;
      },
      {
         &quot;building&quot;: &quot;170 A, Acropolis Apt&quot;,
         &quot;pincode&quot;: 456789,
         &quot;city&quot;: &quot;Chicago&quot;,
         &quot;state&quot;: &quot;Illinois&quot;
      }]
} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u6570\u636E\u4FDD\u5B58\u5728\u5355\u4E00\u7684\u6587\u6863\u4E2D\uFF0C\u53EF\u4EE5\u6BD4\u8F83\u5BB9\u6613\u7684\u83B7\u53D6\u548C\u7EF4\u62A4\u6570\u636E\u3002 \u4F60\u53EF\u4EE5\u8FD9\u6837\u67E5\u8BE2\u7528\u6237\u7684\u5730\u5740\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;},{&quot;address&quot;:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u4EE5\u4E0A\u67E5\u8BE2\u4E2D <strong>db</strong> \u548C <strong>users</strong> \u8868\u793A\u6570\u636E\u5E93\u548C\u96C6\u5408\u3002</p><p>\u8FD9\u79CD\u6570\u636E\u7ED3\u6784\u7684\u7F3A\u70B9\u662F\uFF0C\u5982\u679C\u7528\u6237\u548C\u7528\u6237\u5730\u5740\u5728\u4E0D\u65AD\u589E\u52A0\uFF0C\u6570\u636E\u91CF\u4E0D\u65AD\u53D8\u5927\uFF0C\u4F1A\u5F71\u54CD\u8BFB\u5199\u6027\u80FD\u3002</p><h2 id="\u5F15\u7528\u5F0F\u5173\u7CFB" tabindex="-1"><a class="header-anchor" href="#\u5F15\u7528\u5F0F\u5173\u7CFB" aria-hidden="true">#</a> \u5F15\u7528\u5F0F\u5173\u7CFB</h2><p>\u5F15\u7528\u5F0F\u5173\u7CFB\u662F\u8BBE\u8BA1\u6570\u636E\u5E93\u65F6\u7ECF\u5E38\u7528\u5230\u7684\u65B9\u6CD5\uFF0C\u8FD9\u79CD\u65B9\u6CD5\u628A\u7528\u6237\u6570\u636E\u6587\u6863\u548C\u7528\u6237\u5730\u5740\u6570\u636E\u6587\u6863\u5206\u5F00\uFF0C\u901A\u8FC7\u5F15\u7528\u6587\u6863\u7684 <strong>id</strong> \u5B57\u6BB5\u6765\u5EFA\u7ACB\u5173\u7CFB\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;),
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;,
   &quot;address_ids&quot;: [
      ObjectId(&quot;52ffc4a5d85242602e000000&quot;),
      ObjectId(&quot;52ffc4a5d85242602e000001&quot;)
   ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u5B9E\u4F8B\u4E2D\uFF0C\u7528\u6237\u6587\u6863\u7684 <strong>address_ids</strong> \u5B57\u6BB5\u5305\u542B\u7528\u6237\u5730\u5740\u7684\u5BF9\u8C61id\uFF08ObjectId\uFF09\u6570\u7EC4\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u8BFB\u53D6\u8FD9\u4E9B\u7528\u6237\u5730\u5740\u7684\u5BF9\u8C61id\uFF08ObjectId\uFF09\u6765\u83B7\u53D6\u7528\u6237\u7684\u8BE6\u7EC6\u5730\u5740\u4FE1\u606F\u3002</p><p>\u8FD9\u79CD\u65B9\u6CD5\u9700\u8981\u4E24\u6B21\u67E5\u8BE2\uFF0C\u7B2C\u4E00\u6B21\u67E5\u8BE2\u7528\u6237\u5730\u5740\u7684\u5BF9\u8C61id\uFF08ObjectId\uFF09\uFF0C\u7B2C\u4E8C\u6B21\u901A\u8FC7\u67E5\u8BE2\u7684id\u83B7\u53D6\u7528\u6237\u7684\u8BE6\u7EC6\u5730\u5740\u4FE1\u606F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;var result = db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;},{&quot;address_ids&quot;:1})
&gt;var addresses = db.address.find({&quot;_id&quot;:{&quot;$in&quot;:result[&quot;address_ids&quot;]}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u5341\u516B\u3001\u6570\u636E\u5E93\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#\u5341\u516B\u3001\u6570\u636E\u5E93\u5F15\u7528" aria-hidden="true">#</a> \u5341\u516B\u3001\u6570\u636E\u5E93\u5F15\u7528</h1><p>\u5728\u4E0A\u4E00\u7AE0\u8282MongoDB\u5173\u7CFB\u4E2D\u6211\u4EEC\u63D0\u5230\u4E86MongoDB\u7684\u5F15\u7528\u6765\u89C4\u8303\u6570\u636E\u7ED3\u6784\u6587\u6863\u3002</p><p>MongoDB \u5F15\u7528\u6709\u4E24\u79CD\uFF1A</p><ul><li>\u624B\u52A8\u5F15\u7528\uFF08Manual References\uFF09</li><li>DBRefs</li></ul><hr><h2 id="dbrefs-vs-\u624B\u52A8\u5F15\u7528" tabindex="-1"><a class="header-anchor" href="#dbrefs-vs-\u624B\u52A8\u5F15\u7528" aria-hidden="true">#</a> DBRefs vs \u624B\u52A8\u5F15\u7528</h2><p>\u8003\u8651\u8FD9\u6837\u7684\u4E00\u4E2A\u573A\u666F\uFF0C\u6211\u4EEC\u5728\u4E0D\u540C\u7684\u96C6\u5408\u4E2D (address_home, address_office, address_mailing, \u7B49)\u5B58\u50A8\u4E0D\u540C\u7684\u5730\u5740\uFF08\u4F4F\u5740\uFF0C\u529E\u516C\u5BA4\u5730\u5740\uFF0C\u90AE\u4EF6\u5730\u5740\u7B49\uFF09\u3002</p><p>\u8FD9\u6837\uFF0C\u6211\u4EEC\u5728\u8C03\u7528\u4E0D\u540C\u5730\u5740\u65F6\uFF0C\u4E5F\u9700\u8981\u6307\u5B9A\u96C6\u5408\uFF0C\u4E00\u4E2A\u6587\u6863\u4ECE\u591A\u4E2A\u96C6\u5408\u5F15\u7528\u6587\u6863\uFF0C\u6211\u4EEC\u5E94\u8BE5\u4F7F\u7528 DBRefs\u3002</p><hr><h2 id="\u4F7F\u7528-dbrefs" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-dbrefs" aria-hidden="true">#</a> \u4F7F\u7528 DBRefs</h2><p>DBRef\u7684\u5F62\u5F0F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $ref : , $id : , $db :  }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E09\u4E2A\u5B57\u6BB5\u8868\u793A\u7684\u610F\u4E49\u4E3A\uFF1A</p><ul><li>$ref\uFF1A\u96C6\u5408\u540D\u79F0</li><li>$id\uFF1A\u5F15\u7528\u7684id</li><li>$db:\u6570\u636E\u5E93\u540D\u79F0\uFF0C\u53EF\u9009\u53C2\u6570</li><li></li></ul><p>\u4EE5\u4E0B\u5B9E\u4F8B\u4E2D\u7528\u6237\u6570\u636E\u6587\u6863\u4F7F\u7528\u4E86 DBRef, \u5B57\u6BB5 address\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;53402597d852426020000002&quot;),
   &quot;address&quot;: {
   &quot;$ref&quot;: &quot;address_home&quot;,
   &quot;$id&quot;: ObjectId(&quot;534009e4d852427820000002&quot;),
   &quot;$db&quot;: &quot;runoob&quot;},
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>address</strong> DBRef \u5B57\u6BB5\u6307\u5B9A\u4E86\u5F15\u7528\u7684\u5730\u5740\u6587\u6863\u662F\u5728 runoob \u6570\u636E\u5E93\u4E0B\u7684 address_home \u96C6\u5408\uFF0Cid \u4E3A 534009e4d852427820000002\u3002</p><p>\u4EE5\u4E0B\u4EE3\u7801\u4E2D\uFF0C\u6211\u4EEC\u901A\u8FC7\u6307\u5B9A $ref \u53C2\u6570\uFF08address_home \u96C6\u5408\uFF09\u6765\u67E5\u627E\u96C6\u5408\u4E2D\u6307\u5B9Aid\u7684\u7528\u6237\u5730\u5740\u4FE1\u606F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;var user = db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;})
&gt;var dbRef = user.address
&gt;db[dbRef.$ref].findOne({&quot;_id&quot;:(dbRef.$id)})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u5B9E\u4F8B\u8FD4\u56DE\u4E86 address_home \u96C6\u5408\u4E2D\u7684\u5730\u5740\u6570\u636E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot; : ObjectId(&quot;534009e4d852427820000002&quot;),
   &quot;building&quot; : &quot;22 A, Indiana Apt&quot;,
   &quot;pincode&quot; : 123456,
   &quot;city&quot; : &quot;Los Angeles&quot;,
   &quot;state&quot; : &quot;California&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u5341\u4E5D\u3001\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u5341\u4E5D\u3001\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2" aria-hidden="true">#</a> \u5341\u4E5D\u3001\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2</h1><p>\u5B98\u65B9\u7684MongoDB\u7684\u6587\u6863\u4E2D\u8BF4\u660E\uFF0C\u8986\u76D6\u67E5\u8BE2\u662F\u4EE5\u4E0B\u7684\u67E5\u8BE2\uFF1A</p><ul><li>\u6240\u6709\u7684\u67E5\u8BE2\u5B57\u6BB5\u662F\u7D22\u5F15\u7684\u4E00\u90E8\u5206</li><li>\u6240\u6709\u7684\u67E5\u8BE2\u8FD4\u56DE\u5B57\u6BB5\u5728\u540C\u4E00\u4E2A\u7D22\u5F15\u4E2D</li></ul><p>\u7531\u4E8E\u6240\u6709\u51FA\u73B0\u5728\u67E5\u8BE2\u4E2D\u7684\u5B57\u6BB5\u662F\u7D22\u5F15\u7684\u4E00\u90E8\u5206\uFF0C MongoDB \u65E0\u9700\u5728\u6574\u4E2A\u6570\u636E\u6587\u6863\u4E2D\u68C0\u7D22\u5339\u914D\u67E5\u8BE2\u6761\u4EF6\u548C\u8FD4\u56DE\u4F7F\u7528\u76F8\u540C\u7D22\u5F15\u7684\u67E5\u8BE2\u7ED3\u679C\u3002</p><p>\u56E0\u4E3A\u7D22\u5F15\u5B58\u5728\u4E8ERAM\u4E2D\uFF0C\u4ECE\u7D22\u5F15\u4E2D\u83B7\u53D6\u6570\u636E\u6BD4\u901A\u8FC7\u626B\u63CF\u6587\u6863\u8BFB\u53D6\u6570\u636E\u8981\u5FEB\u5F97\u591A\u3002</p><hr><h2 id="\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2" aria-hidden="true">#</a> \u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2</h2><p>\u4E3A\u4E86\u6D4B\u8BD5\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2\uFF0C\u4F7F\u7528\u4EE5\u4E0B users \u96C6\u5408:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;: ObjectId(&quot;53402597d852426020000002&quot;),
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;gender&quot;: &quot;M&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;,
   &quot;user_name&quot;: &quot;tombenzamin&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u5728 users \u96C6\u5408\u4E2D\u521B\u5EFA\u8054\u5408\u7D22\u5F15\uFF0C\u5B57\u6BB5\u4E3A gender \u548C user_name :</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.ensureIndex({gender:1,user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u73B0\u5728\uFF0C\u8BE5\u7D22\u5F15\u4F1A\u8986\u76D6\u4EE5\u4E0B\u67E5\u8BE2\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E5F\u5C31\u662F\u8BF4\uFF0C\u5BF9\u4E8E\u4E0A\u8FF0\u67E5\u8BE2\uFF0CMongoDB\u7684\u4E0D\u4F1A\u53BB\u6570\u636E\u5E93\u6587\u4EF6\u4E2D\u67E5\u627E\u3002\u76F8\u53CD\uFF0C\u5B83\u4F1A\u4ECE\u7D22\u5F15\u4E2D\u63D0\u53D6\u6570\u636E\uFF0C\u8FD9\u662F\u975E\u5E38\u5FEB\u901F\u7684\u6570\u636E\u67E5\u8BE2\u3002</p><p>\u7531\u4E8E\u6211\u4EEC\u7684\u7D22\u5F15\u4E2D\u4E0D\u5305\u62EC _id \u5B57\u6BB5\uFF0C_id\u5728\u67E5\u8BE2\u4E2D\u4F1A\u9ED8\u8BA4\u8FD4\u56DE\uFF0C\u6211\u4EEC\u53EF\u4EE5\u5728MongoDB\u7684\u67E5\u8BE2\u7ED3\u679C\u96C6\u4E2D\u6392\u9664\u5B83\u3002</p><p>\u4E0B\u9762\u7684\u5B9E\u4F8B\u6CA1\u6709\u6392\u9664_id\uFF0C\u67E5\u8BE2\u5C31\u4E0D\u4F1A\u88AB\u8986\u76D6\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6700\u540E\uFF0C\u5982\u679C\u662F\u4EE5\u4E0B\u7684\u67E5\u8BE2\uFF0C\u4E0D\u80FD\u4F7F\u7528\u8986\u76D6\u7D22\u5F15\u67E5\u8BE2\uFF1A</p><ul><li>\u6240\u6709\u7D22\u5F15\u5B57\u6BB5\u662F\u4E00\u4E2A\u6570\u7EC4</li><li>\u6240\u6709\u7D22\u5F15\u5B57\u6BB5\u662F\u4E00\u4E2A\u5B50\u6587\u6863</li></ul><h1 id="\u4E8C\u5341\u3001\u67E5\u8BE2\u5206\u6790" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u5341\u3001\u67E5\u8BE2\u5206\u6790" aria-hidden="true">#</a> \u4E8C\u5341\u3001\u67E5\u8BE2\u5206\u6790</h1><p>MongoDB \u67E5\u8BE2\u5206\u6790\u53EF\u4EE5\u786E\u4FDD\u6211\u4EEC\u6240\u5EFA\u7ACB\u7684\u7D22\u5F15\u662F\u5426\u6709\u6548\uFF0C\u662F\u67E5\u8BE2\u8BED\u53E5\u6027\u80FD\u5206\u6790\u7684\u91CD\u8981\u5DE5\u5177\u3002</p><p>MongoDB \u67E5\u8BE2\u5206\u6790\u5E38\u7528\u51FD\u6570\u6709\uFF1Aexplain() \u548C hint()\u3002</p><hr><h2 id="\u4F7F\u7528-explain" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-explain" aria-hidden="true">#</a> \u4F7F\u7528 explain()</h2><p>explain \u64CD\u4F5C\u63D0\u4F9B\u4E86\u67E5\u8BE2\u4FE1\u606F\uFF0C\u4F7F\u7528\u7D22\u5F15\u53CA\u67E5\u8BE2\u7EDF\u8BA1\u7B49\u3002\u6709\u5229\u4E8E\u6211\u4EEC\u5BF9\u7D22\u5F15\u7684\u4F18\u5316\u3002</p><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u5728 users \u96C6\u5408\u4E2D\u521B\u5EFA gender \u548C user_name \u7684\u7D22\u5F15\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.ensureIndex({gender:1,user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u73B0\u5728\u5728\u67E5\u8BE2\u8BED\u53E5\u4E2D\u4F7F\u7528 explain \uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).explain()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u7684 explain() \u67E5\u8BE2\u8FD4\u56DE\u5982\u4E0B\u7ED3\u679C\uFF1A</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;cursor&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;BtreeCursor gender_1_user_name_1&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;isMultiKey&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
   <span class="token property">&quot;n&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscannedObjects&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscanned&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscannedObjectsAllPlans&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscannedAllPlans&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token property">&quot;scanAndOrder&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
   <span class="token property">&quot;indexOnly&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//**indexOnly**: \u5B57\u6BB5\u4E3A true \uFF0C\u8868\u793A\u6211\u4EEC\u4F7F\u7528\u4E86\u7D22\u5F15\u3002</span>
   <span class="token property">&quot;nYields&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nChunkSkips&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;millis&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;indexBounds&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;gender&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token punctuation">[</span>
            <span class="token string">&quot;M&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;M&quot;</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;user_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
               <span class="token property">&quot;$minElement&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
               <span class="token property">&quot;$maxElement&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u770B\u770B\u8FD9\u4E2A\u7ED3\u679C\u96C6\u7684\u5B57\u6BB5\uFF1A</p><ul><li><strong>indexOnly</strong>: \u5B57\u6BB5\u4E3A true \uFF0C\u8868\u793A\u6211\u4EEC\u4F7F\u7528\u4E86\u7D22\u5F15\u3002</li><li><strong>cursor</strong>\uFF1A\u56E0\u4E3A\u8FD9\u4E2A\u67E5\u8BE2\u4F7F\u7528\u4E86\u7D22\u5F15\uFF0CMongoDB \u4E2D\u7D22\u5F15\u5B58\u50A8\u5728B\u6811\u7ED3\u6784\u4E2D\uFF0C\u6240\u4EE5\u8FD9\u662F\u4E5F\u4F7F\u7528\u4E86 BtreeCursor \u7C7B\u578B\u7684\u6E38\u6807\u3002\u5982\u679C\u6CA1\u6709\u4F7F\u7528\u7D22\u5F15\uFF0C\u6E38\u6807\u7684\u7C7B\u578B\u662F BasicCursor\u3002\u8FD9\u4E2A\u952E\u8FD8\u4F1A\u7ED9\u51FA\u4F60\u6240\u4F7F\u7528\u7684\u7D22\u5F15\u7684\u540D\u79F0\uFF0C\u4F60\u901A\u8FC7\u8FD9\u4E2A\u540D\u79F0\u53EF\u4EE5\u67E5\u770B\u5F53\u524D\u6570\u636E\u5E93\u4E0B\u7684system.indexes\u96C6\u5408\uFF08\u7CFB\u7EDF\u81EA\u52A8\u521B\u5EFA\uFF0C\u7531\u4E8E\u5B58\u50A8\u7D22\u5F15\u4FE1\u606F\uFF0C\u8FD9\u4E2A\u7A0D\u5FAE\u4F1A\u63D0\u5230\uFF09\u6765\u5F97\u5230\u7D22\u5F15\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002</li><li><strong>n</strong>\uFF1A\u5F53\u524D\u67E5\u8BE2\u8FD4\u56DE\u7684\u6587\u6863\u6570\u91CF\u3002</li><li><strong>nscanned/nscannedObjects</strong>\uFF1A\u8868\u660E\u5F53\u524D\u8FD9\u6B21\u67E5\u8BE2\u4E00\u5171\u626B\u63CF\u4E86\u96C6\u5408\u4E2D\u591A\u5C11\u4E2A\u6587\u6863\uFF0C\u6211\u4EEC\u7684\u76EE\u7684\u662F\uFF0C\u8BA9\u8FD9\u4E2A\u6570\u503C\u548C\u8FD4\u56DE\u6587\u6863\u7684\u6570\u91CF\u8D8A\u63A5\u8FD1\u8D8A\u597D\u3002</li><li><strong>millis</strong>\uFF1A\u5F53\u524D\u67E5\u8BE2\u6240\u9700\u65F6\u95F4\uFF0C\u6BEB\u79D2\u6570\u3002</li><li><strong>indexBounds</strong>\uFF1A\u5F53\u524D\u67E5\u8BE2\u5177\u4F53\u4F7F\u7528\u7684\u7D22\u5F15\u3002</li></ul><hr><h2 id="\u4F7F\u7528-hint" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-hint" aria-hidden="true">#</a> \u4F7F\u7528 hint()</h2><p>\u867D\u7136MongoDB\u67E5\u8BE2\u4F18\u5316\u5668\u4E00\u822C\u5DE5\u4F5C\u7684\u5F88\u4E0D\u9519\uFF0C\u4F46\u662F\u4E5F\u53EF\u4EE5<strong>\u4F7F\u7528 hint \u6765\u5F3A\u5236 MongoDB \u4F7F\u7528\u4E00\u4E2A\u6307\u5B9A\u7684\u7D22\u5F15</strong>\u3002</p><p>\u8FD9\u79CD\u65B9\u6CD5\u67D0\u4E9B\u60C5\u5F62\u4E0B\u4F1A\u63D0\u5347\u6027\u80FD\u3002 \u4E00\u4E2A\u6709\u7D22\u5F15\u7684 collection \u5E76\u4E14\u6267\u884C\u4E00\u4E2A\u591A\u5B57\u6BB5\u7684\u67E5\u8BE2(\u4E00\u4E9B\u5B57\u6BB5\u5DF2\u7ECF\u7D22\u5F15\u4E86)\u3002</p><p>\u5982\u4E0B\u67E5\u8BE2\u5B9E\u4F8B\u6307\u5B9A\u4E86\u4F7F\u7528 gender \u548C user_name \u7D22\u5F15\u5B57\u6BB5\u6765\u67E5\u8BE2\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).hint({gender:1,user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u4F7F\u7528 explain() \u51FD\u6570\u6765\u5206\u6790\u4EE5\u4E0A\u67E5\u8BE2\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).hint({gender:1,user_name:1}).explain()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u4E8C\u4E00\u3001mongodb-\u539F\u5B50\u64CD\u4F5C" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u4E00\u3001mongodb-\u539F\u5B50\u64CD\u4F5C" aria-hidden="true">#</a> \u4E8C\u4E00\u3001MongoDB \u539F\u5B50\u64CD\u4F5C</h1><p>mongodb<strong>\u4E0D\u652F\u6301\u4E8B\u52A1</strong>\uFF0C\u6240\u4EE5\uFF0C\u5728\u4F60\u7684\u9879\u76EE\u4E2D\u5E94\u7528\u65F6\uFF0C\u8981\u6CE8\u610F\u8FD9\u70B9\u3002\u65E0\u8BBA\u4EC0\u4E48\u8BBE\u8BA1\uFF0C\u90FD\u4E0D\u8981\u8981\u6C42mongodb\u4FDD\u8BC1\u6570\u636E\u7684\u5B8C\u6574\u6027\u3002</p><p>\u4F46\u662Fmongodb\u63D0\u4F9B\u4E86\u8BB8\u591A\u539F\u5B50\u64CD\u4F5C\uFF0C\u6BD4\u5982\u6587\u6863\u7684\u4FDD\u5B58\uFF0C\u4FEE\u6539\uFF0C\u5220\u9664\u7B49\uFF0C\u90FD\u662F\u539F\u5B50\u64CD\u4F5C\u3002</p><p>\u6240\u8C13\u539F\u5B50\u64CD\u4F5C\u5C31\u662F\u8981\u4E48\u8FD9\u4E2A\u6587\u6863\u4FDD\u5B58\u5230Mongodb\uFF0C\u8981\u4E48\u6CA1\u6709\u4FDD\u5B58\u5230Mongodb\uFF0C\u4E0D\u4F1A\u51FA\u73B0\u67E5\u8BE2\u5230\u7684\u6587\u6863\u6CA1\u6709\u4FDD\u5B58\u5B8C\u6574\u7684\u60C5\u51B5\u3002</p><hr><h2 id="\u539F\u5B50\u64CD\u4F5C\u6570\u636E\u6A21\u578B" tabindex="-1"><a class="header-anchor" href="#\u539F\u5B50\u64CD\u4F5C\u6570\u636E\u6A21\u578B" aria-hidden="true">#</a> \u539F\u5B50\u64CD\u4F5C\u6570\u636E\u6A21\u578B</h2><p>\u8003\u8651\u4E0B\u9762\u7684\u4F8B\u5B50\uFF0C\u56FE\u4E66\u9986\u7684\u4E66\u7C4D\u53CA\u7ED3\u8D26\u4FE1\u606F\u3002</p><p>\u5B9E\u4F8B\u8BF4\u660E\u4E86\u5728\u4E00\u4E2A\u76F8\u540C\u7684\u6587\u6863\u4E2D\u5982\u4F55\u786E\u4FDD\u5D4C\u5165\u5B57\u6BB5\u5173\u8054\u539F\u5B50\u64CD\u4F5C\uFF08update\uFF1A\u66F4\u65B0\uFF09\u7684\u5B57\u6BB5\u662F\u540C\u6B65\u7684\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>book = {
          _id: 123456789,
          title: &quot;MongoDB: The Definitive Guide&quot;,
          author: [ &quot;Kristina Chodorow&quot;, &quot;Mike Dirolf&quot; ],
          published_date: ISODate(&quot;2010-09-24&quot;),
          pages: 216,
          language: &quot;English&quot;,
          publisher_id: &quot;oreilly&quot;,
          available: 3,
          checkout: [ { by: &quot;joe&quot;, date: ISODate(&quot;2012-10-15&quot;) } ]
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F60\u53EF\u4EE5\u4F7F\u7528 db.collection.findAndModify() \u65B9\u6CD5\u6765\u5224\u65AD\u4E66\u7C4D\u662F\u5426\u53EF\u7ED3\u7B97\u5E76\u66F4\u65B0\u65B0\u7684\u7ED3\u7B97\u4FE1\u606F\u3002</p><p>\u5728\u540C\u4E00\u4E2A\u6587\u6863\u4E2D\u5D4C\u5165\u7684 available \u548C checkout \u5B57\u6BB5\u6765\u786E\u4FDD\u8FD9\u4E9B\u5B57\u6BB5\u662F\u540C\u6B65\u66F4\u65B0\u7684:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.books.findAndModify ( {
   query: {
            _id: 123456789,
            available: { $gt: 0 }
          },
   update: {
             $inc: { available: -1 },
             $push: { checkout: { by: &quot;abc&quot;, date: new Date() } }
           }
} )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u539F\u5B50\u64CD\u4F5C\u5E38\u7528\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u539F\u5B50\u64CD\u4F5C\u5E38\u7528\u547D\u4EE4" aria-hidden="true">#</a> \u539F\u5B50\u64CD\u4F5C\u5E38\u7528\u547D\u4EE4</h2><h4 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> $set</h4><p>\u7528\u6765\u6307\u5B9A\u4E00\u4E2A\u952E\u5E76\u66F4\u65B0\u952E\u503C\uFF0C\u82E5\u952E\u4E0D\u5B58\u5728\u5E76\u521B\u5EFA\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $set : { field : value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="unset" tabindex="-1"><a class="header-anchor" href="#unset" aria-hidden="true">#</a> $unset</h4><p>\u7528\u6765\u5220\u9664\u4E00\u4E2A\u952E\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $unset : { field : 1} }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="inc" tabindex="-1"><a class="header-anchor" href="#inc" aria-hidden="true">#</a> $inc</h4><p>$inc\u53EF\u4EE5\u5BF9\u6587\u6863\u7684\u67D0\u4E2A\u503C\u4E3A\u6570\u5B57\u578B\uFF08\u53EA\u80FD\u4E3A\u6EE1\u8DB3\u8981\u6C42\u7684\u6570\u5B57\uFF09\u7684\u952E\u8FDB\u884C\u589E\u51CF\u7684\u64CD\u4F5C\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $inc : { field : value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="push" tabindex="-1"><a class="header-anchor" href="#push" aria-hidden="true">#</a> $push</h4><p>\u7528\u6CD5\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $push : { field : value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u628Avalue\u8FFD\u52A0\u5230field\u91CC\u9762\u53BB\uFF0Cfield\u4E00\u5B9A\u8981\u662F\u6570\u7EC4\u7C7B\u578B\u624D\u884C\uFF0C\u5982\u679Cfield\u4E0D\u5B58\u5728\uFF0C\u4F1A\u65B0\u589E\u4E00\u4E2A\u6570\u7EC4\u7C7B\u578B\u52A0\u8FDB\u53BB\u3002</p><h4 id="pushall" tabindex="-1"><a class="header-anchor" href="#pushall" aria-hidden="true">#</a> $pushAll</h4><p>\u540C$push,\u53EA\u662F\u4E00\u6B21\u53EF\u4EE5\u8FFD\u52A0\u591A\u4E2A\u503C\u5230\u4E00\u4E2A\u6570\u7EC4\u5B57\u6BB5\u5185\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $pushAll : { field : value_array } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="pull" tabindex="-1"><a class="header-anchor" href="#pull" aria-hidden="true">#</a> $pull</h4><p>\u4ECE\u6570\u7EC4field\u5185\u5220\u9664\u4E00\u4E2A\u7B49\u4E8Evalue\u503C\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $pull : { field : _value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="addtoset" tabindex="-1"><a class="header-anchor" href="#addtoset" aria-hidden="true">#</a> $addToSet</h4><p>\u589E\u52A0\u4E00\u4E2A\u503C\u5230\u6570\u7EC4\u5185\uFF0C\u800C\u4E14\u53EA\u6709\u5F53\u8FD9\u4E2A\u503C\u4E0D\u5728\u6570\u7EC4\u5185\u624D\u589E\u52A0\u3002</p><h4 id="pop" tabindex="-1"><a class="header-anchor" href="#pop" aria-hidden="true">#</a> $pop</h4><p>\u5220\u9664\u6570\u7EC4\u7684\u7B2C\u4E00\u4E2A\u6216\u6700\u540E\u4E00\u4E2A\u5143\u7D20</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $pop : { field : 1 } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="rename" tabindex="-1"><a class="header-anchor" href="#rename" aria-hidden="true">#</a> $rename</h4><p>\u4FEE\u6539\u5B57\u6BB5\u540D\u79F0</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $rename : { old_field_name : new_field_name } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="bit" tabindex="-1"><a class="header-anchor" href="#bit" aria-hidden="true">#</a> $bit</h4><p>\u4F4D\u64CD\u4F5C\uFF0Cinteger\u7C7B\u578B</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{$bit : { field : {and : 5}}}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="\u504F\u79FB\u64CD\u4F5C\u7B26" tabindex="-1"><a class="header-anchor" href="#\u504F\u79FB\u64CD\u4F5C\u7B26" aria-hidden="true">#</a> \u504F\u79FB\u64CD\u4F5C\u7B26</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; t.find() { &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 3 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] }
 
&gt; t.update( {&#39;comments.by&#39;:&#39;joe&#39;}, {$inc:{&#39;comments.$.votes&#39;:1}}, false, true )
 
&gt; t.find() { &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 4 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="\u4E8C\u4E8C\u3001\u9AD8\u7EA7\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u4E8C\u3001\u9AD8\u7EA7\u7D22\u5F15" aria-hidden="true">#</a> \u4E8C\u4E8C\u3001\u9AD8\u7EA7\u7D22\u5F15</h1><p>\u8003\u8651\u4EE5\u4E0B\u6587\u6863\u96C6\u5408\uFF08users \uFF09:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;address&quot;: {
      &quot;city&quot;: &quot;Los Angeles&quot;,
      &quot;state&quot;: &quot;California&quot;,
      &quot;pincode&quot;: &quot;123&quot;
   },
   &quot;tags&quot;: [
      &quot;music&quot;,
      &quot;cricket&quot;,
      &quot;blogs&quot;
   ],
   &quot;name&quot;: &quot;Tom Benzamin&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u6587\u6863\u5305\u542B\u4E86 address \u5B50\u6587\u6863\u548C tags \u6570\u7EC4\u3002</p><hr><h2 id="\u7D22\u5F15\u6570\u7EC4\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u6570\u7EC4\u5B57\u6BB5" aria-hidden="true">#</a> \u7D22\u5F15\u6570\u7EC4\u5B57\u6BB5</h2><p>\u5047\u8BBE\u6211\u4EEC\u57FA\u4E8E\u6807\u7B7E\u6765\u68C0\u7D22\u7528\u6237\uFF0C\u4E3A\u6B64\u6211\u4EEC\u9700\u8981\u5BF9\u96C6\u5408\u4E2D\u7684\u6570\u7EC4 tags \u5EFA\u7ACB\u7D22\u5F15\u3002</p><p>\u5728\u6570\u7EC4\u4E2D\u521B\u5EFA\u7D22\u5F15\uFF0C\u9700\u8981\u5BF9\u6570\u7EC4\u4E2D\u7684\u6BCF\u4E2A\u5B57\u6BB5\u4F9D\u6B21\u5EFA\u7ACB\u7D22\u5F15\u3002\u6240\u4EE5\u5728\u6211\u4EEC\u4E3A\u6570\u7EC4 tags \u521B\u5EFA\u7D22\u5F15\u65F6\uFF0C\u4F1A\u4E3A music\u3001cricket\u3001blogs\u4E09\u4E2A\u503C\u5EFA\u7ACB\u5355\u72EC\u7684\u7D22\u5F15\u3002</p><p>\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u521B\u5EFA\u6570\u7EC4\u7D22\u5F15\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#3.0\u5F03\u7528</span>
<span class="token operator">&gt;</span>db.users.ensureIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tags&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&gt;</span> db.users.ensureIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tags&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: TypeError: db.users.ensureIndex is not a <span class="token keyword">function</span> <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token operator">&gt;</span> db.users.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tags&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u521B\u5EFA\u7D22\u5F15\u540E\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8FD9\u6837\u68C0\u7D22\u96C6\u5408\u7684 tags \u5B57\u6BB5\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({tags:&quot;cricket&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E3A\u4E86\u9A8C\u8BC1\u6211\u4EEC\u4F7F\u7528\u4F7F\u7528\u4E86\u7D22\u5F15\uFF0C\u53EF\u4EE5\u4F7F\u7528 explain \u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({tags:&quot;cricket&quot;}).explain()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u547D\u4EE4\u6267\u884C\u7ED3\u679C\u4E2D\u4F1A\u663E\u793A &quot;cursor&quot; : &quot;BtreeCursor tags_1&quot; \uFF0C\u5219\u8868\u793A\u5DF2\u7ECF\u4F7F\u7528\u4E86\u7D22\u5F15\u3002</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.users.find<span class="token punctuation">(</span><span class="token punctuation">{</span>tags:<span class="token string">&quot;cricket&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.<span class="token function-name function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;explainVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
        <span class="token string">&quot;queryPlanner&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;namespace&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;users.users&quot;</span>,
                <span class="token string">&quot;indexFilterSet&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;parsedQuery&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                <span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;cricket&quot;</span>
                        <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;queryHash&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;9D3B61A7&quot;</span>,
                <span class="token string">&quot;planCacheKey&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3C3D3201&quot;</span>,
                <span class="token string">&quot;maxIndexedOrSolutionsReached&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;maxIndexedAndSolutionsReached&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;maxScansToExplodeReached&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;winningPlan&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;FETCH&quot;</span>,
                        <span class="token string">&quot;inputStage&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;IXSCAN&quot;</span>,
                                <span class="token string">&quot;keyPattern&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
                                <span class="token punctuation">}</span>,
                                <span class="token string">&quot;indexName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;tags_1&quot;</span>,
                                <span class="token string">&quot;isMultiKey&quot;</span> <span class="token builtin class-name">:</span> true,
                                <span class="token string">&quot;multiKeyPaths&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                                                <span class="token string">&quot;tags&quot;</span>
                                        <span class="token punctuation">]</span>
                                <span class="token punctuation">}</span>,
                                <span class="token string">&quot;isUnique&quot;</span> <span class="token builtin class-name">:</span> false,
                                <span class="token string">&quot;isSparse&quot;</span> <span class="token builtin class-name">:</span> false,
                                <span class="token string">&quot;isPartial&quot;</span> <span class="token builtin class-name">:</span> false,
                                <span class="token string">&quot;indexVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
                                <span class="token string">&quot;direction&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;forward&quot;</span>,
                                <span class="token string">&quot;indexBounds&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                                                <span class="token string">&quot;[<span class="token entity" title="\\&quot;">\\&quot;</span>cricket<span class="token entity" title="\\&quot;">\\&quot;</span>, <span class="token entity" title="\\&quot;">\\&quot;</span>cricket<span class="token entity" title="\\&quot;">\\&quot;</span>]&quot;</span>
                                        <span class="token punctuation">]</span>
                                <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;rejectedPlans&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;command&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;find&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;users&quot;</span>,
                <span class="token string">&quot;filter&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;cricket&quot;</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;<span class="token variable">$db</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;users&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;serverInfo&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BF-202103261718&quot;</span>,
                <span class="token string">&quot;port&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">27017</span>,
                <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;5.0.6-rc0&quot;</span>,
                <span class="token string">&quot;gitVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;60af56dfe1a17c60bbd628163fda0a161105b6c0&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;serverParameters&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;internalQueryFacetBufferSizeBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalQueryFacetMaxOutputDocSizeBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalLookupStageIntermediateDocumentMaxSizeBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalDocumentSourceGroupMaxMemoryBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalQueryMaxBlockingSortMemoryUsageBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalQueryProhibitBlockingMergeOnMongoS&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
                <span class="token string">&quot;internalQueryMaxAddToSetBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalDocumentSourceSetWindowFieldsMaxMemoryBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u7D22\u5F15\u5B50\u6587\u6863\u5B57\u6BB5" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u5B50\u6587\u6863\u5B57\u6BB5" aria-hidden="true">#</a> \u7D22\u5F15\u5B50\u6587\u6863\u5B57\u6BB5</h2><p>\u5047\u8BBE\u6211\u4EEC\u9700\u8981\u901A\u8FC7city\u3001state\u3001pincode\u5B57\u6BB5\u6765\u68C0\u7D22\u6587\u6863\uFF0C\u7531\u4E8E\u8FD9\u4E9B\u5B57\u6BB5\u662F\u5B50\u6587\u6863\u7684\u5B57\u6BB5\uFF0C\u6240\u4EE5\u6211\u4EEC\u9700\u8981\u5BF9\u5B50\u6587\u6863\u5EFA\u7ACB\u7D22\u5F15\u3002</p><p>\u4E3A\u5B50\u6587\u6863\u7684\u4E09\u4E2A\u5B57\u6BB5\u521B\u5EFA\u7D22\u5F15\uFF0C\u547D\u4EE4\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.ensureIndex({&quot;address.city&quot;:1,&quot;address.state&quot;:1,&quot;address.pincode&quot;:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E00\u65E6\u521B\u5EFA\u7D22\u5F15\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u5B50\u6587\u6863\u7684\u5B57\u6BB5\u6765\u68C0\u7D22\u6570\u636E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({&quot;address.city&quot;:&quot;Los Angeles&quot;})   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u67E5\u8BE2\u8868\u8FBE\u4E0D\u4E00\u5B9A\u9075\u5FAA\u6307\u5B9A\u7684\u7D22\u5F15\u7684\u987A\u5E8F\uFF0Cmongodb \u4F1A\u81EA\u52A8\u4F18\u5316\u3002\u6240\u4EE5\u4E0A\u9762\u521B\u5EFA\u7684\u7D22\u5F15\u5C06\u652F\u6301\u4EE5\u4E0B\u67E5\u8BE2\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({&quot;address.state&quot;:&quot;California&quot;,&quot;address.city&quot;:&quot;Los Angeles&quot;}) 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u540C\u6837\u652F\u6301\u4EE5\u4E0B\u67E5\u8BE2\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({&quot;address.city&quot;:&quot;Los Angeles&quot;,&quot;address.state&quot;:&quot;California&quot;,&quot;address.pincode&quot;:&quot;123&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u4E8C\u4E09\u3001\u7D22\u5F15\u9650\u5236" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u4E09\u3001\u7D22\u5F15\u9650\u5236" aria-hidden="true">#</a> \u4E8C\u4E09\u3001\u7D22\u5F15\u9650\u5236</h1><hr><h2 id="\u989D\u5916\u5F00\u9500" tabindex="-1"><a class="header-anchor" href="#\u989D\u5916\u5F00\u9500" aria-hidden="true">#</a> \u989D\u5916\u5F00\u9500</h2><p>\u6BCF\u4E2A\u7D22\u5F15\u5360\u636E\u4E00\u5B9A\u7684\u5B58\u50A8\u7A7A\u95F4\uFF0C\u5728\u8FDB\u884C\u63D2\u5165\uFF0C\u66F4\u65B0\u548C\u5220\u9664\u64CD\u4F5C\u65F6\u4E5F\u9700\u8981\u5BF9\u7D22\u5F15\u8FDB\u884C\u64CD\u4F5C\u3002\u6240\u4EE5\uFF0C\u5982\u679C\u4F60\u5F88\u5C11\u5BF9\u96C6\u5408\u8FDB\u884C\u8BFB\u53D6\u64CD\u4F5C\uFF0C\u5EFA\u8BAE\u4E0D\u4F7F\u7528\u7D22\u5F15\u3002</p><hr><h2 id="\u5185\u5B58-ram-\u4F7F\u7528" tabindex="-1"><a class="header-anchor" href="#\u5185\u5B58-ram-\u4F7F\u7528" aria-hidden="true">#</a> \u5185\u5B58(RAM)\u4F7F\u7528</h2><p>\u7531\u4E8E\u7D22\u5F15\u662F\u5B58\u50A8\u5728\u5185\u5B58(RAM)\u4E2D,\u4F60\u5E94\u8BE5\u786E\u4FDD\u8BE5\u7D22\u5F15\u7684\u5927\u5C0F\u4E0D\u8D85\u8FC7\u5185\u5B58\u7684\u9650\u5236\u3002</p><p>\u5982\u679C\u7D22\u5F15\u7684\u5927\u5C0F\u5927\u4E8E\u5185\u5B58\u7684\u9650\u5236\uFF0CMongoDB\u4F1A\u5220\u9664\u4E00\u4E9B\u7D22\u5F15\uFF0C\u8FD9\u5C06\u5BFC\u81F4\u6027\u80FD\u4E0B\u964D\u3002</p><hr><h2 id="\u67E5\u8BE2\u9650\u5236" tabindex="-1"><a class="header-anchor" href="#\u67E5\u8BE2\u9650\u5236" aria-hidden="true">#</a> \u67E5\u8BE2\u9650\u5236</h2><p>\u7D22\u5F15\u4E0D\u80FD\u88AB\u4EE5\u4E0B\u7684\u67E5\u8BE2\u4F7F\u7528\uFF1A</p><ul><li>\u6B63\u5219\u8868\u8FBE\u5F0F\u53CA\u975E\u64CD\u4F5C\u7B26\uFF0C\u5982 $nin, $not, \u7B49\u3002</li><li>\u7B97\u672F\u8FD0\u7B97\u7B26\uFF0C\u5982 $mod, \u7B49\u3002</li><li>$where \u5B50\u53E5</li></ul><p>\u6240\u4EE5\uFF0C\u68C0\u6D4B\u4F60\u7684\u8BED\u53E5\u662F\u5426\u4F7F\u7528\u7D22\u5F15\u662F\u4E00\u4E2A\u597D\u7684\u4E60\u60EF\uFF0C\u53EF\u4EE5\u7528explain\u6765\u67E5\u770B\u3002</p><hr><h2 id="\u7D22\u5F15\u952E\u9650\u5236" tabindex="-1"><a class="header-anchor" href="#\u7D22\u5F15\u952E\u9650\u5236" aria-hidden="true">#</a> \u7D22\u5F15\u952E\u9650\u5236</h2><p>\u4ECE2.6\u7248\u672C\u5F00\u59CB\uFF0C\u5982\u679C\u73B0\u6709\u7684\u7D22\u5F15\u5B57\u6BB5\u7684\u503C\u8D85\u8FC7\u7D22\u5F15\u952E\u7684\u9650\u5236\uFF0CMongoDB\u4E2D\u4E0D\u4F1A\u521B\u5EFA\u7D22\u5F15\u3002</p><hr><h2 id="\u63D2\u5165\u6587\u6863\u8D85\u8FC7\u7D22\u5F15\u952E\u9650\u5236" tabindex="-1"><a class="header-anchor" href="#\u63D2\u5165\u6587\u6863\u8D85\u8FC7\u7D22\u5F15\u952E\u9650\u5236" aria-hidden="true">#</a> \u63D2\u5165\u6587\u6863\u8D85\u8FC7\u7D22\u5F15\u952E\u9650\u5236</h2><p>\u5982\u679C\u6587\u6863\u7684\u7D22\u5F15\u5B57\u6BB5\u503C\u8D85\u8FC7\u4E86\u7D22\u5F15\u952E\u7684\u9650\u5236\uFF0CMongoDB\u4E0D\u4F1A\u5C06\u4EFB\u4F55\u6587\u6863\u8F6C\u6362\u6210\u7D22\u5F15\u7684\u96C6\u5408\u3002\u4E0Emongorestore\u548Cmongoimport\u5DE5\u5177\u7C7B\u4F3C\u3002</p><hr><h2 id="\u6700\u5927\u8303\u56F4" tabindex="-1"><a class="header-anchor" href="#\u6700\u5927\u8303\u56F4" aria-hidden="true">#</a> \u6700\u5927\u8303\u56F4</h2><ul><li>\u96C6\u5408\u4E2D\u7D22\u5F15\u4E0D\u80FD\u8D85\u8FC764\u4E2A</li><li>\u7D22\u5F15\u540D\u7684\u957F\u5EA6\u4E0D\u80FD\u8D85\u8FC7128\u4E2A\u5B57\u7B26</li><li>\u4E00\u4E2A\u590D\u5408\u7D22\u5F15\u6700\u591A\u53EF\u4EE5\u670931\u4E2A\u5B57\u6BB5</li></ul><h1 id="\u4E8C\u56DB\u3001mongodb-objectid" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u56DB\u3001mongodb-objectid" aria-hidden="true">#</a> \u4E8C\u56DB\u3001MongoDB ObjectId</h1><hr><p>\u5728\u524D\u9762\u51E0\u4E2A\u7AE0\u8282\u4E2D\u6211\u4EEC\u5DF2\u7ECF\u4F7F\u7528\u4E86MongoDB \u7684\u5BF9\u8C61 Id(ObjectId)\u3002</p><p>\u5728\u672C\u7AE0\u8282\u4E2D\uFF0C\u6211\u4EEC\u5C06\u4E86\u89E3\u7684ObjectId\u7684\u7ED3\u6784\u3002</p><p>ObjectId \u662F\u4E00\u4E2A12\u5B57\u8282 BSON \u7C7B\u578B\u6570\u636E\uFF0C\u6709\u4EE5\u4E0B\u683C\u5F0F\uFF1A</p><ul><li>\u524D4\u4E2A\u5B57\u8282\u8868\u793A\u65F6\u95F4\u6233</li><li>\u63A5\u4E0B\u6765\u76843\u4E2A\u5B57\u8282\u662F\u673A\u5668\u6807\u8BC6\u7801</li><li>\u7D27\u63A5\u7684\u4E24\u4E2A\u5B57\u8282\u7531\u8FDB\u7A0Bid\u7EC4\u6210\uFF08PID\uFF09</li><li>\u6700\u540E\u4E09\u4E2A\u5B57\u8282\u662F\u968F\u673A\u6570\u3002</li></ul><p>MongoDB\u4E2D\u5B58\u50A8\u7684\u6587\u6863\u5FC5\u987B\u6709\u4E00\u4E2A&quot;_id&quot;\u952E\u3002\u8FD9\u4E2A\u952E\u7684\u503C\u53EF\u4EE5\u662F\u4EFB\u4F55\u7C7B\u578B\u7684\uFF0C\u9ED8\u8BA4\u662F\u4E2AObjectId\u5BF9\u8C61\u3002</p><p>\u5728\u4E00\u4E2A\u96C6\u5408\u91CC\u9762\uFF0C\u6BCF\u4E2A\u6587\u6863\u90FD\u6709\u552F\u4E00\u7684&quot;_id&quot;\u503C\uFF0C\u6765\u786E\u4FDD\u96C6\u5408\u91CC\u9762\u6BCF\u4E2A\u6587\u6863\u90FD\u80FD\u88AB\u552F\u4E00\u6807\u8BC6\u3002</p><p>MongoDB\u91C7\u7528ObjectId\uFF0C\u800C\u4E0D\u662F\u5176\u4ED6\u6BD4\u8F83\u5E38\u89C4\u7684\u505A\u6CD5\uFF08\u6BD4\u5982\u81EA\u52A8\u589E\u52A0\u7684\u4E3B\u952E\uFF09\u7684\u4E3B\u8981\u539F\u56E0\uFF0C\u56E0\u4E3A\u5728\u591A\u4E2A \u670D\u52A1\u5668\u4E0A\u540C\u6B65\u81EA\u52A8\u589E\u52A0\u4E3B\u952E\u503C\u65E2\u8D39\u529B\u8FD8\u8D39\u65F6\u3002</p><hr><h2 id="\u521B\u5EFA\u65B0\u7684objectid" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u65B0\u7684objectid" aria-hidden="true">#</a> \u521B\u5EFA\u65B0\u7684ObjectId</h2><p>\u4F7F\u7528\u4EE5\u4E0B\u4EE3\u7801\u751F\u6210\u65B0\u7684ObjectId\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;newObjectId = ObjectId()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4E0A\u9762\u7684\u8BED\u53E5\u8FD4\u56DE\u4EE5\u4E0B\u552F\u4E00\u751F\u6210\u7684id\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ObjectId(&quot;5349b4ddd2781d08c09890f3&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F60\u4E5F\u53EF\u4EE5\u4F7F\u7528\u751F\u6210\u7684id\u6765\u53D6\u4EE3MongoDB\u81EA\u52A8\u751F\u6210\u7684ObjectId\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;myObjectId = ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u521B\u5EFA\u6587\u6863\u7684\u65F6\u95F4\u6233" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u6587\u6863\u7684\u65F6\u95F4\u6233" aria-hidden="true">#</a> \u521B\u5EFA\u6587\u6863\u7684\u65F6\u95F4\u6233</h2><p>\u7531\u4E8E ObjectId \u4E2D\u5B58\u50A8\u4E86 4 \u4E2A\u5B57\u8282\u7684\u65F6\u95F4\u6233\uFF0C\u6240\u4EE5\u4F60\u4E0D\u9700\u8981\u4E3A\u4F60\u7684\u6587\u6863\u4FDD\u5B58\u65F6\u95F4\u6233\u5B57\u6BB5\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7 getTimestamp \u51FD\u6570\u6765\u83B7\u53D6\u6587\u6863\u7684\u521B\u5EFA\u65F6\u95F4:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;).getTimestamp()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4EE3\u7801\u5C06\u8FD4\u56DE ISO \u683C\u5F0F\u7684\u6587\u6863\u521B\u5EFA\u65F6\u95F4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ISODate(&quot;2014-04-12T21:49:17Z&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="objectid-\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32" tabindex="-1"><a class="header-anchor" href="#objectid-\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32" aria-hidden="true">#</a> ObjectId \u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32</h2><p>\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u60A8\u53EF\u80FD\u9700\u8981\u5C06ObjectId\u8F6C\u6362\u4E3A\u5B57\u7B26\u4E32\u683C\u5F0F\u3002\u4F60\u53EF\u4EE5\u4F7F\u7528\u4E0B\u9762\u7684\u4EE3\u7801\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;new ObjectId().str
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4EE3\u7801\u5C06\u8FD4\u56DEGuid\u683C\u5F0F\u7684\u5B57\u7B26\u4E32\uFF1A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>5349b4ddd2781d08c09890f3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u4E8C\u4E94\u3001-map-reduce" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u4E94\u3001-map-reduce" aria-hidden="true">#</a> \u4E8C\u4E94\u3001 Map Reduce</h1><p>Map-Reduce\u662F\u4E00\u79CD\u8BA1\u7B97\u6A21\u578B\uFF0C\u7B80\u5355\u7684\u8BF4\u5C31\u662F\u5C06\u5927\u6279\u91CF\u7684\u5DE5\u4F5C\uFF08\u6570\u636E\uFF09\u5206\u89E3\uFF08MAP\uFF09\u6267\u884C\uFF0C\u7136\u540E\u518D\u5C06\u7ED3\u679C\u5408\u5E76\u6210\u6700\u7EC8\u7ED3\u679C\uFF08REDUCE\uFF09\u3002</p><p>MongoDB\u63D0\u4F9B\u7684Map-Reduce\u975E\u5E38\u7075\u6D3B\uFF0C\u5BF9\u4E8E\u5927\u89C4\u6A21\u6570\u636E\u5206\u6790\u4E5F\u76F8\u5F53\u5B9E\u7528\u3002</p><h3 id="mapreduce-\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#mapreduce-\u547D\u4EE4" aria-hidden="true">#</a> MapReduce \u547D\u4EE4</h3><p>\u4EE5\u4E0B\u662FMapReduce\u7684\u57FA\u672C\u8BED\u6CD5\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.collection.mapReduce(
   function() {emit(key,value);},  //map \u51FD\u6570
   function(key,values) {return reduceFunction},   //reduce \u51FD\u6570
   {
      out: collection,
      query: document,
      sort: document,
      limit: number
   }
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528 MapReduce \u8981\u5B9E\u73B0\u4E24\u4E2A\u51FD\u6570 Map \u51FD\u6570\u548C Reduce \u51FD\u6570,Map \u51FD\u6570\u8C03\u7528 emit(key, value), \u904D\u5386 collection \u4E2D\u6240\u6709\u7684\u8BB0\u5F55, \u5C06 key \u4E0E value \u4F20\u9012\u7ED9 Reduce \u51FD\u6570\u8FDB\u884C\u5904\u7406\u3002</p><p>Map \u51FD\u6570\u5FC5\u987B\u8C03\u7528 emit(key, value) \u8FD4\u56DE\u952E\u503C\u5BF9\u3002</p><p>\u53C2\u6570\u8BF4\u660E:</p><ul><li><strong>map</strong> \uFF1A\u6620\u5C04\u51FD\u6570 (\u751F\u6210\u952E\u503C\u5BF9\u5E8F\u5217,\u4F5C\u4E3A reduce \u51FD\u6570\u53C2\u6570)\u3002</li><li><strong>reduce</strong> \u7EDF\u8BA1\u51FD\u6570\uFF0Creduce\u51FD\u6570\u7684\u4EFB\u52A1\u5C31\u662F\u5C06key-values\u53D8\u6210key-value\uFF0C\u4E5F\u5C31\u662F\u628Avalues\u6570\u7EC4\u53D8\u6210\u4E00\u4E2A\u5355\u4E00\u7684\u503Cvalue\u3002\u3002</li><li><strong>out</strong> \u7EDF\u8BA1\u7ED3\u679C\u5B58\u653E\u96C6\u5408 (\u4E0D\u6307\u5B9A\u5219\u4F7F\u7528\u4E34\u65F6\u96C6\u5408,\u5728\u5BA2\u6237\u7AEF\u65AD\u5F00\u540E\u81EA\u52A8\u5220\u9664)\u3002</li><li><strong>query</strong> \u4E00\u4E2A\u7B5B\u9009\u6761\u4EF6\uFF0C\u53EA\u6709\u6EE1\u8DB3\u6761\u4EF6\u7684\u6587\u6863\u624D\u4F1A\u8C03\u7528map\u51FD\u6570\u3002\uFF08query\u3002limit\uFF0Csort\u53EF\u4EE5\u968F\u610F\u7EC4\u5408\uFF09</li><li><strong>sort</strong> \u548Climit\u7ED3\u5408\u7684sort\u6392\u5E8F\u53C2\u6570\uFF08\u4E5F\u662F\u5728\u53D1\u5F80map\u51FD\u6570\u524D\u7ED9\u6587\u6863\u6392\u5E8F\uFF09\uFF0C\u53EF\u4EE5\u4F18\u5316\u5206\u7EC4\u673A\u5236</li><li><strong>limit</strong> \u53D1\u5F80map\u51FD\u6570\u7684\u6587\u6863\u6570\u91CF\u7684\u4E0A\u9650\uFF08\u8981\u662F\u6CA1\u6709limit\uFF0C\u5355\u72EC\u4F7F\u7528sort\u7684\u7528\u5904\u4E0D\u5927\uFF09</li></ul><p>\u4EE5\u4E0B\u5B9E\u4F8B\u5728\u96C6\u5408 orders \u4E2D\u67E5\u627E status:&quot;A&quot; \u7684\u6570\u636E\uFF0C\u5E76\u6839\u636E cust_id \u6765\u5206\u7EC4\uFF0C\u5E76\u8BA1\u7B97 amount \u7684\u603B\u548C\u3002</p><p><img src="https://static.runoob.com/images/map-reduce.bakedsvg.svg" alt="img" loading="lazy"></p><hr><h2 id="\u4F7F\u7528-mapreduce" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-mapreduce" aria-hidden="true">#</a> \u4F7F\u7528 MapReduce</h2><p>\u8003\u8651\u4EE5\u4E0B\u6587\u6863\u7ED3\u6784\u5B58\u50A8\u7528\u6237\u7684\u6587\u7AE0\uFF0C\u6587\u6863\u5B58\u50A8\u4E86\u7528\u6237\u7684 user_name \u548C\u6587\u7AE0\u7684 status \u5B57\u6BB5\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;disabled&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runoob&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;disabled&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runoob&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;disabled&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;\u83DC\u9E1F\u6559\u7A0B\uFF0C\u6700\u5168\u7684\u6280\u672F\u6587\u6863\u3002&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runoob&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u5C06\u5728 posts \u96C6\u5408\u4E2D\u4F7F\u7528 mapReduce \u51FD\u6570\u6765\u9009\u53D6\u5DF2\u53D1\u5E03\u7684\u6587\u7AE0(status:&quot;active&quot;)\uFF0C\u5E76\u901A\u8FC7user_name\u5206\u7EC4\uFF0C\u8BA1\u7B97\u6BCF\u4E2A\u7528\u6237\u7684\u6587\u7AE0\u6570\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.posts.mapReduce<span class="token punctuation">(</span> 
   <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> emit<span class="token punctuation">(</span>this.user_name,1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>, 
   function<span class="token punctuation">(</span>key, values<span class="token punctuation">)</span> <span class="token punctuation">{</span>return Array.sum<span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">}</span>, 
      <span class="token punctuation">{</span>  
         query:<span class="token punctuation">{</span>status:<span class="token string">&quot;active&quot;</span><span class="token punctuation">}</span>,  
         out:<span class="token string">&quot;post_total&quot;</span> 
      <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A mapReduce \u8F93\u51FA\u7ED3\u679C\u4E3A\uFF1A</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
        <span class="token string">&quot;result&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;post_total&quot;</span>,
        <span class="token string">&quot;timeMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>,
        <span class="token string">&quot;counts&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;input&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">5</span>,
                <span class="token string">&quot;emit&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">5</span>,
                <span class="token string">&quot;reduce&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                <span class="token string">&quot;output&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7ED3\u679C\u8868\u660E\uFF0C\u5171\u6709 5 \u4E2A\u7B26\u5408\u67E5\u8BE2\u6761\u4EF6\uFF08status:&quot;active&quot;\uFF09\u7684\u6587\u6863\uFF0C \u5728map\u51FD\u6570\u4E2D\u751F\u6210\u4E86 5 \u4E2A\u952E\u503C\u5BF9\u6587\u6863\uFF0C\u6700\u540E\u4F7F\u7528reduce\u51FD\u6570\u5C06\u76F8\u540C\u7684\u952E\u503C\u5206\u4E3A 2 \u7EC4\u3002</p><p>\u5177\u4F53\u53C2\u6570\u8BF4\u660E\uFF1A</p><ul><li>result\uFF1A\u50A8\u5B58\u7ED3\u679C\u7684collection\u7684\u540D\u5B57,\u8FD9\u662F\u4E2A\u4E34\u65F6\u96C6\u5408\uFF0CMapReduce\u7684\u8FDE\u63A5\u5173\u95ED\u540E\u81EA\u52A8\u5C31\u88AB\u5220\u9664\u4E86\u3002</li><li>timeMillis\uFF1A\u6267\u884C\u82B1\u8D39\u7684\u65F6\u95F4\uFF0C\u6BEB\u79D2\u4E3A\u5355\u4F4D</li><li>input\uFF1A\u6EE1\u8DB3\u6761\u4EF6\u88AB\u53D1\u9001\u5230map\u51FD\u6570\u7684\u6587\u6863\u4E2A\u6570</li><li>emit\uFF1A\u5728map\u51FD\u6570\u4E2Demit\u88AB\u8C03\u7528\u7684\u6B21\u6570\uFF0C\u4E5F\u5C31\u662F\u6240\u6709\u96C6\u5408\u4E2D\u7684\u6570\u636E\u603B\u91CF</li><li>ouput\uFF1A\u7ED3\u679C\u96C6\u5408\u4E2D\u7684\u6587\u6863\u4E2A\u6570**\uFF08count\u5BF9\u8C03\u8BD5\u975E\u5E38\u6709\u5E2E\u52A9\uFF09**</li><li>ok\uFF1A\u662F\u5426\u6210\u529F\uFF0C\u6210\u529F\u4E3A1</li><li>err\uFF1A\u5982\u679C\u5931\u8D25\uFF0C\u8FD9\u91CC\u53EF\u4EE5\u6709\u5931\u8D25\u539F\u56E0\uFF0C\u4E0D\u8FC7\u4ECE\u7ECF\u9A8C\u4E0A\u6765\u770B\uFF0C\u539F\u56E0\u6BD4\u8F83\u6A21\u7CCA\uFF0C\u4F5C\u7528\u4E0D\u5927</li></ul><p>\u4F7F\u7528 find \u64CD\u4F5C\u7B26\u6765\u67E5\u770B mapReduce \u7684\u67E5\u8BE2\u7ED3\u679C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.mapReduce( 
   function() { emit(this.user_name,1); }, 
   function(key, values) {return Array.sum(values)}, 
      {  
         query:{status:&quot;active&quot;},  
         out:&quot;post_total&quot; 
      }
).find()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u67E5\u8BE2\u663E\u793A\u5982\u4E0B\u7ED3\u679C:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ &quot;_id&quot; : &quot;mark&quot;, &quot;value&quot; : 4 }
{ &quot;_id&quot; : &quot;runoob&quot;, &quot;value&quot; : 1 }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>\u7528\u7C7B\u4F3C\u7684\u65B9\u5F0F\uFF0CMapReduce\u53EF\u4EE5\u88AB\u7528\u6765\u6784\u5EFA\u5927\u578B\u590D\u6742\u7684\u805A\u5408\u67E5\u8BE2\u3002</p><p>Map\u51FD\u6570\u548CReduce\u51FD\u6570\u53EF\u4EE5\u4F7F\u7528 JavaScript \u6765\u5B9E\u73B0\uFF0C\u4F7F\u5F97MapReduce\u7684\u4F7F\u7528\u975E\u5E38\u7075\u6D3B\u548C\u5F3A\u5927\u3002</p><h1 id="\u4E8C\u516D\u3001\u5168\u6587\u68C0\u7D22" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u516D\u3001\u5168\u6587\u68C0\u7D22" aria-hidden="true">#</a> \u4E8C\u516D\u3001\u5168\u6587\u68C0\u7D22</h1><p>\u5168\u6587\u68C0\u7D22\u5BF9\u6BCF\u4E00\u4E2A\u8BCD\u5EFA\u7ACB\u4E00\u4E2A\u7D22\u5F15\uFF0C\u6307\u660E\u8BE5\u8BCD\u5728\u6587\u7AE0\u4E2D\u51FA\u73B0\u7684\u6B21\u6570\u548C\u4F4D\u7F6E\uFF0C\u5F53\u7528\u6237\u67E5\u8BE2\u65F6\uFF0C\u68C0\u7D22\u7A0B\u5E8F\u5C31\u6839\u636E\u4E8B\u5148\u5EFA\u7ACB\u7684\u7D22\u5F15\u8FDB\u884C\u67E5\u627E\uFF0C\u5E76\u5C06\u67E5\u627E\u7684\u7ED3\u679C\u53CD\u9988\u7ED9\u7528\u6237\u7684\u68C0\u7D22\u65B9\u5F0F\u3002</p><p>\u8FD9\u4E2A\u8FC7\u7A0B\u7C7B\u4F3C\u4E8E\u901A\u8FC7\u5B57\u5178\u4E2D\u7684\u68C0\u7D22\u5B57\u8868\u67E5\u5B57\u7684\u8FC7\u7A0B\u3002</p><p>MongoDB \u4ECE 2.4 \u7248\u672C\u5F00\u59CB\u652F\u6301\u5168\u6587\u68C0\u7D22\uFF0C\u76EE\u524D\u652F\u630115\u79CD\u8BED\u8A00\u7684\u5168\u6587\u7D22\u5F15\u3002</p><ul><li>danish</li><li>dutch</li><li>english</li><li>finnish</li><li>french</li><li>german</li><li>hungarian</li><li>italian</li><li>norwegian</li><li>portuguese</li><li>romanian</li><li>russian</li><li>spanish</li><li>swedish</li><li>turkish</li></ul><hr><h2 id="\u542F\u7528\u5168\u6587\u68C0\u7D22" tabindex="-1"><a class="header-anchor" href="#\u542F\u7528\u5168\u6587\u68C0\u7D22" aria-hidden="true">#</a> \u542F\u7528\u5168\u6587\u68C0\u7D22</h2><p>MongoDB \u5728 2.6 \u7248\u672C\u4EE5\u540E\u662F\u9ED8\u8BA4\u5F00\u542F\u5168\u6587\u68C0\u7D22\u7684\uFF0C\u5982\u679C\u4F60\u4F7F\u7528\u4E4B\u524D\u7684\u7248\u672C\uFF0C\u4F60\u9700\u8981\u4F7F\u7528\u4EE5\u4E0B\u4EE3\u7801\u6765\u542F\u7528\u5168\u6587\u68C0\u7D22:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.adminCommand({setParameter:true,textSearchEnabled:true})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6216\u8005\u4F7F\u7528\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mongod --setParameter textSearchEnabled=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u521B\u5EFA\u5168\u6587\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u5168\u6587\u7D22\u5F15" aria-hidden="true">#</a> \u521B\u5EFA\u5168\u6587\u7D22\u5F15</h2><p>\u8003\u8651\u4EE5\u4E0B posts \u96C6\u5408\u7684\u6587\u6863\u6570\u636E\uFF0C\u5305\u542B\u4E86\u6587\u7AE0\u5185\u5BB9\uFF08post_text\uFF09\u53CA\u6807\u7B7E(tags)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;post_text&quot;: &quot;enjoy the mongodb articles on Runoob&quot;,
   &quot;tags&quot;: [
      &quot;mongodb&quot;,
      &quot;runoob&quot;
   ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u5BF9 post_text \u5B57\u6BB5\u5EFA\u7ACB\u5168\u6587\u7D22\u5F15\uFF0C\u8FD9\u6837\u6211\u4EEC\u53EF\u4EE5\u641C\u7D22\u6587\u7AE0\u5185\u7684\u5185\u5BB9\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.ensureIndex({post_text:&quot;text&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u4F7F\u7528\u5168\u6587\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u5168\u6587\u7D22\u5F15" aria-hidden="true">#</a> \u4F7F\u7528\u5168\u6587\u7D22\u5F15</h2><p>\u73B0\u5728\u6211\u4EEC\u5DF2\u7ECF\u5BF9 post_text \u5EFA\u7ACB\u4E86\u5168\u6587\u7D22\u5F15\uFF0C\u6211\u4EEC\u53EF\u4EE5\u641C\u7D22\u6587\u7AE0\u4E2D\u7684\u5173\u952E\u8BCD runoob\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({$text:{$search:&quot;runoob&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0B\u547D\u4EE4\u8FD4\u56DE\u4E86\u5982\u4E0B\u5305\u542B runoob \u5173\u952E\u8BCD\u7684\u6587\u6863\u6570\u636E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ 
   &quot;_id&quot; : ObjectId(&quot;53493d14d852429c10000002&quot;), 
   &quot;post_text&quot; : &quot;enjoy the mongodb articles on Runoob&quot;, 
   &quot;tags&quot; : [ &quot;mongodb&quot;, &quot;runoob&quot; ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5982\u679C\u4F60\u4F7F\u7528\u7684\u662F\u65E7\u7248\u672C\u7684 MongoDB\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.runCommand(&quot;text&quot;,{search:&quot;runoob&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4F7F\u7528\u5168\u6587\u7D22\u5F15\u53EF\u4EE5\u63D0\u9AD8\u641C\u7D22\u6548\u7387\u3002</p><hr><h2 id="\u5220\u9664\u5168\u6587\u7D22\u5F15" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u5168\u6587\u7D22\u5F15" aria-hidden="true">#</a> \u5220\u9664\u5168\u6587\u7D22\u5F15</h2><p>\u5220\u9664\u5DF2\u5B58\u5728\u7684\u5168\u6587\u7D22\u5F15\uFF0C\u53EF\u4EE5\u4F7F\u7528 find \u547D\u4EE4\u67E5\u627E\u7D22\u5F15\u540D\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.getIndexes()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u901A\u8FC7\u4EE5\u4E0A\u547D\u4EE4\u83B7\u53D6\u7D22\u5F15\u540D\uFF0C\u672C\u4F8B\u7684\u7D22\u5F15\u540D\u4E3Apost_text_text\uFF0C\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u6765\u5220\u9664\u7D22\u5F15\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.dropIndex(&quot;post_text_text&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u4E8C\u4E03\u3001\u6B63\u5219\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u4E03\u3001\u6B63\u5219\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u4E8C\u4E03\u3001\u6B63\u5219\u8868\u8FBE\u5F0F</h1><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u662F\u4F7F\u7528\u5355\u4E2A\u5B57\u7B26\u4E32\u6765\u63CF\u8FF0\u3001\u5339\u914D\u4E00\u7CFB\u5217\u7B26\u5408\u67D0\u4E2A\u53E5\u6CD5\u89C4\u5219\u7684\u5B57\u7B26\u4E32\u3002</p><p>\u8BB8\u591A\u7A0B\u5E8F\u8BBE\u8BA1\u8BED\u8A00\u90FD\u652F\u6301\u5229\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u8FDB\u884C\u5B57\u7B26\u4E32\u64CD\u4F5C\u3002</p><p>MongoDB \u4F7F\u7528 <strong>$regex</strong> \u64CD\u4F5C\u7B26\u6765\u8BBE\u7F6E\u5339\u914D\u5B57\u7B26\u4E32\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u3002</p><p>MongoDB\u4F7F\u7528PCRE (Perl Compatible Regular Expression) \u4F5C\u4E3A\u6B63\u5219\u8868\u8FBE\u5F0F\u8BED\u8A00\u3002</p><p>\u4E0D\u540C\u4E8E\u5168\u6587\u68C0\u7D22\uFF0C\u6211\u4EEC\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u4E0D\u9700\u8981\u505A\u4EFB\u4F55\u914D\u7F6E\u3002</p><p>\u8003\u8651\u4EE5\u4E0B <strong>posts</strong> \u96C6\u5408\u7684\u6587\u6863\u7ED3\u6784\uFF0C\u8BE5\u6587\u6863\u5305\u542B\u4E86\u6587\u7AE0\u5185\u5BB9\u548C\u6807\u7B7E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;post_text&quot;: &quot;enjoy the mongodb articles on runoob&quot;,
   &quot;tags&quot;: [
      &quot;mongodb&quot;,
      &quot;runoob&quot;
   ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F</h2><p>\u4EE5\u4E0B\u547D\u4EE4\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u67E5\u627E\u5305\u542B runoob \u5B57\u7B26\u4E32\u7684\u6587\u7AE0\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({post_text:{$regex:&quot;runoob&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u67E5\u8BE2\u4E5F\u53EF\u4EE5\u5199\u4E3A\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({post_text:/runoob/})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u6B63\u5219\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u6B63\u5219\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u6B63\u5219\u8868\u8FBE\u5F0F</h2><p>\u5982\u679C\u68C0\u7D22\u9700\u8981\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF0C\u6211\u4EEC\u53EF\u4EE5\u8BBE\u7F6E $options \u4E3A $i\u3002</p><p>\u4EE5\u4E0B\u547D\u4EE4\u5C06\u67E5\u627E\u4E0D\u533A\u5206\u5927\u5C0F\u5199\u7684\u5B57\u7B26\u4E32 runoob\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({post_text:{$regex:&quot;runoob&quot;,$options:&quot;$i&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u96C6\u5408\u4E2D\u4F1A\u8FD4\u56DE\u6240\u6709\u5305\u542B\u5B57\u7B26\u4E32 runoob \u7684\u6570\u636E\uFF0C\u4E14\u4E0D\u533A\u5206\u5927\u5C0F\u5199\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot; : ObjectId(&quot;53493d37d852429c10000004&quot;),
   &quot;post_text&quot; : &quot;hey! this is my post on  runoob&quot;, 
   &quot;tags&quot; : [ &quot;runoob&quot; ]
} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u6570\u7EC4\u5143\u7D20\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u6570\u7EC4\u5143\u7D20\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F" aria-hidden="true">#</a> \u6570\u7EC4\u5143\u7D20\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F</h2><p>\u6211\u4EEC\u8FD8\u53EF\u4EE5\u5728\u6570\u7EC4\u5B57\u6BB5\u4E2D\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u6765\u67E5\u627E\u5185\u5BB9\u3002 \u8FD9\u5728\u6807\u7B7E\u7684\u5B9E\u73B0\u4E0A\u975E\u5E38\u6709\u7528\uFF0C\u5982\u679C\u4F60\u9700\u8981\u67E5\u627E\u5305\u542B\u4EE5 run \u5F00\u5934\u7684\u6807\u7B7E\u6570\u636E(ru \u6216 run \u6216 runoob)\uFF0C \u4F60\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u4EE3\u7801\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({tags:{$regex:&quot;run&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u4F18\u5316\u6B63\u5219\u8868\u8FBE\u5F0F\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u4F18\u5316\u6B63\u5219\u8868\u8FBE\u5F0F\u67E5\u8BE2" aria-hidden="true">#</a> \u4F18\u5316\u6B63\u5219\u8868\u8FBE\u5F0F\u67E5\u8BE2</h2><ul><li><p>\u5982\u679C\u4F60\u7684\u6587\u6863\u4E2D\u5B57\u6BB5\u8BBE\u7F6E\u4E86\u7D22\u5F15\uFF0C\u90A3\u4E48\u4F7F\u7528\u7D22\u5F15\u76F8\u6BD4\u4E8E\u6B63\u5219\u8868\u8FBE\u5F0F\u5339\u914D\u67E5\u627E\u6240\u6709\u7684\u6570\u636E\u67E5\u8BE2\u901F\u5EA6\u66F4\u5FEB\u3002</p></li><li><p>\u5982\u679C\u6B63\u5219\u8868\u8FBE\u5F0F\u662F\u524D\u7F00\u8868\u8FBE\u5F0F\uFF0C\u6240\u6709\u5339\u914D\u7684\u6570\u636E\u5C06\u4EE5\u6307\u5B9A\u7684\u524D\u7F00\u5B57\u7B26\u4E32\u4E3A\u5F00\u59CB\u3002\u4F8B\u5982\uFF1A \u5982\u679C\u6B63\u5219\u8868\u8FBE\u5F0F\u4E3A <strong>^tut</strong> \uFF0C\u67E5\u8BE2\u8BED\u53E5\u5C06\u67E5\u627E\u4EE5 tut \u4E3A\u5F00\u5934\u7684\u5B57\u7B26\u4E32\u3002</p></li></ul><p><strong>\u8FD9\u91CC\u9762\u4F7F\u7528\u6B63\u5219\u8868\u8FBE\u5F0F\u6709\u4E24\u70B9\u9700\u8981\u6CE8\u610F\uFF1A</strong></p><p>\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u4F7F\u7528\u53D8\u91CF\u3002\u4E00\u5B9A\u8981\u4F7F\u7528eval\u5C06\u7EC4\u5408\u7684\u5B57\u7B26\u4E32\u8FDB\u884C\u8F6C\u6362\uFF0C\u4E0D\u80FD\u76F4\u63A5\u5C06\u5B57\u7B26\u4E32\u62FC\u63A5\u540E\u4F20\u5165\u7ED9\u8868\u8FBE\u5F0F\u3002\u5426\u5219\u6CA1\u6709\u62A5\u9519\u4FE1\u606F\uFF0C\u53EA\u662F\u7ED3\u679C\u4E3A\u7A7A\uFF01\u5B9E\u4F8B\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var name=eval(&quot;/&quot; + \u53D8\u91CF\u503Ckey +&quot;/i&quot;); 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0B\u662F\u6A21\u7CCA\u67E5\u8BE2\u5305\u542Btitle\u5173\u952E\u8BCD, \u4E14\u4E0D\u533A\u5206\u5927\u5C0F\u5199:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>title:eval(&quot;/&quot;+title+&quot;/i&quot;)    // \u7B49\u540C\u4E8E title:{$regex:title,$Option:&quot;$i&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="\u4E8C\u516B\u3001\u7BA1\u7406\u5DE5\u5177-rockmongo" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u516B\u3001\u7BA1\u7406\u5DE5\u5177-rockmongo" aria-hidden="true">#</a> \u4E8C\u516B\u3001\u7BA1\u7406\u5DE5\u5177: Rockmongo</h1><p>RockMongo\u662FPHP5\u5199\u7684\u4E00\u4E2AMongoDB\u7BA1\u7406\u5DE5\u5177\u3002</p><p>\u901A\u8FC7 Rockmongo \u4F60\u53EF\u4EE5\u7BA1\u7406 MongoDB\u670D\u52A1\uFF0C\u6570\u636E\u5E93\uFF0C\u96C6\u5408\uFF0C\u6587\u6863\uFF0C\u7D22\u5F15\u7B49\u7B49\u3002</p><p>\u5B83\u63D0\u4F9B\u4E86\u975E\u5E38\u4EBA\u6027\u5316\u7684\u64CD\u4F5C\u3002\u7C7B\u4F3C phpMyAdmin\uFF08PHP\u5F00\u53D1\u7684MySql\u7BA1\u7406\u5DE5\u5177\uFF09\u3002</p>`,314),On=s("Rockmongo \u4E0B\u8F7D\u5730\u5740\uFF1A"),jn={href:"https://github.com/iwind/rockmongo",target:"_blank",rel:"noopener noreferrer"},wn=s("https://github.com/iwind/rockmongo"),Dn=n("p",null,[n("img",{src:"https://www.runoob.com/wp-content/uploads/2014/08/rockmongo.png",alt:"img",loading:"lazy"})],-1),Bn=n("hr",null,null,-1),Sn=n("h2",{id:"\u7B80\u4ECB",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u7B80\u4ECB","aria-hidden":"true"},"#"),s(" \u7B80\u4ECB")],-1),$n=n("p",null,"\u4E3B\u8981\u7279\u5F81\uFF1A",-1),Cn=s("\u4F7F\u7528\u5BBD\u677E\u7684"),Tn={href:"https://www.opensource.org/licenses/bsd-license.php",target:"_blank",rel:"noopener noreferrer"},Rn=s("New BSD License"),An=s("\u534F\u8BAE"),En=e("<li>\u901F\u5EA6\u5FEB\uFF0C\u5B89\u88C5\u7B80\u5355</li><li>\u652F\u6301\u591A\u8BED\u8A00\uFF08\u76EE\u524D\u63D0\u4F9B\u4E2D\u6587\u3001\u82F1\u6587\u3001\u65E5\u6587\u3001\u5DF4\u897F\u8461\u8404\u7259\u8BED\u3001\u6CD5\u8BED\u3001\u5FB7\u8BED\u3001\u4FC4\u8BED\u3001\u610F\u5927\u5229\u8BED\uFF09</li><li>\u7CFB\u7EDF <ul><li>\u53EF\u4EE5\u914D\u7F6E\u591A\u4E2A\u4E3B\u673A\uFF0C\u6BCF\u4E2A\u4E3B\u673A\u53EF\u4EE5\u6709\u591A\u4E2A\u7BA1\u7406\u5458</li><li>\u9700\u8981\u7BA1\u7406\u5458\u5BC6\u7801\u624D\u80FD\u767B\u5165\u64CD\u4F5C\uFF0C\u786E\u4FDD\u6570\u636E\u5E93\u7684\u5B89\u5168\u6027</li></ul></li><li>\u670D\u52A1\u5668 <ul><li>\u670D\u52A1\u5668\u4FE1\u606F (WEB\u670D\u52A1\u5668, PHP, PHP.ini\u76F8\u5173\u6307\u4EE4 ...)</li><li>\u72B6\u6001</li><li>\u6570\u636E\u5E93\u4FE1\u606F</li></ul></li><li>\u6570\u636E\u5E93 <ul><li>\u67E5\u8BE2\uFF0C\u521B\u5EFA\u548C\u5220\u9664</li><li>\u6267\u884C\u547D\u4EE4\u548CJavascript\u4EE3\u7801</li><li>\u7EDF\u8BA1\u4FE1\u606F</li></ul></li><li>\u96C6\u5408\uFF08\u76F8\u5F53\u4E8E\u8868\uFF09 <ul><li>\u5F3A\u5927\u7684\u67E5\u8BE2\u5DE5\u5177</li><li>\u8BFB\u6570\u636E\uFF0C\u5199\u6570\u636E\uFF0C\u66F4\u6539\u6570\u636E\uFF0C\u590D\u5236\u6570\u636E\uFF0C\u5220\u9664\u6570\u636E</li><li>\u67E5\u8BE2\u3001\u521B\u5EFA\u548C\u5220\u9664\u7D22\u5F15</li><li>\u6E05\u7A7A\u6570\u636E</li><li>\u6279\u91CF\u5220\u9664\u548C\u66F4\u6539\u6570\u636E</li><li>\u7EDF\u8BA1\u4FE1\u606F</li></ul></li><li>GridFS <ul><li>\u67E5\u770B\u5206\u5757</li><li>\u4E0B\u8F7D\u6587\u4EF6</li></ul></li>",7),Nn=n("hr",null,null,-1),Pn=n("h2",{id:"\u5B89\u88C5-1",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5B89\u88C5-1","aria-hidden":"true"},"#"),s(" \u5B89\u88C5")],-1),Wn=n("h3",{id:"\u9700\u6C42",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u9700\u6C42","aria-hidden":"true"},"#"),s(" \u9700\u6C42")],-1),Ln=n("li",null,"\u4E00\u4E2A\u80FD\u8FD0\u884CPHP\u7684Web\u670D\u52A1\u5668\uFF0C\u6BD4\u5982Apache Httpd, Nginx ...",-1),zn=s("PHP - \u9700\u8981PHP v5.1.6\u6216\u66F4\u9AD8\u7248\u672C\uFF0C\u9700\u8981\u652F\u6301SESSION "),Un=s("\u4E3A\u4E86\u80FD\u8FDE\u63A5MongoDB\uFF0C\u4F60\u9700\u8981\u5B89\u88C5"),Fn={href:"https://www.runoob.com/mongodb/mongodb-install-php-driver.html",target:"_blank",rel:"noopener noreferrer"},Vn=s("php_mongo"),Gn=s("\u6269\u5C55"),Hn=n("h3",{id:"\u5FEB\u901F\u5B89\u88C5",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u5FEB\u901F\u5B89\u88C5","aria-hidden":"true"},"#"),s(" \u5FEB\u901F\u5B89\u88C5")],-1),Zn={href:"https://github.com/iwind/rockmongo",target:"_blank",rel:"noopener noreferrer"},Kn=s("\u4E0B\u8F7D\u5B89\u88C5\u5305"),Jn=n("li",null,"\u89E3\u538B\u5230\u4F60\u7684\u7F51\u7AD9\u76EE\u5F55\u4E0B",-1),Xn=n("li",null,"\u7528\u7F16\u8F91\u5668\u6253\u5F00config.php\uFF0C\u4FEE\u6539host, port, admins\u7B49\u53C2\u6570",-1),Qn=s("\u5728\u6D4F\u89C8\u5668\u4E2D\u8BBF\u95EEindex.php\uFF0C\u6BD4\u5982\u8BF4\uFF1A"),Yn={href:"http://localhost/rockmongo/index.php",target:"_blank",rel:"noopener noreferrer"},ns=s("http://localhost/rockmongo/index.php"),ss=n("li",null,'\u4F7F\u7528\u7528\u6237\u540D\u548C\u5BC6\u7801\u767B\u5F55\uFF0C\u9ED8\u8BA4\u4E3A"admin"\u548C"admin"',-1),as=n("li",null,"\u5F00\u59CB\u73A9\u8F6CMongoDB!",-1),ts=e(`<h1 id="\u4E8C\u4E5D\u3001gridfs" tabindex="-1"><a class="header-anchor" href="#\u4E8C\u4E5D\u3001gridfs" aria-hidden="true">#</a> \u4E8C\u4E5D\u3001GridFS</h1><p>GridFS \u7528\u4E8E\u5B58\u50A8\u548C\u6062\u590D\u90A3\u4E9B\u8D85\u8FC716M\uFF08BSON\u6587\u4EF6\u9650\u5236\uFF09\u7684\u6587\u4EF6(\u5982\uFF1A\u56FE\u7247\u3001\u97F3\u9891\u3001\u89C6\u9891\u7B49)\u3002</p><p>GridFS \u4E5F\u662F\u6587\u4EF6\u5B58\u50A8\u7684\u4E00\u79CD\u65B9\u5F0F\uFF0C\u4F46\u662F\u5B83\u662F\u5B58\u50A8\u5728MonoDB\u7684\u96C6\u5408\u4E2D\u3002</p><p>GridFS \u53EF\u4EE5\u66F4\u597D\u7684\u5B58\u50A8\u5927\u4E8E16M\u7684\u6587\u4EF6\u3002</p><p>GridFS \u4F1A\u5C06\u5927\u6587\u4EF6\u5BF9\u8C61\u5206\u5272\u6210\u591A\u4E2A\u5C0F\u7684chunk(\u6587\u4EF6\u7247\u6BB5),\u4E00\u822C\u4E3A256k/\u4E2A,\u6BCF\u4E2Achunk\u5C06\u4F5C\u4E3AMongoDB\u7684\u4E00\u4E2A\u6587\u6863(document)\u88AB\u5B58\u50A8\u5728chunks\u96C6\u5408\u4E2D\u3002</p><p>GridFS \u7528\u4E24\u4E2A\u96C6\u5408\u6765\u5B58\u50A8\u4E00\u4E2A\u6587\u4EF6\uFF1Afs.files\u4E0Efs.chunks\u3002</p><p>\u6BCF\u4E2A\u6587\u4EF6\u7684\u5B9E\u9645\u5185\u5BB9\u88AB\u5B58\u5728chunks(\u4E8C\u8FDB\u5236\u6570\u636E)\u4E2D,\u548C\u6587\u4EF6\u6709\u5173\u7684meta\u6570\u636E(filename,content_type,\u8FD8\u6709\u7528\u6237\u81EA\u5B9A\u4E49\u7684\u5C5E\u6027)\u5C06\u4F1A\u88AB\u5B58\u5728files\u96C6\u5408\u4E2D\u3002</p><p>\u4EE5\u4E0B\u662F\u7B80\u5355\u7684 fs.files \u96C6\u5408\u6587\u6863\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;filename&quot;: &quot;test.txt&quot;,
   &quot;chunkSize&quot;: NumberInt(261120),
   &quot;uploadDate&quot;: ISODate(&quot;2014-04-13T11:32:33.557Z&quot;),
   &quot;md5&quot;: &quot;7b762939321e146569b07f72c62cca4f&quot;,
   &quot;length&quot;: NumberInt(646)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4EE5\u4E0B\u662F\u7B80\u5355\u7684 fs.chunks \u96C6\u5408\u6587\u6863\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;files_id&quot;: ObjectId(&quot;534a75d19f54bfec8a2fe44b&quot;),
   &quot;n&quot;: NumberInt(0),
   &quot;data&quot;: &quot;Mongo Binary Data&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="gridfs-\u6DFB\u52A0\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#gridfs-\u6DFB\u52A0\u6587\u4EF6" aria-hidden="true">#</a> GridFS \u6DFB\u52A0\u6587\u4EF6</h2><p>\u73B0\u5728\u6211\u4EEC\u4F7F\u7528 GridFS \u7684 put \u547D\u4EE4\u6765\u5B58\u50A8 mp3 \u6587\u4EF6\u3002 \u8C03\u7528 MongoDB \u5B89\u88C5\u76EE\u5F55\u4E0Bbin\u7684 mongofiles.exe\u5DE5\u5177\u3002</p><p>\u6253\u5F00\u547D\u4EE4\u63D0\u793A\u7B26\uFF0C\u8FDB\u5165\u5230MongoDB\u7684\u5B89\u88C5\u76EE\u5F55\u7684bin\u76EE\u5F55\u4E2D\uFF0C\u627E\u5230mongofiles.exe\uFF0C\u5E76\u8F93\u5165\u4E0B\u9762\u7684\u4EE3\u7801\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongofiles.exe -d gridfs put song.mp3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>-d gridfs</strong> \u6307\u5B9A\u5B58\u50A8\u6587\u4EF6\u7684\u6570\u636E\u5E93\u540D\u79F0\uFF0C\u5982\u679C\u4E0D\u5B58\u5728\u8BE5\u6570\u636E\u5E93\uFF0CMongoDB\u4F1A\u81EA\u52A8\u521B\u5EFA\u3002\u5982\u679C\u4E0D\u5B58\u5728\u8BE5\u6570\u636E\u5E93\uFF0CMongoDB\u4F1A\u81EA\u52A8\u521B\u5EFA\u3002Song.mp3 \u662F\u97F3\u9891\u6587\u4EF6\u540D\u3002</p><p>\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u6765\u67E5\u770B\u6570\u636E\u5E93\u4E2D\u6587\u4EF6\u7684\u6587\u6863\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.fs.files.find()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u547D\u4EE4\u6267\u884C\u540E\u8FD4\u56DE\u4EE5\u4E0B\u6587\u6863\u6570\u636E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   _id: ObjectId(&#39;534a811bf8b4aa4d33fdf94d&#39;), 
   filename: &quot;song.mp3&quot;, 
   chunkSize: 261120, 
   uploadDate: new Date(1397391643474), md5: &quot;e4f53379c909f7bed2e9d631e15c1c41&quot;,
   length: 10401959 
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6211\u4EEC\u53EF\u4EE5\u770B\u5230 fs.chunks \u96C6\u5408\u4E2D\u6240\u6709\u7684\u533A\u5757\uFF0C\u4EE5\u4E0B\u6211\u4EEC\u5F97\u5230\u4E86\u6587\u4EF6\u7684 _id \u503C\uFF0C\u6211\u4EEC\u53EF\u4EE5\u6839\u636E\u8FD9\u4E2A _id \u83B7\u53D6\u533A\u5757(chunk)\u7684\u6570\u636E\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.fs.chunks.find({files_id:ObjectId(&#39;534a811bf8b4aa4d33fdf94d&#39;)})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u5B9E\u4F8B\u4E2D\uFF0C\u67E5\u8BE2\u8FD4\u56DE\u4E86 40 \u4E2A\u6587\u6863\u7684\u6570\u636E\uFF0C\u610F\u5473\u7740mp3\u6587\u4EF6\u88AB\u5B58\u50A8\u572840\u4E2A\u533A\u5757\u4E2D\u3002</p><h1 id="\u4E09\u5341\u3001\u56FA\u5B9A\u96C6\u5408-capped-collections" tabindex="-1"><a class="header-anchor" href="#\u4E09\u5341\u3001\u56FA\u5B9A\u96C6\u5408-capped-collections" aria-hidden="true">#</a> \u4E09\u5341\u3001\u56FA\u5B9A\u96C6\u5408\uFF08Capped Collections\uFF09</h1><p>MongoDB \u56FA\u5B9A\u96C6\u5408\uFF08Capped Collections\uFF09\u662F\u6027\u80FD\u51FA\u8272\u4E14\u6709\u7740\u56FA\u5B9A\u5927\u5C0F\u7684\u96C6\u5408\uFF0C\u5BF9\u4E8E\u5927\u5C0F\u56FA\u5B9A\uFF0C\u6211\u4EEC\u53EF\u4EE5\u60F3\u8C61\u5176\u5C31\u50CF\u4E00\u4E2A\u73AF\u5F62\u961F\u5217\uFF0C\u5F53\u96C6\u5408\u7A7A\u95F4\u7528\u5B8C\u540E\uFF0C\u518D\u63D2\u5165\u7684\u5143\u7D20\u5C31\u4F1A\u8986\u76D6\u6700\u521D\u59CB\u7684\u5934\u90E8\u7684\u5143\u7D20\uFF01</p><hr><h2 id="\u521B\u5EFA\u56FA\u5B9A\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u56FA\u5B9A\u96C6\u5408" aria-hidden="true">#</a> \u521B\u5EFA\u56FA\u5B9A\u96C6\u5408</h2><p>\u6211\u4EEC\u901A\u8FC7createCollection\u6765\u521B\u5EFA\u4E00\u4E2A\u56FA\u5B9A\u96C6\u5408\uFF0C\u4E14capped\u9009\u9879\u8BBE\u7F6E\u4E3Atrue\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.createCollection(&quot;cappedLogCollection&quot;,{capped:true,size:10000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD8\u53EF\u4EE5\u6307\u5B9A\u6587\u6863\u4E2A\u6570,\u52A0\u4E0Amax:1000\u5C5E\u6027\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.createCollection(&quot;cappedLogCollection&quot;,{capped:true,size:10000,max:1000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5224\u65AD\u96C6\u5408\u662F\u5426\u4E3A\u56FA\u5B9A\u96C6\u5408:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.cappedLogCollection.isCapped()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u9700\u8981\u5C06\u5DF2\u5B58\u5728\u7684\u96C6\u5408\u8F6C\u6362\u4E3A\u56FA\u5B9A\u96C6\u5408\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.runCommand({&quot;convertToCapped&quot;:&quot;posts&quot;,size:10000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u4EE3\u7801\u5C06\u6211\u4EEC\u5DF2\u5B58\u5728\u7684 posts \u96C6\u5408\u8F6C\u6362\u4E3A\u56FA\u5B9A\u96C6\u5408\u3002</p><hr><h2 id="\u56FA\u5B9A\u96C6\u5408\u67E5\u8BE2" tabindex="-1"><a class="header-anchor" href="#\u56FA\u5B9A\u96C6\u5408\u67E5\u8BE2" aria-hidden="true">#</a> \u56FA\u5B9A\u96C6\u5408\u67E5\u8BE2</h2><p>\u56FA\u5B9A\u96C6\u5408\u6587\u6863\u6309\u7167\u63D2\u5165\u987A\u5E8F\u50A8\u5B58\u7684,\u9ED8\u8BA4\u60C5\u51B5\u4E0B\u67E5\u8BE2\u5C31\u662F\u6309\u7167\u63D2\u5165\u987A\u5E8F\u8FD4\u56DE\u7684,\u4E5F\u53EF\u4EE5\u4F7F\u7528$natural\u8C03\u6574\u8FD4\u56DE\u987A\u5E8F\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.cappedLogCollection.find().sort({$natural:-1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u56FA\u5B9A\u96C6\u5408\u7684\u529F\u80FD\u7279\u70B9" tabindex="-1"><a class="header-anchor" href="#\u56FA\u5B9A\u96C6\u5408\u7684\u529F\u80FD\u7279\u70B9" aria-hidden="true">#</a> \u56FA\u5B9A\u96C6\u5408\u7684\u529F\u80FD\u7279\u70B9</h2><p>\u53EF\u4EE5\u63D2\u5165\u53CA\u66F4\u65B0,\u4F46\u66F4\u65B0\u4E0D\u80FD\u8D85\u51FAcollection\u7684\u5927\u5C0F,\u5426\u5219\u66F4\u65B0\u5931\u8D25,\u4E0D\u5141\u8BB8\u5220\u9664,\u4F46\u662F\u53EF\u4EE5\u8C03\u7528drop()\u5220\u9664\u96C6\u5408\u4E2D\u7684\u6240\u6709\u884C,\u4F46\u662Fdrop\u540E\u9700\u8981\u663E\u5F0F\u5730\u91CD\u5EFA\u96C6\u5408\u3002</p><p>\u572832\u4F4D\u673A\u5B50\u4E0A\u4E00\u4E2Acappped collection\u7684\u6700\u5927\u503C\u7EA6\u4E3A482.5M,64\u4F4D\u4E0A\u53EA\u53D7\u7CFB\u7EDF\u6587\u4EF6\u5927\u5C0F\u7684\u9650\u5236\u3002</p><hr><h2 id="\u56FA\u5B9A\u96C6\u5408\u5C5E\u6027\u53CA\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u56FA\u5B9A\u96C6\u5408\u5C5E\u6027\u53CA\u7528\u6CD5" aria-hidden="true">#</a> \u56FA\u5B9A\u96C6\u5408\u5C5E\u6027\u53CA\u7528\u6CD5</h2><h3 id="\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u5C5E\u6027" aria-hidden="true">#</a> \u5C5E\u6027</h3><ul><li>\u5C5E\u60271:\u5BF9\u56FA\u5B9A\u96C6\u5408\u8FDB\u884C\u63D2\u5165\u901F\u5EA6\u6781\u5FEB</li><li>\u5C5E\u60272:\u6309\u7167\u63D2\u5165\u987A\u5E8F\u7684\u67E5\u8BE2\u8F93\u51FA\u901F\u5EA6\u6781\u5FEB</li><li>\u5C5E\u60273:\u80FD\u591F\u5728\u63D2\u5165\u6700\u65B0\u6570\u636E\u65F6,\u6DD8\u6C70\u6700\u65E9\u7684\u6570\u636E</li></ul><h3 id="\u7528\u6CD5" tabindex="-1"><a class="header-anchor" href="#\u7528\u6CD5" aria-hidden="true">#</a> \u7528\u6CD5</h3><ul><li>\u7528\u6CD51:\u50A8\u5B58\u65E5\u5FD7\u4FE1\u606F</li><li>\u7528\u6CD52:\u7F13\u5B58\u4E00\u4E9B\u5C11\u91CF\u7684\u6587\u6863</li></ul><h1 id="\u4E09\u4E00\u3001\u81EA\u52A8\u589E\u957F" tabindex="-1"><a class="header-anchor" href="#\u4E09\u4E00\u3001\u81EA\u52A8\u589E\u957F" aria-hidden="true">#</a> \u4E09\u4E00\u3001\u81EA\u52A8\u589E\u957F</h1><p>MongoDB \u6CA1\u6709\u50CF SQL \u4E00\u6837\u6709\u81EA\u52A8\u589E\u957F\u7684\u529F\u80FD\uFF0C MongoDB \u7684 _id \u662F\u7CFB\u7EDF\u81EA\u52A8\u751F\u6210\u768412\u5B57\u8282\u552F\u4E00\u6807\u8BC6\u3002</p><p>\u4F46\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0C\u6211\u4EEC\u53EF\u80FD\u9700\u8981\u5B9E\u73B0 ObjectId \u81EA\u52A8\u589E\u957F\u529F\u80FD\u3002</p><p>\u7531\u4E8E MongoDB \u6CA1\u6709\u5B9E\u73B0\u8FD9\u4E2A\u529F\u80FD\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u7F16\u7A0B\u7684\u65B9\u5F0F\u6765\u5B9E\u73B0\uFF0C\u4EE5\u4E0B\u6211\u4EEC\u5C06\u5728 counters \u96C6\u5408\u4E2D\u5B9E\u73B0_id\u5B57\u6BB5\u81EA\u52A8\u589E\u957F\u3002</p><hr><h2 id="\u4F7F\u7528-counters-\u96C6\u5408" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-counters-\u96C6\u5408" aria-hidden="true">#</a> \u4F7F\u7528 counters \u96C6\u5408</h2><p>\u8003\u8651\u4EE5\u4E0B products \u6587\u6863\u3002\u6211\u4EEC\u5E0C\u671B _id \u5B57\u6BB5\u5B9E\u73B0 \u4ECE 1,2,3,4 \u5230 n \u7684\u81EA\u52A8\u589E\u957F\u529F\u80FD\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;_id&quot;:1,
  &quot;product_name&quot;: &quot;Apple iPhone&quot;,
  &quot;category&quot;: &quot;mobiles&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E3A\u6B64\uFF0C\u521B\u5EFA counters \u96C6\u5408\uFF0C\u5E8F\u5217\u5B57\u6BB5\u503C\u53EF\u4EE5\u5B9E\u73B0\u81EA\u52A8\u957F\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.createCollection(&quot;counters&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u73B0\u5728\u6211\u4EEC\u5411 counters \u96C6\u5408\u4E2D\u63D2\u5165\u4EE5\u4E0B\u6587\u6863\uFF0C\u4F7F\u7528 productid \u4F5C\u4E3A key:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;_id&quot;:&quot;productid&quot;,
  &quot;sequence_value&quot;: 0
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sequence_value \u5B57\u6BB5\u662F\u5E8F\u5217\u901A\u8FC7\u81EA\u52A8\u589E\u957F\u540E\u7684\u4E00\u4E2A\u503C\u3002</p><p>\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u63D2\u5165 counters \u96C6\u5408\u7684\u5E8F\u5217\u6587\u6863\u4E2D\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.counters.insert({_id:&quot;productid&quot;,sequence_value:0})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="\u521B\u5EFA-javascript-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA-javascript-\u51FD\u6570" aria-hidden="true">#</a> \u521B\u5EFA Javascript \u51FD\u6570</h2><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u521B\u5EFA\u51FD\u6570 getNextSequenceValue \u6765\u4F5C\u4E3A\u5E8F\u5217\u540D\u7684\u8F93\u5165\uFF0C \u6307\u5B9A\u7684\u5E8F\u5217\u4F1A\u81EA\u52A8\u589E\u957F 1 \u5E76\u8FD4\u56DE\u6700\u65B0\u5E8F\u5217\u503C\u3002\u5728\u672C\u6587\u7684\u5B9E\u4F8B\u4E2D\u5E8F\u5217\u540D\u4E3A productid \u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;function getNextSequenceValue(sequenceName){
   var sequenceDocument = db.counters.findAndModify(
      {
         query:{_id: sequenceName },
         update: {$inc:{sequence_value:1}},
         &quot;new&quot;:true
      });
   return sequenceDocument.sequence_value;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="\u4F7F\u7528-javascript-\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u4F7F\u7528-javascript-\u51FD\u6570" aria-hidden="true">#</a> \u4F7F\u7528 Javascript \u51FD\u6570</h2><p>\u63A5\u4E0B\u6765\u6211\u4EEC\u5C06\u4F7F\u7528 getNextSequenceValue \u51FD\u6570\u521B\u5EFA\u4E00\u4E2A\u65B0\u7684\u6587\u6863\uFF0C \u5E76\u8BBE\u7F6E\u6587\u6863 _id \u81EA\u52A8\u4E3A\u8FD4\u56DE\u7684\u5E8F\u5217\u503C\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.products.insert({
   &quot;_id&quot;:getNextSequenceValue(&quot;productid&quot;),
   &quot;product_name&quot;:&quot;Apple iPhone&quot;,
   &quot;category&quot;:&quot;mobiles&quot;})

&gt;db.products.insert({
   &quot;_id&quot;:getNextSequenceValue(&quot;productid&quot;),
   &quot;product_name&quot;:&quot;Samsung S3&quot;,
   &quot;category&quot;:&quot;mobiles&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u5C31\u5982\u4F60\u6240\u770B\u5230\u7684\uFF0C\u6211\u4EEC\u4F7F\u7528 getNextSequenceValue \u51FD\u6570\u6765\u8BBE\u7F6E _id \u5B57\u6BB5\u3002</p><p>\u4E3A\u4E86\u9A8C\u8BC1\u51FD\u6570\u662F\u5426\u6709\u6548\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u547D\u4EE4\u8BFB\u53D6\u6587\u6863\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.products.find()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4EE5\u4E0A\u547D\u4EE4\u5C06\u8FD4\u56DE\u4EE5\u4E0B\u7ED3\u679C\uFF0C\u6211\u4EEC\u53D1\u73B0 _id \u5B57\u6BB5\u662F\u81EA\u589E\u957F\u7684\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ &quot;_id&quot; : 1, &quot;product_name&quot; : &quot;Apple iPhone&quot;, &quot;category&quot; : &quot;mobiles&quot;}

{ &quot;_id&quot; : 2, &quot;product_name&quot; : &quot;Samsung S3&quot;, &quot;category&quot; : &quot;mobiles&quot; }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,79);function es(os,ps){const a=p("ExternalLinkIcon");return l(),i("div",null,[c,n("blockquote",null,[d,n("p",null,[r,k,m,b,g,v,n("a",q,[h,t(a)]),f,n("a",x,[_,t(a)]),y,I])]),n("h1",M,[O,j,n("a",w,[D,t(a)]),B]),S,n("p",null,[$,n("a",C,[T,t(a)]),R]),A,n("h2",E,[N,P,n("a",W,[L,t(a)])]),n("h2",z,[U,F,n("a",V,[G,t(a)])]),H,Z,K,J,X,Q,Y,nn,sn,an,tn,n("p",null,[n("a",en,[on,t(a)]),pn]),ln,n("p",null,[n("a",un,[cn,t(a)])]),dn,n("table",null,[rn,n("tbody",null,[n("tr",null,[kn,mn,n("td",bn,[gn,n("a",vn,[qn,t(a)]),hn])]),fn,xn])]),_n,n("p",null,[n("a",yn,[In,t(a)])]),Mn,n("p",null,[On,n("a",jn,[wn,t(a)])]),Dn,Bn,Sn,$n,n("ul",null,[n("li",null,[Cn,n("a",Tn,[Rn,t(a)]),An]),En]),Nn,Pn,Wn,n("ul",null,[Ln,n("li",null,[zn,n("ul",null,[n("li",null,[Un,n("a",Fn,[Vn,t(a)]),Gn])])])]),Hn,n("ul",null,[n("li",null,[n("a",Zn,[Kn,t(a)])]),Jn,Xn,n("li",null,[Qn,n("a",Yn,[ns,t(a)])]),ss,as]),ts])}var us=o(u,[["render",es],["__file","MongoDB.html.vue"]]);export{us as default};
