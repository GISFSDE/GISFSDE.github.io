<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.gisfsde.com/posts/2021/RabbitMQ.html"><meta property="og:site_name" content="GIS-FSDE"><meta property="og:title" content="RabbitMQ"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-06-14T06:23:19.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="GIS-FSDE"><meta property="article:tag" content="RabbitMQ"><meta property="article:published_time" content="2022-06-06T00:00:00.000Z"><meta property="article:modified_time" content="2022-06-14T06:23:19.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><title>RabbitMQ | GIS-FSDE</title><meta name="description" content="GISFSDE(GIS Full Stack Developer)--GIS开发、JAVA全栈开发">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.e1848475.css">
    <link rel="modulepreload" href="/assets/app.95807bc9.js"><link rel="modulepreload" href="/assets/RabbitMQ.html.c9a8b391.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/RabbitMQ.html.9efe14d2.js"><link rel="prefetch" href="/assets/home.html.0f7ff4b0.js"><link rel="prefetch" href="/assets/index.html.2dc22d8e.js"><link rel="prefetch" href="/assets/slide.html.6304f45a.js"><link rel="prefetch" href="/assets/index.html.285ebd50.js"><link rel="prefetch" href="/assets/index.html.a2f8d94a.js"><link rel="prefetch" href="/assets/album.html.6d56e046.js"><link rel="prefetch" href="/assets/Algorithm.html.8ccf3480.js"><link rel="prefetch" href="/assets/Architect.html.e7406c77.js"><link rel="prefetch" href="/assets/BMM.html.bb333e2f.js"><link rel="prefetch" href="/assets/BUG.html.cdaa63e0.js"><link rel="prefetch" href="/assets/CRUD.html.f2fca31e.js"><link rel="prefetch" href="/assets/DesignPatterns.html.59d81280.js"><link rel="prefetch" href="/assets/DevelopersFixComputer.html.c57fc4f8.js"><link rel="prefetch" href="/assets/Docker.html.ece2584a.js"><link rel="prefetch" href="/assets/Dubbo.html.ad651a24.js"><link rel="prefetch" href="/assets/EnglishDay.html.07db0c8f.js"><link rel="prefetch" href="/assets/Flash.html.b696aa49.js"><link rel="prefetch" href="/assets/FrontEnd.html.3e7c100c.js"><link rel="prefetch" href="/assets/GIS.html.37237efd.js"><link rel="prefetch" href="/assets/GuLimall.html.08153ac0.js"><link rel="prefetch" href="/assets/Health.html.ce887929.js"><link rel="prefetch" href="/assets/HowToLearn.html.2b9fdaf7.js"><link rel="prefetch" href="/assets/inconstruction.html.f392a14c.js"><link rel="prefetch" href="/assets/Interesting Programs.html.ef10e86f.js"><link rel="prefetch" href="/assets/InterviewQuestions.html.91c9e4ce.js"><link rel="prefetch" href="/assets/Java.html.faa2ffae.js"><link rel="prefetch" href="/assets/JAVAUse.html.bfbdc361.js"><link rel="prefetch" href="/assets/JVM.html.370135ab.js"><link rel="prefetch" href="/assets/Life.html.b483df11.js"><link rel="prefetch" href="/assets/Linux.html.6c84af87.js"><link rel="prefetch" href="/assets/Markdown.html.87d92193.js"><link rel="prefetch" href="/assets/MongoDB.html.52d4295b.js"><link rel="prefetch" href="/assets/Music.html.672ab2f3.js"><link rel="prefetch" href="/assets/MyBatis-Plus.html.561a2756.js"><link rel="prefetch" href="/assets/MyBatis.html.cff9e302.js"><link rel="prefetch" href="/assets/MYSQLOptimize.html.f64106bb.js"><link rel="prefetch" href="/assets/Network.html.c0b48f3e.js"><link rel="prefetch" href="/assets/Nginx.html.fafb3900.js"><link rel="prefetch" href="/assets/NO GAME NO LIFE.html.f23aa4fd.js"><link rel="prefetch" href="/assets/Office.html.8ec0cd91.js"><link rel="prefetch" href="/assets/Photography.html.145f958b.js"><link rel="prefetch" href="/assets/PM.html.6e9c10b8.js"><link rel="prefetch" href="/assets/PMThesisTemplate.html.b65e77cc.js"><link rel="prefetch" href="/assets/Python3.html.5a4e1d54.js"><link rel="prefetch" href="/assets/QuickSearch.html.1a024565.js"><link rel="prefetch" href="/assets/Redis.html.cc779293.js"><link rel="prefetch" href="/assets/Resources.html.ffff7ce6.js"><link rel="prefetch" href="/assets/Software Engineer.html.f6146ac9.js"><link rel="prefetch" href="/assets/Spring.html.78aa30f0.js"><link rel="prefetch" href="/assets/SpringBoot.html.0184a75e.js"><link rel="prefetch" href="/assets/SpringCloud.html.7a46ffb6.js"><link rel="prefetch" href="/assets/SpringMVC.html.fdb8f282.js"><link rel="prefetch" href="/assets/Summarize.html.215d5fa1.js"><link rel="prefetch" href="/assets/template.html.2daa810f.js"><link rel="prefetch" href="/assets/TODO.html.9c833d9e.js"><link rel="prefetch" href="/assets/Tools.html.07bd8d46.js"><link rel="prefetch" href="/assets/VUEPressDemo.html.ae923a1c.js"><link rel="prefetch" href="/assets/We-Media.html.2bd84a8c.js"><link rel="prefetch" href="/assets/WMP.html.abb3fe3c.js"><link rel="prefetch" href="/assets/404.html.fa71a0c4.js"><link rel="prefetch" href="/assets/index.html.1630f6e5.js"><link rel="prefetch" href="/assets/index.html.7be2cbcf.js"><link rel="prefetch" href="/assets/index.html.d520d863.js"><link rel="prefetch" href="/assets/index.html.997a56db.js"><link rel="prefetch" href="/assets/index.html.1578e35b.js"><link rel="prefetch" href="/assets/index.html.28dfc5e2.js"><link rel="prefetch" href="/assets/index.html.161587db.js"><link rel="prefetch" href="/assets/index.html.6765a033.js"><link rel="prefetch" href="/assets/index.html.dd470a3f.js"><link rel="prefetch" href="/assets/index.html.251a540e.js"><link rel="prefetch" href="/assets/index.html.f7dfc136.js"><link rel="prefetch" href="/assets/index.html.b312a911.js"><link rel="prefetch" href="/assets/index.html.95d35a42.js"><link rel="prefetch" href="/assets/index.html.54859e7e.js"><link rel="prefetch" href="/assets/index.html.08c7d9e6.js"><link rel="prefetch" href="/assets/index.html.de996081.js"><link rel="prefetch" href="/assets/index.html.9b36ff1b.js"><link rel="prefetch" href="/assets/index.html.22a95d2b.js"><link rel="prefetch" href="/assets/index.html.04abf6c2.js"><link rel="prefetch" href="/assets/index.html.431cc37d.js"><link rel="prefetch" href="/assets/index.html.408cc4cf.js"><link rel="prefetch" href="/assets/index.html.0c1332da.js"><link rel="prefetch" href="/assets/index.html.e9d8b26b.js"><link rel="prefetch" href="/assets/index.html.f595a703.js"><link rel="prefetch" href="/assets/index.html.d5671b7a.js"><link rel="prefetch" href="/assets/index.html.f869349c.js"><link rel="prefetch" href="/assets/index.html.9890203e.js"><link rel="prefetch" href="/assets/index.html.05577cbd.js"><link rel="prefetch" href="/assets/index.html.416b5538.js"><link rel="prefetch" href="/assets/index.html.a05d621e.js"><link rel="prefetch" href="/assets/index.html.39c56009.js"><link rel="prefetch" href="/assets/index.html.9714ba94.js"><link rel="prefetch" href="/assets/index.html.d3c0412a.js"><link rel="prefetch" href="/assets/index.html.77f221ab.js"><link rel="prefetch" href="/assets/index.html.8a687bee.js"><link rel="prefetch" href="/assets/index.html.b37bd8ea.js"><link rel="prefetch" href="/assets/index.html.91773ac3.js"><link rel="prefetch" href="/assets/index.html.90420aed.js"><link rel="prefetch" href="/assets/index.html.2052a1a7.js"><link rel="prefetch" href="/assets/index.html.da862e2b.js"><link rel="prefetch" href="/assets/index.html.cfe4f3a2.js"><link rel="prefetch" href="/assets/index.html.982e2d64.js"><link rel="prefetch" href="/assets/index.html.541f8d65.js"><link rel="prefetch" href="/assets/index.html.db8e734b.js"><link rel="prefetch" href="/assets/index.html.a342b16d.js"><link rel="prefetch" href="/assets/index.html.ad06da2c.js"><link rel="prefetch" href="/assets/index.html.c69b413f.js"><link rel="prefetch" href="/assets/index.html.7d22a5e7.js"><link rel="prefetch" href="/assets/index.html.deaad297.js"><link rel="prefetch" href="/assets/index.html.54f914ff.js"><link rel="prefetch" href="/assets/index.html.b3ccc077.js"><link rel="prefetch" href="/assets/index.html.b540f689.js"><link rel="prefetch" href="/assets/index.html.410d1f26.js"><link rel="prefetch" href="/assets/index.html.44855d58.js"><link rel="prefetch" href="/assets/index.html.deba3e6d.js"><link rel="prefetch" href="/assets/index.html.3ae4887f.js"><link rel="prefetch" href="/assets/index.html.d058367f.js"><link rel="prefetch" href="/assets/index.html.512cc1f3.js"><link rel="prefetch" href="/assets/index.html.afd427e3.js"><link rel="prefetch" href="/assets/index.html.9d3f4b54.js"><link rel="prefetch" href="/assets/index.html.83f4f0cb.js"><link rel="prefetch" href="/assets/index.html.5e046a4f.js"><link rel="prefetch" href="/assets/index.html.746e9de3.js"><link rel="prefetch" href="/assets/index.html.a846836d.js"><link rel="prefetch" href="/assets/index.html.f3f1ba1f.js"><link rel="prefetch" href="/assets/index.html.87303c77.js"><link rel="prefetch" href="/assets/index.html.183c2250.js"><link rel="prefetch" href="/assets/index.html.ca1fc4e9.js"><link rel="prefetch" href="/assets/index.html.93c75a42.js"><link rel="prefetch" href="/assets/index.html.f78010c6.js"><link rel="prefetch" href="/assets/index.html.d5826cb7.js"><link rel="prefetch" href="/assets/index.html.9ea1953d.js"><link rel="prefetch" href="/assets/index.html.25f646f2.js"><link rel="prefetch" href="/assets/index.html.2d462000.js"><link rel="prefetch" href="/assets/index.html.ead2dad1.js"><link rel="prefetch" href="/assets/index.html.6558810c.js"><link rel="prefetch" href="/assets/index.html.fa6b5daa.js"><link rel="prefetch" href="/assets/index.html.ec7073b6.js"><link rel="prefetch" href="/assets/index.html.31694b75.js"><link rel="prefetch" href="/assets/index.html.77a697ab.js"><link rel="prefetch" href="/assets/index.html.7957309e.js"><link rel="prefetch" href="/assets/index.html.4e4af2a8.js"><link rel="prefetch" href="/assets/index.html.7bf20406.js"><link rel="prefetch" href="/assets/index.html.368b7137.js"><link rel="prefetch" href="/assets/index.html.6df77643.js"><link rel="prefetch" href="/assets/index.html.0314e6b9.js"><link rel="prefetch" href="/assets/index.html.1efd06b8.js"><link rel="prefetch" href="/assets/index.html.2c069c37.js"><link rel="prefetch" href="/assets/index.html.9dc9018a.js"><link rel="prefetch" href="/assets/index.html.5dcd9175.js"><link rel="prefetch" href="/assets/index.html.02fb9c99.js"><link rel="prefetch" href="/assets/index.html.98944189.js"><link rel="prefetch" href="/assets/index.html.b38a46d3.js"><link rel="prefetch" href="/assets/index.html.e1e49e1b.js"><link rel="prefetch" href="/assets/index.html.5496c724.js"><link rel="prefetch" href="/assets/index.html.b1d14c9a.js"><link rel="prefetch" href="/assets/index.html.ba98f040.js"><link rel="prefetch" href="/assets/index.html.6d329d22.js"><link rel="prefetch" href="/assets/index.html.1c621e4d.js"><link rel="prefetch" href="/assets/index.html.a57a0f49.js"><link rel="prefetch" href="/assets/index.html.a9f8fd70.js"><link rel="prefetch" href="/assets/index.html.d625e702.js"><link rel="prefetch" href="/assets/index.html.18605766.js"><link rel="prefetch" href="/assets/index.html.e79202e4.js"><link rel="prefetch" href="/assets/index.html.eff8d844.js"><link rel="prefetch" href="/assets/index.html.631c9d0d.js"><link rel="prefetch" href="/assets/index.html.c0a6c949.js"><link rel="prefetch" href="/assets/index.html.cf18bd5e.js"><link rel="prefetch" href="/assets/index.html.710cb22b.js"><link rel="prefetch" href="/assets/index.html.92f4a3a9.js"><link rel="prefetch" href="/assets/index.html.8640b364.js"><link rel="prefetch" href="/assets/home.html.085b0061.js"><link rel="prefetch" href="/assets/index.html.9f00494e.js"><link rel="prefetch" href="/assets/slide.html.3e1f3c6e.js"><link rel="prefetch" href="/assets/index.html.a1e90d67.js"><link rel="prefetch" href="/assets/index.html.27f93604.js"><link rel="prefetch" href="/assets/album.html.2eab66b2.js"><link rel="prefetch" href="/assets/Algorithm.html.6291a6fa.js"><link rel="prefetch" href="/assets/Architect.html.b9a5a147.js"><link rel="prefetch" href="/assets/BMM.html.483bc165.js"><link rel="prefetch" href="/assets/BUG.html.858b6654.js"><link rel="prefetch" href="/assets/CRUD.html.8827ec7a.js"><link rel="prefetch" href="/assets/DesignPatterns.html.99369aa8.js"><link rel="prefetch" href="/assets/DevelopersFixComputer.html.a02a4070.js"><link rel="prefetch" href="/assets/Docker.html.9d8d4fd2.js"><link rel="prefetch" href="/assets/Dubbo.html.86c2078a.js"><link rel="prefetch" href="/assets/EnglishDay.html.9ec8973c.js"><link rel="prefetch" href="/assets/Flash.html.0a27743b.js"><link rel="prefetch" href="/assets/FrontEnd.html.0afeb0fe.js"><link rel="prefetch" href="/assets/GIS.html.054c51a3.js"><link rel="prefetch" href="/assets/GuLimall.html.64b3e565.js"><link rel="prefetch" href="/assets/Health.html.82ebda53.js"><link rel="prefetch" href="/assets/HowToLearn.html.3b0c6f76.js"><link rel="prefetch" href="/assets/inconstruction.html.f8bd01e8.js"><link rel="prefetch" href="/assets/Interesting Programs.html.1643ca40.js"><link rel="prefetch" href="/assets/InterviewQuestions.html.3210a104.js"><link rel="prefetch" href="/assets/Java.html.ff8cb3e2.js"><link rel="prefetch" href="/assets/JAVAUse.html.07194d8f.js"><link rel="prefetch" href="/assets/JVM.html.dda37b1d.js"><link rel="prefetch" href="/assets/Life.html.1378fd20.js"><link rel="prefetch" href="/assets/Linux.html.06903bcf.js"><link rel="prefetch" href="/assets/Markdown.html.6b27ff2b.js"><link rel="prefetch" href="/assets/MongoDB.html.28af2725.js"><link rel="prefetch" href="/assets/Music.html.902fc704.js"><link rel="prefetch" href="/assets/MyBatis-Plus.html.7671635f.js"><link rel="prefetch" href="/assets/MyBatis.html.353b8c6a.js"><link rel="prefetch" href="/assets/MYSQLOptimize.html.edd0c14b.js"><link rel="prefetch" href="/assets/Network.html.8a7c6580.js"><link rel="prefetch" href="/assets/Nginx.html.d67929a0.js"><link rel="prefetch" href="/assets/NO GAME NO LIFE.html.0fcacda1.js"><link rel="prefetch" href="/assets/Office.html.5b5f5398.js"><link rel="prefetch" href="/assets/Photography.html.facbe0f1.js"><link rel="prefetch" href="/assets/PM.html.3e41af7c.js"><link rel="prefetch" href="/assets/PMThesisTemplate.html.d7f6dddb.js"><link rel="prefetch" href="/assets/Python3.html.bac6602a.js"><link rel="prefetch" href="/assets/QuickSearch.html.03d254cc.js"><link rel="prefetch" href="/assets/Redis.html.d288ef8b.js"><link rel="prefetch" href="/assets/Resources.html.944ad882.js"><link rel="prefetch" href="/assets/Software Engineer.html.52f4d837.js"><link rel="prefetch" href="/assets/Spring.html.f733fc9a.js"><link rel="prefetch" href="/assets/SpringBoot.html.b777e587.js"><link rel="prefetch" href="/assets/SpringCloud.html.bf44609c.js"><link rel="prefetch" href="/assets/SpringMVC.html.c06af361.js"><link rel="prefetch" href="/assets/Summarize.html.a8269321.js"><link rel="prefetch" href="/assets/template.html.3529b9a2.js"><link rel="prefetch" href="/assets/TODO.html.d2fde38f.js"><link rel="prefetch" href="/assets/Tools.html.8d6263f4.js"><link rel="prefetch" href="/assets/VUEPressDemo.html.430acce9.js"><link rel="prefetch" href="/assets/We-Media.html.172dd9bd.js"><link rel="prefetch" href="/assets/WMP.html.858aabc5.js"><link rel="prefetch" href="/assets/404.html.c2e39eca.js"><link rel="prefetch" href="/assets/index.html.36fc8602.js"><link rel="prefetch" href="/assets/index.html.74a70eb4.js"><link rel="prefetch" href="/assets/index.html.028b6439.js"><link rel="prefetch" href="/assets/index.html.e27284e0.js"><link rel="prefetch" href="/assets/index.html.8f0f7f95.js"><link rel="prefetch" href="/assets/index.html.7ccbec73.js"><link rel="prefetch" href="/assets/index.html.072384b3.js"><link rel="prefetch" href="/assets/index.html.365c6e0f.js"><link rel="prefetch" href="/assets/index.html.67b47778.js"><link rel="prefetch" href="/assets/index.html.ba9a304b.js"><link rel="prefetch" href="/assets/index.html.9376ec99.js"><link rel="prefetch" href="/assets/index.html.c3501038.js"><link rel="prefetch" href="/assets/index.html.3e656c79.js"><link rel="prefetch" href="/assets/index.html.01e129a8.js"><link rel="prefetch" href="/assets/index.html.3358a380.js"><link rel="prefetch" href="/assets/index.html.e32444bc.js"><link rel="prefetch" href="/assets/index.html.2a115ca5.js"><link rel="prefetch" href="/assets/index.html.9fe62f96.js"><link rel="prefetch" href="/assets/index.html.297e00a4.js"><link rel="prefetch" href="/assets/index.html.14056e8c.js"><link rel="prefetch" href="/assets/index.html.50708293.js"><link rel="prefetch" href="/assets/index.html.b8b4c96c.js"><link rel="prefetch" href="/assets/index.html.837973f9.js"><link rel="prefetch" href="/assets/index.html.34423c8b.js"><link rel="prefetch" href="/assets/index.html.3ba8ac10.js"><link rel="prefetch" href="/assets/index.html.564f01b9.js"><link rel="prefetch" href="/assets/index.html.369bc715.js"><link rel="prefetch" href="/assets/index.html.67325de7.js"><link rel="prefetch" href="/assets/index.html.de6c8cff.js"><link rel="prefetch" href="/assets/index.html.a4caab71.js"><link rel="prefetch" href="/assets/index.html.e1acbec4.js"><link rel="prefetch" href="/assets/index.html.51163e2a.js"><link rel="prefetch" href="/assets/index.html.bddab55e.js"><link rel="prefetch" href="/assets/index.html.ba8fa283.js"><link rel="prefetch" href="/assets/index.html.0971837d.js"><link rel="prefetch" href="/assets/index.html.8b1a6a5d.js"><link rel="prefetch" href="/assets/index.html.e6e010d3.js"><link rel="prefetch" href="/assets/index.html.f472be4c.js"><link rel="prefetch" href="/assets/index.html.8e9f2ae3.js"><link rel="prefetch" href="/assets/index.html.95d046f7.js"><link rel="prefetch" href="/assets/index.html.b26db191.js"><link rel="prefetch" href="/assets/index.html.bffa044a.js"><link rel="prefetch" href="/assets/index.html.e2734a54.js"><link rel="prefetch" href="/assets/index.html.d97c08e4.js"><link rel="prefetch" href="/assets/index.html.b1be3ee9.js"><link rel="prefetch" href="/assets/index.html.22ec64df.js"><link rel="prefetch" href="/assets/index.html.42cb4f2d.js"><link rel="prefetch" href="/assets/index.html.018d6f57.js"><link rel="prefetch" href="/assets/index.html.e49bd31e.js"><link rel="prefetch" href="/assets/index.html.ec2cdda2.js"><link rel="prefetch" href="/assets/index.html.10a6845b.js"><link rel="prefetch" href="/assets/index.html.44c744ac.js"><link rel="prefetch" href="/assets/index.html.69a9c490.js"><link rel="prefetch" href="/assets/index.html.a39e4853.js"><link rel="prefetch" href="/assets/index.html.2afb19ff.js"><link rel="prefetch" href="/assets/index.html.eb7ae4bc.js"><link rel="prefetch" href="/assets/index.html.f5b3cb8d.js"><link rel="prefetch" href="/assets/index.html.0d9667bb.js"><link rel="prefetch" href="/assets/index.html.7ab1509e.js"><link rel="prefetch" href="/assets/index.html.f175ae9a.js"><link rel="prefetch" href="/assets/index.html.4d0d7fe6.js"><link rel="prefetch" href="/assets/index.html.2b699849.js"><link rel="prefetch" href="/assets/index.html.e9a4f2d3.js"><link rel="prefetch" href="/assets/index.html.e264b133.js"><link rel="prefetch" href="/assets/index.html.8fc763eb.js"><link rel="prefetch" href="/assets/index.html.93600e0e.js"><link rel="prefetch" href="/assets/index.html.ee8a9b61.js"><link rel="prefetch" href="/assets/index.html.9e4843fb.js"><link rel="prefetch" href="/assets/index.html.f346ef18.js"><link rel="prefetch" href="/assets/index.html.5e9b7b4f.js"><link rel="prefetch" href="/assets/index.html.eee10b16.js"><link rel="prefetch" href="/assets/index.html.5d647bf9.js"><link rel="prefetch" href="/assets/index.html.9b602c32.js"><link rel="prefetch" href="/assets/index.html.a94ae221.js"><link rel="prefetch" href="/assets/index.html.2a233b5d.js"><link rel="prefetch" href="/assets/index.html.2c8427e4.js"><link rel="prefetch" href="/assets/index.html.534ec82e.js"><link rel="prefetch" href="/assets/index.html.4e69cca1.js"><link rel="prefetch" href="/assets/index.html.a14a9bba.js"><link rel="prefetch" href="/assets/index.html.7fb7a2f4.js"><link rel="prefetch" href="/assets/index.html.43c805f3.js"><link rel="prefetch" href="/assets/index.html.e9d79eb5.js"><link rel="prefetch" href="/assets/index.html.b63bb5d6.js"><link rel="prefetch" href="/assets/index.html.224ae436.js"><link rel="prefetch" href="/assets/index.html.81690f21.js"><link rel="prefetch" href="/assets/index.html.9970c522.js"><link rel="prefetch" href="/assets/index.html.99d2776a.js"><link rel="prefetch" href="/assets/index.html.dee3660a.js"><link rel="prefetch" href="/assets/index.html.577aef86.js"><link rel="prefetch" href="/assets/index.html.a8d91138.js"><link rel="prefetch" href="/assets/index.html.22b06a3f.js"><link rel="prefetch" href="/assets/index.html.ea3f610f.js"><link rel="prefetch" href="/assets/index.html.ae49d0e1.js"><link rel="prefetch" href="/assets/index.html.a23f246b.js"><link rel="prefetch" href="/assets/index.html.835932b4.js"><link rel="prefetch" href="/assets/index.html.c2ecfbdd.js"><link rel="prefetch" href="/assets/index.html.d0b2e548.js"><link rel="prefetch" href="/assets/index.html.5a459a11.js"><link rel="prefetch" href="/assets/index.html.a7512111.js"><link rel="prefetch" href="/assets/index.html.2eaf85f7.js"><link rel="prefetch" href="/assets/index.html.db10f6d5.js"><link rel="prefetch" href="/assets/index.html.cd23bae0.js"><link rel="prefetch" href="/assets/index.html.02a889b0.js"><link rel="prefetch" href="/assets/index.html.ee924163.js"><link rel="prefetch" href="/assets/index.html.273e9b37.js"><link rel="prefetch" href="/assets/index.html.f20a71e3.js"><link rel="prefetch" href="/assets/index.html.93640b13.js"><link rel="prefetch" href="/assets/index.html.a1f6c1b7.js"><link rel="prefetch" href="/assets/index.html.34a5a00a.js"><link rel="prefetch" href="/assets/index.html.8cbd93a0.js"><link rel="prefetch" href="/assets/index.html.509fe415.js"><link rel="prefetch" href="/assets/404.137bcafd.js"><link rel="prefetch" href="/assets/Layout.1260b9a8.js"><link rel="prefetch" href="/assets/Slide.4e8af6f2.js"><link rel="prefetch" href="/assets/Blog.86f5f49b.js"><link rel="prefetch" href="/assets/giscus.es.44628f1d.js"><link rel="prefetch" href="/assets/auto.esm.52abc6cc.js"><link rel="prefetch" href="/assets/index.147398ee.js"><link rel="prefetch" href="/assets/index.e1c5a3de.js"><link rel="prefetch" href="/assets/mermaid.esm.min.e741c6cd.js"><link rel="prefetch" href="/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/assets/search.esm.04894411.js"><link rel="prefetch" href="/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/assets/photoswipe.esm.351abe37.js"><link rel="prefetch" href="/assets/three.module.6ea4571d.js"><link rel="prefetch" href="/assets/OrbitControls.f2b1dd1d.js"><link rel="prefetch" href="/assets/STLLoader.9a9a186e.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="GIS-FSDE"><!----><span class="site-name hide-in-pad">GIS-FSDE</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="GIS-FSDE"><span class="icon iconfont icon-home" style=""></span>GIS-FSDE<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="JAVA全栈"><span class="title"><span class="icon iconfont icon-edit" style=""></span>JAVA全栈</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>后端</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Java.html" class="nav-link" aria-label="JAVA"><span class="icon iconfont icon-edit" style=""></span>JAVA<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/JVM.html" class="nav-link" aria-label="JVM"><span class="icon iconfont icon-edit" style=""></span>JVM<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Python3.html" class="nav-link" aria-label="Python"><span class="icon iconfont icon-edit" style=""></span>Python<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MYSQLOptimize.html" class="nav-link" aria-label="MYSQL"><span class="icon iconfont icon-edit" style=""></span>MYSQL<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="PostgreSQL"><span class="icon iconfont icon-edit" style=""></span>PostgreSQL<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MongoDB.html" class="nav-link" aria-label="MongoDB"><span class="icon iconfont icon-edit" style=""></span>MongoDB<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="系统优化"><span class="icon iconfont icon-edit" style=""></span>系统优化<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="系统设计"><span class="icon iconfont icon-edit" style=""></span>系统设计<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="功能DEMO"><span class="icon iconfont icon-edit" style=""></span>功能DEMO<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>软件工程</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/PM.html" class="nav-link" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Architect.html" class="nav-link" aria-label="架构师"><span class="icon iconfont icon-edit" style=""></span>架构师<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="软件工程"><span class="icon iconfont icon-edit" style=""></span>软件工程<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Network.html" class="nav-link" aria-label="网络"><span class="icon iconfont icon-edit" style=""></span>网络<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="安全"><span class="icon iconfont icon-edit" style=""></span>安全<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Algorithm.html" class="nav-link" aria-label="算法"><span class="icon iconfont icon-edit" style=""></span>算法<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/DesignPatterns.html" class="nav-link" aria-label="设计模式"><span class="icon iconfont icon-edit" style=""></span>设计模式<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="测试"><span class="icon iconfont icon-edit" style=""></span>测试<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/DevelopersFixComputer.html" class="nav-link" aria-label="程序员修电脑"><span class="icon iconfont icon-edit" style=""></span>程序员修电脑<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="数学"><span class="icon iconfont icon-edit" style=""></span>数学<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/EnglishDay.html" class="nav-link" aria-label="英语"><span class="icon iconfont icon-edit" style=""></span>英语<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架-中间件</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Spring.html" class="nav-link" aria-label="Spring"><span class="icon iconfont icon-edit" style=""></span>Spring<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/SpringMVC.html" class="nav-link" aria-label="SpringMVC"><span class="icon iconfont icon-edit" style=""></span>SpringMVC<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MyBatis.html" class="nav-link" aria-label="Mybatis"><span class="icon iconfont icon-edit" style=""></span>Mybatis<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MyBatis-Plus.html" class="nav-link" aria-label="Mybatis-Plus"><span class="icon iconfont icon-edit" style=""></span>Mybatis-Plus<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/SpringBoot.html" class="nav-link" aria-label="SpringBoot"><span class="icon iconfont icon-edit" style=""></span>SpringBoot<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/SpringCloud.html" class="nav-link" aria-label="SpringCloud"><span class="icon iconfont icon-edit" style=""></span>SpringCloud<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Dubbo.html" class="nav-link" aria-label="Dubbo"><span class="icon iconfont icon-edit" style=""></span>Dubbo<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/posts/2021/RabbitMQ.html" class="router-link-active router-link-exact-active nav-link active" aria-label="RabbitMQ"><span class="icon iconfont icon-edit" style=""></span>RabbitMQ<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Redis.html" class="nav-link" aria-label="Redis"><span class="icon iconfont icon-edit" style=""></span>Redis<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Nginx.html" class="nav-link" aria-label="Nginx"><span class="icon iconfont icon-edit" style=""></span>Nginx<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="Maven"><span class="icon iconfont icon-edit" style=""></span>Maven<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>运维-工具</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Linux.html" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-edit" style=""></span>Linux<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Docker.html" class="nav-link" aria-label="Docker"><span class="icon iconfont icon-edit" style=""></span>Docker<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="IIS"><span class="icon iconfont icon-edit" style=""></span>IIS<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="Jenkins"><span class="icon iconfont icon-edit" style=""></span>Jenkins<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="从零网站上线"><span class="icon iconfont icon-edit" style=""></span>从零网站上线<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>前端</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/FrontEnd.html" class="nav-link" aria-label="前端"><span class="icon iconfont icon-edit" style=""></span>前端<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/FrontEnd.html" class="nav-link" aria-label="UI设计"><span class="icon iconfont icon-edit" style=""></span>UI设计<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/WMP.html" class="nav-link" aria-label="小程序"><span class="icon iconfont icon-edit" style=""></span>小程序<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="快乐编程"><span class="title"><span class="icon iconfont icon-edit" style=""></span>快乐编程</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>技术前沿</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>大数据</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="大数据"><span class="icon iconfont icon-edit" style=""></span>大数据<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>AI</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="深度学习"><span class="icon iconfont icon-edit" style=""></span>深度学习<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>GAME</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="UE4"><span class="icon iconfont icon-edit" style=""></span>UE4<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>GIS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="GIS基础知识"><span class="icon iconfont icon-edit" style=""></span>GIS基础知识<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="GIS软件"><span class="icon iconfont icon-edit" style=""></span>GIS软件<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="Leaflet"><span class="icon iconfont icon-edit" style=""></span>Leaflet<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="Mapbox"><span class="icon iconfont icon-edit" style=""></span>Mapbox<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="Cesium"><span class="icon iconfont icon-edit" style=""></span>Cesium<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="最新技术"><span class="icon iconfont icon-edit" style=""></span>最新技术<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="思考"><span class="title"><span class="icon iconfont icon-edit" style=""></span>思考</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>技术思考</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>生活思考</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/HowToLearn.html" class="nav-link" aria-label="如何学习一个新知识"><span class="icon iconfont icon-edit" style=""></span>如何学习一个新知识<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="生活"><span class="title"><span class="icon iconfont icon-hot" style=""></span>生活</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>TODO</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/TODO.html" class="nav-link" aria-label="TODO"><span class="icon iconfont icon-edit" style=""></span>TODO<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>穿搭护肤</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Health.html" class="nav-link" aria-label="穿搭"><span class="icon iconfont icon-edit" style=""></span>穿搭<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Health.html" class="nav-link" aria-label="护肤"><span class="icon iconfont icon-edit" style=""></span>护肤<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>自媒体</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/We-Media.html" class="nav-link" aria-label="自媒体规划"><span class="icon iconfont icon-edit" style=""></span>自媒体规划<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/We-Media.html" class="nav-link" aria-label="自媒体矩阵"><span class="icon iconfont icon-edit" style=""></span>自媒体矩阵<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/We-Media.html" class="nav-link" aria-label="自媒体知识"><span class="icon iconfont icon-edit" style=""></span>自媒体知识<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>书影音</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/BMM.html" class="nav-link" aria-label="读后感"><span class="icon iconfont icon-edit" style=""></span>读后感<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/BMM.html" class="nav-link" aria-label="观后感"><span class="icon iconfont icon-edit" style=""></span>观后感<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>年月日</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Summarize.html" class="nav-link" aria-label="年月日"><span class="icon iconfont icon-edit" style=""></span>年月日<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>健康</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="健身知识"><span class="icon iconfont icon-edit" style=""></span>健身知识<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="营养搭配"><span class="icon iconfont icon-edit" style=""></span>营养搭配<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="美食制作"><span class="icon iconfont icon-edit" style=""></span>美食制作<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>有用工具</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="电脑工具"><span class="icon iconfont icon-edit" style=""></span>电脑工具<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label><span class="icon iconfont icon-edit" style=""></span><!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Adobe</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="PS"><span class="icon iconfont icon-edit" style=""></span>PS<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="AE"><span class="icon iconfont icon-edit" style=""></span>AE<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="平面设计"><span class="icon iconfont icon-edit" style=""></span>平面设计<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>三维</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="C4D"><span class="icon iconfont icon-edit" style=""></span>C4D<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="艺术"><span class="title"><span class="icon iconfont icon-creative" style=""></span>艺术</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>音乐</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="乐理"><span class="icon iconfont icon-edit" style=""></span>乐理<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="吉他谱"><span class="icon iconfont icon-edit" style=""></span>吉他谱<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="钢琴谱"><span class="icon iconfont icon-edit" style=""></span>钢琴谱<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="其他谱"><span class="icon iconfont icon-edit" style=""></span>其他谱<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="作词编曲"><span class="icon iconfont icon-edit" style=""></span>作词编曲<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>摄影</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/album.html" class="nav-link" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="摄影"><span class="icon iconfont icon-edit" style=""></span>摄影<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数绘</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="数绘"><span class="icon iconfont icon-edit" style=""></span>数绘<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>记录</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="摄影记录"><span class="icon iconfont icon-edit" style=""></span>摄影记录<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="绘画记录"><span class="icon iconfont icon-edit" style=""></span>绘画记录<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="音乐记录"><span class="icon iconfont icon-edit" style=""></span>音乐记录<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="视频记录"><span class="icon iconfont icon-edit" style=""></span>视频记录<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/guide/" class="nav-link" aria-label="关于我"><span class="icon iconfont icon-emoji" style=""></span>关于我<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/GISFSDE/" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="主页"><span class="icon iconfont icon-home" style=""></span>主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/home.html" class="nav-link sidebar-link sidebar-page" aria-label="GIS-FSDE"><span class="icon iconfont icon-home" style=""></span>GIS-FSDE<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-edit" style=""></span><span class="title">JAVA全栈</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">后端</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Java.html" class="nav-link sidebar-link sidebar-page" aria-label="JAVA"><span class="icon iconfont icon-edit" style=""></span>JAVA<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/JVM.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM"><span class="icon iconfont icon-edit" style=""></span>JVM<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Python3.html" class="nav-link sidebar-link sidebar-page" aria-label="Python"><span class="icon iconfont icon-edit" style=""></span>Python<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MYSQLOptimize.html" class="nav-link sidebar-link sidebar-page" aria-label="MYSQL"><span class="icon iconfont icon-edit" style=""></span>MYSQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="PostgreSQL"><span class="icon iconfont icon-edit" style=""></span>PostgreSQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MongoDB.html" class="nav-link sidebar-link sidebar-page" aria-label="MongoDB"><span class="icon iconfont icon-edit" style=""></span>MongoDB<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="系统优化"><span class="icon iconfont icon-edit" style=""></span>系统优化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="系统设计"><span class="icon iconfont icon-edit" style=""></span>系统设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="功能DEMO"><span class="icon iconfont icon-edit" style=""></span>功能DEMO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">软件工程</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/PM.html" class="nav-link sidebar-link sidebar-page" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Architect.html" class="nav-link sidebar-link sidebar-page" aria-label="架构师"><span class="icon iconfont icon-edit" style=""></span>架构师<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="软件工程"><span class="icon iconfont icon-edit" style=""></span>软件工程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Network.html" class="nav-link sidebar-link sidebar-page" aria-label="网络"><span class="icon iconfont icon-edit" style=""></span>网络<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="安全"><span class="icon iconfont icon-edit" style=""></span>安全<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Algorithm.html" class="nav-link sidebar-link sidebar-page" aria-label="算法"><span class="icon iconfont icon-edit" style=""></span>算法<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/DesignPatterns.html" class="nav-link sidebar-link sidebar-page" aria-label="设计模式"><span class="icon iconfont icon-edit" style=""></span>设计模式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="测试"><span class="icon iconfont icon-edit" style=""></span>测试<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/DevelopersFixComputer.html" class="nav-link sidebar-link sidebar-page" aria-label="程序员修电脑"><span class="icon iconfont icon-edit" style=""></span>程序员修电脑<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="数学"><span class="icon iconfont icon-edit" style=""></span>数学<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/EnglishDay.html" class="nav-link sidebar-link sidebar-page" aria-label="英语"><span class="icon iconfont icon-edit" style=""></span>英语<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-edit" style=""></span><span class="title">框架-中间件</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring"><span class="icon iconfont icon-edit" style=""></span>Spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVC"><span class="icon iconfont icon-edit" style=""></span>SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MyBatis.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis"><span class="icon iconfont icon-edit" style=""></span>Mybatis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MyBatis-Plus.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis-Plus"><span class="icon iconfont icon-edit" style=""></span>Mybatis-Plus<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/SpringBoot.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringBoot"><span class="icon iconfont icon-edit" style=""></span>SpringBoot<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/SpringCloud.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloud"><span class="icon iconfont icon-edit" style=""></span>SpringCloud<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Dubbo.html" class="nav-link sidebar-link sidebar-page" aria-label="Dubbo"><span class="icon iconfont icon-edit" style=""></span>Dubbo<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/posts/2021/RabbitMQ.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="RabbitMQ"><span class="icon iconfont icon-edit" style=""></span>RabbitMQ<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_6种工作模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6种工作模式："><!---->6种工作模式：<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#优势" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="优势："><!---->优势：<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#劣势" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="劣势："><!---->劣势：<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#使用条件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用条件:"><!---->使用条件:<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#常见mq产品" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="常见MQ产品"><!---->常见MQ产品<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#jms" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="JMS"><!---->JMS<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#amqp-与-jms-区别" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="AMQP 与 JMS 区别"><!---->AMQP 与 JMS 区别<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-安装依赖环境" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1. 安装依赖环境"><!---->1. 安装依赖环境<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_2-安装erlang" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2. 安装Erlang"><!---->2. 安装Erlang<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-安装rabbitmq" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3. 安装RabbitMQ"><!---->3. 安装RabbitMQ<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_4-开启管界面及配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="4. 开启管界面及配置"><!---->4. 开启管界面及配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_5-启动" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="5. 启动"><!---->5. 启动<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_6-配置虚拟主机及用户" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="6. 配置虚拟主机及用户"><!---->6. 配置虚拟主机及用户<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#简单模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="简单模式"><!---->简单模式<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#生产者" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="生产者"><!---->生产者<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#消费者" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="消费者"><!---->消费者<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#rabbitmq运转流程" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="RabbitMQ运转流程"><!---->RabbitMQ运转流程<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#生产者流转过程说明" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="生产者流转过程说明"><!---->生产者流转过程说明<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#消费者流转过程说明" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="消费者流转过程说明"><!---->消费者流转过程说明<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#工作队列模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="工作队列模式"><!---->工作队列模式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#publish-subscribe发布与订阅模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Publish/Subscribe发布与订阅模式"><!---->Publish/Subscribe发布与订阅模式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#routing路由工作模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Routing路由工作模式"><!---->Routing路由工作模式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#topics通配符工作模式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Topics通配符工作模式"><!---->Topics通配符工作模式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-1消息可靠投递" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.1消息可靠投递"><!---->1.1消息可靠投递<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-2consumer-ack" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.2Consumer ACK"><!---->1.2Consumer ACK<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-3消费端限流qos" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.3消费端限流qos"><!---->1.3消费端限流qos<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-4ttl" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.4TTL"><!---->1.4TTL<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-5死信队列" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.5死信队列"><!---->1.5死信队列<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-消息什么时候成为死信" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.消息什么时候成为死信?"><!---->1.消息什么时候成为死信?<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_2-队列如何与dex绑定" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.队列如何与DEX绑定？"><!---->2.队列如何与DEX绑定？<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-6延迟队列" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.6延迟队列"><!---->1.6延迟队列<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-7日志与监控" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.7日志与监控"><!---->1.7日志与监控<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-8-消息追踪" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.8 消息追踪"><!---->1.8 消息追踪<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-消息可靠性保障-消息补偿" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="1.消息可靠性保障------消息补偿"><!---->1.消息可靠性保障------消息补偿<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_2-消息幂等性保障-乐观锁机制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="2.消息幂等性保障-----乐观锁机制"><!---->2.消息幂等性保障-----乐观锁机制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-rabbitmq集群搭建" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.RabbitMQ集群搭建"><!---->3.RabbitMQ集群搭建<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-1-集群方案的原理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.1 集群方案的原理"><!---->3.1 集群方案的原理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-2-单机多实例部署" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.2 单机多实例部署"><!---->3.2 单机多实例部署<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-3-集群管理" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.3 集群管理"><!---->3.3 集群管理<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-4-rabbitmq镜像集群配置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.4 RabbitMQ镜像集群配置"><!---->3.4 RabbitMQ镜像集群配置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-5-负载均衡-haproxy" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="3.5 负载均衡-HAProxy"><!---->3.5 负载均衡-HAProxy<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li></ul><!--]--></li><li><!--[--><a href="/posts/2021/Redis.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis"><span class="icon iconfont icon-edit" style=""></span>Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Nginx.html" class="nav-link sidebar-link sidebar-page" aria-label="Nginx"><span class="icon iconfont icon-edit" style=""></span>Nginx<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="Maven"><span class="icon iconfont icon-edit" style=""></span>Maven<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">运维-工具</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Linux.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux"><span class="icon iconfont icon-edit" style=""></span>Linux<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Docker.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker"><span class="icon iconfont icon-edit" style=""></span>Docker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="IIS"><span class="icon iconfont icon-edit" style=""></span>IIS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="Jenkins"><span class="icon iconfont icon-edit" style=""></span>Jenkins<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="从零网站上线"><span class="icon iconfont icon-edit" style=""></span>从零网站上线<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">前端</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/FrontEnd.html" class="nav-link sidebar-link sidebar-page" aria-label="前端"><span class="icon iconfont icon-edit" style=""></span>前端<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/FrontEnd.html" class="nav-link sidebar-link sidebar-page" aria-label="UI设计"><span class="icon iconfont icon-edit" style=""></span>UI设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/WMP.html" class="nav-link sidebar-link sidebar-page" aria-label="小程序"><span class="icon iconfont icon-edit" style=""></span>小程序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">快乐编程</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">技术前沿</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">大数据</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="大数据"><span class="icon iconfont icon-edit" style=""></span>大数据<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">AI</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="深度学习"><span class="icon iconfont icon-edit" style=""></span>深度学习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">GAME</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="UE4"><span class="icon iconfont icon-edit" style=""></span>UE4<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">GIS</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="GIS基础知识"><span class="icon iconfont icon-edit" style=""></span>GIS基础知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="GIS软件"><span class="icon iconfont icon-edit" style=""></span>GIS软件<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="Leaflet"><span class="icon iconfont icon-edit" style=""></span>Leaflet<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="Mapbox"><span class="icon iconfont icon-edit" style=""></span>Mapbox<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="Cesium"><span class="icon iconfont icon-edit" style=""></span>Cesium<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="最新技术"><span class="icon iconfont icon-edit" style=""></span>最新技术<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">思考</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">技术思考</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">生活思考</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/HowToLearn.html" class="nav-link sidebar-link sidebar-page" aria-label="如何学习一个新知识"><span class="icon iconfont icon-edit" style=""></span>如何学习一个新知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-hot" style=""></span><span class="title">生活</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">TODO</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/TODO.html" class="nav-link sidebar-link sidebar-page" aria-label="TODO"><span class="icon iconfont icon-edit" style=""></span>TODO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">穿搭护肤</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Health.html" class="nav-link sidebar-link sidebar-page" aria-label="穿搭"><span class="icon iconfont icon-edit" style=""></span>穿搭<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Health.html" class="nav-link sidebar-link sidebar-page" aria-label="护肤"><span class="icon iconfont icon-edit" style=""></span>护肤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">自媒体</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/We-Media.html" class="nav-link sidebar-link sidebar-page" aria-label="自媒体规划"><span class="icon iconfont icon-edit" style=""></span>自媒体规划<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/We-Media.html" class="nav-link sidebar-link sidebar-page" aria-label="自媒体矩阵"><span class="icon iconfont icon-edit" style=""></span>自媒体矩阵<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/We-Media.html" class="nav-link sidebar-link sidebar-page" aria-label="自媒体知识"><span class="icon iconfont icon-edit" style=""></span>自媒体知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">书影音</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/BMM.html" class="nav-link sidebar-link sidebar-page" aria-label="读后感"><span class="icon iconfont icon-edit" style=""></span>读后感<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/BMM.html" class="nav-link sidebar-link sidebar-page" aria-label="观后感"><span class="icon iconfont icon-edit" style=""></span>观后感<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">年月日</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Summarize.html" class="nav-link sidebar-link sidebar-page" aria-label="年月日"><span class="icon iconfont icon-edit" style=""></span>年月日<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">健康</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="健身知识"><span class="icon iconfont icon-edit" style=""></span>健身知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="营养搭配"><span class="icon iconfont icon-edit" style=""></span>营养搭配<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="美食制作"><span class="icon iconfont icon-edit" style=""></span>美食制作<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">有用工具</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="电脑工具"><span class="icon iconfont icon-edit" style=""></span>电脑工具<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label><span class="icon iconfont icon-edit" style=""></span><!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">Adobe</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="PS"><span class="icon iconfont icon-edit" style=""></span>PS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="AE"><span class="icon iconfont icon-edit" style=""></span>AE<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="平面设计"><span class="icon iconfont icon-edit" style=""></span>平面设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">三维</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="C4D"><span class="icon iconfont icon-edit" style=""></span>C4D<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-creative" style=""></span><span class="title">艺术</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">音乐</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="乐理"><span class="icon iconfont icon-edit" style=""></span>乐理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="吉他谱"><span class="icon iconfont icon-edit" style=""></span>吉他谱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="钢琴谱"><span class="icon iconfont icon-edit" style=""></span>钢琴谱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="其他谱"><span class="icon iconfont icon-edit" style=""></span>其他谱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="作词编曲"><span class="icon iconfont icon-edit" style=""></span>作词编曲<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">摄影</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/album.html" class="nav-link sidebar-link sidebar-page" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="摄影"><span class="icon iconfont icon-edit" style=""></span>摄影<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">数绘</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="数绘"><span class="icon iconfont icon-edit" style=""></span>数绘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">记录</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="摄影记录"><span class="icon iconfont icon-edit" style=""></span>摄影记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="绘画记录"><span class="icon iconfont icon-edit" style=""></span>绘画记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="音乐记录"><span class="icon iconfont icon-edit" style=""></span>音乐记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="视频记录"><span class="icon iconfont icon-edit" style=""></span>视频记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><a href="/guide/" class="nav-link sidebar-link sidebar-page" aria-label="关于我"><span class="icon iconfont icon-emoji" style=""></span>关于我<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-markdown" style=""></span>RabbitMQ</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.gisfsde.com" target="_blank" rel="noopener noreferrer">GIS-FSDE</a></span><span property="author" content="GIS-FSDE"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年6月6日</span><meta property="datePublished" content="2022-06-06T00:00:00.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category0 clickable" role="navigation">RabbitMQ</li><meta property="articleSection" content="RabbitMQ"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag0 clickable" role="navigation">RabbitMQ</li></ul><meta property="keywords" content="RabbitMQ"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 32 分钟</span><meta property="timeRequired" content="PT32M"></span><span class="words-info" aria-label="字数🔠" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 9535 字</span><meta property="wordCount" content="9535"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_6种工作模式" class="router-link-active router-link-exact-active toc-link level2">6种工作模式：</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#优势" class="router-link-active router-link-exact-active toc-link level2">优势：</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#劣势" class="router-link-active router-link-exact-active toc-link level2">劣势：</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#使用条件" class="router-link-active router-link-exact-active toc-link level2">使用条件:</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#常见mq产品" class="router-link-active router-link-exact-active toc-link level2">常见MQ产品</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#jms" class="router-link-active router-link-exact-active toc-link level2">JMS</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#amqp-与-jms-区别" class="router-link-active router-link-exact-active toc-link level2">AMQP 与 JMS 区别</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-安装依赖环境" class="router-link-active router-link-exact-active toc-link level3">1. 安装依赖环境</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_2-安装erlang" class="router-link-active router-link-exact-active toc-link level3">2. 安装Erlang</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-安装rabbitmq" class="router-link-active router-link-exact-active toc-link level3">3. 安装RabbitMQ</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_4-开启管界面及配置" class="router-link-active router-link-exact-active toc-link level3">4. 开启管界面及配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_5-启动" class="router-link-active router-link-exact-active toc-link level3">5. 启动</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_6-配置虚拟主机及用户" class="router-link-active router-link-exact-active toc-link level3">6. 配置虚拟主机及用户</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#简单模式" class="router-link-active router-link-exact-active toc-link level2">简单模式</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#生产者" class="router-link-active router-link-exact-active toc-link level3">生产者</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#消费者" class="router-link-active router-link-exact-active toc-link level3">消费者</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#rabbitmq运转流程" class="router-link-active router-link-exact-active toc-link level3">RabbitMQ运转流程</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#生产者流转过程说明" class="router-link-active router-link-exact-active toc-link level3">生产者流转过程说明</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#消费者流转过程说明" class="router-link-active router-link-exact-active toc-link level3">消费者流转过程说明</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#工作队列模式" class="router-link-active router-link-exact-active toc-link level2">工作队列模式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#publish-subscribe发布与订阅模式" class="router-link-active router-link-exact-active toc-link level2">Publish/Subscribe发布与订阅模式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#routing路由工作模式" class="router-link-active router-link-exact-active toc-link level2">Routing路由工作模式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#topics通配符工作模式" class="router-link-active router-link-exact-active toc-link level2">Topics通配符工作模式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-1消息可靠投递" class="router-link-active router-link-exact-active toc-link level2">1.1消息可靠投递</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-2consumer-ack" class="router-link-active router-link-exact-active toc-link level2">1.2Consumer ACK</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-3消费端限流qos" class="router-link-active router-link-exact-active toc-link level2">1.3消费端限流qos</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-4ttl" class="router-link-active router-link-exact-active toc-link level2">1.4TTL</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-5死信队列" class="router-link-active router-link-exact-active toc-link level2">1.5死信队列</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-消息什么时候成为死信" class="router-link-active router-link-exact-active toc-link level3">1.消息什么时候成为死信?</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_2-队列如何与dex绑定" class="router-link-active router-link-exact-active toc-link level3">2.队列如何与DEX绑定？</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-6延迟队列" class="router-link-active router-link-exact-active toc-link level2">1.6延迟队列</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-7日志与监控" class="router-link-active router-link-exact-active toc-link level2">1.7日志与监控</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-8-消息追踪" class="router-link-active router-link-exact-active toc-link level2">1.8 消息追踪</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_1-消息可靠性保障-消息补偿" class="router-link-active router-link-exact-active toc-link level2">1.消息可靠性保障------消息补偿</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_2-消息幂等性保障-乐观锁机制" class="router-link-active router-link-exact-active toc-link level2">2.消息幂等性保障-----乐观锁机制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-rabbitmq集群搭建" class="router-link-active router-link-exact-active toc-link level2">3.RabbitMQ集群搭建</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-1-集群方案的原理" class="router-link-active router-link-exact-active toc-link level3">3.1 集群方案的原理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-2-单机多实例部署" class="router-link-active router-link-exact-active toc-link level3">3.2 单机多实例部署</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-3-集群管理" class="router-link-active router-link-exact-active toc-link level3">3.3 集群管理</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-4-rabbitmq镜像集群配置" class="router-link-active router-link-exact-active toc-link level3">3.4 RabbitMQ镜像集群配置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/RabbitMQ.html#_3-5-负载均衡-haproxy" class="router-link-active router-link-exact-active toc-link level3">3.5 负载均衡-HAProxy</a></li><!----><!--]--></ul><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><blockquote><p>MQ全称为Message Queue，消息队列是应用程序和应用程序之间的通信方法。</p></blockquote><img src="http://qnimg.gisfsde.com/work/image-20210720184121269.png" alt="image-20210720184121269" style="zoom:50%;"><p>RabbitMQ是由erlang语言开发，基于AMQP（Advanced Message Queue 高级消息队列协议）协议实现的消息队列，它是一种应用程序之间的通信方法，消息队列在分布式系统开发中应用非常广泛。RabbitMQ官方地址：<a href="http://www.rabbitmq.com/" target="_blank" rel="noopener noreferrer">http://www.rabbitmq.com/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="http://qnimg.gisfsde.com/work/image-20210720185853830.png" alt="image-20210720185853830" loading="lazy"><img src="http://qnimg.gisfsde.com/work/image-20210720185933386.png" alt="image-20210720185933386" loading="lazy"></p><p>AMQP 一个提供统一消息服务的应用层标准高级消息队列协议，是应用层协议的一个开放标准，为面向消息的中间件设计。</p><p>AMQP是一个二进制协议，拥有一些现代化特点：多信道、协商式，异步，安全，扩平台，中立，高效。</p><p>RabbitMQ是AMQP协议的Erlang的实现。</p><table><thead><tr><th>概念</th><th>说明</th></tr></thead><tbody><tr><td>连接Connection</td><td>一个网络连接，比如TCP/IP套接字连接。</td></tr><tr><td>会话Session</td><td>端点之间的命名对话。在一个会话上下文中，保证“恰好传递一次”。</td></tr><tr><td>信道Channel</td><td>多路复用连接中的一条独立的双向数据流通道。为会话提供物理传输介质。</td></tr><tr><td>客户端Client</td><td>AMQP连接或者会话的发起者。AMQP是非对称的，客户端生产和消费消息，服务器存储和路由这些消息。</td></tr><tr><td>服务节点Broker</td><td>消息中间件的服务节点；一般情况下可以将一个RabbitMQ Broker看作一台RabbitMQ 服务器。</td></tr><tr><td>端点</td><td>AMQP对话的任意一方。一个AMQP连接包括两个端点（一个是客户端，一个是服务器）。</td></tr><tr><td>消费者Consumer</td><td>一个从消息队列里请求消息的客户端程序。</td></tr><tr><td>生产者Producer</td><td>一个向交换机发布消息的客户端应用程序。</td></tr></tbody></table><h2 id="_6种工作模式" tabindex="-1"><a class="header-anchor" href="#_6种工作模式" aria-hidden="true">#</a> 6种工作模式：</h2><p>简单模式，work模式，Publish/Subscribe发布与订阅模式，Routing路由模式，Topics主题模式，RPC远程调用模式（远程调用，不太算MQ；暂不作介绍）；</p><p>官网对应模式介绍：<a href="https://www.rabbitmq.com/getstarted.html" target="_blank" rel="noopener noreferrer">https://www.rabbitmq.com/getstarted.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="优势" tabindex="-1"><a class="header-anchor" href="#优势" aria-hidden="true">#</a> 优势：</h2><ol><li><p><strong>应用解耦</strong>，提升容错性和可维护性</p></li><li><p><strong>异步提速</strong>，提升用户体验，系统吞吐量</p></li><li><p><strong>削峰填谷</strong>，提高系统稳定性</p><p><img src="http://qnimg.gisfsde.com/work/image-20210714183656364.png" alt="image-20210714183656364" loading="lazy"></p></li></ol><h2 id="劣势" tabindex="-1"><a class="header-anchor" href="#劣势" aria-hidden="true">#</a> 劣势：</h2><ol><li><p>系统可用性降低（需保证MQ高可用）</p></li><li><p>系统复杂度提高（不被重复消费，保证消息顺序）</p></li><li><p>数据一致性问题</p></li></ol><h2 id="使用条件" tabindex="-1"><a class="header-anchor" href="#使用条件" aria-hidden="true">#</a> 使用条件:</h2><ol><li><p>生产者不需要从消费者处获得反馈</p></li><li><p>容许短暂的不一致性</p></li><li><p>确实用了有效果 ，好处大于复杂性等劣势</p></li></ol><h2 id="常见mq产品" tabindex="-1"><a class="header-anchor" href="#常见mq产品" aria-hidden="true">#</a> 常见MQ产品</h2><img src="http://qnimg.gisfsde.com/image-20210322181823260.png"><h2 id="jms" tabindex="-1"><a class="header-anchor" href="#jms" aria-hidden="true">#</a> JMS</h2><p>JMS即Java消息服务（JavaMessage Service）应用程序接口，是一个Java平台中关于面向消息中间件（MOM）的API，用于在两个应用程序之间，或分布式系统中发送消息，进行异步通信。</p><h2 id="amqp-与-jms-区别" tabindex="-1"><a class="header-anchor" href="#amqp-与-jms-区别" aria-hidden="true">#</a> AMQP 与 JMS 区别</h2><ul><li>JMS是定义了统一的接口，来对消息操作进行统一；AMQP是通过规定协议来统一数据交互的格式</li><li>JMS限定了必须使用Java语言；AMQP只是协议，不规定实现方式，因此是跨语言的。</li><li>JMS规定了两种消息模式；而AMQP的消息模式更加丰富</li></ul><h1 id="rabbitmq-安装配置" tabindex="-1"><a class="header-anchor" href="#rabbitmq-安装配置" aria-hidden="true">#</a> RabbitMQ 安装配置</h1><p>MQ版本选择和erlang相关</p><p>使用资料里提供的CentOS-7-x86_64-DVD-1810.iso 安装虚拟机.</p><h3 id="_1-安装依赖环境" tabindex="-1"><a class="header-anchor" href="#_1-安装依赖环境" aria-hidden="true">#</a> 1. 安装依赖环境</h3><p>在线安装依赖环境：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>yum <span class="token function">install</span> build-essential openssl openssl-devel unixODBC unixODBC-devel <span class="token function">make</span> gcc gcc-c++ kernel-devel m4 ncurses-devel tk tc xz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-安装erlang" tabindex="-1"><a class="header-anchor" href="#_2-安装erlang" aria-hidden="true">#</a> 2. 安装Erlang</h3><p>上传 alt+p进入sftp界面</p><p>erlang-18.3-1.el7.centos.x86_64.rpm socat-1.7.3.2-5.el7.lux.x86_64.rpm rabbitmq-server-3.6.5-1.noarch.rpm</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
<span class="token function">rpm</span> -ivh erlang-18.3-1.el7.centos.x86_64.rpm 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>如果出现如下错误</p><p><img src="http://qnimg.gisfsde.com/work/image-20210720192503168.png" alt="image-20210720192503168" loading="lazy"></p><p>说明gblic 版本太低。我们可以查看当前机器的gblic 版本</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>strings /lib64/libc.so.6 <span class="token operator">|</span> <span class="token function">grep</span> GLIBC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="http://qnimg.gisfsde.com/work/image-20210720192521968.png" alt="image-20210720192521968" loading="lazy"></p><p>当前最高版本2.12，需要2.15.所以需要升级glibc</p><ul><li><p>使用yum更新安装依赖</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gcc <span class="token function">make</span> -y
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>下载rpm包</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-utils-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
<span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-static-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
<span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
<span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-common-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
<span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-devel-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
<span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-headers-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
<span class="token function">wget</span> http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/nscd-2.17-55.el6.x86_64.rpm <span class="token operator">&amp;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>安装rpm包</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">rpm</span> -Uvh *-2.17-55.el6.x86_64.rpm --force --nodeps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>安装完毕后再查看glibc版本,发现glibc版本已经到2.17了</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>strings /lib64/libc.so.6 <span class="token operator">|</span> <span class="token function">grep</span> GLIBC
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul><p><img src="http://qnimg.gisfsde.com/work/image-20210720192534834.png" alt="image-20210720192534834" loading="lazy"></p><h3 id="_3-安装rabbitmq" tabindex="-1"><a class="header-anchor" href="#_3-安装rabbitmq" aria-hidden="true">#</a> 3. 安装RabbitMQ</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 安装</span>
<span class="token function">rpm</span> -ivh socat-1.7.3.2-5.el7.lux.x86_64.rpm

<span class="token comment"># 安装</span>
<span class="token function">rpm</span> -ivh rabbitmq-server-3.6.5-1.noarch.rpm

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@softbank126011009150 rabbitmq<span class="token punctuation">]</span><span class="token comment"># ls</span>
erlang-18.3-1.el7.centos.x86_64.rpm  rabbitmq-server-3.6.5-1.noarch.rpm  socat-1.7.3.2-1.1.el7.x86_64.rpm
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq<span class="token punctuation">]</span><span class="token comment"># rpm -ivh erlang-18.3-1.el7.centos.x86_64.rpm </span>
准备中<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>
        软件包 erlang-18.3-1.el7.centos.x86_64 已经安装
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq<span class="token punctuation">]</span><span class="token comment"># rpm -ivh  socat-1.7.3.2-1.1.el7.x86_64.rpm </span>
警告：socat-1.7.3.2-1.1.el7.x86_64.rpm: 头V4 RSA/SHA1 Signature, 密钥 ID 87e360b8: NOKEY
准备中<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>
        软件包 socat-1.7.3.2-1.1.el7.x86_64 已经安装
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq<span class="token punctuation">]</span><span class="token comment"># rpm -ivh  rabbitmq-server-3.6.5-1.noarch.rpm </span>
警告：rabbitmq-server-3.6.5-1.noarch.rpm: 头V4 RSA/SHA1 Signature, 密钥 ID 6026dfca: NOKEY
准备中<span class="token punctuation">..</span>.                          <span class="token comment">################################# [100%]</span>
        软件包 rabbitmq-server-3.6.5-1.noarch 已经安装
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-开启管界面及配置" tabindex="-1"><a class="header-anchor" href="#_4-开启管界面及配置" aria-hidden="true">#</a> 4. 开启管界面及配置</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 开启管理界面</span>
rabbitmq-plugins <span class="token builtin class-name">enable</span> rabbitmq_management
<span class="token comment"># 修改默认配置信息</span>
<span class="token function">vim</span> /usr/lib/rabbitmq/lib/rabbitmq_server-3.6.5/ebin/rabbit.app 
<span class="token comment"># 比如修改密码、配置等等，例如：loopback_users 中的 \&lt;\&lt;&quot;guest&quot;&gt;&gt;,只保留guest</span>
http://ip:15672 访问
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5-启动" tabindex="-1"><a class="header-anchor" href="#_5-启动" aria-hidden="true">#</a> 5. 启动</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">service</span> rabbitmq-server start <span class="token comment"># 启动服务</span>
<span class="token function">service</span> rabbitmq-server stop <span class="token comment"># 停止服务</span>
<span class="token function">service</span> rabbitmq-server restart <span class="token comment"># 重启服务</span>

<span class="token function">service</span> iptables stop<span class="token comment">#关闭防火墙</span>
systemctl stop firewalld <span class="token comment">#conos7关闭防火墙方法</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>设置配置文件</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /usr/share/doc/rabbitmq-server-3.6.5/

<span class="token function">cp</span> rabbitmq.config.example /etc/rabbitmq/rabbitmq.config

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6-配置虚拟主机及用户" tabindex="-1"><a class="header-anchor" href="#_6-配置虚拟主机及用户" aria-hidden="true">#</a> 6. 配置虚拟主机及用户</h3><h4 id="_6-1-用户角色" tabindex="-1"><a class="header-anchor" href="#_6-1-用户角色" aria-hidden="true">#</a> 6.1. 用户角色</h4><p>RabbitMQ在安装好后，可以访问<code>http://ip地址:15672</code> ；其自带了guest/guest的用户名和密码；如果需要创建自定义用户；那么也可以登录管理界面后，如下操作：</p><p><img src="http://qnimg.gisfsde.com/work/image-20210720192553954.png" alt="image-20210720192553954" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20210720192606264.png" alt="image-20210720192606264" loading="lazy"></p><p><strong>角色说明</strong>：</p><p>1、 超级管理员(administrator)</p><p>可登陆管理控制台，可查看所有的信息，并且可以对用户，策略(policy)进行操作。</p><p>2、 监控者(monitoring)</p><p>可登陆管理控制台，同时可以查看rabbitmq节点的相关信息(进程数，内存使用情况，磁盘使用情况等)</p><p>3、 策略制定者(policymaker)</p><p>可登陆管理控制台, 同时可以对policy进行管理。但无法查看节点的相关信息(上图红框标识的部分)。</p><p>4、 普通管理者(management)</p><p>仅可登陆管理控制台，无法看到节点信息，也无法对策略进行管理。</p><p>5、 其他</p><p>无法登陆管理控制台，通常就是普通的生产者和消费者。</p><h4 id="_6-2-virtual-hosts配置" tabindex="-1"><a class="header-anchor" href="#_6-2-virtual-hosts配置" aria-hidden="true">#</a> 6.2. Virtual Hosts配置</h4><p>像mysql拥有数据库的概念并且可以指定用户对库和表等操作的权限。RabbitMQ也有类似的权限管理；在RabbitMQ中可以虚拟消息服务器Virtual Host，每个Virtual Hosts相当于一个相对独立的RabbitMQ服务器，每个VirtualHost之间是相互隔离的。exchange、queue、message不能互通。 相当于mysql的db。Virtual Name一般以/开头。</p><h5 id="_6-2-1-创建virtual-hosts" tabindex="-1"><a class="header-anchor" href="#_6-2-1-创建virtual-hosts" aria-hidden="true">#</a> 6.2.1. 创建Virtual Hosts</h5><p><img src="http://qnimg.gisfsde.com/work/image-20210720192626533.png" alt="image-20210720192626533" loading="lazy"></p><h5 id="_6-2-2-设置virtual-hosts权限" tabindex="-1"><a class="header-anchor" href="#_6-2-2-设置virtual-hosts权限" aria-hidden="true">#</a> 6.2.2. 设置Virtual Hosts权限</h5><p><img src="http://qnimg.gisfsde.com/work/image-20210720192636051.png" alt="image-20210720192636051" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20210720192726258.png" alt="image-20210720192726258" loading="lazy"></p><p>解决配置文件未找到</p><p><img src="http://qnimg.gisfsde.com/work/image-20210720194503884.png" alt="image-20210720194503884" loading="lazy"></p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@softbank126011009150 rabbitmq<span class="token punctuation">]</span><span class="token comment"># cd /usr/share/doc/rabbitmq-server-3.6.5/</span>
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq-server-3.6.5<span class="token punctuation">]</span><span class="token comment"># ls</span>
LICENSE                         LICENSE-APL2-Stomp-Websocket  LICENSE-EPL-OTP    LICENSE-MIT-jQuery164  LICENSE-MIT-Sammy060  LICENSE-MPL-RabbitMQ     set_rabbitmq_policy.sh.example
LICENSE-APACHE2-ExplorerCanvas  LICENSE-BSD-base64js          LICENSE-MIT-EJS10  LICENSE-MIT-Mochi      LICENSE-MIT-SockJS    rabbitmq.config.example
LICENSE-APL2-Rebar              LICENSE-BSD-glMatrix          LICENSE-MIT-Flot   LICENSE-MIT-Mochiweb   LICENSE-MPL2          README
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq-server-3.6.5<span class="token punctuation">]</span><span class="token comment"># ll</span>
总用量 <span class="token number">200</span>
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">28945</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">11358</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-APACHE2-ExplorerCanvas
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">10175</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-APL2-Rebar
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">10851</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-APL2-Stomp-Websocket
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1206</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-BSD-base64js
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1304</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-BSD-glMatrix
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">14041</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-EPL-OTP
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1087</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MIT-EJS10
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1069</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MIT-Flot
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1075</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MIT-jQuery164
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1087</span> <span class="token number">3</span>月  <span class="token number">31</span> <span class="token number">2016</span> LICENSE-MIT-Mochi
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1087</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MIT-Mochiweb
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1076</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MIT-Sammy060
-rw-r--r--. <span class="token number">1</span> root root  <span class="token number">1056</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MIT-SockJS
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">16726</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MPL2
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">24897</span> <span class="token number">8</span>月   <span class="token number">5</span> <span class="token number">2016</span> LICENSE-MPL-RabbitMQ
-rw-r--r--. <span class="token number">1</span> root root <span class="token number">21023</span> <span class="token number">4</span>月  <span class="token number">11</span> <span class="token number">2016</span> rabbitmq.config.example
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">943</span> <span class="token number">3</span>月  <span class="token number">31</span> <span class="token number">2016</span> README
-rw-r--r--. <span class="token number">1</span> root root   <span class="token number">277</span> <span class="token number">3</span>月  <span class="token number">31</span> <span class="token number">2016</span> set_rabbitmq_policy.sh.example
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq-server-3.6.5<span class="token punctuation">]</span><span class="token comment"># cp ./rabbitmq.config.example /etc/rabbitmq/rabbitmq.config</span>
<span class="token punctuation">[</span>root@softbank126011009150 rabbitmq-server-3.6.5<span class="token punctuation">]</span><span class="token comment"># service rabbitmq-server restart</span>
Restarting rabbitmq-server <span class="token punctuation">(</span>via systemctl<span class="token punctuation">)</span>:                <span class="token punctuation">[</span>  确定  <span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="工作模式" tabindex="-1"><a class="header-anchor" href="#工作模式" aria-hidden="true">#</a> 工作模式</h1><h2 id="简单模式" tabindex="-1"><a class="header-anchor" href="#简单模式" aria-hidden="true">#</a> 简单模式</h2><p><img src="http://qnimg.gisfsde.com/work/image-20210721130715892.png" alt="image-20210721130715892" loading="lazy"></p><h3 id="生产者" tabindex="-1"><a class="header-anchor" href="#生产者" aria-hidden="true">#</a> <strong>生产者</strong></h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>producer</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Channel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">ConnectionFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeoutException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Producer_HelloWord</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>

        <span class="token comment">//1.创建连接工厂</span>
        <span class="token class-name">ConnectionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 设置参数</span>
        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">&quot;126.11.41.128&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ip  默认值 localhost</span>
        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//端口  默认值 5672</span>
        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">&quot;/lxlv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//虚拟机 默认值/</span>
        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用户名 默认 guest</span>
        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//密码 默认值 guest</span>
        <span class="token comment">//3. 创建连接 Connection</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 创建Channel</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//5. 创建队列Queue</span>
        <span class="token comment">/*
        queueDeclare(String queue, boolean durable, boolean exclusive, boolean autoDelete, Map\&lt;String, Object&gt; arguments)
        参数：
            1. queue：队列名称
            2. durable:是否持久化，当mq重启之后，还在
            3. exclusive：
                * 是否独占。只能有一个消费者监听这队列
                * 当Connection关闭时，是否删除队列
                *
            4. autoDelete:是否自动删除。当没有Consumer时，自动删除掉
            5. arguments：参数。

         */</span>
        <span class="token comment">//如果没有一个名字叫hello_world的队列，则会创建该队列，如果有则不会创建</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">&quot;hello_world&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/*
        basicPublish(String exchange, String routingKey, BasicProperties props, byte[] body)
        参数：
            1. exchange：交换机名称。简单模式下交换机会使用默认的 &quot;&quot;
            2. routingKey：路由名称
            3. props：配置信息
            4. body：发送消息数据

         */</span>

        <span class="token class-name">String</span> body <span class="token operator">=</span> <span class="token string">&quot;hello rabbitmq~~~&quot;</span><span class="token punctuation">;</span>

        <span class="token comment">//6. 发送消息</span>
        channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;hello_world&quot;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span>body<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//7.释放资源</span>
<span class="token comment">//        channel.close();</span>
<span class="token comment">//        connection.close();</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://qnimg.gisfsde.com/image-20210324210239715.png" alt="image-20210324210239715" style="zoom:67%;"><h3 id="消费者" tabindex="-1"><a class="header-anchor" href="#消费者" aria-hidden="true">#</a> <strong>消费者</strong></h3><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>consumer</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span></span><span class="token class-name">TimeoutException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer_HelloWorld</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TimeoutException</span> <span class="token punctuation">{</span>

        <span class="token comment">//1.创建连接工厂</span>
        <span class="token class-name">ConnectionFactory</span> factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ConnectionFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//2. 设置参数</span>
        factory<span class="token punctuation">.</span><span class="token function">setHost</span><span class="token punctuation">(</span><span class="token string">&quot;126.11.41.128&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ip  默认值 localhost</span>
        factory<span class="token punctuation">.</span><span class="token function">setPort</span><span class="token punctuation">(</span><span class="token number">5672</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//端口  默认值 5672</span>
        factory<span class="token punctuation">.</span><span class="token function">setVirtualHost</span><span class="token punctuation">(</span><span class="token string">&quot;/lxlv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//虚拟机 默认值/</span>
        factory<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用户名 默认 guest</span>
        factory<span class="token punctuation">.</span><span class="token function">setPassword</span><span class="token punctuation">(</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//密码 默认值 guest</span>
        <span class="token comment">//3. 创建连接 Connection</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">newConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//4. 创建Channel</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//5. 创建队列Queue</span>
        <span class="token comment">/*
        queueDeclare(String queue, boolean durable, boolean exclusive, boolean autoDelete, Map\&lt;String, Object&gt; arguments)
        参数：
            1. queue：队列名称
            2. durable:是否持久化，当mq重启之后，还在
            3. exclusive：
                * 是否独占。只能有一个消费者监听这队列
                * 当Connection关闭时，是否删除队列
                *
            4. autoDelete:是否自动删除。当没有Consumer时，自动删除掉
            5. arguments：参数。

         */</span>
        <span class="token comment">//如果没有一个名字叫hello_world的队列，则会创建该队列，如果有则不会创建</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token string">&quot;hello_world&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        basicConsume(String queue, boolean autoAck, Consumer callback)
        参数：
            1. queue：队列名称
            2. autoAck：是否自动确认
            3. callback：回调对象

         */</span>
        <span class="token comment">// 接收消息</span>
        <span class="token class-name">Consumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">/*
                回调方法，当收到消息后，会自动执行该方法

                1. consumerTag：标识
                2. envelope：获取一些信息，交换机，路由key...
                3. properties:配置信息
                4. body：数据

             */</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;consumerTag：&quot;</span><span class="token operator">+</span>consumerTag<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Exchange：&quot;</span><span class="token operator">+</span>envelope<span class="token punctuation">.</span><span class="token function">getExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;RoutingKey：&quot;</span><span class="token operator">+</span>envelope<span class="token punctuation">.</span><span class="token function">getRoutingKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;properties：&quot;</span><span class="token operator">+</span>properties<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;body：&quot;</span><span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token string">&quot;hello_world&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span>consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">//关闭资源？不要</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="rabbitmq运转流程" tabindex="-1"><a class="header-anchor" href="#rabbitmq运转流程" aria-hidden="true">#</a> RabbitMQ运转流程</h3><p>在入门案例中：</p><ul><li>生产者发送消息 <ol><li>生产者创建连接（Connection），开启一个信道（Channel），连接到RabbitMQ Broker；</li><li>声明队列并设置属性；是否排它，是否持久化，是否自动删除；</li><li>将路由键（空字符串）与队列绑定起来；</li><li>发送消息至RabbitMQ Broker；</li><li>关闭信道；</li><li>关闭连接；</li></ol></li><li>消费者接收消息 <ol><li>消费者创建连接（Connection），开启一个信道（Channel），连接到RabbitMQ Broker</li><li>向Broker 请求消费相应队列中的消息，设置相应的回调函数；</li><li>等待Broker回应闭关投递响应队列中的消息，消费者接收消息；</li><li>确认（ack，自动确认）接收到的消息；</li><li>RabbitMQ从队列中删除相应已经被确认的消息；</li><li>关闭信道；</li><li>关闭连接；</li></ol></li></ul><p><img src="http://qnimg.gisfsde.com/work/image-20210721131920951.png" alt="image-20210721131920951" loading="lazy"></p><h3 id="生产者流转过程说明" tabindex="-1"><a class="header-anchor" href="#生产者流转过程说明" aria-hidden="true">#</a> 生产者流转过程说明</h3><ol><li>客户端与代理服务器Broker建立连接。会调用newConnection() 方法,这个方法会进一步封装Protocol Header 0-9-1 的报文头发送给Broker ，以此通知Broker 本次交互采用的是AMQPO-9-1 协议，紧接着Broker 返回Connection.Start 来建立连接，在连接的过程中涉及Connection.Start/.Start-OK 、Connection.Tune/.Tune-Ok ，Connection.Open/ .Open-Ok 这6 个命令的交互。</li><li>客户端调用connection.createChannel方法。此方法开启信道，其包装的channel.open命令发送给Broker,等待channel.basicPublish方法，对应的AMQP命令为Basic.Publish,这个命令包含了content Header 和content Body()。content Header 包含了消息体的属性，例如:投递模式，优先级等，content Body 包含了消息体本身。</li><li>客户端发送完消息需要关闭资源时，涉及到Channel.Close和Channl.Close-Ok 与Connetion.Close和Connection.Close-Ok的命令交互。</li></ol><p><img src="http://qnimg.gisfsde.com/work/image-20210721131951019.png" alt="image-20210721131951019" loading="lazy"></p><h3 id="消费者流转过程说明" tabindex="-1"><a class="header-anchor" href="#消费者流转过程说明" aria-hidden="true">#</a> 消费者流转过程说明</h3><ol><li>消费者客户端与代理服务器Broker建立连接。会调用newConnection() 方法,这个方法会进一步封装Protocol Header 0-9-1 的报文头发送给Broker ，以此通知Broker 本次交互采用的是AMQPO-9-1 协议，紧接着Broker 返回Connection.Start 来建立连接，在连接的过程中涉及Connection.Start/.Start-OK 、Connection.Tune/.Tune-Ok ，Connection.Open/ .Open-Ok 这6 个命令的交互。</li><li>消费者客户端调用connection.createChannel方法。和生产者客户端一样，协议涉及Channel . Open/Open-Ok命令。</li><li>在真正消费之前，消费者客户端需要向Broker 发送Basic.Consume 命令(即调用channel.basicConsume 方法〉将Channel 置为接收模式，之后Broker 回执Basic . Consume - Ok 以告诉消费者客户端准备好消费消息。</li><li>Broker 向消费者客户端推送(Push) 消息，即Basic.Deliver 命令，这个命令和Basic.Publish 命令一样会携带Content Header 和Content Body。</li><li>消费者接收到消息并正确消费之后，向Broker 发送确认，即Basic.Ack 命令。</li><li>客户端发送完消息需要关闭资源时，涉及到Channel.Close和Channl.Close-Ok 与Connetion.Close和Connection.Close-Ok的命令交互。</li></ol><p><img src="http://qnimg.gisfsde.com/work/image-20210721132711379.png" alt="image-20210721132711379" loading="lazy"></p><h2 id="工作队列模式" tabindex="-1"><a class="header-anchor" href="#工作队列模式" aria-hidden="true">#</a> 工作队列模式</h2><p>模式说明（只有一盒糖你们几个抢）</p><p><img src="http://qnimg.gisfsde.com/work/image-20210721132742431.png" alt="image-20210721132742431" loading="lazy"></p><p><code>Work Queues</code>与入门程序的<code>简单模式</code>相比，多了一个或一些消费端，多个消费端共同消费同一个队列中的消息。</p><p><strong>应用场景</strong>：对于 任务过重或任务较多情况使用工作队列可以提高任务处理的速度。</p><p>代码</p><p><code>Work Queues</code>与入门程序的<code>简单模式</code>的代码是几乎一样的；可以完全复制，并复制多一个消费者进行多个消费者同时消费消息的测试。</p><h4 id="生产者-1" tabindex="-1"><a class="header-anchor" href="#生产者-1" aria-hidden="true">#</a> 生产者</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>work</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ConnectionUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Channel</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">Connection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">ConnectionFactory</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Producer</span> <span class="token punctuation">{</span>

    <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> QUEUE_NAME <span class="token operator">=</span> <span class="token string">&quot;work_queue&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">//创建连接</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">ConnectionUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建频道</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 声明（创建）队列</span>
        <span class="token doc-comment comment">/**
         * 参数1：队列名称
         * 参数2：是否定义持久化队列
         * 参数3：是否独占本次连接
         * 参数4：是否在不使用的时候自动删除队列
         * 参数5：队列其它参数
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span>QUEUE_NAME<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i \<span class="token operator">&lt;=</span> <span class="token number">30</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 发送信息</span>
            <span class="token class-name">String</span> message <span class="token operator">=</span> <span class="token string">&quot;你好；小兔子！work模式--&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">;</span>
            <span class="token doc-comment comment">/**
             * 参数1：交换机名称，如果没有指定则使用默认Default Exchage
             * 参数2：路由key,简单模式可以传递队列名称
             * 参数3：消息其它属性
             * 参数4：消息内容
             */</span>
            channel<span class="token punctuation">.</span><span class="token function">basicPublish</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> QUEUE_NAME<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> message<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;已发送消息：&quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 关闭资源</span>
        channel<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        connection<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="消费者1" tabindex="-1"><a class="header-anchor" href="#消费者1" aria-hidden="true">#</a> 消费者1</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>work</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ConnectionUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer1</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">ConnectionUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建频道</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 声明（创建）队列</span>
        <span class="token doc-comment comment">/**
         * 参数1：队列名称
         * 参数2：是否定义持久化队列
         * 参数3：是否独占本次连接
         * 参数4：是否在不使用的时候自动删除队列
         * 参数5：队列其它参数
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token class-name">Producer</span><span class="token punctuation">.</span>QUEUE_NAME<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//一次只能接收并处理一个消息</span>
        channel<span class="token punctuation">.</span><span class="token function">basicQos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//创建消费者；并设置消息处理</span>
        <span class="token class-name">DefaultConsumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token doc-comment comment">/**
             * consumerTag 消息者标签，在channel.basicConsume时候可以指定
             * envelope 消息包的内容，可从中获取消息id，消息routingkey，交换机，消息和重传标志(收到消息失败后是否需要重新发送)
             * properties 属性信息
             * body 消息
             */</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token comment">//路由key</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;路由key为：&quot;</span> <span class="token operator">+</span> envelope<span class="token punctuation">.</span><span class="token function">getRoutingKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//交换机</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;交换机为：&quot;</span> <span class="token operator">+</span> envelope<span class="token punctuation">.</span><span class="token function">getExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//消息id</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消息id为：&quot;</span> <span class="token operator">+</span> envelope<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//收到的消息</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消费者1-接收到的消息为：&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//确认消息</span>
                    channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>envelope<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//监听消息</span>
        <span class="token doc-comment comment">/**
         * 参数1：队列名称
         * 参数2：是否自动确认，设置为true为表示消息接收到自动向mq回复接收到了，mq接收到回复会删除消息，设置为false则需要手动确认
         * 参数3：消息接收到后回调
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token class-name">Producer</span><span class="token punctuation">.</span>QUEUE_NAME<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="消费者2" tabindex="-1"><a class="header-anchor" href="#消费者2" aria-hidden="true">#</a> 消费者2</h4><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>work</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>itheima<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">ConnectionUtil</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>rabbitmq<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token operator">*</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Consumer2</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">Connection</span> connection <span class="token operator">=</span> <span class="token class-name">ConnectionUtil</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建频道</span>
        <span class="token class-name">Channel</span> channel <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">createChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 声明（创建）队列</span>
        <span class="token doc-comment comment">/**
         * 参数1：队列名称
         * 参数2：是否定义持久化队列
         * 参数3：是否独占本次连接
         * 参数4：是否在不使用的时候自动删除队列
         * 参数5：队列其它参数
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">queueDeclare</span><span class="token punctuation">(</span><span class="token class-name">Producer</span><span class="token punctuation">.</span>QUEUE_NAME<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//一次只能接收并处理一个消息</span>
        channel<span class="token punctuation">.</span><span class="token function">basicQos</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//创建消费者；并设置消息处理</span>
        <span class="token class-name">DefaultConsumer</span> consumer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultConsumer</span><span class="token punctuation">(</span>channel<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token doc-comment comment">/**
             * consumerTag 消息者标签，在channel.basicConsume时候可以指定
             * envelope 消息包的内容，可从中获取消息id，消息routingkey，交换机，消息和重传标志(收到消息失败后是否需要重新发送)
             * properties 属性信息
             * body 消息
             */</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">handleDelivery</span><span class="token punctuation">(</span><span class="token class-name">String</span> consumerTag<span class="token punctuation">,</span> <span class="token class-name">Envelope</span> envelope<span class="token punctuation">,</span> <span class="token class-name">AMQP<span class="token punctuation">.</span>BasicProperties</span> properties<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> body<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span> <span class="token punctuation">{</span>
                    <span class="token comment">//路由key</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;路由key为：&quot;</span> <span class="token operator">+</span> envelope<span class="token punctuation">.</span><span class="token function">getRoutingKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//交换机</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;交换机为：&quot;</span> <span class="token operator">+</span> envelope<span class="token punctuation">.</span><span class="token function">getExchange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//消息id</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消息id为：&quot;</span> <span class="token operator">+</span> envelope<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token comment">//收到的消息</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;消费者2-接收到的消息为：&quot;</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                    <span class="token comment">//确认消息</span>
                    channel<span class="token punctuation">.</span><span class="token function">basicAck</span><span class="token punctuation">(</span>envelope<span class="token punctuation">.</span><span class="token function">getDeliveryTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token comment">//监听消息</span>
        <span class="token doc-comment comment">/**
         * 参数1：队列名称
         * 参数2：是否自动确认，设置为true为表示消息接收到自动向mq回复接收到了，mq接收到回复会删除消息，设置为false则需要手动确认
         * 参数3：消息接收到后回调
         */</span>
        channel<span class="token punctuation">.</span><span class="token function">basicConsume</span><span class="token punctuation">(</span><span class="token class-name">Producer</span><span class="token punctuation">.</span>QUEUE_NAME<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> consumer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>测试</p><p>启动两个消费者，然后再启动生产者发送消息；到IDEA的两个消费者对应的控制台查看是否竞争性的接收到消息。</p><p><img src="http://qnimg.gisfsde.com/work/image-20210721133929641.png" alt="image-20210721133929641" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20210721133940583.png" alt="image-20210721133940583" loading="lazy"></p><p>小结</p><p>在一个队列中如果有多个消费者，那么消费者之间对于同一个消息的关系是<strong>竞争</strong>的关系。</p><h2 id="publish-subscribe发布与订阅模式" tabindex="-1"><a class="header-anchor" href="#publish-subscribe发布与订阅模式" aria-hidden="true">#</a> Publish/Subscribe发布与订阅模式</h2><p><strong>模式说明（给喜欢的人一样的糖）</strong>【FANOUT】</p><p><img src="http://qnimg.gisfsde.com/work/image-20210721133556547.png" alt="image-20210721133556547" loading="lazy"></p><p>在订阅模型中，多了一个 Exchange 角色，而且过程略有变化：</p><p>P：生产者，也就是要发送消息的程序，但是不再发送到队列中，而是发给X（交换机）</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//1.创建连接工厂
//2. 设置参数
//3. 创建连接 Connection
//4. 创建Channel
//5. 创建交换机
//6. 创建队列
//7. 绑定队列和交换机
//8. 发送消息
//9. 释放资源
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>C：消费者，消息的接收者，会一直等待消息到来</p><p>Queue：消息队列，接收消息、缓存消息</p><p>Exchange：交换机（X）。一方面，接收生产者发送的消息。另一方面，知道如何处理消息，例如递交给某个特别队列、递交给所有队列、或是将消息丢弃。到底如何操作，取决于Exchange的类型。Exchange有常见以下3种类型：</p><p>Fanout：广播，将消息交给所有绑定到交换机的队列</p><p>Direct：定向，把消息交给符合指定routing key 的队列</p><p>Topic：通配符，把消息交给符合routing pattern（路由模式） 的队列</p><p><strong>Exchange</strong>（交换机）只负责转发消息，不具备存储消息的能力，因此如果没有任何队列与 Exchange 绑定，或者没有符合路由规则的队列，那么消息会丢失！</p><h2 id="routing路由工作模式" tabindex="-1"><a class="header-anchor" href="#routing路由工作模式" aria-hidden="true">#</a> Routing路由工作模式</h2><p><strong>模式说明：给更爱的人更甜的糖</strong>【DIRECT】</p><p>队列与交换机的绑定，不能是任意绑定了，而是要指定一个 RoutingKey（路由key）</p><p>l消息的发送方在向 Exchange 发送消息时，也必须指定消息的 RoutingKey</p><p>lExchange 不再把消息交给每一个绑定的队列，而是根据消息的 Routing Key 进行判断，只有队列的Routingkey 与消息的 Routing key 完全一致，才会接收到消息</p><p><img src="http://qnimg.gisfsde.com/image-20210401192132396.png" alt="image-20210401192132396" loading="lazy"></p><p>lP：生产者，向 Exchange 发送消息，发送消息时，会指定一个routing key lX：Exchange（交换机），接收生产者的消息，然后把消息递交给与 routing key 完全匹配的队列 lC1：消费者，其所在队列指定了需要 routing key 为 error 的消息 lC2：消费者，其所在队列指定了需要 routing key 为 info、error、warning 的消息 <strong>Routing</strong> 模式要求队列在绑定交换机时要指定 <strong>routing key</strong>，消息会转发到符合 routing key 的队列</p><h2 id="topics通配符工作模式" tabindex="-1"><a class="header-anchor" href="#topics通配符工作模式" aria-hidden="true">#</a> Topics通配符工作模式</h2><p><strong>模式说明：给姓李的人类棉花糖，姓梁的人类鸡屎麻糖</strong>【TOPIC】</p><p><code>Topic</code>类型与<code>Direct</code>相比，都是可以根据<code>RoutingKey</code>把消息路由到不同的队列。只不过<code>Topic</code>类型<code>Exchange</code>可以让队列在绑定<code>Routing key</code> 的时候<strong>使用通配符</strong>！</p><p><code>Routingkey</code> 一般都是有一个或多个单词组成，多个单词之间以”.”分割，例如： <code>item.insert</code></p><p>通配符规则：</p><p><code>#</code>：匹配一个或多个词</p><p><code>*</code>：匹配不多不少恰好1个词</p><p>举例：</p><p><code>item.#</code>：能够匹配<code>item.insert.abc</code> 或者 <code>item.insert</code></p><p><code>item.*</code>：只能匹配<code>item.insert</code></p><p><img src="http://qnimg.gisfsde.com/work/image-20210721141208986.png" alt="image-20210721141208986" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20210721141238548.png" alt="image-20210721141238548" loading="lazy"></p><p>图解：</p><ul><li>红色Queue：绑定的是<code>usa.#</code> ，因此凡是以 <code>usa.</code>开头的<code>routing key</code> 都会被匹配到</li><li>黄色Queue：绑定的是<code>#.news</code> ，因此凡是以 <code>.news</code>结尾的 <code>routing key</code> 都会被匹配</li></ul><h1 id="spring-rabbitmq" tabindex="-1"><a class="header-anchor" href="#spring-rabbitmq" aria-hidden="true">#</a> Spring-RabbitMQ</h1><p>详情见代码</p><h1 id="springboot-rabbitmq" tabindex="-1"><a class="header-anchor" href="#springboot-rabbitmq" aria-hidden="true">#</a> SpringBoot-RabbitMQ</h1><img src="http://qnimg.gisfsde.com/work/image-20210721183903514.png" alt="image-20210721183903514" style="zoom:67%;"><img src="http://qnimg.gisfsde.com/work/image-20210721183929668.png" alt="image-20210721183929668" style="zoom:67%;"><h1 id="rabbitmq高级特性" tabindex="-1"><a class="header-anchor" href="#rabbitmq高级特性" aria-hidden="true">#</a> RabbitMQ高级特性</h1><blockquote><p>发、收、限、时、达、</p></blockquote><h2 id="_1-1消息可靠投递" tabindex="-1"><a class="header-anchor" href="#_1-1消息可靠投递" aria-hidden="true">#</a> 1.1消息可靠投递</h2><p><strong>【寄的糖你收到了吗】</strong></p><p>confirm确认模式 【消息从 <mark>producer</mark> 到 <strong>exchange</strong> <strong>无论如何</strong>会返回一个confirmCallback】</p><p>return退回模式 【消息从producer到 <strong>queue</strong> <strong>失败</strong>则会返回一个returnCallback】</p><p>rabbitmq整各消息投递的路径为：</p><p>profucer-----》rabbitmq broker----》exchange-----》queue----》consumer</p><p>设置ConnectionFactory的publisher-confirm=&quot;true&quot; 开启确认模式</p><p>使用rabbitTemplate.setConfirmCallback设置回调函数。当消息发送到exchange后回调confirm方法。在方法中判断true，则发送成功，反之失败，需要处理</p><p>设置ConnectionFactory的publisher-returns=&quot;true&quot; 开启退回模式</p><p>使用rabbitTemplate.setReturnCallback设置回调函数。当消息从exchange路由到queue失败后，如果设置了rabbitTemplate.setMandatory(true)参数，则会将消息退回给producer。并执行回调函数returnedMessage。</p><p>在RabbitMQ中也提供了事物机制，但是性能较差。</p><h2 id="_1-2consumer-ack" tabindex="-1"><a class="header-anchor" href="#_1-2consumer-ack" aria-hidden="true">#</a> 1.2Consumer ACK</h2><p><strong>【收到糖给你怎么回复】</strong></p><p>ack指acknowledge，确认。表示<strong>消费端收到消息后的确认方式</strong></p><p>三种确认方式：</p><p>​ 自动确认：acknowledge=&quot;none&quot;【业务出问题也会回复收到】</p><p>​ 手动确认：acknowledge=&quot;manual&quot;【等业务处理没问题后回复收到，有问题可处理】</p><p>​ 根据异常情况确认：acknowledge=&quot;auto&quot;</p><p>​ 自动确认消息被consumer接收到，则自动确认，并将响应message从缓存中移除，实际业务中小细节受到，业务出现异常，那么消息会丢失，如果是设置的手动确认方式，则需要业务处理成功后，调用<strong>channel.basicAck(),手动签收</strong>，如果出现异常，则调用<strong>channel.basicNack（）方法，让其自动重发消息</strong>。</p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token operator">*</span>  <span class="token number">1.</span> 设置手动签收。acknowledge<span class="token operator">=</span><span class="token string">&quot;manual&quot;</span>
<span class="token operator">*</span>  <span class="token number">2.</span> 让监听器类实现<span class="token class-name">ChannelAwareMessageListener</span>接口
<span class="token operator">*</span>  <span class="token number">3.</span> 如果消息成功处理，则调用channel的 <span class="token function">basicAck</span><span class="token punctuation">(</span><span class="token punctuation">)</span>签收
<span class="token operator">*</span>  <span class="token number">4.</span> 如果消息处理失败，则调用channel的<span class="token function">basicNack</span><span class="token punctuation">(</span><span class="token punctuation">)</span>拒绝签收，broker重新发送给consumer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-3消费端限流qos" tabindex="-1"><a class="header-anchor" href="#_1-3消费端限流qos" aria-hidden="true">#</a> 1.3消费端限流qos</h2><p><strong>【我每次只收1000颗糖】</strong></p><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token number">1.</span> 确保ack机制为手动确认。
<span class="token number">2.</span> listener<span class="token operator">-</span>container配置属性 perfetch <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>表示消费端每次从mq拉去一条消息来消费，直到手动确认消费完毕后，才会继续拉去下一条消息。
 
    \<span class="token operator">&lt;</span>rabbit<span class="token operator">:</span>listener<span class="token operator">-</span>container connection<span class="token operator">-</span>factory<span class="token operator">=</span><span class="token string">&quot;connectionFactory&quot;</span> acknowledge<span class="token operator">=</span><span class="token string">&quot;manual&quot;</span> prefetch<span class="token operator">=</span><span class="token string">&quot;1&quot;</span> <span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><img src="http://qnimg.gisfsde.com/image-20210414191501891.png" alt="image-20210414191501891" style="zoom:50%;"><h2 id="_1-4ttl" tabindex="-1"><a class="header-anchor" href="#_1-4ttl" aria-hidden="true">#</a> 1.4TTL</h2><p><strong>【糖放快递站十年就不能吃了】</strong></p><img src="http://qnimg.gisfsde.com/image-20210414191545297.png" alt="image-20210414191545297" style="zoom:50%;"><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* TTL:过期时间
*  1. 队列统一过期
*  2. 消息单独过期
*
* 如果设置了消息的过期时间，也设置了队列的过期时间，它以时间短的为准。
* 队列过期后，会将队列所有消息全部移除。
* 消息过期后，只有消息在队列顶端，才会判断其是否过期(移除掉)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-5死信队列" tabindex="-1"><a class="header-anchor" href="#_1-5死信队列" aria-hidden="true">#</a> 1.5死信队列</h2><p><strong>【不好吃的糖都给其他人吧】</strong></p><p>死信队列（<strong>DXL</strong>）。Dead Letter Exchange（死信队列交换机），当消息成为Dead Message后，可以被重新发送到另外一个交换机，这个交换机就是DEX。死信队列和死信交换机和普通的没有区别。</p><img src="http://qnimg.gisfsde.com/image-20210415191209915.png" alt="image-20210415191209915" style="zoom:67%;"><p><strong>问题：</strong></p><h3 id="_1-消息什么时候成为死信" tabindex="-1"><a class="header-anchor" href="#_1-消息什么时候成为死信" aria-hidden="true">#</a> 1.消息什么时候成为死信?</h3><p><strong>消息成为死信的三种情况：</strong></p><p>1.队列消息的长度达到限制</p><p>2.消费者拒收消费消息，basicNack/basicReject，并且不把消息重新放入原目标队列，requeue=false</p><p>3.原队列存在消息过期设置，消息达超时间未被消费；</p><h3 id="_2-队列如何与dex绑定" tabindex="-1"><a class="header-anchor" href="#_2-队列如何与dex绑定" aria-hidden="true">#</a> 2.队列如何与DEX绑定？</h3><img src="http://qnimg.gisfsde.com/image-20210415191701024.png" alt="image-20210415191701024" style="zoom:67%;"><h2 id="_1-6延迟队列" tabindex="-1"><a class="header-anchor" href="#_1-6延迟队列" aria-hidden="true">#</a> 1.6延迟队列</h2><p><strong>【我妈叫我三十分钟后才能吃这颗糖】</strong></p><p>消息进入队列后不会被立即被消费，只有达到指定时间后，才会被消费。</p><p>需求：</p><p>​ 1.下单后三十分钟未支付，取消订单，回滚库存</p><p>​ 2.新用户注册7天后，发送短信问候</p><p>实现方式</p><p>​ 1.定时器（有延迟，对数据库有影响）</p><p>​ 2.延迟队列（MQ中未直接提供延迟队列，<strong>DLX+TTL实现</strong>）</p><img src="http://qnimg.gisfsde.com/image-20210416185944853.png" alt="image-20210416185944853" style="zoom:67%;"><h2 id="_1-7日志与监控" tabindex="-1"><a class="header-anchor" href="#_1-7日志与监控" aria-hidden="true">#</a> 1.7日志与监控</h2><p>RabbitMQ默认日志存放路径： /var/log/rabbitmq/rabbit@xxx.log</p><p>日志包含了RabbitMQ的版本号、Erlang的版本号、RabbitMQ服务节点名称、cookie的hash值、RabbitMQ配置文件地址、内存限制、磁盘限制、默认账户guest的创建以及权限配置等等。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>查看队列
# rabbitmqctl list_queues
查看exchanges
# rabbitmqctl list_exchanges
查看用户
# rabbitmqctl list_users
查看连接
# rabbitmqctl list_connections
查看消费者信息
# rabbitmqctl list_consumers
查看环境变量
# rabbitmqctl environment
查看未被确认的队列
# rabbitmqctl list_queues  name messages_unacknowledged
查看单个队列的内存使用
# rabbitmqctl list_queues name memory
查看准备就绪的队列
# rabbitmqctl list_queues name messages_ready
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_1-8-消息追踪" tabindex="-1"><a class="header-anchor" href="#_1-8-消息追踪" aria-hidden="true">#</a> 1.8 消息追踪</h2><p>在使用任何消息中间件的过程中，难免会出现某条消息异常丢失的情况。对于RabbitMQ而言，可能是因为生产者或消费者与RabbitMQ断开了连接，而它们与RabbitMQ又采用了不同的确认机制；也有可能是因为交换器与队列之间不同的转发策略；甚至是交换器并没有与任何队列进行绑定，生产者又不感知或者没有采取相应的措施；另外RabbitMQ本身的集群策略也可能导致消息的丢失。这个时候就需要有一个较好的机制跟踪记录消息的投递过程，以此协助开发和运维人员进行问题的定位。</p><p>在RabbitMQ中可以使用Firehose和rabbitmq_tracing插件功能来实现消息追踪。</p><p><strong>Firehose</strong></p><p>firehose的机制是将生产者投递给rabbitmq的消息，rabbitmq投递给消费者的消息按照指定的格式发送到默认的exchange上。这个默认的exchange的名称为amq.rabbitmq.trace，它是一个topic类型的exchange。发送到这个exchange上的消息的routing key为 publish.exchangename 和 deliver.queuename。其中exchangename和queuename为实际exchange和queue的名称，分别对应生产者投递到exchange的消息，和消费者从queue上获取的消息。</p><p>注意：打开 trace 会影响消息写入功能，适当打开后请关闭。</p><p>rabbitmqctl trace_on：开启Firehose命令</p><p>rabbitmqctl trace_off：关闭Firehose命令</p><p><strong>rabbitmq_tracing</strong></p><p>rabbitmq_tracing和Firehose在实现上如出一辙，只不过rabbitmq_tracing的方式比Firehose多了一层GUI的包装，更容易使用和管理。</p><p>启用插件：rabbitmq-plugins enable rabbitmq_tracing</p><h1 id="应用问题" tabindex="-1"><a class="header-anchor" href="#应用问题" aria-hidden="true">#</a> 应用问题</h1><h2 id="_1-消息可靠性保障-消息补偿" tabindex="-1"><a class="header-anchor" href="#_1-消息可靠性保障-消息补偿" aria-hidden="true">#</a> 1.消息可靠性保障------<strong>消息补偿</strong></h2><p><img src="http://qnimg.gisfsde.com/work/image-20210722141737848.png" alt="image-20210722141737848" loading="lazy"></p><h2 id="_2-消息幂等性保障-乐观锁机制" tabindex="-1"><a class="header-anchor" href="#_2-消息幂等性保障-乐观锁机制" aria-hidden="true">#</a> 2.消息幂等性保障-----<strong>乐观锁机制</strong></h2><p>幂等性指一次和多次请求某一个资源，对于资源本身应该具有同样的结果。也就是说，其任意多次执行对资源本身所产生的影响均与一次执行的影响相同。</p><p>在MQ中指，消费多条相同的消息，得到与消费该消息一次相同的结果。</p><p><img src="http://qnimg.gisfsde.com/work/image-20210722141922740.png" alt="image-20210722141922740" loading="lazy"></p><h2 id="_3-rabbitmq集群搭建" tabindex="-1"><a class="header-anchor" href="#_3-rabbitmq集群搭建" aria-hidden="true">#</a> 3.RabbitMQ集群搭建</h2><p>摘要：实际生产应用中都会采用消息队列的集群方案，如果选择RabbitMQ那么有必要了解下它的集群方案原理</p><p>一般来说，如果只是为了学习RabbitMQ或者验证业务工程的正确性那么在本地环境或者测试环境上使用其单实例部署就可以了，但是出于MQ中间件本身的可靠性、并发性、吞吐量和消息堆积能力等问题的考虑，在生产环境上一般都会考虑使用RabbitMQ的集群方案。</p><h3 id="_3-1-集群方案的原理" tabindex="-1"><a class="header-anchor" href="#_3-1-集群方案的原理" aria-hidden="true">#</a> 3.1 集群方案的原理</h3><p>RabbitMQ这款消息队列中间件产品本身是基于Erlang编写，Erlang语言天生具备分布式特性（通过同步Erlang集群各节点的magic cookie来实现）。因此，RabbitMQ天然支持Clustering。这使得RabbitMQ本身不需要像ActiveMQ、Kafka那样通过ZooKeeper分别来实现HA方案和保存集群的元数据。集群是保证可靠性的一种方式，同时可以通过水平扩展以达到增加消息吞吐量能力的目的。</p><p><img src="http://qnimg.gisfsde.com/work/image-20210722142109143.png" alt="image-20210722142109143" loading="lazy"></p><h3 id="_3-2-单机多实例部署" tabindex="-1"><a class="header-anchor" href="#_3-2-单机多实例部署" aria-hidden="true">#</a> 3.2 单机多实例部署</h3><p>由于某些因素的限制，有时候你不得不在一台机器上去搭建一个rabbitmq集群，这个有点类似zookeeper的单机版。真实生成环境还是要配成多机集群的。有关怎么配置多机集群的可以参考其他的资料，这里主要论述如何在单机中配置多个rabbitmq实例。</p><p>主要参考官方文档：<a href="https://www.rabbitmq.com/clustering.html" target="_blank" rel="noopener noreferrer">https://www.rabbitmq.com/clustering.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>首先确保RabbitMQ运行没有问题</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super ~]# rabbitmqctl status
Status of node rabbit@super ...
[{pid,10232},
 {running_applications,
     [{rabbitmq_management,&quot;RabbitMQ Management Console&quot;,&quot;3.6.5&quot;},
      {rabbitmq_web_dispatch,&quot;RabbitMQ Web Dispatcher&quot;,&quot;3.6.5&quot;},
      {webmachine,&quot;webmachine&quot;,&quot;1.10.3&quot;},
      {mochiweb,&quot;MochiMedia Web Server&quot;,&quot;2.13.1&quot;},
      {rabbitmq_management_agent,&quot;RabbitMQ Management Agent&quot;,&quot;3.6.5&quot;},
      {rabbit,&quot;RabbitMQ&quot;,&quot;3.6.5&quot;},
      {os_mon,&quot;CPO  CXC 138 46&quot;,&quot;2.4&quot;},
      {syntax_tools,&quot;Syntax tools&quot;,&quot;1.7&quot;},
      {inets,&quot;INETS  CXC 138 49&quot;,&quot;6.2&quot;},
      {amqp_client,&quot;RabbitMQ AMQP Client&quot;,&quot;3.6.5&quot;},
      {rabbit_common,[],&quot;3.6.5&quot;},
      {ssl,&quot;Erlang/OTP SSL application&quot;,&quot;7.3&quot;},
      {public_key,&quot;Public key infrastructure&quot;,&quot;1.1.1&quot;},
      {asn1,&quot;The Erlang ASN1 compiler version 4.0.2&quot;,&quot;4.0.2&quot;},
      {ranch,&quot;Socket acceptor pool for TCP protocols.&quot;,&quot;1.2.1&quot;},
      {mnesia,&quot;MNESIA  CXC 138 12&quot;,&quot;4.13.3&quot;},
      {compiler,&quot;ERTS  CXC 138 10&quot;,&quot;6.0.3&quot;},
      {crypto,&quot;CRYPTO&quot;,&quot;3.6.3&quot;},
      {xmerl,&quot;XML parser&quot;,&quot;1.3.10&quot;},
      {sasl,&quot;SASL  CXC 138 11&quot;,&quot;2.7&quot;},
      {stdlib,&quot;ERTS  CXC 138 10&quot;,&quot;2.8&quot;},
      {kernel,&quot;ERTS  CXC 138 10&quot;,&quot;4.2&quot;}]},
 {os,{unix,linux}},
 {erlang_version,
     &quot;Erlang/OTP 18 [erts-7.3] [source] [64-bit] [async-threads:64] [hipe] [kernel-poll:true]\n&quot;},
 {memory,
     [{total,56066752},
      {connection_readers,0},
      {connection_writers,0},
      {connection_channels,0},
      {connection_other,2680},
      {queue_procs,268248},
      {queue_slave_procs,0},
      {plugins,1131936},
      {other_proc,18144280},
      {mnesia,125304},
      {mgmt_db,921312},
      {msg_index,69440},
      {other_ets,1413664},
      {binary,755736},
      {code,27824046},
      {atom,1000601},
      {other_system,4409505}]},
 {alarms,[]},
 {listeners,[{clustering,25672,&quot;::&quot;},{amqp,5672,&quot;::&quot;}]},
 {vm_memory_high_watermark,0.4},
 {vm_memory_limit,411294105},
 {disk_free_limit,50000000},
 {disk_free,13270233088},
 {file_descriptors,
     [{total_limit,924},{total_used,6},{sockets_limit,829},{sockets_used,0}]},
 {processes,[{limit,1048576},{used,262}]},
 {run_queue,0},
 {uptime,43651},
 {kernel,{net_ticktime,60}}]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>停止rabbitmq服务</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super sbin]# service rabbitmq-server stop
Stopping rabbitmq-server: rabbitmq-server.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动第一个节点：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super sbin]# RABBITMQ_NODE_PORT=5673 RABBITMQ_NODENAME=rabbit1 rabbitmq-server start

              RabbitMQ 3.6.5. Copyright (C) 2007-2016 Pivotal Software, Inc.
  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
  ##  ##
  ##########  Logs: /var/log/rabbitmq/rabbit1.log
  ######  ##        /var/log/rabbitmq/rabbit1-sasl.log
  ##########
              Starting broker...
 completed with 6 plugins.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动第二个节点：</p><blockquote><p>web管理插件端口占用,所以还要指定其web插件占用的端口号。</p></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super ~]# RABBITMQ_NODE_PORT=5674 RABBITMQ_SERVER_START_ARGS=&quot;-rabbitmq_management listener [{port,15674}]&quot; RABBITMQ_NODENAME=rabbit2 rabbitmq-server start

              RabbitMQ 3.6.5. Copyright (C) 2007-2016 Pivotal Software, Inc.
  ##  ##      Licensed under the MPL.  See http://www.rabbitmq.com/
  ##  ##
  ##########  Logs: /var/log/rabbitmq/rabbit2.log
  ######  ##        /var/log/rabbitmq/rabbit2-sasl.log
  ##########
              Starting broker...
 completed with 6 plugins.

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结束命令：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>rabbitmqctl -n rabbit1 stop
rabbitmqctl -n rabbit2 stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>rabbit1操作作为主节点：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super ~]# rabbitmqctl -n rabbit1 stop_app  
Stopping node rabbit1@super ...
[root@super ~]# rabbitmqctl -n rabbit1 reset     
Resetting node rabbit1@super ...
[root@super ~]# rabbitmqctl -n rabbit1 start_app
Starting node rabbit1@super ...
[root@super ~]# 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>rabbit2操作为从节点：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super ~]# rabbitmqctl -n rabbit2 stop_app
Stopping node rabbit2@super ...
[root@super ~]# rabbitmqctl -n rabbit2 reset
Resetting node rabbit2@super ...
[root@super ~]# rabbitmqctl -n rabbit2 join_cluster rabbit1@&#39;super&#39; ###&#39;&#39;内是主机名换成自己的
Clustering node rabbit2@super with rabbit1@super ...
[root@super ~]# rabbitmqctl -n rabbit2 start_app
Starting node rabbit2@super ...

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看集群状态：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@super ~]# rabbitmqctl cluster_status -n rabbit1
Cluster status of node rabbit1@super ...
[{nodes,[{disc,[rabbit1@super,rabbit2@super]}]},
 {running_nodes,[rabbit2@super,rabbit1@super]},
 {cluster_name,\&lt;\&lt;&quot;rabbit1@super&quot;&gt;&gt;},
 {partitions,[]},
 {alarms,[{rabbit2@super,[]},{rabbit1@super,[]}]}]
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>web监控：</p><p><img src="http://qnimg.gisfsde.com/work/image-20210722142125178.png" alt="image-20210722142125178" loading="lazy"></p><h3 id="_3-3-集群管理" tabindex="-1"><a class="header-anchor" href="#_3-3-集群管理" aria-hidden="true">#</a> 3.3 集群管理</h3><p><strong>rabbitmqctl join_cluster {cluster_node} [–ram]</strong> 将节点加入指定集群中。在这个命令执行前需要停止RabbitMQ应用并重置节点。</p><p><strong>rabbitmqctl cluster_status</strong> 显示集群的状态。</p><p><strong>rabbitmqctl change_cluster_node_type {disc|ram}</strong> 修改集群节点的类型。在这个命令执行前需要停止RabbitMQ应用。</p><p><strong>rabbitmqctl forget_cluster_node [–offline]</strong> 将节点从集群中删除，允许离线执行。</p><p><strong>rabbitmqctl update_cluster_nodes {clusternode}</strong></p><p>在集群中的节点应用启动前咨询clusternode节点的最新信息，并更新相应的集群信息。这个和join_cluster不同，它不加入集群。考虑这样一种情况，节点A和节点B都在集群中，当节点A离线了，节点C又和节点B组成了一个集群，然后节点B又离开了集群，当A醒来的时候，它会尝试联系节点B，但是这样会失败，因为节点B已经不在集群中了。</p><p><strong>rabbitmqctl cancel_sync_queue [-p vhost] {queue}</strong> 取消队列queue同步镜像的操作。</p><p><strong>rabbitmqctl set_cluster_name {name}</strong> 设置集群名称。集群名称在客户端连接时会通报给客户端。Federation和Shovel插件也会有用到集群名称的地方。集群名称默认是集群中第一个节点的名称，通过这个命令可以重新设置。</p><h3 id="_3-4-rabbitmq镜像集群配置" tabindex="-1"><a class="header-anchor" href="#_3-4-rabbitmq镜像集群配置" aria-hidden="true">#</a> 3.4 RabbitMQ镜像集群配置</h3><blockquote><p>上面已经完成RabbitMQ默认集群模式，但并不保证队列的高可用性，尽管交换机、绑定这些可以复制到集群里的任何一个节点，但是队列内容不会复制。虽然该模式解决一项目组节点压力，但队列节点宕机直接导致该队列无法应用，只能等待重启，所以要想在队列节点宕机或故障也能正常应用，就要复制队列内容到集群里的每个节点，必须要创建镜像队列。</p><p>镜像队列是基于普通的集群模式的，然后再添加一些策略，所以你还是得先配置普通集群，然后才能设置镜像队列，我们就以上面的集群接着做。</p></blockquote><p><strong>设置的镜像队列可以通过开启的网页的管理端Admin-&gt;Policies，也可以通过命令。</strong></p><blockquote><p>rabbitmqctl set_policy my_ha &quot;^&quot; &#39;{&quot;ha-mode&quot;:&quot;all&quot;}&#39;</p></blockquote><p><img src="http://qnimg.gisfsde.com/work/image-20210722142138661.png" alt="image-20210722142138661" loading="lazy"></p><blockquote><ul><li>Name:策略名称</li><li>Pattern：匹配的规则，如果是匹配所有的队列，是^.</li><li>Definition:使用ha-mode模式中的all，也就是同步所有匹配的队列。问号链接帮助文档。</li></ul></blockquote><h3 id="_3-5-负载均衡-haproxy" tabindex="-1"><a class="header-anchor" href="#_3-5-负载均衡-haproxy" aria-hidden="true">#</a> 3.5 负载均衡-HAProxy</h3><p>HAProxy提供高可用性、负载均衡以及基于TCP和HTTP应用的代理，支持虚拟主机，它是免费、快速并且可靠的一种解决方案,包括Twitter，Reddit，StackOverflow，GitHub在内的多家知名互联网公司在使用。HAProxy实现了一种事件驱动、单一进程模型，此模型支持非常大的并发连接数。</p><h5 id="_3-5-1-安装haproxy" tabindex="-1"><a class="header-anchor" href="#_3-5-1-安装haproxy" aria-hidden="true">#</a> 3.5.1 安装HAProxy</h5><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>//下载依赖包
yum install gcc vim wget
//上传haproxy源码包
//解压
tar -zxvf haproxy-1.6.5.tar.gz -C /usr/local
//进入目录、进行编译、安装
cd /usr/local/haproxy-1.6.5
make TARGET=linux31 PREFIX=/usr/local/haproxy
make install PREFIX=/usr/local/haproxy
mkdir /etc/haproxy
//赋权
groupadd -r -g 149 haproxy
useradd -g haproxy -r -s /sbin/nologin -u 149 haproxy
//创建haproxy配置文件
mkdir /etc/haproxy
vim /etc/haproxy/haproxy.cfg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="_3-5-2-配置haproxy" tabindex="-1"><a class="header-anchor" href="#_3-5-2-配置haproxy" aria-hidden="true">#</a> 3.5.2 配置HAProxy</h5><p>配置文件路径：/etc/haproxy/haproxy.cfg</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#logging options
global
	log 127.0.0.1 local0 info
	maxconn 5120
	chroot /usr/local/haproxy
	uid 99
	gid 99
	daemon
	quiet
	nbproc 20
	pidfile /var/run/haproxy.pid

defaults
	log global
	
	mode tcp

	option tcplog
	option dontlognull
	retries 3
	option redispatch
	maxconn 2000
	contimeout 5s
   
     clitimeout 60s

     srvtimeout 15s	
#front-end IP for consumers and producters

listen rabbitmq_cluster
	bind 0.0.0.0:5672
	
	mode tcp
	#balance url_param userid
	#balance url_param session_id check_post 64
	#balance hdr(User-Agent)
	#balance hdr(host)
	#balance hdr(Host) use_domain_only
	#balance rdp-cookie
	#balance leastconn
	#balance source //ip
	
	balance roundrobin
	
        server node1 127.0.0.1:5673 check inter 5000 rise 2 fall 2
        server node2 127.0.0.1:5674 check inter 5000 rise 2 fall 2

listen stats
	bind 172.16.98.133:8100
	mode http
	option httplog
	stats enable
	stats uri /rabbitmq-stats
	stats refresh 5s
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>启动HAproxy负载</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/usr/local/haproxy/sbin/haproxy -f /etc/haproxy/haproxy.cfg
//查看haproxy进程状态
ps -ef | grep haproxy

访问如下地址对mq节点进行监控
http://172.16.98.133:8100/rabbitmq-stats
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>代码中访问mq集群地址，则变为访问haproxy地址:5672</p><blockquote><p><strong>参考文献</strong>：黑马视频相关笔记</p></blockquote></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/GISFSDE//edit/main/docs/posts/2021/RabbitMQ.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/6/14 14:23:19</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 714416426@qq.com">GISFSDE</span>,<!--]--><!--[--><span class="contributor" title="email: 714416426@qq.com">Passion</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/posts/2021/Dubbo.html" class="nav-link prev" aria-label="Dubbo"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><span class="icon iconfont icon-edit" style=""></span>Dubbo</div></a><a href="/posts/2021/Redis.html" class="nav-link next" aria-label="Redis"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">Redis<span class="icon iconfont icon-edit" style=""></span></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn">浙ICP备2022017274号</a></div><div class="copyright">Copyright © 2022 GIS-FSDE</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.95807bc9.js" defer></script>
  </body>
</html>
