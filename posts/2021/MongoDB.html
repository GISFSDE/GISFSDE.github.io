<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.48" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://www.gisfsde.com/posts/2021/MongoDB.html"><meta property="og:site_name" content="GIS-FSDE"><meta property="og:title" content="MongoDB"><meta property="og:type" content="article"><meta property="og:updated_time" content="2022-06-16T05:33:26.000Z"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="GIS-FSDE"><meta property="article:tag" content="MongoDB"><meta property="article:published_time" content="2022-06-06T00:00:00.000Z"><meta property="article:modified_time" content="2022-06-16T05:33:26.000Z"><link rel="stylesheet" href="//at.alicdn.com/t/font_2410206_mfj6e1vbwo.css"><title>MongoDB | GIS-FSDE</title><meta name="description" content="GISFSDE(GIS Full Stack Developer)--GIS开发、JAVA全栈开发">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d2025;
      }

      html,
      body {
        background-color: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.querySelector("html").setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="stylesheet" href="/assets/style.e1848475.css">
    <link rel="modulepreload" href="/assets/app.95807bc9.js"><link rel="modulepreload" href="/assets/MongoDB.html.28af2725.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper.21dcd24c.js"><link rel="modulepreload" href="/assets/MongoDB.html.52d4295b.js"><link rel="prefetch" href="/assets/home.html.0f7ff4b0.js"><link rel="prefetch" href="/assets/index.html.2dc22d8e.js"><link rel="prefetch" href="/assets/slide.html.6304f45a.js"><link rel="prefetch" href="/assets/index.html.285ebd50.js"><link rel="prefetch" href="/assets/index.html.a2f8d94a.js"><link rel="prefetch" href="/assets/album.html.6d56e046.js"><link rel="prefetch" href="/assets/Algorithm.html.8ccf3480.js"><link rel="prefetch" href="/assets/Architect.html.e7406c77.js"><link rel="prefetch" href="/assets/BMM.html.bb333e2f.js"><link rel="prefetch" href="/assets/BUG.html.cdaa63e0.js"><link rel="prefetch" href="/assets/CRUD.html.f2fca31e.js"><link rel="prefetch" href="/assets/DesignPatterns.html.59d81280.js"><link rel="prefetch" href="/assets/DevelopersFixComputer.html.c57fc4f8.js"><link rel="prefetch" href="/assets/Docker.html.ece2584a.js"><link rel="prefetch" href="/assets/Dubbo.html.ad651a24.js"><link rel="prefetch" href="/assets/EnglishDay.html.07db0c8f.js"><link rel="prefetch" href="/assets/Flash.html.b696aa49.js"><link rel="prefetch" href="/assets/FrontEnd.html.3e7c100c.js"><link rel="prefetch" href="/assets/GIS.html.37237efd.js"><link rel="prefetch" href="/assets/GuLimall.html.08153ac0.js"><link rel="prefetch" href="/assets/Health.html.ce887929.js"><link rel="prefetch" href="/assets/HowToLearn.html.2b9fdaf7.js"><link rel="prefetch" href="/assets/inconstruction.html.f392a14c.js"><link rel="prefetch" href="/assets/Interesting Programs.html.ef10e86f.js"><link rel="prefetch" href="/assets/InterviewQuestions.html.91c9e4ce.js"><link rel="prefetch" href="/assets/Java.html.faa2ffae.js"><link rel="prefetch" href="/assets/JAVAUse.html.bfbdc361.js"><link rel="prefetch" href="/assets/JVM.html.370135ab.js"><link rel="prefetch" href="/assets/Life.html.b483df11.js"><link rel="prefetch" href="/assets/Linux.html.6c84af87.js"><link rel="prefetch" href="/assets/Markdown.html.87d92193.js"><link rel="prefetch" href="/assets/Music.html.672ab2f3.js"><link rel="prefetch" href="/assets/MyBatis-Plus.html.561a2756.js"><link rel="prefetch" href="/assets/MyBatis.html.cff9e302.js"><link rel="prefetch" href="/assets/MYSQLOptimize.html.f64106bb.js"><link rel="prefetch" href="/assets/Network.html.c0b48f3e.js"><link rel="prefetch" href="/assets/Nginx.html.fafb3900.js"><link rel="prefetch" href="/assets/NO GAME NO LIFE.html.f23aa4fd.js"><link rel="prefetch" href="/assets/Office.html.8ec0cd91.js"><link rel="prefetch" href="/assets/Photography.html.145f958b.js"><link rel="prefetch" href="/assets/PM.html.6e9c10b8.js"><link rel="prefetch" href="/assets/PMThesisTemplate.html.b65e77cc.js"><link rel="prefetch" href="/assets/Python3.html.5a4e1d54.js"><link rel="prefetch" href="/assets/QuickSearch.html.1a024565.js"><link rel="prefetch" href="/assets/RabbitMQ.html.9efe14d2.js"><link rel="prefetch" href="/assets/Redis.html.cc779293.js"><link rel="prefetch" href="/assets/Resources.html.ffff7ce6.js"><link rel="prefetch" href="/assets/Software Engineer.html.f6146ac9.js"><link rel="prefetch" href="/assets/Spring.html.78aa30f0.js"><link rel="prefetch" href="/assets/SpringBoot.html.0184a75e.js"><link rel="prefetch" href="/assets/SpringCloud.html.7a46ffb6.js"><link rel="prefetch" href="/assets/SpringMVC.html.fdb8f282.js"><link rel="prefetch" href="/assets/Summarize.html.215d5fa1.js"><link rel="prefetch" href="/assets/template.html.2daa810f.js"><link rel="prefetch" href="/assets/TODO.html.9c833d9e.js"><link rel="prefetch" href="/assets/Tools.html.07bd8d46.js"><link rel="prefetch" href="/assets/VUEPressDemo.html.ae923a1c.js"><link rel="prefetch" href="/assets/We-Media.html.2bd84a8c.js"><link rel="prefetch" href="/assets/WMP.html.abb3fe3c.js"><link rel="prefetch" href="/assets/404.html.fa71a0c4.js"><link rel="prefetch" href="/assets/index.html.1630f6e5.js"><link rel="prefetch" href="/assets/index.html.7be2cbcf.js"><link rel="prefetch" href="/assets/index.html.d520d863.js"><link rel="prefetch" href="/assets/index.html.997a56db.js"><link rel="prefetch" href="/assets/index.html.1578e35b.js"><link rel="prefetch" href="/assets/index.html.28dfc5e2.js"><link rel="prefetch" href="/assets/index.html.161587db.js"><link rel="prefetch" href="/assets/index.html.6765a033.js"><link rel="prefetch" href="/assets/index.html.dd470a3f.js"><link rel="prefetch" href="/assets/index.html.251a540e.js"><link rel="prefetch" href="/assets/index.html.f7dfc136.js"><link rel="prefetch" href="/assets/index.html.b312a911.js"><link rel="prefetch" href="/assets/index.html.95d35a42.js"><link rel="prefetch" href="/assets/index.html.54859e7e.js"><link rel="prefetch" href="/assets/index.html.08c7d9e6.js"><link rel="prefetch" href="/assets/index.html.de996081.js"><link rel="prefetch" href="/assets/index.html.9b36ff1b.js"><link rel="prefetch" href="/assets/index.html.22a95d2b.js"><link rel="prefetch" href="/assets/index.html.04abf6c2.js"><link rel="prefetch" href="/assets/index.html.431cc37d.js"><link rel="prefetch" href="/assets/index.html.408cc4cf.js"><link rel="prefetch" href="/assets/index.html.0c1332da.js"><link rel="prefetch" href="/assets/index.html.e9d8b26b.js"><link rel="prefetch" href="/assets/index.html.f595a703.js"><link rel="prefetch" href="/assets/index.html.d5671b7a.js"><link rel="prefetch" href="/assets/index.html.f869349c.js"><link rel="prefetch" href="/assets/index.html.9890203e.js"><link rel="prefetch" href="/assets/index.html.05577cbd.js"><link rel="prefetch" href="/assets/index.html.416b5538.js"><link rel="prefetch" href="/assets/index.html.a05d621e.js"><link rel="prefetch" href="/assets/index.html.39c56009.js"><link rel="prefetch" href="/assets/index.html.9714ba94.js"><link rel="prefetch" href="/assets/index.html.d3c0412a.js"><link rel="prefetch" href="/assets/index.html.77f221ab.js"><link rel="prefetch" href="/assets/index.html.8a687bee.js"><link rel="prefetch" href="/assets/index.html.b37bd8ea.js"><link rel="prefetch" href="/assets/index.html.91773ac3.js"><link rel="prefetch" href="/assets/index.html.90420aed.js"><link rel="prefetch" href="/assets/index.html.2052a1a7.js"><link rel="prefetch" href="/assets/index.html.da862e2b.js"><link rel="prefetch" href="/assets/index.html.cfe4f3a2.js"><link rel="prefetch" href="/assets/index.html.982e2d64.js"><link rel="prefetch" href="/assets/index.html.541f8d65.js"><link rel="prefetch" href="/assets/index.html.db8e734b.js"><link rel="prefetch" href="/assets/index.html.a342b16d.js"><link rel="prefetch" href="/assets/index.html.ad06da2c.js"><link rel="prefetch" href="/assets/index.html.c69b413f.js"><link rel="prefetch" href="/assets/index.html.7d22a5e7.js"><link rel="prefetch" href="/assets/index.html.deaad297.js"><link rel="prefetch" href="/assets/index.html.54f914ff.js"><link rel="prefetch" href="/assets/index.html.b3ccc077.js"><link rel="prefetch" href="/assets/index.html.b540f689.js"><link rel="prefetch" href="/assets/index.html.410d1f26.js"><link rel="prefetch" href="/assets/index.html.44855d58.js"><link rel="prefetch" href="/assets/index.html.deba3e6d.js"><link rel="prefetch" href="/assets/index.html.3ae4887f.js"><link rel="prefetch" href="/assets/index.html.d058367f.js"><link rel="prefetch" href="/assets/index.html.512cc1f3.js"><link rel="prefetch" href="/assets/index.html.afd427e3.js"><link rel="prefetch" href="/assets/index.html.9d3f4b54.js"><link rel="prefetch" href="/assets/index.html.83f4f0cb.js"><link rel="prefetch" href="/assets/index.html.5e046a4f.js"><link rel="prefetch" href="/assets/index.html.746e9de3.js"><link rel="prefetch" href="/assets/index.html.a846836d.js"><link rel="prefetch" href="/assets/index.html.f3f1ba1f.js"><link rel="prefetch" href="/assets/index.html.87303c77.js"><link rel="prefetch" href="/assets/index.html.183c2250.js"><link rel="prefetch" href="/assets/index.html.ca1fc4e9.js"><link rel="prefetch" href="/assets/index.html.93c75a42.js"><link rel="prefetch" href="/assets/index.html.f78010c6.js"><link rel="prefetch" href="/assets/index.html.d5826cb7.js"><link rel="prefetch" href="/assets/index.html.9ea1953d.js"><link rel="prefetch" href="/assets/index.html.25f646f2.js"><link rel="prefetch" href="/assets/index.html.2d462000.js"><link rel="prefetch" href="/assets/index.html.ead2dad1.js"><link rel="prefetch" href="/assets/index.html.6558810c.js"><link rel="prefetch" href="/assets/index.html.fa6b5daa.js"><link rel="prefetch" href="/assets/index.html.ec7073b6.js"><link rel="prefetch" href="/assets/index.html.31694b75.js"><link rel="prefetch" href="/assets/index.html.77a697ab.js"><link rel="prefetch" href="/assets/index.html.7957309e.js"><link rel="prefetch" href="/assets/index.html.4e4af2a8.js"><link rel="prefetch" href="/assets/index.html.7bf20406.js"><link rel="prefetch" href="/assets/index.html.368b7137.js"><link rel="prefetch" href="/assets/index.html.6df77643.js"><link rel="prefetch" href="/assets/index.html.0314e6b9.js"><link rel="prefetch" href="/assets/index.html.1efd06b8.js"><link rel="prefetch" href="/assets/index.html.2c069c37.js"><link rel="prefetch" href="/assets/index.html.9dc9018a.js"><link rel="prefetch" href="/assets/index.html.5dcd9175.js"><link rel="prefetch" href="/assets/index.html.02fb9c99.js"><link rel="prefetch" href="/assets/index.html.98944189.js"><link rel="prefetch" href="/assets/index.html.b38a46d3.js"><link rel="prefetch" href="/assets/index.html.e1e49e1b.js"><link rel="prefetch" href="/assets/index.html.5496c724.js"><link rel="prefetch" href="/assets/index.html.b1d14c9a.js"><link rel="prefetch" href="/assets/index.html.ba98f040.js"><link rel="prefetch" href="/assets/index.html.6d329d22.js"><link rel="prefetch" href="/assets/index.html.1c621e4d.js"><link rel="prefetch" href="/assets/index.html.a57a0f49.js"><link rel="prefetch" href="/assets/index.html.a9f8fd70.js"><link rel="prefetch" href="/assets/index.html.d625e702.js"><link rel="prefetch" href="/assets/index.html.18605766.js"><link rel="prefetch" href="/assets/index.html.e79202e4.js"><link rel="prefetch" href="/assets/index.html.eff8d844.js"><link rel="prefetch" href="/assets/index.html.631c9d0d.js"><link rel="prefetch" href="/assets/index.html.c0a6c949.js"><link rel="prefetch" href="/assets/index.html.cf18bd5e.js"><link rel="prefetch" href="/assets/index.html.710cb22b.js"><link rel="prefetch" href="/assets/index.html.92f4a3a9.js"><link rel="prefetch" href="/assets/index.html.8640b364.js"><link rel="prefetch" href="/assets/home.html.085b0061.js"><link rel="prefetch" href="/assets/index.html.9f00494e.js"><link rel="prefetch" href="/assets/slide.html.3e1f3c6e.js"><link rel="prefetch" href="/assets/index.html.a1e90d67.js"><link rel="prefetch" href="/assets/index.html.27f93604.js"><link rel="prefetch" href="/assets/album.html.2eab66b2.js"><link rel="prefetch" href="/assets/Algorithm.html.6291a6fa.js"><link rel="prefetch" href="/assets/Architect.html.b9a5a147.js"><link rel="prefetch" href="/assets/BMM.html.483bc165.js"><link rel="prefetch" href="/assets/BUG.html.858b6654.js"><link rel="prefetch" href="/assets/CRUD.html.8827ec7a.js"><link rel="prefetch" href="/assets/DesignPatterns.html.99369aa8.js"><link rel="prefetch" href="/assets/DevelopersFixComputer.html.a02a4070.js"><link rel="prefetch" href="/assets/Docker.html.9d8d4fd2.js"><link rel="prefetch" href="/assets/Dubbo.html.86c2078a.js"><link rel="prefetch" href="/assets/EnglishDay.html.9ec8973c.js"><link rel="prefetch" href="/assets/Flash.html.0a27743b.js"><link rel="prefetch" href="/assets/FrontEnd.html.0afeb0fe.js"><link rel="prefetch" href="/assets/GIS.html.054c51a3.js"><link rel="prefetch" href="/assets/GuLimall.html.64b3e565.js"><link rel="prefetch" href="/assets/Health.html.82ebda53.js"><link rel="prefetch" href="/assets/HowToLearn.html.3b0c6f76.js"><link rel="prefetch" href="/assets/inconstruction.html.f8bd01e8.js"><link rel="prefetch" href="/assets/Interesting Programs.html.1643ca40.js"><link rel="prefetch" href="/assets/InterviewQuestions.html.3210a104.js"><link rel="prefetch" href="/assets/Java.html.ff8cb3e2.js"><link rel="prefetch" href="/assets/JAVAUse.html.07194d8f.js"><link rel="prefetch" href="/assets/JVM.html.dda37b1d.js"><link rel="prefetch" href="/assets/Life.html.1378fd20.js"><link rel="prefetch" href="/assets/Linux.html.06903bcf.js"><link rel="prefetch" href="/assets/Markdown.html.6b27ff2b.js"><link rel="prefetch" href="/assets/Music.html.902fc704.js"><link rel="prefetch" href="/assets/MyBatis-Plus.html.7671635f.js"><link rel="prefetch" href="/assets/MyBatis.html.353b8c6a.js"><link rel="prefetch" href="/assets/MYSQLOptimize.html.edd0c14b.js"><link rel="prefetch" href="/assets/Network.html.8a7c6580.js"><link rel="prefetch" href="/assets/Nginx.html.d67929a0.js"><link rel="prefetch" href="/assets/NO GAME NO LIFE.html.0fcacda1.js"><link rel="prefetch" href="/assets/Office.html.5b5f5398.js"><link rel="prefetch" href="/assets/Photography.html.facbe0f1.js"><link rel="prefetch" href="/assets/PM.html.3e41af7c.js"><link rel="prefetch" href="/assets/PMThesisTemplate.html.d7f6dddb.js"><link rel="prefetch" href="/assets/Python3.html.bac6602a.js"><link rel="prefetch" href="/assets/QuickSearch.html.03d254cc.js"><link rel="prefetch" href="/assets/RabbitMQ.html.c9a8b391.js"><link rel="prefetch" href="/assets/Redis.html.d288ef8b.js"><link rel="prefetch" href="/assets/Resources.html.944ad882.js"><link rel="prefetch" href="/assets/Software Engineer.html.52f4d837.js"><link rel="prefetch" href="/assets/Spring.html.f733fc9a.js"><link rel="prefetch" href="/assets/SpringBoot.html.b777e587.js"><link rel="prefetch" href="/assets/SpringCloud.html.bf44609c.js"><link rel="prefetch" href="/assets/SpringMVC.html.c06af361.js"><link rel="prefetch" href="/assets/Summarize.html.a8269321.js"><link rel="prefetch" href="/assets/template.html.3529b9a2.js"><link rel="prefetch" href="/assets/TODO.html.d2fde38f.js"><link rel="prefetch" href="/assets/Tools.html.8d6263f4.js"><link rel="prefetch" href="/assets/VUEPressDemo.html.430acce9.js"><link rel="prefetch" href="/assets/We-Media.html.172dd9bd.js"><link rel="prefetch" href="/assets/WMP.html.858aabc5.js"><link rel="prefetch" href="/assets/404.html.c2e39eca.js"><link rel="prefetch" href="/assets/index.html.36fc8602.js"><link rel="prefetch" href="/assets/index.html.74a70eb4.js"><link rel="prefetch" href="/assets/index.html.028b6439.js"><link rel="prefetch" href="/assets/index.html.e27284e0.js"><link rel="prefetch" href="/assets/index.html.8f0f7f95.js"><link rel="prefetch" href="/assets/index.html.7ccbec73.js"><link rel="prefetch" href="/assets/index.html.072384b3.js"><link rel="prefetch" href="/assets/index.html.365c6e0f.js"><link rel="prefetch" href="/assets/index.html.67b47778.js"><link rel="prefetch" href="/assets/index.html.ba9a304b.js"><link rel="prefetch" href="/assets/index.html.9376ec99.js"><link rel="prefetch" href="/assets/index.html.c3501038.js"><link rel="prefetch" href="/assets/index.html.3e656c79.js"><link rel="prefetch" href="/assets/index.html.01e129a8.js"><link rel="prefetch" href="/assets/index.html.3358a380.js"><link rel="prefetch" href="/assets/index.html.e32444bc.js"><link rel="prefetch" href="/assets/index.html.2a115ca5.js"><link rel="prefetch" href="/assets/index.html.9fe62f96.js"><link rel="prefetch" href="/assets/index.html.297e00a4.js"><link rel="prefetch" href="/assets/index.html.14056e8c.js"><link rel="prefetch" href="/assets/index.html.50708293.js"><link rel="prefetch" href="/assets/index.html.b8b4c96c.js"><link rel="prefetch" href="/assets/index.html.837973f9.js"><link rel="prefetch" href="/assets/index.html.34423c8b.js"><link rel="prefetch" href="/assets/index.html.3ba8ac10.js"><link rel="prefetch" href="/assets/index.html.564f01b9.js"><link rel="prefetch" href="/assets/index.html.369bc715.js"><link rel="prefetch" href="/assets/index.html.67325de7.js"><link rel="prefetch" href="/assets/index.html.de6c8cff.js"><link rel="prefetch" href="/assets/index.html.a4caab71.js"><link rel="prefetch" href="/assets/index.html.e1acbec4.js"><link rel="prefetch" href="/assets/index.html.51163e2a.js"><link rel="prefetch" href="/assets/index.html.bddab55e.js"><link rel="prefetch" href="/assets/index.html.ba8fa283.js"><link rel="prefetch" href="/assets/index.html.0971837d.js"><link rel="prefetch" href="/assets/index.html.8b1a6a5d.js"><link rel="prefetch" href="/assets/index.html.e6e010d3.js"><link rel="prefetch" href="/assets/index.html.f472be4c.js"><link rel="prefetch" href="/assets/index.html.8e9f2ae3.js"><link rel="prefetch" href="/assets/index.html.95d046f7.js"><link rel="prefetch" href="/assets/index.html.b26db191.js"><link rel="prefetch" href="/assets/index.html.bffa044a.js"><link rel="prefetch" href="/assets/index.html.e2734a54.js"><link rel="prefetch" href="/assets/index.html.d97c08e4.js"><link rel="prefetch" href="/assets/index.html.b1be3ee9.js"><link rel="prefetch" href="/assets/index.html.22ec64df.js"><link rel="prefetch" href="/assets/index.html.42cb4f2d.js"><link rel="prefetch" href="/assets/index.html.018d6f57.js"><link rel="prefetch" href="/assets/index.html.e49bd31e.js"><link rel="prefetch" href="/assets/index.html.ec2cdda2.js"><link rel="prefetch" href="/assets/index.html.10a6845b.js"><link rel="prefetch" href="/assets/index.html.44c744ac.js"><link rel="prefetch" href="/assets/index.html.69a9c490.js"><link rel="prefetch" href="/assets/index.html.a39e4853.js"><link rel="prefetch" href="/assets/index.html.2afb19ff.js"><link rel="prefetch" href="/assets/index.html.eb7ae4bc.js"><link rel="prefetch" href="/assets/index.html.f5b3cb8d.js"><link rel="prefetch" href="/assets/index.html.0d9667bb.js"><link rel="prefetch" href="/assets/index.html.7ab1509e.js"><link rel="prefetch" href="/assets/index.html.f175ae9a.js"><link rel="prefetch" href="/assets/index.html.4d0d7fe6.js"><link rel="prefetch" href="/assets/index.html.2b699849.js"><link rel="prefetch" href="/assets/index.html.e9a4f2d3.js"><link rel="prefetch" href="/assets/index.html.e264b133.js"><link rel="prefetch" href="/assets/index.html.8fc763eb.js"><link rel="prefetch" href="/assets/index.html.93600e0e.js"><link rel="prefetch" href="/assets/index.html.ee8a9b61.js"><link rel="prefetch" href="/assets/index.html.9e4843fb.js"><link rel="prefetch" href="/assets/index.html.f346ef18.js"><link rel="prefetch" href="/assets/index.html.5e9b7b4f.js"><link rel="prefetch" href="/assets/index.html.eee10b16.js"><link rel="prefetch" href="/assets/index.html.5d647bf9.js"><link rel="prefetch" href="/assets/index.html.9b602c32.js"><link rel="prefetch" href="/assets/index.html.a94ae221.js"><link rel="prefetch" href="/assets/index.html.2a233b5d.js"><link rel="prefetch" href="/assets/index.html.2c8427e4.js"><link rel="prefetch" href="/assets/index.html.534ec82e.js"><link rel="prefetch" href="/assets/index.html.4e69cca1.js"><link rel="prefetch" href="/assets/index.html.a14a9bba.js"><link rel="prefetch" href="/assets/index.html.7fb7a2f4.js"><link rel="prefetch" href="/assets/index.html.43c805f3.js"><link rel="prefetch" href="/assets/index.html.e9d79eb5.js"><link rel="prefetch" href="/assets/index.html.b63bb5d6.js"><link rel="prefetch" href="/assets/index.html.224ae436.js"><link rel="prefetch" href="/assets/index.html.81690f21.js"><link rel="prefetch" href="/assets/index.html.9970c522.js"><link rel="prefetch" href="/assets/index.html.99d2776a.js"><link rel="prefetch" href="/assets/index.html.dee3660a.js"><link rel="prefetch" href="/assets/index.html.577aef86.js"><link rel="prefetch" href="/assets/index.html.a8d91138.js"><link rel="prefetch" href="/assets/index.html.22b06a3f.js"><link rel="prefetch" href="/assets/index.html.ea3f610f.js"><link rel="prefetch" href="/assets/index.html.ae49d0e1.js"><link rel="prefetch" href="/assets/index.html.a23f246b.js"><link rel="prefetch" href="/assets/index.html.835932b4.js"><link rel="prefetch" href="/assets/index.html.c2ecfbdd.js"><link rel="prefetch" href="/assets/index.html.d0b2e548.js"><link rel="prefetch" href="/assets/index.html.5a459a11.js"><link rel="prefetch" href="/assets/index.html.a7512111.js"><link rel="prefetch" href="/assets/index.html.2eaf85f7.js"><link rel="prefetch" href="/assets/index.html.db10f6d5.js"><link rel="prefetch" href="/assets/index.html.cd23bae0.js"><link rel="prefetch" href="/assets/index.html.02a889b0.js"><link rel="prefetch" href="/assets/index.html.ee924163.js"><link rel="prefetch" href="/assets/index.html.273e9b37.js"><link rel="prefetch" href="/assets/index.html.f20a71e3.js"><link rel="prefetch" href="/assets/index.html.93640b13.js"><link rel="prefetch" href="/assets/index.html.a1f6c1b7.js"><link rel="prefetch" href="/assets/index.html.34a5a00a.js"><link rel="prefetch" href="/assets/index.html.8cbd93a0.js"><link rel="prefetch" href="/assets/index.html.509fe415.js"><link rel="prefetch" href="/assets/404.137bcafd.js"><link rel="prefetch" href="/assets/Layout.1260b9a8.js"><link rel="prefetch" href="/assets/Slide.4e8af6f2.js"><link rel="prefetch" href="/assets/Blog.86f5f49b.js"><link rel="prefetch" href="/assets/giscus.es.44628f1d.js"><link rel="prefetch" href="/assets/auto.esm.52abc6cc.js"><link rel="prefetch" href="/assets/index.147398ee.js"><link rel="prefetch" href="/assets/index.e1c5a3de.js"><link rel="prefetch" href="/assets/mermaid.esm.min.e741c6cd.js"><link rel="prefetch" href="/assets/highlight.esm.9b852bc5.js"><link rel="prefetch" href="/assets/markdown.esm.77e8db25.js"><link rel="prefetch" href="/assets/math.esm.cb9d4be3.js"><link rel="prefetch" href="/assets/notes.esm.62c5f19d.js"><link rel="prefetch" href="/assets/reveal.esm.41ec5d7f.js"><link rel="prefetch" href="/assets/search.esm.04894411.js"><link rel="prefetch" href="/assets/zoom.esm.78977eba.js"><link rel="prefetch" href="/assets/photoswipe.esm.351abe37.js"><link rel="prefetch" href="/assets/three.module.6ea4571d.js"><link rel="prefetch" href="/assets/OrbitControls.f2b1dd1d.js"><link rel="prefetch" href="/assets/STLLoader.9a9a186e.js">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">Skip to content</a><!--]--><div class="theme-container has-toc"><!--[--><!--[--><header class="navbar"><div class="navbar-left"><button class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!----><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="GIS-FSDE"><!----><span class="site-name hide-in-pad">GIS-FSDE</span></a><!----></div><div class="navbar-center"><!----><nav class="nav-links"><div class="nav-item hide-in-mobile"><a href="/" class="nav-link" aria-label="主页"><span class="icon iconfont icon-home" style=""></span>主页<!----></a></div><div class="nav-item hide-in-mobile"><a href="/home.html" class="nav-link" aria-label="GIS-FSDE"><span class="icon iconfont icon-home" style=""></span>GIS-FSDE<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="JAVA全栈"><span class="title"><span class="icon iconfont icon-edit" style=""></span>JAVA全栈</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>后端</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Java.html" class="nav-link" aria-label="JAVA"><span class="icon iconfont icon-edit" style=""></span>JAVA<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/JVM.html" class="nav-link" aria-label="JVM"><span class="icon iconfont icon-edit" style=""></span>JVM<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Python3.html" class="nav-link" aria-label="Python"><span class="icon iconfont icon-edit" style=""></span>Python<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MYSQLOptimize.html" class="nav-link" aria-label="MYSQL"><span class="icon iconfont icon-edit" style=""></span>MYSQL<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="PostgreSQL"><span class="icon iconfont icon-edit" style=""></span>PostgreSQL<!----></a></li><li class="dropdown-subitem"><a aria-current="page" href="/posts/2021/MongoDB.html" class="router-link-active router-link-exact-active nav-link active" aria-label="MongoDB"><span class="icon iconfont icon-edit" style=""></span>MongoDB<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="系统优化"><span class="icon iconfont icon-edit" style=""></span>系统优化<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="系统设计"><span class="icon iconfont icon-edit" style=""></span>系统设计<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="功能DEMO"><span class="icon iconfont icon-edit" style=""></span>功能DEMO<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>软件工程</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/PM.html" class="nav-link" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Architect.html" class="nav-link" aria-label="架构师"><span class="icon iconfont icon-edit" style=""></span>架构师<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="软件工程"><span class="icon iconfont icon-edit" style=""></span>软件工程<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Network.html" class="nav-link" aria-label="网络"><span class="icon iconfont icon-edit" style=""></span>网络<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="安全"><span class="icon iconfont icon-edit" style=""></span>安全<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Algorithm.html" class="nav-link" aria-label="算法"><span class="icon iconfont icon-edit" style=""></span>算法<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/DesignPatterns.html" class="nav-link" aria-label="设计模式"><span class="icon iconfont icon-edit" style=""></span>设计模式<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="测试"><span class="icon iconfont icon-edit" style=""></span>测试<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/DevelopersFixComputer.html" class="nav-link" aria-label="程序员修电脑"><span class="icon iconfont icon-edit" style=""></span>程序员修电脑<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="数学"><span class="icon iconfont icon-edit" style=""></span>数学<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/EnglishDay.html" class="nav-link" aria-label="英语"><span class="icon iconfont icon-edit" style=""></span>英语<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>框架-中间件</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Spring.html" class="nav-link" aria-label="Spring"><span class="icon iconfont icon-edit" style=""></span>Spring<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/SpringMVC.html" class="nav-link" aria-label="SpringMVC"><span class="icon iconfont icon-edit" style=""></span>SpringMVC<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MyBatis.html" class="nav-link" aria-label="Mybatis"><span class="icon iconfont icon-edit" style=""></span>Mybatis<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/MyBatis-Plus.html" class="nav-link" aria-label="Mybatis-Plus"><span class="icon iconfont icon-edit" style=""></span>Mybatis-Plus<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/SpringBoot.html" class="nav-link" aria-label="SpringBoot"><span class="icon iconfont icon-edit" style=""></span>SpringBoot<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/SpringCloud.html" class="nav-link" aria-label="SpringCloud"><span class="icon iconfont icon-edit" style=""></span>SpringCloud<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Dubbo.html" class="nav-link" aria-label="Dubbo"><span class="icon iconfont icon-edit" style=""></span>Dubbo<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/RabbitMQ.html" class="nav-link" aria-label="RabbitMQ"><span class="icon iconfont icon-edit" style=""></span>RabbitMQ<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Redis.html" class="nav-link" aria-label="Redis"><span class="icon iconfont icon-edit" style=""></span>Redis<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Nginx.html" class="nav-link" aria-label="Nginx"><span class="icon iconfont icon-edit" style=""></span>Nginx<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="Maven"><span class="icon iconfont icon-edit" style=""></span>Maven<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>运维-工具</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Linux.html" class="nav-link" aria-label="Linux"><span class="icon iconfont icon-edit" style=""></span>Linux<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Docker.html" class="nav-link" aria-label="Docker"><span class="icon iconfont icon-edit" style=""></span>Docker<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="IIS"><span class="icon iconfont icon-edit" style=""></span>IIS<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="Jenkins"><span class="icon iconfont icon-edit" style=""></span>Jenkins<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="从零网站上线"><span class="icon iconfont icon-edit" style=""></span>从零网站上线<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>前端</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/FrontEnd.html" class="nav-link" aria-label="前端"><span class="icon iconfont icon-edit" style=""></span>前端<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/FrontEnd.html" class="nav-link" aria-label="UI设计"><span class="icon iconfont icon-edit" style=""></span>UI设计<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/WMP.html" class="nav-link" aria-label="小程序"><span class="icon iconfont icon-edit" style=""></span>小程序<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="快乐编程"><span class="title"><span class="icon iconfont icon-edit" style=""></span>快乐编程</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>技术前沿</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>大数据</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="大数据"><span class="icon iconfont icon-edit" style=""></span>大数据<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>AI</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="深度学习"><span class="icon iconfont icon-edit" style=""></span>深度学习<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>GAME</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="UE4"><span class="icon iconfont icon-edit" style=""></span>UE4<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>GIS</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="GIS基础知识"><span class="icon iconfont icon-edit" style=""></span>GIS基础知识<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="GIS软件"><span class="icon iconfont icon-edit" style=""></span>GIS软件<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="Leaflet"><span class="icon iconfont icon-edit" style=""></span>Leaflet<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="Mapbox"><span class="icon iconfont icon-edit" style=""></span>Mapbox<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="Cesium"><span class="icon iconfont icon-edit" style=""></span>Cesium<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/GIS.html" class="nav-link" aria-label="最新技术"><span class="icon iconfont icon-edit" style=""></span>最新技术<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="思考"><span class="title"><span class="icon iconfont icon-edit" style=""></span>思考</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>技术思考</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>生活思考</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/HowToLearn.html" class="nav-link" aria-label="如何学习一个新知识"><span class="icon iconfont icon-edit" style=""></span>如何学习一个新知识<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="生活"><span class="title"><span class="icon iconfont icon-hot" style=""></span>生活</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>TODO</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/TODO.html" class="nav-link" aria-label="TODO"><span class="icon iconfont icon-edit" style=""></span>TODO<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>穿搭护肤</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Health.html" class="nav-link" aria-label="穿搭"><span class="icon iconfont icon-edit" style=""></span>穿搭<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/Health.html" class="nav-link" aria-label="护肤"><span class="icon iconfont icon-edit" style=""></span>护肤<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>自媒体</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/We-Media.html" class="nav-link" aria-label="自媒体规划"><span class="icon iconfont icon-edit" style=""></span>自媒体规划<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/We-Media.html" class="nav-link" aria-label="自媒体矩阵"><span class="icon iconfont icon-edit" style=""></span>自媒体矩阵<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/We-Media.html" class="nav-link" aria-label="自媒体知识"><span class="icon iconfont icon-edit" style=""></span>自媒体知识<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>书影音</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/BMM.html" class="nav-link" aria-label="读后感"><span class="icon iconfont icon-edit" style=""></span>读后感<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/BMM.html" class="nav-link" aria-label="观后感"><span class="icon iconfont icon-edit" style=""></span>观后感<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>年月日</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/Summarize.html" class="nav-link" aria-label="年月日"><span class="icon iconfont icon-edit" style=""></span>年月日<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>健康</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="健身知识"><span class="icon iconfont icon-edit" style=""></span>健身知识<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="营养搭配"><span class="icon iconfont icon-edit" style=""></span>营养搭配<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="美食制作"><span class="icon iconfont icon-edit" style=""></span>美食制作<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>有用工具</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="电脑工具"><span class="icon iconfont icon-edit" style=""></span>电脑工具<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label><span class="icon iconfont icon-edit" style=""></span><!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>Adobe</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="PS"><span class="icon iconfont icon-edit" style=""></span>PS<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="AE"><span class="icon iconfont icon-edit" style=""></span>AE<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="平面设计"><span class="icon iconfont icon-edit" style=""></span>平面设计<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>三维</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="C4D"><span class="icon iconfont icon-edit" style=""></span>C4D<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="艺术"><span class="title"><span class="icon iconfont icon-creative" style=""></span>艺术</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>音乐</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="乐理"><span class="icon iconfont icon-edit" style=""></span>乐理<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="吉他谱"><span class="icon iconfont icon-edit" style=""></span>吉他谱<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="钢琴谱"><span class="icon iconfont icon-edit" style=""></span>钢琴谱<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="其他谱"><span class="icon iconfont icon-edit" style=""></span>其他谱<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="作词编曲"><span class="icon iconfont icon-edit" style=""></span>作词编曲<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>摄影</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/album.html" class="nav-link" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="摄影"><span class="icon iconfont icon-edit" style=""></span>摄影<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>数绘</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="数绘"><span class="icon iconfont icon-edit" style=""></span>数绘<!----></a></li></ul></li><li class="dropdown-item"><h4 class="dropdown-subtitle"><span>记录</span></h4><ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="摄影记录"><span class="icon iconfont icon-edit" style=""></span>摄影记录<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="绘画记录"><span class="icon iconfont icon-edit" style=""></span>绘画记录<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="音乐记录"><span class="icon iconfont icon-edit" style=""></span>音乐记录<!----></a></li><li class="dropdown-subitem"><a href="/posts/2021/inconstruction.html" class="nav-link" aria-label="视频记录"><span class="icon iconfont icon-edit" style=""></span>视频记录<!----></a></li></ul></li></ul></button></div></div><div class="nav-item hide-in-mobile"><a href="/guide/" class="nav-link" aria-label="关于我"><span class="icon iconfont icon-emoji" style=""></span>关于我<!----></a></div></nav><!----></div><div class="navbar-right"><!----><!----><div class="nav-item"><a class="repo-link" href="https://github.com/GISFSDE/" target="_blank" rel="noopener noreferrer" aria-label="GitHub"><svg xmlns="http://www.w3.org/2000/svg" class="icon github-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="github icon" style="width:1.25rem;height:1.25rem;vertical-align:middle;"><path d="M511.957 21.333C241.024 21.333 21.333 240.981 21.333 512c0 216.832 140.544 400.725 335.574 465.664 24.49 4.395 32.256-10.07 32.256-23.083 0-11.69.256-44.245 0-85.205-136.448 29.61-164.736-64.64-164.736-64.64-22.315-56.704-54.4-71.765-54.4-71.765-44.587-30.464 3.285-29.824 3.285-29.824 49.195 3.413 75.179 50.517 75.179 50.517 43.776 75.008 114.816 53.333 142.762 40.79 4.523-31.66 17.152-53.377 31.19-65.537-108.971-12.458-223.488-54.485-223.488-242.602 0-53.547 19.114-97.323 50.517-131.67-5.035-12.33-21.93-62.293 4.779-129.834 0 0 41.258-13.184 134.912 50.346a469.803 469.803 0 0 1 122.88-16.554c41.642.213 83.626 5.632 122.88 16.554 93.653-63.488 134.784-50.346 134.784-50.346 26.752 67.541 9.898 117.504 4.864 129.834 31.402 34.347 50.474 78.123 50.474 131.67 0 188.586-114.73 230.016-224.042 242.09 17.578 15.232 33.578 44.672 33.578 90.454v135.85c0 13.142 7.936 27.606 32.854 22.87C862.25 912.597 1002.667 728.747 1002.667 512c0-271.019-219.648-490.667-490.71-490.667z"></path></svg></a></div><div class="nav-item hide-in-mobile"><button class="outlook-button" tabindex="-1" ariahidden="true"><svg xmlns="http://www.w3.org/2000/svg" class="icon outlook-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="outlook icon"><path d="M224 800c0 9.6 3.2 44.8 6.4 54.4 6.4 48-48 76.8-48 76.8s80 41.6 147.2 0 134.4-134.4 38.4-195.2c-22.4-12.8-41.6-19.2-57.6-19.2C259.2 716.8 227.2 761.6 224 800zM560 675.2l-32 51.2c-51.2 51.2-83.2 32-83.2 32 25.6 67.2 0 112-12.8 128 25.6 6.4 51.2 9.6 80 9.6 54.4 0 102.4-9.6 150.4-32l0 0c3.2 0 3.2-3.2 3.2-3.2 22.4-16 12.8-35.2 6.4-44.8-9.6-12.8-12.8-25.6-12.8-41.6 0-54.4 60.8-99.2 137.6-99.2 6.4 0 12.8 0 22.4 0 12.8 0 38.4 9.6 48-25.6 0-3.2 0-3.2 3.2-6.4 0-3.2 3.2-6.4 3.2-6.4 6.4-16 6.4-16 6.4-19.2 9.6-35.2 16-73.6 16-115.2 0-105.6-41.6-198.4-108.8-268.8C704 396.8 560 675.2 560 675.2zM224 419.2c0-28.8 22.4-51.2 51.2-51.2 28.8 0 51.2 22.4 51.2 51.2 0 28.8-22.4 51.2-51.2 51.2C246.4 470.4 224 448 224 419.2zM320 284.8c0-22.4 19.2-41.6 41.6-41.6 22.4 0 41.6 19.2 41.6 41.6 0 22.4-19.2 41.6-41.6 41.6C339.2 326.4 320 307.2 320 284.8zM457.6 208c0-12.8 12.8-25.6 25.6-25.6 12.8 0 25.6 12.8 25.6 25.6 0 12.8-12.8 25.6-25.6 25.6C470.4 233.6 457.6 220.8 457.6 208zM128 505.6C128 592 153.6 672 201.6 736c28.8-60.8 112-60.8 124.8-60.8-16-51.2 16-99.2 16-99.2l316.8-422.4c-48-19.2-99.2-32-150.4-32C297.6 118.4 128 291.2 128 505.6zM764.8 86.4c-22.4 19.2-390.4 518.4-390.4 518.4-22.4 28.8-12.8 76.8 22.4 99.2l9.6 6.4c35.2 22.4 80 12.8 99.2-25.6 0 0 6.4-12.8 9.6-19.2 54.4-105.6 275.2-524.8 288-553.6 6.4-19.2-3.2-32-19.2-32C777.6 76.8 771.2 80 764.8 86.4z"></path></svg><div class="outlook-dropdown"><!----></div></button></div><!----><!----><button class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow left"></span></div><aside class="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"><li><!--[--><a href="/" class="nav-link sidebar-link sidebar-page" aria-label="主页"><span class="icon iconfont icon-home" style=""></span>主页<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/home.html" class="nav-link sidebar-link sidebar-page" aria-label="GIS-FSDE"><span class="icon iconfont icon-home" style=""></span>GIS-FSDE<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-edit" style=""></span><span class="title">JAVA全栈</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading active"><span class="icon iconfont icon-edit" style=""></span><span class="title">后端</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Java.html" class="nav-link sidebar-link sidebar-page" aria-label="JAVA"><span class="icon iconfont icon-edit" style=""></span>JAVA<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/JVM.html" class="nav-link sidebar-link sidebar-page" aria-label="JVM"><span class="icon iconfont icon-edit" style=""></span>JVM<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Python3.html" class="nav-link sidebar-link sidebar-page" aria-label="Python"><span class="icon iconfont icon-edit" style=""></span>Python<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MYSQLOptimize.html" class="nav-link sidebar-link sidebar-page" aria-label="MYSQL"><span class="icon iconfont icon-edit" style=""></span>MYSQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="PostgreSQL"><span class="icon iconfont icon-edit" style=""></span>PostgreSQL<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a aria-current="page" href="/posts/2021/MongoDB.html" class="router-link-active router-link-exact-active nav-link active sidebar-link sidebar-page active" aria-label="MongoDB"><span class="icon iconfont icon-edit" style=""></span>MongoDB<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#文档-document" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="文档(Document)"><!---->文档(Document)<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#集合-表" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="集合 / 表"><!---->集合 / 表<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#合法的集合名" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="合法的集合名"><!---->合法的集合名<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#capped-collections" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="capped collections"><!---->capped collections<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#元数据" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="元数据"><!---->元数据<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#mongodb-数据类型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MongoDB 数据类型"><!---->MongoDB 数据类型<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#objectid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ObjectId"><!---->ObjectId<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#字符串" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="字符串"><!---->字符串<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#时间戳" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="时间戳"><!---->时间戳<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#日期" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="日期"><!---->日期<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#下载" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="下载"><!---->下载<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装"><!---->安装<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#创建默认数据文件夹-data-db-与-data-log-mongodb-log文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建默认数据文件夹   \data\db 与  \data\log \MongoDB.log文件"><!---->创建默认数据文件夹   \data\db 与  \data\log \MongoDB.log文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#手动运行mongodb服务器" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="手动运行MongoDB服务器"><!---->手动运行MongoDB服务器<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#增" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="增"><!---->增<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#改" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="改"><!---->改<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#删" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="删"><!---->删<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#查" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="查"><!---->查<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#type-操作符" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="$type 操作符"><!---->$type 操作符<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#limit-方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Limit() 方法"><!---->Limit() 方法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#skip-方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="Skip() 方法"><!---->Skip() 方法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#sort-方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="sort() 方法"><!---->sort() 方法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#createindex-方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="createIndex() 方法`"><!---->createIndex() 方法`<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#aggregate-方法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="aggregate() 方法"><!---->aggregate() 方法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#管道" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="管道"><!---->管道<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#副本集特征" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="副本集特征："><!---->副本集特征：<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#mongodb副本集设置" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MongoDB副本集设置"><!---->MongoDB副本集设置<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#副本集添加成员" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="副本集添加成员"><!---->副本集添加成员<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#语法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="语法"><!---->语法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#实例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="实例"><!---->实例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#分片" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="分片"><!---->分片<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#为什么使用分片" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="为什么使用分片"><!---->为什么使用分片<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#mongodb分片" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MongoDB分片"><!---->MongoDB分片<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#分片实例" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="分片实例"><!---->分片实例<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#数据备份" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据备份"><!---->数据备份<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#语法-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="语法"><!---->语法<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#实例-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="实例"><!---->实例<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#数据恢复" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数据恢复"><!---->数据恢复<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#语法-2" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="语法"><!---->语法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#mongostat-命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="mongostat 命令"><!---->mongostat 命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#mongotop-命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="mongotop 命令"><!---->mongotop 命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#引入依赖" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="引入依赖"><!---->引入依赖<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#连接" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="连接"><!---->连接<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#嵌入式关系" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="嵌入式关系"><!---->嵌入式关系<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#引用式关系" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="引用式关系"><!---->引用式关系<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#dbrefs-vs-手动引用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="DBRefs vs 手动引用"><!---->DBRefs vs 手动引用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-dbrefs" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 DBRefs"><!---->使用 DBRefs<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用覆盖索引查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用覆盖索引查询"><!---->使用覆盖索引查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-explain" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 explain()"><!---->使用 explain()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-hint" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 hint()"><!---->使用 hint()<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#原子操作数据模型" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="原子操作数据模型"><!---->原子操作数据模型<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#原子操作常用命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="原子操作常用命令"><!---->原子操作常用命令<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#索引数组字段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="索引数组字段"><!---->索引数组字段<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#索引子文档字段" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="索引子文档字段"><!---->索引子文档字段<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#额外开销" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="额外开销"><!---->额外开销<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#内存-ram-使用" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="内存(RAM)使用"><!---->内存(RAM)使用<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#查询限制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="查询限制"><!---->查询限制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#索引键限制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="索引键限制"><!---->索引键限制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#插入文档超过索引键限制" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="插入文档超过索引键限制"><!---->插入文档超过索引键限制<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#最大范围" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="最大范围"><!---->最大范围<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#创建新的objectid" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建新的ObjectId"><!---->创建新的ObjectId<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#创建文档的时间戳" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建文档的时间戳"><!---->创建文档的时间戳<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#objectid-转换为字符串" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="ObjectId 转换为字符串"><!---->ObjectId 转换为字符串<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#mapreduce-命令" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="MapReduce 命令"><!---->MapReduce 命令<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-mapreduce" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 MapReduce"><!---->使用 MapReduce<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#启用全文检索" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="启用全文检索"><!---->启用全文检索<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#创建全文索引" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建全文索引"><!---->创建全文索引<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用全文索引" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用全文索引"><!---->使用全文索引<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#删除全文索引" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="删除全文索引"><!---->删除全文索引<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用正则表达式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用正则表达式"><!---->使用正则表达式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#不区分大小写的正则表达式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="不区分大小写的正则表达式"><!---->不区分大小写的正则表达式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#数组元素使用正则表达式" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="数组元素使用正则表达式"><!---->数组元素使用正则表达式<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#优化正则表达式查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="优化正则表达式查询"><!---->优化正则表达式查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#简介" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="简介"><!---->简介<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#安装-1" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="安装"><!---->安装<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#需求" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="需求"><!---->需求<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#快速安装" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="快速安装"><!---->快速安装<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#gridfs-添加文件" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="GridFS 添加文件"><!---->GridFS 添加文件<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#创建固定集合" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建固定集合"><!---->创建固定集合<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#固定集合查询" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="固定集合查询"><!---->固定集合查询<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#固定集合的功能特点" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="固定集合的功能特点"><!---->固定集合的功能特点<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#固定集合属性及用法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="固定集合属性及用法"><!---->固定集合属性及用法<!----></a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#属性" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="属性"><!---->属性<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#用法" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="用法"><!---->用法<!----></a><ul class="sidebar-sub-headers"></ul></li></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-counters-集合" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 counters 集合"><!---->使用 counters 集合<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#创建-javascript-函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="创建 Javascript 函数"><!---->创建 Javascript 函数<!----></a><ul class="sidebar-sub-headers"></ul></li><li class="sidebar-sub-header"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-javascript-函数" class="router-link-active router-link-exact-active nav-link sidebar-link heading" aria-label="使用 Javascript 函数"><!---->使用 Javascript 函数<!----></a><ul class="sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="系统优化"><span class="icon iconfont icon-edit" style=""></span>系统优化<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="系统设计"><span class="icon iconfont icon-edit" style=""></span>系统设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="功能DEMO"><span class="icon iconfont icon-edit" style=""></span>功能DEMO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">软件工程</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/PM.html" class="nav-link sidebar-link sidebar-page" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Architect.html" class="nav-link sidebar-link sidebar-page" aria-label="架构师"><span class="icon iconfont icon-edit" style=""></span>架构师<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="软件工程"><span class="icon iconfont icon-edit" style=""></span>软件工程<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Network.html" class="nav-link sidebar-link sidebar-page" aria-label="网络"><span class="icon iconfont icon-edit" style=""></span>网络<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="安全"><span class="icon iconfont icon-edit" style=""></span>安全<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Algorithm.html" class="nav-link sidebar-link sidebar-page" aria-label="算法"><span class="icon iconfont icon-edit" style=""></span>算法<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/DesignPatterns.html" class="nav-link sidebar-link sidebar-page" aria-label="设计模式"><span class="icon iconfont icon-edit" style=""></span>设计模式<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="测试"><span class="icon iconfont icon-edit" style=""></span>测试<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/DevelopersFixComputer.html" class="nav-link sidebar-link sidebar-page" aria-label="程序员修电脑"><span class="icon iconfont icon-edit" style=""></span>程序员修电脑<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="数学"><span class="icon iconfont icon-edit" style=""></span>数学<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/EnglishDay.html" class="nav-link sidebar-link sidebar-page" aria-label="英语"><span class="icon iconfont icon-edit" style=""></span>英语<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">框架-中间件</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Spring.html" class="nav-link sidebar-link sidebar-page" aria-label="Spring"><span class="icon iconfont icon-edit" style=""></span>Spring<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/SpringMVC.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringMVC"><span class="icon iconfont icon-edit" style=""></span>SpringMVC<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MyBatis.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis"><span class="icon iconfont icon-edit" style=""></span>Mybatis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/MyBatis-Plus.html" class="nav-link sidebar-link sidebar-page" aria-label="Mybatis-Plus"><span class="icon iconfont icon-edit" style=""></span>Mybatis-Plus<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/SpringBoot.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringBoot"><span class="icon iconfont icon-edit" style=""></span>SpringBoot<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/SpringCloud.html" class="nav-link sidebar-link sidebar-page" aria-label="SpringCloud"><span class="icon iconfont icon-edit" style=""></span>SpringCloud<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Dubbo.html" class="nav-link sidebar-link sidebar-page" aria-label="Dubbo"><span class="icon iconfont icon-edit" style=""></span>Dubbo<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/RabbitMQ.html" class="nav-link sidebar-link sidebar-page" aria-label="RabbitMQ"><span class="icon iconfont icon-edit" style=""></span>RabbitMQ<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Redis.html" class="nav-link sidebar-link sidebar-page" aria-label="Redis"><span class="icon iconfont icon-edit" style=""></span>Redis<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Nginx.html" class="nav-link sidebar-link sidebar-page" aria-label="Nginx"><span class="icon iconfont icon-edit" style=""></span>Nginx<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="Maven"><span class="icon iconfont icon-edit" style=""></span>Maven<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">运维-工具</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Linux.html" class="nav-link sidebar-link sidebar-page" aria-label="Linux"><span class="icon iconfont icon-edit" style=""></span>Linux<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Docker.html" class="nav-link sidebar-link sidebar-page" aria-label="Docker"><span class="icon iconfont icon-edit" style=""></span>Docker<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="IIS"><span class="icon iconfont icon-edit" style=""></span>IIS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="Jenkins"><span class="icon iconfont icon-edit" style=""></span>Jenkins<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="从零网站上线"><span class="icon iconfont icon-edit" style=""></span>从零网站上线<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">前端</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/FrontEnd.html" class="nav-link sidebar-link sidebar-page" aria-label="前端"><span class="icon iconfont icon-edit" style=""></span>前端<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/FrontEnd.html" class="nav-link sidebar-link sidebar-page" aria-label="UI设计"><span class="icon iconfont icon-edit" style=""></span>UI设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/WMP.html" class="nav-link sidebar-link sidebar-page" aria-label="小程序"><span class="icon iconfont icon-edit" style=""></span>小程序<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">快乐编程</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">技术前沿</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">大数据</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="大数据"><span class="icon iconfont icon-edit" style=""></span>大数据<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">AI</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="深度学习"><span class="icon iconfont icon-edit" style=""></span>深度学习<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">GAME</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="UE4"><span class="icon iconfont icon-edit" style=""></span>UE4<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">GIS</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="GIS基础知识"><span class="icon iconfont icon-edit" style=""></span>GIS基础知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="GIS软件"><span class="icon iconfont icon-edit" style=""></span>GIS软件<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="Leaflet"><span class="icon iconfont icon-edit" style=""></span>Leaflet<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="Mapbox"><span class="icon iconfont icon-edit" style=""></span>Mapbox<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="Cesium"><span class="icon iconfont icon-edit" style=""></span>Cesium<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/GIS.html" class="nav-link sidebar-link sidebar-page" aria-label="最新技术"><span class="icon iconfont icon-edit" style=""></span>最新技术<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">思考</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">技术思考</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="项目管理"><span class="icon iconfont icon-edit" style=""></span>项目管理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">生活思考</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/HowToLearn.html" class="nav-link sidebar-link sidebar-page" aria-label="如何学习一个新知识"><span class="icon iconfont icon-edit" style=""></span>如何学习一个新知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-hot" style=""></span><span class="title">生活</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">TODO</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/TODO.html" class="nav-link sidebar-link sidebar-page" aria-label="TODO"><span class="icon iconfont icon-edit" style=""></span>TODO<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">穿搭护肤</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Health.html" class="nav-link sidebar-link sidebar-page" aria-label="穿搭"><span class="icon iconfont icon-edit" style=""></span>穿搭<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/Health.html" class="nav-link sidebar-link sidebar-page" aria-label="护肤"><span class="icon iconfont icon-edit" style=""></span>护肤<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">自媒体</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/We-Media.html" class="nav-link sidebar-link sidebar-page" aria-label="自媒体规划"><span class="icon iconfont icon-edit" style=""></span>自媒体规划<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/We-Media.html" class="nav-link sidebar-link sidebar-page" aria-label="自媒体矩阵"><span class="icon iconfont icon-edit" style=""></span>自媒体矩阵<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/We-Media.html" class="nav-link sidebar-link sidebar-page" aria-label="自媒体知识"><span class="icon iconfont icon-edit" style=""></span>自媒体知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">书影音</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/BMM.html" class="nav-link sidebar-link sidebar-page" aria-label="读后感"><span class="icon iconfont icon-edit" style=""></span>读后感<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/BMM.html" class="nav-link sidebar-link sidebar-page" aria-label="观后感"><span class="icon iconfont icon-edit" style=""></span>观后感<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">年月日</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/Summarize.html" class="nav-link sidebar-link sidebar-page" aria-label="年月日"><span class="icon iconfont icon-edit" style=""></span>年月日<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">健康</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="健身知识"><span class="icon iconfont icon-edit" style=""></span>健身知识<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="营养搭配"><span class="icon iconfont icon-edit" style=""></span>营养搭配<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="美食制作"><span class="icon iconfont icon-edit" style=""></span>美食制作<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">有用工具</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="电脑工具"><span class="icon iconfont icon-edit" style=""></span>电脑工具<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label><span class="icon iconfont icon-edit" style=""></span><!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">Adobe</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="PS"><span class="icon iconfont icon-edit" style=""></span>PS<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="AE"><span class="icon iconfont icon-edit" style=""></span>AE<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="平面设计"><span class="icon iconfont icon-edit" style=""></span>平面设计<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">三维</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="C4D"><span class="icon iconfont icon-edit" style=""></span>C4D<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-creative" style=""></span><span class="title">艺术</span><!----></p><ul class="sidebar-links"><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">音乐</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="乐理"><span class="icon iconfont icon-edit" style=""></span>乐理<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="吉他谱"><span class="icon iconfont icon-edit" style=""></span>吉他谱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="钢琴谱"><span class="icon iconfont icon-edit" style=""></span>钢琴谱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="其他谱"><span class="icon iconfont icon-edit" style=""></span>其他谱<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="作词编曲"><span class="icon iconfont icon-edit" style=""></span>作词编曲<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">摄影</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/album.html" class="nav-link sidebar-link sidebar-page" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="摄影"><span class="icon iconfont icon-edit" style=""></span>摄影<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">数绘</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="审美提高"><span class="icon iconfont icon-edit" style=""></span>审美提高<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="数绘"><span class="icon iconfont icon-edit" style=""></span>数绘<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li><li><!--[--><section class="sidebar-group"><p class="sidebar-heading"><span class="icon iconfont icon-edit" style=""></span><span class="title">记录</span><!----></p><ul class="sidebar-links"><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="摄影记录"><span class="icon iconfont icon-edit" style=""></span>摄影记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="绘画记录"><span class="icon iconfont icon-edit" style=""></span>绘画记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="音乐记录"><span class="icon iconfont icon-edit" style=""></span>音乐记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a href="/posts/2021/inconstruction.html" class="nav-link sidebar-link sidebar-page" aria-label="视频记录"><span class="icon iconfont icon-edit" style=""></span>视频记录<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul></section><!--]--></li></ul></section><!--]--></li><li><!--[--><a href="/guide/" class="nav-link sidebar-link sidebar-page" aria-label="关于我"><span class="icon iconfont icon-emoji" style=""></span>关于我<!----></a><ul class="sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><span class="icon iconfont icon-markdown" style=""></span>MongoDB</h1><div class="page-info"><span class="author-info" aria-label="作者🖊" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><a class="author-item" href="https://www.gisfsde.com" target="_blank" rel="noopener noreferrer">GIS-FSDE</a></span><span property="author" content="GIS-FSDE"></span></span><!----><span class="date-info" aria-label="写作日期📅" data-balloon-pos="down" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span>2022年6月6日</span><meta property="datePublished" content="2022-06-06T00:00:00.000Z"></span><span class="category-info" aria-label="分类🌈" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><ul class="categories-wrapper"><li class="category category3 clickable" role="navigation">MongoDB</li><meta property="articleSection" content="MongoDB"></ul></span><span aria-label="标签🏷" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><ul class="tags-wrapper"><li class="tag tag3 clickable" role="navigation">MongoDB</li></ul><meta property="keywords" content="MongoDB"></span><span class="reading-time-info" aria-label="阅读时间⌛" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>大约 60 分钟</span><meta property="timeRequired" content="PT60M"></span><span class="words-info" aria-label="字数🔠" data-balloon-pos="down" localizeddate="2022年6月6日" isoriginal="false" pageview="false"><svg xmlns="http://www.w3.org/2000/svg" class="icon word-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="word icon"><path d="M518.217 432.64V73.143A73.143 73.143 0 01603.43 1.097a512 512 0 01419.474 419.474 73.143 73.143 0 01-72.046 85.212H591.36a73.143 73.143 0 01-73.143-73.143z"></path><path d="M493.714 566.857h340.297a73.143 73.143 0 0173.143 85.577A457.143 457.143 0 11371.566 117.76a73.143 73.143 0 0185.577 73.143v339.383a36.571 36.571 0 0036.571 36.571z"></path></svg><span>约 17927 字</span><meta property="wordCount" content="17927"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><div class="toc-header">此页内容</div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#文档-document" class="router-link-active router-link-exact-active toc-link level2">文档(Document)</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#集合-表" class="router-link-active router-link-exact-active toc-link level2">集合 / 表</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#合法的集合名" class="router-link-active router-link-exact-active toc-link level3">合法的集合名</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#capped-collections" class="router-link-active router-link-exact-active toc-link level3">capped collections</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#元数据" class="router-link-active router-link-exact-active toc-link level2">元数据</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#mongodb-数据类型" class="router-link-active router-link-exact-active toc-link level2">MongoDB 数据类型</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#objectid" class="router-link-active router-link-exact-active toc-link level3">ObjectId</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#字符串" class="router-link-active router-link-exact-active toc-link level3">字符串</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#时间戳" class="router-link-active router-link-exact-active toc-link level3">时间戳</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#日期" class="router-link-active router-link-exact-active toc-link level3">日期</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#下载" class="router-link-active router-link-exact-active toc-link level2">下载</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#安装" class="router-link-active router-link-exact-active toc-link level2">安装</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#创建默认数据文件夹-data-db-与-data-log-mongodb-log文件" class="router-link-active router-link-exact-active toc-link level2">创建默认数据文件夹   \data\db 与  \data\log \MongoDB.log文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#手动运行mongodb服务器" class="router-link-active router-link-exact-active toc-link level2">手动运行MongoDB服务器</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#增" class="router-link-active router-link-exact-active toc-link level2">增</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#改" class="router-link-active router-link-exact-active toc-link level2">改</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#删" class="router-link-active router-link-exact-active toc-link level2">删</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#查" class="router-link-active router-link-exact-active toc-link level2">查</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#type-操作符" class="router-link-active router-link-exact-active toc-link level3">$type 操作符</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#limit-方法" class="router-link-active router-link-exact-active toc-link level3">Limit() 方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#skip-方法" class="router-link-active router-link-exact-active toc-link level3">Skip() 方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#sort-方法" class="router-link-active router-link-exact-active toc-link level3">sort() 方法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#createindex-方法" class="router-link-active router-link-exact-active toc-link level2">createIndex() 方法`</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#aggregate-方法" class="router-link-active router-link-exact-active toc-link level2">aggregate() 方法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#管道" class="router-link-active router-link-exact-active toc-link level2">管道</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#副本集特征" class="router-link-active router-link-exact-active toc-link level2">副本集特征：</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#mongodb副本集设置" class="router-link-active router-link-exact-active toc-link level2">MongoDB副本集设置</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#副本集添加成员" class="router-link-active router-link-exact-active toc-link level2">副本集添加成员</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#语法" class="router-link-active router-link-exact-active toc-link level3">语法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#实例" class="router-link-active router-link-exact-active toc-link level3">实例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#分片" class="router-link-active router-link-exact-active toc-link level2">分片</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#为什么使用分片" class="router-link-active router-link-exact-active toc-link level2">为什么使用分片</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#mongodb分片" class="router-link-active router-link-exact-active toc-link level2">MongoDB分片</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#分片实例" class="router-link-active router-link-exact-active toc-link level2">分片实例</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#数据备份" class="router-link-active router-link-exact-active toc-link level2">数据备份</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#语法-1" class="router-link-active router-link-exact-active toc-link level3">语法</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#实例-1" class="router-link-active router-link-exact-active toc-link level3">实例</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#数据恢复" class="router-link-active router-link-exact-active toc-link level2">数据恢复</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#语法-2" class="router-link-active router-link-exact-active toc-link level3">语法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#mongostat-命令" class="router-link-active router-link-exact-active toc-link level2">mongostat 命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#mongotop-命令" class="router-link-active router-link-exact-active toc-link level2">mongotop 命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#引入依赖" class="router-link-active router-link-exact-active toc-link level2">引入依赖</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#连接" class="router-link-active router-link-exact-active toc-link level2">连接</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#嵌入式关系" class="router-link-active router-link-exact-active toc-link level2">嵌入式关系</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#引用式关系" class="router-link-active router-link-exact-active toc-link level2">引用式关系</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#dbrefs-vs-手动引用" class="router-link-active router-link-exact-active toc-link level2">DBRefs vs 手动引用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-dbrefs" class="router-link-active router-link-exact-active toc-link level2">使用 DBRefs</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用覆盖索引查询" class="router-link-active router-link-exact-active toc-link level2">使用覆盖索引查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-explain" class="router-link-active router-link-exact-active toc-link level2">使用 explain()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-hint" class="router-link-active router-link-exact-active toc-link level2">使用 hint()</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#原子操作数据模型" class="router-link-active router-link-exact-active toc-link level2">原子操作数据模型</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#原子操作常用命令" class="router-link-active router-link-exact-active toc-link level2">原子操作常用命令</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#索引数组字段" class="router-link-active router-link-exact-active toc-link level2">索引数组字段</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#索引子文档字段" class="router-link-active router-link-exact-active toc-link level2">索引子文档字段</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#额外开销" class="router-link-active router-link-exact-active toc-link level2">额外开销</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#内存-ram-使用" class="router-link-active router-link-exact-active toc-link level2">内存(RAM)使用</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#查询限制" class="router-link-active router-link-exact-active toc-link level2">查询限制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#索引键限制" class="router-link-active router-link-exact-active toc-link level2">索引键限制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#插入文档超过索引键限制" class="router-link-active router-link-exact-active toc-link level2">插入文档超过索引键限制</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#最大范围" class="router-link-active router-link-exact-active toc-link level2">最大范围</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#创建新的objectid" class="router-link-active router-link-exact-active toc-link level2">创建新的ObjectId</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#创建文档的时间戳" class="router-link-active router-link-exact-active toc-link level2">创建文档的时间戳</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#objectid-转换为字符串" class="router-link-active router-link-exact-active toc-link level2">ObjectId 转换为字符串</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#mapreduce-命令" class="router-link-active router-link-exact-active toc-link level3">MapReduce 命令</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-mapreduce" class="router-link-active router-link-exact-active toc-link level2">使用 MapReduce</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#启用全文检索" class="router-link-active router-link-exact-active toc-link level2">启用全文检索</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#创建全文索引" class="router-link-active router-link-exact-active toc-link level2">创建全文索引</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用全文索引" class="router-link-active router-link-exact-active toc-link level2">使用全文索引</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#删除全文索引" class="router-link-active router-link-exact-active toc-link level2">删除全文索引</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用正则表达式" class="router-link-active router-link-exact-active toc-link level2">使用正则表达式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#不区分大小写的正则表达式" class="router-link-active router-link-exact-active toc-link level2">不区分大小写的正则表达式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#数组元素使用正则表达式" class="router-link-active router-link-exact-active toc-link level2">数组元素使用正则表达式</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#优化正则表达式查询" class="router-link-active router-link-exact-active toc-link level2">优化正则表达式查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#简介" class="router-link-active router-link-exact-active toc-link level2">简介</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#安装-1" class="router-link-active router-link-exact-active toc-link level2">安装</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#需求" class="router-link-active router-link-exact-active toc-link level3">需求</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#快速安装" class="router-link-active router-link-exact-active toc-link level3">快速安装</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#gridfs-添加文件" class="router-link-active router-link-exact-active toc-link level2">GridFS 添加文件</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#创建固定集合" class="router-link-active router-link-exact-active toc-link level2">创建固定集合</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#固定集合查询" class="router-link-active router-link-exact-active toc-link level2">固定集合查询</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#固定集合的功能特点" class="router-link-active router-link-exact-active toc-link level2">固定集合的功能特点</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#固定集合属性及用法" class="router-link-active router-link-exact-active toc-link level2">固定集合属性及用法</a></li><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#属性" class="router-link-active router-link-exact-active toc-link level3">属性</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#用法" class="router-link-active router-link-exact-active toc-link level3">用法</a></li><!----><!--]--></ul><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-counters-集合" class="router-link-active router-link-exact-active toc-link level2">使用 counters 集合</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#创建-javascript-函数" class="router-link-active router-link-exact-active toc-link level2">创建 Javascript 函数</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/posts/2021/MongoDB.html#使用-javascript-函数" class="router-link-active router-link-exact-active toc-link level2">使用 Javascript 函数</a></li><!----><!--]--></ul></div></aside></div><!----><div class="theme-hope-content"><blockquote><p>最像关系型数据库的非关系型数据库</p></blockquote><blockquote><h1 id="新学四问" tabindex="-1"><a class="header-anchor" href="#新学四问" aria-hidden="true">#</a> 新学四问</h1><p><strong>WHY【与前代优化了什么，弥补了什么空白】：</strong><br><strong>WHAT【框架，思维导图，主题框架】：</strong><br><strong>HOW【如何记忆，学习资源】</strong>：<a href="https://www.runoob.com/mongodb/mongodb-intro.html" target="_blank" rel="noopener noreferrer">菜鸟<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>、<a href="https://docs.mongodb.com/manual/introduction/" target="_blank" rel="noopener noreferrer">官方文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><br><strong>LEVEL【不是每个都学精】：</strong></p></blockquote><h1 id="进度-【一天】" tabindex="-1"><a class="header-anchor" href="#进度-【一天】" aria-hidden="true">#</a> 进度：【<a href="https://www.runoob.com/mongodb/mongodb-operators.html" target="_blank" rel="noopener noreferrer">一天<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>】</h1><h1 id="快查" tabindex="-1"><a class="header-anchor" href="#快查" aria-hidden="true">#</a> 快查</h1><table><thead><tr><th>命令</th><th>解释</th><th>备注</th></tr></thead><tbody><tr><td>show dbs</td><td>查看所有数据库</td><td></td></tr><tr><td>db</td><td>显示当前数据库对象或集合</td><td></td></tr><tr><td>use</td><td>连接到一个指定的数据库</td><td></td></tr><tr><td>db.createCollection(name, options)</td><td>创建集合</td><td></td></tr><tr><td>show collections 或 show tables</td><td>查看集合</td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr><tr><td></td><td></td><td></td></tr></tbody></table><p>关系图</p><h1 id="一、简介" tabindex="-1"><a class="header-anchor" href="#一、简介" aria-hidden="true">#</a> 一、简介</h1><p>C++语言编写的，是一个基于分布式文件存储的开源数据库系统。</p><p>在高负载的情况下，添加更多的节点，可以保证服务器性能。</p><p>MongoDB 旨在为WEB应用提供可扩展的高性能数据存储解决方案。</p><p>MongoDB 将数据存储为一个文档，数据结构由键值(key=&gt;value)对组成。MongoDB 文档类似于 JSON 对象。字段值可以包含其他文档，数组及文档数组。</p><p>环境：win10</p><h1 id="二、基础概念" tabindex="-1"><a class="header-anchor" href="#二、基础概念" aria-hidden="true">#</a> 二、基础概念</h1><table><thead><tr><th style="text-align:left;">SQL术语/概念</th><th style="text-align:left;">MongoDB术语/概念</th><th style="text-align:left;">解释/说明</th></tr></thead><tbody><tr><td style="text-align:left;">database</td><td style="text-align:left;">database</td><td style="text-align:left;">数据库</td></tr><tr><td style="text-align:left;">table</td><td style="text-align:left;">collection</td><td style="text-align:left;">数据库表/集合</td></tr><tr><td style="text-align:left;">row</td><td style="text-align:left;">document</td><td style="text-align:left;">数据记录行/文档</td></tr><tr><td style="text-align:left;">column</td><td style="text-align:left;">field</td><td style="text-align:left;">数据字段/域</td></tr><tr><td style="text-align:left;">index</td><td style="text-align:left;">index</td><td style="text-align:left;">索引</td></tr><tr><td style="text-align:left;">table joins</td><td style="text-align:left;"></td><td style="text-align:left;">表连接,MongoDB不支持</td></tr><tr><td style="text-align:left;">primary key</td><td style="text-align:left;">primary key</td><td style="text-align:left;">主键,MongoDB自动将_id字段设置为主键</td></tr></tbody></table><p>默认数据库为db文件夹需要自己创建，数据放在data文件夹中</p><h2 id="文档-document" tabindex="-1"><a class="header-anchor" href="#文档-document" aria-hidden="true">#</a> 文档(Document)</h2><p>​ 文档是一组键值(key-value)对(即 BSON)。MongoDB 的文档不需要设置相同的字段，并且相同的字段不需要相同的数据类型，这与关系型数据库有很大的区别，也是 MongoDB 非常突出的特点。一个简单的文档例子如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{&quot;site&quot;:&quot;www.runoob.com&quot;, &quot;name&quot;:&quot;菜鸟教程&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>下表列出了 RDBMS 与 MongoDB 对应的术语：</p><table><thead><tr><th style="text-align:center;">RDBMS</th><th style="text-align:left;">MongoDB</th></tr></thead><tbody><tr><td style="text-align:center;">数据库</td><td style="text-align:left;">数据库</td></tr><tr><td style="text-align:center;">表格</td><td style="text-align:left;">集合</td></tr><tr><td style="text-align:center;">行</td><td style="text-align:left;">文档</td></tr><tr><td style="text-align:center;">列</td><td style="text-align:left;">字段</td></tr><tr><td style="text-align:center;">表联合</td><td style="text-align:left;">嵌入文档</td></tr><tr><td style="text-align:center;">主键</td><td style="text-align:left;">主键 (MongoDB 提供了 key 为 _id )</td></tr><tr><td style="text-align:center;">数据库服务和客户端</td><td style="text-align:left;"></td></tr><tr><td style="text-align:center;">Mysqld/Oracle</td><td style="text-align:left;">mongod</td></tr><tr><td style="text-align:center;">mysql/sqlplus</td><td style="text-align:left;">mongo</td></tr></tbody></table><p>需要注意的是：</p><ol><li>文档中的键/值对是<strong>有序</strong>的。</li><li>文档中的值不仅可以是在双引号里面的字符串，还可以是其他几种数据类型（甚至可以是整个嵌入的文档)。</li><li>MongoDB<strong>区分类型和大小写</strong>。</li><li>MongoDB的文档<strong>不能有重复的键</strong>。</li><li>文档的<strong>键是字符串</strong>。除了少数例外情况，键可以使用任意UTF-8字符。</li></ol><p><strong>文档键命名规范</strong>：</p><ul><li>键不能含有\0 (空字符)。这个字符用来表示键的结尾。</li><li>.和$有特别的意义，只有在特定环境下才能使用。</li><li>以下划线&quot;_&quot;开头的键是保留的(不是严格要求的)。</li></ul><hr><h2 id="集合-表" tabindex="-1"><a class="header-anchor" href="#集合-表" aria-hidden="true">#</a> 集合 / 表</h2><p>集合就是 MongoDB 文档组，类似于 RDBMS （关系数据库管理系统：Relational Database Management System)中的表格。</p><p>集合存在于数据库中，集合<strong>没有固定的结构</strong>，这意味着你在对集合<strong>可以插入不同格式和类型的数据</strong>，但通常情况下我们插入集合的数据都会有一定的关联性。</p><p>比如，我们可以将以下不同数据结构的文档插入到集合中：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{&quot;site&quot;:&quot;www.baidu.com&quot;}
{&quot;site&quot;:&quot;www.google.com&quot;,&quot;name&quot;:&quot;Google&quot;}
{&quot;site&quot;:&quot;www.runoob.com&quot;,&quot;name&quot;:&quot;菜鸟教程&quot;,&quot;num&quot;:5}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当<strong>第一个文档插入时，集合就会被创建</strong>。</p><h3 id="合法的集合名" tabindex="-1"><a class="header-anchor" href="#合法的集合名" aria-hidden="true">#</a> 合法的集合名</h3><ul><li>集合名不能是空字符串&quot;&quot;。</li><li>集合名不能含有\0字符（空字符)，这个字符表示集合名的结尾。</li><li>集合名不能以&quot;system.&quot;开头，这是为系统集合保留的前缀。</li><li>用户创建的集合名字不能含有保留字符。有些驱动程序的确支持在集合名里面包含，这是因为某些系统生成的集合中包含该字符。除非你要访问这种系统创建的集合，否则千万不要在名字里出现$。</li></ul><p>如下实例：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.col.findOne()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="capped-collections" tabindex="-1"><a class="header-anchor" href="#capped-collections" aria-hidden="true">#</a> capped collections</h3><p>Capped collections 就是<strong>固定大小的collection</strong>。</p><p>它有<strong>很高的性能以及队列过期的特性</strong>(过期按照插入的顺序). 有点和 &quot;RRD&quot; 概念类似。</p><p>Capped collections 是高性能自动的维护对象的插入顺序。它非常<strong>适合类似记录日志的功能</strong>，和标准的 collection 不同，你必须要显式的创建一个capped collection，<strong>指定</strong>一个 collection 的<strong>大小</strong>，<strong>单位是字节</strong>。collection 的数据存储空间值提前分配的。</p><p>Capped collections 可以按照文档的插入顺序保存到集合中，而且这些文档在磁盘上存放位置也是按照插入顺序来保存的，所以当我们更新Capped collections 中文档的时候，更新后的文档不可以超过之前文档的大小，这样话就可以确保所有文档在磁盘上的位置一直保持不变。</p><p>由于 Capped collection 是按照文档的插入顺序而不是使用索引确定插入位置，这样的话可以提高增添数据的效率。MongoDB 的操作日志文件 <a href="http://oplog.rs" target="_blank" rel="noopener noreferrer">oplog.rs<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 就是利用 Capped Collection 来实现的。</p><p>要注意的是指定的存储大小包含了数据库的头信息。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.createCollection(&quot;mycoll&quot;, {capped:true, size:100000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>在 capped collection 中，你能添加新的对象。</li><li><strong>能进行更新，然而，对象不会增加存储空间。如果增加，更新就会失败</strong> 。</li><li>使用 Capped Collection 不能删除一个文档，可以使用 drop() 方法删除 collection 所有的行。</li><li>删除之后，你必须显式的重新创建这个 collection。</li><li>在<strong>32bit</strong>机器中，capped collection <strong>最大存储为 1e9( 1X109)个字节</strong>。</li></ul><hr><h2 id="元数据" tabindex="-1"><a class="header-anchor" href="#元数据" aria-hidden="true">#</a> 元数据</h2><p>数据库的信息是存储在集合中。它们使用了系统的命名空间：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dbname.system.*
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>在MongoDB数据库中名字空间 &lt;dbname&gt;.system.* 是包含多种系统信息的特殊集合(Collection)，如下:</p><table><thead><tr><th style="text-align:left;">集合命名空间</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">dbname.system.namespaces</td><td style="text-align:left;">列出所有名字空间。</td></tr><tr><td style="text-align:left;">dbname.system.indexes</td><td style="text-align:left;">列出所有索引。</td></tr><tr><td style="text-align:left;">dbname.system.profile</td><td style="text-align:left;">包含数据库概要(profile)信息。</td></tr><tr><td style="text-align:left;">dbname.system.users</td><td style="text-align:left;">列出所有可访问数据库的用户。</td></tr><tr><td style="text-align:left;">dbname.local.sources</td><td style="text-align:left;">包含复制对端（slave）的服务器信息和状态。</td></tr></tbody></table><p>对于修改系统集合中的对象有如下限制。</p><p>在system.indexes插入数据，可以创建索引。但除此之外该表信息是不可变的(特殊的drop index命令将自动更新相关信息)。</p><p>system.users是可修改的。 system.profile是可删除的。</p><hr><h2 id="mongodb-数据类型" tabindex="-1"><a class="header-anchor" href="#mongodb-数据类型" aria-hidden="true">#</a> MongoDB 数据类型</h2><p>下表为MongoDB中常用的几种数据类型。</p><table><thead><tr><th style="text-align:left;">数据类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">String</td><td style="text-align:left;">字符串。存储数据常用的数据类型。在 MongoDB 中，UTF-8 编码的字符串才是合法的。</td></tr><tr><td style="text-align:left;">Integer</td><td style="text-align:left;">整型数值。用于存储数值。根据你所采用的服务器，可分为 32 位或 64 位。</td></tr><tr><td style="text-align:left;">Boolean</td><td style="text-align:left;">布尔值。用于存储布尔值（真/假）。</td></tr><tr><td style="text-align:left;">Double</td><td style="text-align:left;">双精度浮点值。用于存储浮点值。</td></tr><tr><td style="text-align:left;">Min/Max keys</td><td style="text-align:left;">将一个值与 BSON（二进制的 JSON）元素的最低值和最高值相对比。</td></tr><tr><td style="text-align:left;">Array</td><td style="text-align:left;">用于将数组或列表或多个值存储为一个键。</td></tr><tr><td style="text-align:left;">Timestamp</td><td style="text-align:left;">时间戳。记录文档修改或添加的具体时间。</td></tr><tr><td style="text-align:left;">Object</td><td style="text-align:left;"><strong>用于内嵌文档。</strong></td></tr><tr><td style="text-align:left;">Null</td><td style="text-align:left;">用于创建空值。</td></tr><tr><td style="text-align:left;">Symbol</td><td style="text-align:left;">符号。该数据类型基本上等同于字符串类型，但不同的是，它一般用于采用特殊符号类型的语言。</td></tr><tr><td style="text-align:left;">Date</td><td style="text-align:left;">日期时间。用 UNIX 时间格式来存储当前日期或时间。你可以指定自己的日期时间：创建 Date 对象，传入年月日信息。</td></tr><tr><td style="text-align:left;">Object ID</td><td style="text-align:left;">对象 ID。用于创建文档的 ID。</td></tr><tr><td style="text-align:left;">Binary Data</td><td style="text-align:left;">二进制数据。用于存储二进制数据。</td></tr><tr><td style="text-align:left;">Code</td><td style="text-align:left;"><strong>代码类型。用于在文档中存储 JavaScript 代码。</strong></td></tr><tr><td style="text-align:left;">Regular expression</td><td style="text-align:left;"><strong>正则表达式类型。用于存储正则表达式。</strong></td></tr></tbody></table><p>下面说明下几种重要的数据类型。</p><h3 id="objectid" tabindex="-1"><a class="header-anchor" href="#objectid" aria-hidden="true">#</a> ObjectId</h3><p>ObjectId 类似唯一主键，可以很快的去生成和排序，包含 12 bytes，含义是：</p><ul><li>前 4 个字节表示创建 <strong>unix</strong> 时间戳,格林尼治时间 <strong>UTC</strong> 时间，比北京时间晚了 8 个小时</li><li>接下来的 3 个字节是机器标识码</li><li>紧接的两个字节由进程 id 组成 PID</li><li>最后三个字节是随机数</li></ul><p><img src="https://www.runoob.com/wp-content/uploads/2013/10/2875754375-5a19268f0fd9b_articlex.jpeg" alt="img" loading="lazy"></p><p>MongoDB 中存储的文档必须有一个 _id 键。这个键的值可以是任何类型的，默认是个 ObjectId 对象</p><p>由于 ObjectId 中保存了创建的时间戳，所以你不需要为你的文档保存时间戳字段，你可以通过 getTimestamp 函数来获取文档的创建时间:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; var newObject = ObjectId()
&gt; newObject.getTimestamp()
ISODate(&quot;2017-11-25T07:21:10Z&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ObjectId 转为字符串</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; newObject.str
5a1919e63df83ce79df8b38f
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="字符串" tabindex="-1"><a class="header-anchor" href="#字符串" aria-hidden="true">#</a> 字符串</h3><p><strong>BSON 字符串都是 UTF-8 编码。</strong></p><h3 id="时间戳" tabindex="-1"><a class="header-anchor" href="#时间戳" aria-hidden="true">#</a> 时间戳</h3><p>BSON 有一个特殊的时间戳类型用于 MongoDB 内部使用，与普通的 日期 类型不相关。 时间戳值是一个 64 位的值。其中：</p><ul><li>前32位是一个 time_t 值（与Unix新纪元相差的秒数）</li><li>后32位是在某秒中操作的一个递增的<code>序数</code></li></ul><p>在单个 mongod 实例中，时间戳值通常是唯一的。</p><p>在复制集中， oplog 有一个 ts 字段。这个字段中的值使用BSON时间戳表示了操作时间。</p><blockquote><p>BSON 时间戳类型主要用于 MongoDB 内部使用。在大多数情况下的应用开发中，你可以使用 BSON 日期类型。</p></blockquote><h3 id="日期" tabindex="-1"><a class="header-anchor" href="#日期" aria-hidden="true">#</a> 日期</h3><p>表示当前距离 Unix新纪元（1970年1月1日）的毫秒数。日期类型是有符号的, 负数表示 1970 年之前的日期。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; var mydate1 = new Date()     //格林尼治时间
&gt; mydate1
ISODate(&quot;2018-03-04T14:58:51.233Z&quot;)
&gt; typeof mydate1
object
&gt; var mydate2 = ISODate() //格林尼治时间
&gt; mydate2
ISODate(&quot;2018-03-04T15:00:45.479Z&quot;)
&gt; typeof mydate2
object
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这样创建的时间是日期类型，可以使用 JS 中的 Date 类型的方法。</p><p>返回一个时间类型的字符串：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; var mydate1str = mydate1.toString()
&gt; mydate1str
Sun Mar 04 2018 14:58:51 GMT+0000 (UTC) 
&gt; typeof mydate1str
string
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; Date()
Sun Mar 04 2018 15:02:59 GMT+0000 (UTC) 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="三、安装-win" tabindex="-1"><a class="header-anchor" href="#三、安装-win" aria-hidden="true">#</a> 三、安装（win）</h1><h2 id="下载" tabindex="-1"><a class="header-anchor" href="#下载" aria-hidden="true">#</a> <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/" target="_blank" rel="noopener noreferrer">下载<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h2><h2 id="安装" tabindex="-1"><a class="header-anchor" href="#安装" aria-hidden="true">#</a> <a href="https://docs.mongodb.com/manual/tutorial/install-mongodb-on-windows/" target="_blank" rel="noopener noreferrer">安装<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h2><h2 id="创建默认数据文件夹-data-db-与-data-log-mongodb-log文件" tabindex="-1"><a class="header-anchor" href="#创建默认数据文件夹-data-db-与-data-log-mongodb-log文件" aria-hidden="true">#</a> 创建默认数据文件夹 \data\db 与 \data\log \MongoDB.log文件</h2><h2 id="手动运行mongodb服务器" tabindex="-1"><a class="header-anchor" href="#手动运行mongodb服务器" aria-hidden="true">#</a> 手动运行MongoDB服务器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#安装目录\bin\mongod --dbpath 自己定义的数据文件夹（c:\data\db）</span>
F:<span class="token punctuation">\</span>Softs<span class="token punctuation">\</span>Installed<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>mongod --dbpath F:<span class="token punctuation">\</span>Softs<span class="token punctuation">\</span>Installed<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>data<span class="token punctuation">\</span>db


<span class="token comment">#成功结果：</span>
<span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;<span class="token variable">$date</span>&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2022-01-18T14:50:04.760+08:00&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;s&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;I&quot;</span>,  <span class="token string">&quot;c&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;CONTROL&quot;</span>,  <span class="token string">&quot;id&quot;</span>:23285,   <span class="token string">&quot;ctx&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;-&quot;</span>,<span class="token string">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Automatically disabling TLS 1.0, to force-enable TLS 1.0 specify --sslDisabledProtocols &#39;none&#39;&quot;</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token string">&quot;t&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;<span class="token variable">$date</span>&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;2022-01-18T14:50:04.761+08:00&quot;</span><span class="token punctuation">}</span>,<span class="token string">&quot;s&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;I&quot;</span>,  <span class="token string">&quot;c&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;NETWORK&quot;</span>,  <span class="token string">&quot;id&quot;</span>:4915701, <span class="token string">&quot;ctx&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;-&quot;</span>,<span class="token string">&quot;msg&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Initialized wire specification&quot;</span>,<span class="token string">&quot;attr&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;spec&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;incomingExternalClient&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;minWireVersion&quot;</span>:0,<span class="token string">&quot;maxWireVersion&quot;</span>:13<span class="token punctuation">}</span>,<span class="token string">&quot;incomingInternalClient&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;minWireVersion&quot;</span>:0,<span class="token string">&quot;maxWireVersion&quot;</span>:13<span class="token punctuation">}</span>,<span class="token string">&quot;outgoing&quot;</span>:<span class="token punctuation">{</span><span class="token string">&quot;minWireVersion&quot;</span>:0,<span class="token string">&quot;maxWireVersion&quot;</span>:13<span class="token punctuation">}</span>,<span class="token string">&quot;isInternalClient&quot;</span>:true<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
。。。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="四、连接" tabindex="-1"><a class="header-anchor" href="#四、连接" aria-hidden="true">#</a> 四、连接</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#一</span>
<span class="token comment">#将其配置成服务后启动服务</span>
mongod --dbpath <span class="token string">&quot;F:\Softs\Installed\MongoDB\data\db&quot;</span> --logpath <span class="token string">&quot;F:\Softs\Installed\MongoDB\data\log\MongoDB.log&quot;</span> --install --serviceName <span class="token string">&quot;MongoDB&quot;</span>
PS F:<span class="token punctuation">\</span>Softs<span class="token punctuation">\</span>Installed<span class="token punctuation">\</span>MongoDB<span class="token punctuation">\</span>bin<span class="token operator">&gt;</span> net start mongodb
请求的服务已经启动。

<span class="token comment">#二</span>
<span class="token comment">#配置bin目录环境变量后，用mongo连接</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">&gt;</span>mongo
MongoDB shell version v5.0.6-rc0
connecting to: mongodb://127.0.0.1:27017/?compressors<span class="token operator">=</span>disabled<span class="token operator">&amp;</span><span class="token assign-left variable">gssapiServiceName</span><span class="token operator">=</span>mongodb
Implicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;4f5de15b-0c12-4dde-8cc4-325ae6b23114&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version: <span class="token number">5.0</span>.6-rc0



<span class="token comment">#关闭</span>

<span class="token comment">#不为系统服务时</span>
关闭mongo命令窗口
<span class="token comment">#系统服务</span>
NET stop MongoDB <span class="token punctuation">(</span>关闭服务<span class="token punctuation">)</span>

<span class="token comment">#删除进程</span>
mongod --dbpath <span class="token string">&quot;d:\mongodb\data\db&quot;</span> --logpath <span class="token string">&quot;d:\mongodb\data\log\MongoDB.log&quot;</span> --remove --serviceName <span class="token string">&quot;MongoDB&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="五、数据库" tabindex="-1"><a class="header-anchor" href="#五、数据库" aria-hidden="true">#</a> 五、数据库</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#创建数据库，没有创建，有则切换，</span>

<span class="token comment">#数据命名规则：</span>
<span class="token comment">#不能是空字符串（&quot;&quot;)。</span>
<span class="token comment">#不得含有&#39; &#39;（空格)、.、$、/、\和\0 (空字符)。</span>
<span class="token comment">#应全部小写。</span>
<span class="token comment">#最多64字节。</span>

<span class="token comment">#有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。</span>
<span class="token comment">#admin： 从权限的角度来看，这是&quot;root&quot;数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务器端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。</span>
<span class="token comment">#local: 这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合</span>
<span class="token comment">#config: 当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。</span>

<span class="token operator">&gt;</span> use user
switched to db user
<span class="token comment">#查看当前数据库名</span>
<span class="token operator">&gt;</span> db
user
<span class="token comment">#插入数据</span>
<span class="token operator">&gt;</span> db.user.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#查看数据库列表，有数据的数据库才会显示</span>
<span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
user    <span class="token number">0</span>.000GB
<span class="token comment">#删除数据库</span>
<span class="token operator">&gt;</span> use user
switched to db user
<span class="token operator">&gt;</span> db.<span class="token function-name function">dropDatabase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="六、集合" tabindex="-1"><a class="header-anchor" href="#六、集合" aria-hidden="true">#</a> 六、集合</h1><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#查看所有数据库</span>
<span class="token operator">&gt;</span> show dbs
admin   <span class="token number">0</span>.000GB
config  <span class="token number">0</span>.000GB
<span class="token builtin class-name">local</span>   <span class="token number">0</span>.000GB
<span class="token operator">&gt;</span> use student
switched to db student
<span class="token comment">#创建集合数据</span>
<span class="token operator">&gt;</span> db.createCollection<span class="token punctuation">(</span><span class="token string">&quot;students&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#查看集合show collections 或 show tables</span>
<span class="token operator">&gt;</span> show tables
students
<span class="token operator">&gt;</span> db.student.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">false</span>
<span class="token comment">#删除集合数据</span>
<span class="token operator">&gt;</span> db.students.drop<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">true</span>
<span class="token operator">&gt;</span> show tables
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>options 参数：</p><table><thead><tr><th style="text-align:left;">字段</th><th style="text-align:left;">类型</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">capped</td><td style="text-align:left;">布尔</td><td style="text-align:left;">（可选）如果为 true，则创建固定集合。固定集合是指有着固定大小的集合，当达到最大值时，它会自动覆盖最早的文档。 <strong>当该值为 true 时，必须指定 size 参数。</strong></td></tr><tr><td style="text-align:left;">autoIndexId</td><td style="text-align:left;">布尔</td><td style="text-align:left;">3.2 之后不再支持该参数。（可选）如为 true，自动在 _id 字段创建索引。默认为 false。</td></tr><tr><td style="text-align:left;">size</td><td style="text-align:left;">数值</td><td style="text-align:left;">（可选）为固定集合指定一个最大值，即字节数。 <strong>如果 capped 为 true，也需要指定该字段。</strong></td></tr><tr><td style="text-align:left;">max</td><td style="text-align:left;">数值</td><td style="text-align:left;">（可选）指定固定集合中包含文档的最大数量。</td></tr></tbody></table><h1 id="七、文档" tabindex="-1"><a class="header-anchor" href="#七、文档" aria-hidden="true">#</a> 七、文档</h1><h2 id="增" tabindex="-1"><a class="header-anchor" href="#增" aria-hidden="true">#</a> 增</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> show tables
<span class="token operator">&gt;</span> db
student
<span class="token operator">&gt;</span> show collections
<span class="token operator">&gt;</span> db
student
<span class="token comment">#插入文档  insert（）</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token string">&quot;lxl&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#查看文档  find()</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token comment"># 将文档声明成变量再插入</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age:18<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,age:19<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token comment"># 插入文档 save（），有_id时重复则修改</span>
<span class="token operator">&gt;</span> db.student.save<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,age:20<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">20</span> <span class="token punctuation">}</span>
<span class="token comment">#插入文档 insetOne（）id重复报错  db.collection.insertMany()一次插入多个文档</span>
<span class="token operator">&gt;</span> db.student.insertOne<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: student.student index: _id_ dup key: { _id: ObjectId(&#39;61e7ae456e48f4bf534731d7&#39;) }&quot;</span>,
        <span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin class-name">:</span>
WriteError<span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string">&quot;index&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11000</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;E11000 duplicate key error collection: student.student index: _id_ dup key: { _id: ObjectId(&#39;61e7ae456e48f4bf534731d7&#39;) }&quot;</span>,
        <span class="token string">&quot;op&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">20</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteError@src/mongo/shell/bulk_api.js:465:48
mergeBatchResults@src/mongo/shell/bulk_api.js:871:49
executeBatch@src/mongo/shell/bulk_api.js:940:13
Bulk/this.execute@src/mongo/shell/bulk_api.js:1182:21
DBCollection.prototype.insertOne@src/mongo/shell/crud_api.js:264:9
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token comment">#插入文档replaceOne（）</span>
<span class="token operator">&gt;</span> db.student.replaceOne<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
uncaught exception: TypeError: can&#39;t convert undefined to object <span class="token builtin class-name">:</span>
DBCollection.prototype.replaceOne@src/mongo/shell/crud_api.js:477:16
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="改" tabindex="-1"><a class="header-anchor" href="#改" aria-hidden="true">#</a> 改</h2><p>模板</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.collection.update<span class="token punctuation">(</span>
   <span class="token punctuation">\</span><span class="token operator">&lt;</span>query<span class="token operator">&gt;</span>,
   <span class="token punctuation">\</span><span class="token operator">&lt;</span>update<span class="token operator">&gt;</span>,
   <span class="token punctuation">{</span>
     upsert: <span class="token punctuation">\</span><span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>,
     multi: <span class="token punctuation">\</span><span class="token operator">&lt;</span>boolean<span class="token operator">&gt;</span>,
     writeConcern: <span class="token punctuation">\</span><span class="token operator">&lt;</span>document<span class="token operator">&gt;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数说明：</strong></p><ul><li><strong>query</strong> : update的查询条件，类似sql update查询内where后面的。</li><li><strong>update</strong> : update的对象和一些更新的操作符（如<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo separator="true">,</mo></mrow><annotation encoding="application/x-tex">,</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.3em;vertical-align:-0.1944em;"></span><span class="mpunct">,</span></span></span></span>inc...）等，也可以理解为sql update查询内set后面的</li><li><strong>upsert</strong> : 可选，如果不存在update的记录，是否插入objNew,true为插入，默认是false，不插入。</li><li><strong>multi</strong> : 可选，mongodb 默认是false,只更新找到的第一条记录，如果这个参数为true,就把按条件查出来多条记录全部更新。</li><li><strong>writeConcern</strong> :可选，抛出异常的级别。</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lxl&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token comment">#更新第一条文档</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lxl&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;lll&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age:21<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> <span class="token assign-left variable">document</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token punctuation">{</span>age:21<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#更新类型必须相同</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;21&quot;</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;22&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#多条文档相同只更新第一条</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#,{multi:true}将全部符合条件的文档都更新</span>
<span class="token operator">&gt;</span> db.student.update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span>,<span class="token punctuation">{</span><span class="token variable">$set</span>:<span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>multi:true<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nMatched&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>, <span class="token string">&quot;nUpserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>, <span class="token string">&quot;nModified&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="删" tabindex="-1"><a class="header-anchor" href="#删" aria-hidden="true">#</a> 删</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.collection.remove(
   \&lt;query&gt;,
   {
     justOne: \&lt;boolean&gt;,
     writeConcern: \&lt;document&gt;
   }
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>参数说明：</strong></p><ul><li><strong>query</strong> :（可选）删除的文档的条件。</li><li><strong>justOne</strong> : （可选）如果设为 true 或 1，则只删除一个文档，如果不设置该参数，或使用默认值 false，则删除所有匹配条件的文档。</li><li><strong>writeConcern</strong> :（可选）抛出异常的级别</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b1736e48f4bf534731d8&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b19a6e48f4bf534731d9&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span> <span class="token punctuation">}</span>
<span class="token comment">#删除所有复合条件的文档</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span>document<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b3d76e48f4bf534731da&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b3d96e48f4bf534731db&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#设置justOne为true或1，删除符合条件的第一条文档</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22<span class="token punctuation">}</span>,1<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:21<span class="token punctuation">}</span>,1<span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7add36e48f4bf534731d6&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;lll&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7ae456e48f4bf534731d7&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">19</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b3d96e48f4bf534731db&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">21</span> <span class="token punctuation">}</span>
<span class="token comment">#删除所有文档</span>
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">)</span>
uncaught exception: Error: remove needs a query <span class="token builtin class-name">:</span>
DBCollection.prototype._parseRemove@src/mongo/shell/collection.js:364:15
DBCollection.prototype.remove@src/mongo/shell/collection.js:394:18
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="查" tabindex="-1"><a class="header-anchor" href="#查" aria-hidden="true">#</a> 查</h2><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.collection.find(query, projection)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><strong>query</strong> ：可选，使用查询操作符指定查询条件</li><li><strong>projection</strong> ：可选，使用投影操作符指定返回的键。查询时返回文档中所有键值， 只需省略该参数即可（默认省略）。</li></ul><p>如果你需要以易读的方式来读取数据，可以使用 pretty() 方法，语法格式如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.col.find().pretty()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>pretty() 方法以格式化的方式来显示所有文档。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.remove<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nRemoved&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:22,name:<span class="token string">&quot;a1&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:11,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>                                                                         
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#查询第一个</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.<span class="token function-name function">pretty</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>

<span class="token comment">#查询全部</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  小于$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#查询小于$lt的指定字段</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span>，<span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token comment">#查询小于$lt的指定外字段</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span>，<span class="token punctuation">{</span><span class="token string">&quot;_id&quot;</span>:0<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  小于或等于$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$lte</span>:22<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  大于$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$gt</span>:20<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  大于或等于$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$gte</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  不等于$lt</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:11,name:<span class="token string">&quot;a3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  and  $ne</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:22<span class="token punctuation">}</span>,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:33,name:<span class="token string">&quot;a3&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  or $or  缺少冒号</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span><span class="token punctuation">[</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span>,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: SyntaxError: missing <span class="token builtin class-name">:</span> after property <span class="token function">id</span> <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:20
<span class="token comment">#条件查询  or $or  缺少括号</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span>:<span class="token punctuation">[</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span>,name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: SyntaxError: missing <span class="token punctuation">]</span> after element list <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:25
<span class="token comment">#条件查询  or $or</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#条件查询  or + and</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token string">&quot;a3&quot;</span>,<span class="token variable">$or</span>:<span class="token punctuation">[</span><span class="token punctuation">{</span>age:<span class="token punctuation">{</span><span class="token variable">$ne</span>:11<span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span>name:<span class="token string">&quot;a2&quot;</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="type-操作符" tabindex="-1"><a class="header-anchor" href="#type-操作符" aria-hidden="true">#</a> $type 操作符</h3><table><thead><tr><th style="text-align:left;"><strong>类型</strong></th><th style="text-align:left;"><strong>数字</strong></th><th style="text-align:left;"><strong>备注</strong></th></tr></thead><tbody><tr><td style="text-align:left;">Double</td><td style="text-align:left;">1</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">String</td><td style="text-align:left;">2</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Object</td><td style="text-align:left;">3</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Array</td><td style="text-align:left;">4</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Binary data</td><td style="text-align:left;">5</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Undefined</td><td style="text-align:left;">6</td><td style="text-align:left;">已废弃。</td></tr><tr><td style="text-align:left;">Object id</td><td style="text-align:left;">7</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Boolean</td><td style="text-align:left;">8</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Date</td><td style="text-align:left;">9</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Null</td><td style="text-align:left;">10</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Regular Expression</td><td style="text-align:left;">11</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">JavaScript</td><td style="text-align:left;">13</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Symbol</td><td style="text-align:left;">14</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">JavaScript (with scope)</td><td style="text-align:left;">15</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">32-bit integer</td><td style="text-align:left;">16</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Timestamp</td><td style="text-align:left;">17</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">64-bit integer</td><td style="text-align:left;">18</td><td style="text-align:left;"></td></tr><tr><td style="text-align:left;">Min key</td><td style="text-align:left;">255</td><td style="text-align:left;">Query with <code>-1</code>.</td></tr><tr><td style="text-align:left;">Max key</td><td style="text-align:left;">127</td><td style="text-align:left;"></td></tr></tbody></table><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.insert<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:33,name:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;32-bit integer&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
Error: error: <span class="token punctuation">{</span>
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Unknown type name alias: 32-bit integer&quot;</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;codeName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BadValue&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;integer&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
Error: error: <span class="token punctuation">{</span>
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Unknown type name alias: integer&quot;</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;codeName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BadValue&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:16<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:18<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">#类型数字默认为double 即1 类型</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;Double&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
Error: error: <span class="token punctuation">{</span>
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
        <span class="token string">&quot;errmsg&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Unknown type name alias: Double&quot;</span>,
        <span class="token string">&quot;code&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;codeName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BadValue&quot;</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:Double<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: ReferenceError: Double is not defined <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:26
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span>:double<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: ReferenceError: double is not defined <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:26
<span class="token comment">#类型小写引号</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span>:<span class="token punctuation">{</span><span class="token variable">$type</span><span class="token builtin class-name">:</span><span class="token string">&#39;double&#39;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="limit-方法" tabindex="-1"><a class="header-anchor" href="#limit-方法" aria-hidden="true">#</a> Limit() 方法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#条件筛选后限制查询数量</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="skip-方法" tabindex="-1"><a class="header-anchor" href="#skip-方法" aria-hidden="true">#</a> Skip() 方法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token comment">#跳过对应数量的限制查询的数据</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">{</span>name:<span class="token punctuation">{</span><span class="token variable">$type</span>:2<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.limit<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>.skip<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="sort-方法" tabindex="-1"><a class="header-anchor" href="#sort-方法" aria-hidden="true">#</a> sort() 方法</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="八、索引" tabindex="-1"><a class="header-anchor" href="#八、索引" aria-hidden="true">#</a> 八、索引</h1><h2 id="createindex-方法" tabindex="-1"><a class="header-anchor" href="#createindex-方法" aria-hidden="true">#</a> createIndex() 方法`</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.find<span class="token punctuation">(</span><span class="token punctuation">)</span>.sort<span class="token punctuation">(</span><span class="token punctuation">{</span>age:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span> db.student.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:-1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token comment">#创建索引  1为正序，可使用多个字段创建索引</span>
<span class="token operator">&gt;</span> db.student.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;age&quot;</span>:-1,<span class="token string">&quot;name&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">4</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th style="text-align:left;">Parameter</th><th style="text-align:left;">Type</th><th style="text-align:left;">Description</th></tr></thead><tbody><tr><td style="text-align:left;">background</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">建索引过程会阻塞其它数据库操作，background可指定以后台方式创建索引，即增加 &quot;background&quot; 可选参数。 &quot;background&quot; 默认值为<strong>false</strong>。</td></tr><tr><td style="text-align:left;">unique</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">建立的索引是否唯一。指定为true创建唯一索引。默认值为<strong>false</strong>.</td></tr><tr><td style="text-align:left;">name</td><td style="text-align:left;">string</td><td style="text-align:left;">索引的名称。如果未指定，MongoDB的通过连接索引的字段名和排序顺序生成一个索引名称。</td></tr><tr><td style="text-align:left;">dropDups</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">**3.0+版本已废弃。**在建立唯一索引时是否删除重复记录,指定 true 创建唯一索引。默认值为 <strong>false</strong>.</td></tr><tr><td style="text-align:left;">sparse</td><td style="text-align:left;">Boolean</td><td style="text-align:left;">对文档中不存在的字段数据不启用索引；这个参数需要特别注意，如果设置为true的话，在索引字段中不会查询出不包含对应字段的文档.。默认值为 <strong>false</strong>.</td></tr><tr><td style="text-align:left;">expireAfterSeconds</td><td style="text-align:left;">integer</td><td style="text-align:left;">指定一个以秒为单位的数值，完成 TTL设定，设定集合的生存时间。</td></tr><tr><td style="text-align:left;">v</td><td style="text-align:left;">index version</td><td style="text-align:left;">索引的版本号。默认的索引版本取决于mongod创建索引时运行的版本。</td></tr><tr><td style="text-align:left;">weights</td><td style="text-align:left;">document</td><td style="text-align:left;">索引权重值，数值在 1 到 99,999 之间，表示该索引相对于其他索引字段的得分权重。</td></tr><tr><td style="text-align:left;">default_language</td><td style="text-align:left;">string</td><td style="text-align:left;">对于文本索引，该参数决定了停用词及词干和词器的规则的列表。 默认为英语</td></tr><tr><td style="text-align:left;">language_override</td><td style="text-align:left;">string</td><td style="text-align:left;">对于文本索引，该参数指定了包含在文档中的字段名，语言覆盖默认的language，默认值为 language.</td></tr></tbody></table><h1 id="九、聚合" tabindex="-1"><a class="header-anchor" href="#九、聚合" aria-hidden="true">#</a> 九、聚合</h1><h2 id="aggregate-方法" tabindex="-1"><a class="header-anchor" href="#aggregate-方法" aria-hidden="true">#</a> aggregate() 方法</h2><p>处理数据(诸如统计平均值，求和等)</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#通过name判断相同name有多少数据</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token variable">$group</span>:<span class="token punctuation">{</span>_id:<span class="token string">&quot;<span class="token variable">$name</span>&quot;</span>,num_tutorial:<span class="token punctuation">{</span><span class="token variable">$sum</span>:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>, <span class="token string">&quot;num_tutorial&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>聚合的表达式:</p><table><thead><tr><th style="text-align:left;">表达式</th><th style="text-align:left;">描述</th><th style="text-align:left;">实例</th></tr></thead><tbody><tr><td style="text-align:left;">$sum</td><td style="text-align:left;">计算总和。</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi><mi>u</mi><mi>m</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">sum : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">s</span><span class="mord mathnormal">u</span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:left;">$avg</td><td style="text-align:left;">计算平均值</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>v</mi><mi>g</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">avg : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">vg</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:left;">$min</td><td style="text-align:left;">获取集合中所有文档对应值得最小值。</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">min : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6595em;"></span><span class="mord mathnormal">min</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:left;">$max</td><td style="text-align:left;">获取集合中所有文档对应值得最大值。</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, num_tutorial : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>x</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">max : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>likes&quot;}}}])</td></tr><tr><td style="text-align:left;">$push</td><td style="text-align:left;">将值加入一个数组中，不会判断是否有重复的值。</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mi>u</mi><mi>s</mi><mi>h</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">push: &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mord mathnormal">u</span><span class="mord mathnormal">s</span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr><tr><td style="text-align:left;">$addToSet</td><td style="text-align:left;">将值加入一个数组中，会判断是否有重复的值，若相同的值在数组中已经存在了，则不加入。</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>d</mi><mi>d</mi><mi>T</mi><mi>o</mi><mi>S</mi><mi>e</mi><mi>t</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">addToSet : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">dd</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr><tr><td style="text-align:left;">$first</td><td style="text-align:left;">根据资源文档的排序获取第一个文档数据。</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, first_url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mi>i</mi><mi>r</mi><mi>s</mi><mi>t</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">first : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">i</span><span class="mord mathnormal">rs</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr><tr><td style="text-align:left;">$last</td><td style="text-align:left;">根据资源文档的排序获取最后一个文档数据</td><td style="text-align:left;">db.mycol.aggregate([{<span class="katex-error" title="ParseError: KaTeX parse error: Expected &#39;}&#39;, got &#39;EOF&#39; at end of input: …roup : {_id : &quot;">group : {_id : &quot;</span>by_user&quot;, last_url : {<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>a</mi><mi>s</mi><mi>t</mi><mo>:</mo><mi mathvariant="normal">&quot;</mi></mrow><annotation encoding="application/x-tex">last : &quot;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">a</span><span class="mord mathnormal">s</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord">&quot;</span></span></span></span>url&quot;}}}])</td></tr></tbody></table><h2 id="管道" tabindex="-1"><a class="header-anchor" href="#管道" aria-hidden="true">#</a> 管道</h2><p>管道在Unix和Linux中一般用于将当前命令的输出结果作为下一个命令的参数。</p><p>MongoDB的聚合管道将MongoDB文档在一个管道处理完毕后将结果传递给下一个管道处理。管道操作是可以重复的。</p><p>表达式：处理输入文档并输出。表达式是无状态的，只能用于计算当前聚合管道的文档，不能处理其它的文档。</p><p>这里我们介绍一下聚合框架中常用的几个操作：</p><ul><li>$project：修改输入文档的结构。可以用来重命名、增加或删除域，也可以用于创建计算结果以及嵌套文档。</li><li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mi>a</mi><mi>t</mi><mi>c</mi><mi>h</mi><mtext>：用于过滤数据，只输出符合条件的文档。</mtext></mrow><annotation encoding="application/x-tex">match：用于过滤数据，只输出符合条件的文档。</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">ma</span><span class="mord mathnormal">t</span><span class="mord mathnormal">c</span><span class="mord mathnormal">h</span><span class="mord cjk_fallback">：用于过滤数据，只输出符合条件的文档。</span></span></span></span>match使用MongoDB的标准查询操作。</li><li>$limit：用来限制MongoDB聚合管道返回的文档数。</li><li>$skip：在聚合管道中跳过指定数量的文档，并返回余下的文档。</li><li>$unwind：将文档中的某一个数组类型字段拆分成多条，每条包含数组中的一个值。</li><li>$group：将集合中的文档分组，可用于统计结果。</li><li>$sort：将输入文档排序后输出。</li><li>$geoNear：输出接近某一地理位置的有序文档。</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span> db.student.<span class="token function-name function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">22</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">11</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#只显示默认的id与name</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$project</span>:<span class="token punctuation">{</span>name:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b65b6e48f4bf534731dd&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6646e48f4bf534731de&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b6f66e48f4bf534731df&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#去掉默认id，只显示name</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$project</span>:<span class="token punctuation">{</span>_id:0,name:1<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a1&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a2&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#显示前三条之后的数据</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token variable">$skip</span>:3<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e7b78a6e48f4bf534731e0&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;a3&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61e8eedf6e48f4bf534731e1&quot;</span><span class="token punctuation">)</span>, <span class="token string">&quot;age&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">33</span>, <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
<span class="token comment">#显示大于10 小于等于25的一条数据</span>
<span class="token operator">&gt;</span> db.student.aggregate<span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token variable">$match</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> age <span class="token builtin class-name">:</span> <span class="token punctuation">{</span> <span class="token variable">$gt</span>:10,<span class="token variable">$lte</span>:25<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">}</span>,<span class="token punctuation">{</span> <span class="token variable">$group</span>:<span class="token punctuation">{</span> _id: null, count: <span class="token punctuation">{</span> <span class="token variable">$sum</span><span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span> <span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">{</span> <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> null, <span class="token string">&quot;count&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">3</span> <span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="十、复制" tabindex="-1"><a class="header-anchor" href="#十、复制" aria-hidden="true">#</a> 十、复制</h1><p>数据冗余备份，硬件故障，服务中断数据恢复。无需停机维护，分布式读取数据。</p><p>mongodb的复制至少需要两个节点。其中一个是主节点，负责处理客户端请求，其余的都是从节点，负责复制主节点上的数据。</p><p>mongodb各个节点常见的搭配方式为：一主一从、一主多从。</p><p>主节点记录在其上的所有操作oplog，从节点定期轮询主节点获取这些操作，然后对自己的数据副本执行这些操作，从而保证从节点的数据与主节点一致。</p><p>MongoDB复制结构图如下所示：</p><img src="https://www.runoob.com/wp-content/uploads/2013/12/replication.png" alt="MongoDB复制结构图" style="zoom:67%;"><p>以上结构图中，客户端从主节点读取数据，在客户端写入数据到主节点时， 主节点与从节点进行数据交互保障数据的一致性。</p><h2 id="副本集特征" tabindex="-1"><a class="header-anchor" href="#副本集特征" aria-hidden="true">#</a> 副本集特征：</h2><ul><li>N 个节点的集群</li><li>任何节点可作为主节点</li><li>所有写入操作都在主节点上</li><li>自动故障转移</li><li>自动恢复</li></ul><hr><h2 id="mongodb副本集设置" tabindex="-1"><a class="header-anchor" href="#mongodb副本集设置" aria-hidden="true">#</a> MongoDB副本集设置</h2><p>在本教程中我们使用同一个MongoDB来做MongoDB主从的实验， 操作步骤如下：</p><p>1、关闭正在运行的MongoDB服务器。</p><p>现在我们通过指定 --replSet 选项来启动mongoDB。--replSet 基本语法格式如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mongod --port &quot;PORT&quot; --dbpath &quot;YOUR_DB_DATA_PATH&quot; --replSet &quot;REPLICA_SET_INSTANCE_NAME&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>mongod --port <span class="token number">27017</span> --dbpath <span class="token string">&quot;F:\Softs\Installed\MongoDB\data&quot;</span> --replSet rs0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>示例启动一个名为rs0的MongoDB实例，其端口号为27017。启动后打开命令提示框并连接上mongoDB服务。在Mongo客户端使用命令rs.initiate()来启动一个新的副本集。我们可以使用rs.conf()来查看副本集的配置查看副本集状态使用 rs.status() 命令</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#关闭服务</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">&gt;</span>net stop mongodb
<span class="token comment">#创建rs0实例</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">&gt;</span>mongod --port <span class="token number">27017</span> --dbpath <span class="token string">&quot;F:\Softs\Installed\MongoDB\data&quot;</span> --replSet rs0
<span class="token comment">#启动</span>
C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token operator">&gt;</span>mongo
MongoDB shell version v5.0.6-rc0
connecting to: mongodb://127.0.0.1:27017/?compressors<span class="token operator">=</span>disabled<span class="token operator">&amp;</span><span class="token assign-left variable">gssapiServiceName</span><span class="token operator">=</span>mongodb
Implicit session: session <span class="token punctuation">{</span> <span class="token string">&quot;id&quot;</span> <span class="token builtin class-name">:</span> UUID<span class="token punctuation">(</span><span class="token string">&quot;a7bc72f5-0db4-4de3-b3c1-4f457b526e8b&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
MongoDB server version: <span class="token number">5.0</span>.6-rc0
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
Warning: the <span class="token string">&quot;mongo&quot;</span> shell has been superseded by <span class="token string">&quot;mongosh&quot;</span>,
<span class="token function">which</span> delivers improved usability and compatibility.The <span class="token string">&quot;mongo&quot;</span> shell has been deprecated and will be removed <span class="token keyword">in</span>
an upcoming release.
For installation instructions, see
https://docs.mongodb.com/mongodb-shell/install/
<span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span><span class="token operator">==</span>
<span class="token comment">#启动新的副本集</span>
<span class="token operator">&gt;</span> rs.<span class="token function-name function">initiate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;info2&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;no configuration specified. Using a default configuration for the set&quot;</span>,
        <span class="token string">&quot;me&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost:27017&quot;</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
查看副本配置
rs0:SECONDARY<span class="token operator">&gt;</span> rs.<span class="token function-name function">conf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;rs0&quot;</span>,
        <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;term&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;members&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
                        <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost:27017&quot;</span>,
                        <span class="token string">&quot;arbiterOnly&quot;</span> <span class="token builtin class-name">:</span> false,
                        <span class="token string">&quot;buildIndexes&quot;</span> <span class="token builtin class-name">:</span> true,
                        <span class="token string">&quot;hidden&quot;</span> <span class="token builtin class-name">:</span> false,
                        <span class="token string">&quot;priority&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>

                        <span class="token punctuation">}</span>,
                        <span class="token string">&quot;secondaryDelaySecs&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;votes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
        <span class="token string">&quot;protocolVersion&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;writeConcernMajorityJournalDefault&quot;</span> <span class="token builtin class-name">:</span> true,
        <span class="token string">&quot;settings&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;chainingAllowed&quot;</span> <span class="token builtin class-name">:</span> true,
                <span class="token string">&quot;heartbeatIntervalMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2000</span>,
                <span class="token string">&quot;heartbeatTimeoutSecs&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">10</span>,
                <span class="token string">&quot;electionTimeoutMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">10000</span>,
                <span class="token string">&quot;catchUpTimeoutMillis&quot;</span> <span class="token builtin class-name">:</span> -1,
                <span class="token string">&quot;catchUpTakeoverDelayMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">30000</span>,
                <span class="token string">&quot;getLastErrorModes&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>

                <span class="token punctuation">}</span>,
                <span class="token string">&quot;getLastErrorDefaults&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;w&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;wtimeout&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;replicaSetId&quot;</span> <span class="token builtin class-name">:</span> ObjectId<span class="token punctuation">(</span><span class="token string">&quot;61ea43d55303298c0a702c41&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">#查看副本集状态</span>
rs0:PRIMARY<span class="token operator">&gt;</span> rs.<span class="token function-name function">status</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;set&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;rs0&quot;</span>,
        <span class="token string">&quot;date&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:33.032Z&quot;</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;myState&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;term&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;syncSourceHost&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;syncSourceId&quot;</span> <span class="token builtin class-name">:</span> -1,
        <span class="token string">&quot;heartbeatIntervalMillis&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;majorityVoteCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;writeMajorityCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;votingMembersCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;writableVotingMembersCount&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;optimes&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;lastCommittedOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;lastCommittedWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;readConcernMajorityOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;appliedOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;durableOpTime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;lastAppliedWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;lastDurableWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;lastStableRecoveryTimestamp&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742741</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
        <span class="token string">&quot;electionCandidateMetrics&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;lastElectionReason&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;electionTimeout&quot;</span>,
                <span class="token string">&quot;lastElectionDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:42.687Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;electionTerm&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;lastCommittedOpTimeAtElection&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742741</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span>-1<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;lastSeenOpTimeAtElection&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742741</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span>-1<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;numVotesNeeded&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                <span class="token string">&quot;priorityAtElection&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                <span class="token string">&quot;electionTimeoutMillis&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;newTermStartDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:42.963Z&quot;</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;wMajorityWriteAvailabilityDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:43.131Z&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;members&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                        <span class="token string">&quot;_id&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
                        <span class="token string">&quot;name&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;localhost:27017&quot;</span>,
                        <span class="token string">&quot;health&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;state&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;stateStr&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;PRIMARY&quot;</span>,
                        <span class="token string">&quot;uptime&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">203</span>,
                        <span class="token string">&quot;optime&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                <span class="token string">&quot;ts&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                                <span class="token string">&quot;t&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>,
                        <span class="token string">&quot;optimeDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;lastAppliedWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;lastDurableWallTime&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:26:23.117Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;syncSourceHost&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
                        <span class="token string">&quot;syncSourceId&quot;</span> <span class="token builtin class-name">:</span> -1,
                        <span class="token string">&quot;infoMessage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;Could not find member to sync from&quot;</span>,
                        <span class="token string">&quot;electionTime&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742742</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;electionDate&quot;</span> <span class="token builtin class-name">:</span> ISODate<span class="token punctuation">(</span><span class="token string">&quot;2022-01-21T05:25:42Z&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;configVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;configTerm&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                        <span class="token string">&quot;self&quot;</span> <span class="token builtin class-name">:</span> true,
                        <span class="token string">&quot;lastHeartbeatMessage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;<span class="token variable">$clusterTime</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;clusterTime&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>,
                <span class="token string">&quot;signature&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;hash&quot;</span> <span class="token builtin class-name">:</span> BinData<span class="token punctuation">(</span><span class="token number">0</span>,<span class="token string">&quot;AAAAAAAAAAAAAAAAAAAAAAAAAAA=&quot;</span><span class="token punctuation">)</span>,
                        <span class="token string">&quot;keyId&quot;</span> <span class="token builtin class-name">:</span> NumberLong<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;operationTime&quot;</span> <span class="token builtin class-name">:</span> Timestamp<span class="token punctuation">(</span><span class="token number">1642742783</span>, <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
rs0:PRIMARY<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="副本集添加成员" tabindex="-1"><a class="header-anchor" href="#副本集添加成员" aria-hidden="true">#</a> 副本集添加成员</h2><p>添加副本集的成员，我们需要使用多台服务器来启动mongo服务。进入Mongo客户端，并使用rs.add()方法来添加副本集的成员。</p><h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法" aria-hidden="true">#</a> 语法</h3><p>rs.add() 命令基本语法格式如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;rs.add(HOST_NAME:PORT)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="实例" tabindex="-1"><a class="header-anchor" href="#实例" aria-hidden="true">#</a> 实例</h3><p><a href="http://xn--mongod1-4t3kgmkf76ai3f15dw8ldsfopam48kyv9ilm3b.net" target="_blank" rel="noopener noreferrer">假设你已经启动了一个名为mongod1.net<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，端口号为27017的Mongo服务。 在客户端命令窗口使用rs.add() 命令将其添加到副本集中，命令如下所示：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;rs.add(&quot;mongod1.net:27017&quot;)
&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>MongoDB中你只能通过主节点将Mongo服务添加到副本集中， 判断当前运行的Mongo服务是否为主节点可以使用命令db.isMaster() 。</p><p>MongoDB的副本集与我们常见的主从有所不同，主从在主机宕机后所有服务将停止，而副本集在主机宕机后，副本会接管主节点成为主节点，不会出现宕机的情况。</p><h1 id="十一、分片" tabindex="-1"><a class="header-anchor" href="#十一、分片" aria-hidden="true">#</a> 十一、分片</h1><hr><h2 id="分片" tabindex="-1"><a class="header-anchor" href="#分片" aria-hidden="true">#</a> 分片</h2><p>在Mongodb里面存在另一种集群，就是分片技术,可以满足MongoDB数据量大量增长的需求。</p><p>当MongoDB存储海量的数据时，一台机器可能不足以存储数据，也可能不足以提供可接受的读写吞吐量。这时，我们就可以通过在多台机器上分割数据，使得数据库系统能存储和处理更多的数据。</p><hr><h2 id="为什么使用分片" tabindex="-1"><a class="header-anchor" href="#为什么使用分片" aria-hidden="true">#</a> 为什么使用分片</h2><ul><li>复制所有的写入操作到主节点</li><li>延迟的敏感数据会在主节点查询</li><li>单个副本集限制在12个节点</li><li>当请求量巨大时会出现内存不足。</li><li>本地磁盘不足</li><li>垂直扩展价格昂贵</li></ul><hr><h2 id="mongodb分片" tabindex="-1"><a class="header-anchor" href="#mongodb分片" aria-hidden="true">#</a> MongoDB分片</h2><p>下图展示了在MongoDB中使用分片集群结构分布：</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/sharding.png" alt="img" loading="lazy"></p><p>上图中主要有如下所述三个主要组件：</p><ul><li><p>Shard:</p><p>用于存储实际的数据块，实际生产环境中一个shard server角色可由几台机器组个一个replica set承担，防止主机单点故障</p></li><li><p>Config Server:</p><p>mongod 实例，存储了整个 ClusterMetadata，其中包括 chunk 信息。</p></li><li><p>Query Routers:</p><p>前端路由，客户端由此接入，且让整个集群看上去像单一数据库，前端应用可以透明使用。</p></li></ul><hr><h2 id="分片实例" tabindex="-1"><a class="header-anchor" href="#分片实例" aria-hidden="true">#</a> 分片实例</h2><p>分片结构端口分布如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Shard Server 1：27020
Shard Server 2：27021
Shard Server 3：27022
Shard Server 4：27023
Config Server ：27100
Route Process：40000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤一：启动Shard Server</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@100 /]# mkdir -p /www/mongoDB/shard/s0
[root@100 /]# mkdir -p /www/mongoDB/shard/s1
[root@100 /]# mkdir -p /www/mongoDB/shard/s2
[root@100 /]# mkdir -p /www/mongoDB/shard/s3
[root@100 /]# mkdir -p /www/mongoDB/shard/log
[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27020 --dbpath=/www/mongoDB/shard/s0 --logpath=/www/mongoDB/shard/log/s0.log --logappend --fork
....
[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27023 --dbpath=/www/mongoDB/shard/s3 --logpath=/www/mongoDB/shard/log/s3.log --logappend --fork
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤二： 启动Config Server</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@100 /]# mkdir -p /www/mongoDB/shard/config
[root@100 /]# /usr/local/mongoDB/bin/mongod --port 27100 --dbpath=/www/mongoDB/shard/config --logpath=/www/mongoDB/shard/log/config.log --logappend --fork
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>**注意：**这里我们完全可以像启动普通mongodb服务一样启动，不需要添加—shardsvr和configsvr参数。因为这两个参数的作用就是改变启动端口的，所以我们自行指定了端口就可以。</p><p>步骤三： 启动Route Process</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>/usr/local/mongoDB/bin/mongos --port 40000 --configdb localhost:27100 --fork --logpath=/www/mongoDB/shard/log/route.log --chunkSize 500
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>mongos启动参数中，chunkSize这一项是用来指定chunk的大小的，单位是MB，默认大小为200MB.</p><p>步骤四： 配置Sharding</p><p>接下来，我们使用MongoDB Shell登录到mongos，添加Shard节点</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>[root@100 shard]# /usr/local/mongoDB/bin/mongo admin --port 40000
MongoDB shell version: 2.0.7
connecting to: 127.0.0.1:40000/admin
mongos&gt; db.runCommand({ addshard:&quot;localhost:27020&quot; })
{ &quot;shardAdded&quot; : &quot;shard0000&quot;, &quot;ok&quot; : 1 }
......
mongos&gt; db.runCommand({ addshard:&quot;localhost:27029&quot; })
{ &quot;shardAdded&quot; : &quot;shard0009&quot;, &quot;ok&quot; : 1 }
mongos&gt; db.runCommand({ enablesharding:&quot;test&quot; }) #设置分片存储的数据库
{ &quot;ok&quot; : 1 }
mongos&gt; db.runCommand({ shardcollection: &quot;test.log&quot;, key: { id:1,time:1}})
{ &quot;collectionsharded&quot; : &quot;test.log&quot;, &quot;ok&quot; : 1 }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>步骤五： 程序代码内无需太大更改，直接按照连接普通的mongo数据库那样，将数据库连接接入接口40000</p><h1 id="十二、安装其他工具" tabindex="-1"><a class="header-anchor" href="#十二、安装其他工具" aria-hidden="true">#</a> 十二、安装其他工具</h1><p>下载后将其bin目录下复制到data下bin目录下：</p><p><a href="https://www.mongodb.com/try/download/database-tools" target="_blank" rel="noopener noreferrer">https://www.mongodb.com/try/download/database-tools<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121145921692.png" alt="image-20220121145921692" loading="lazy"></p><h1 id="十三、备份-恢复" tabindex="-1"><a class="header-anchor" href="#十三、备份-恢复" aria-hidden="true">#</a> 十三、备份 / 恢复</h1><hr><h2 id="数据备份" tabindex="-1"><a class="header-anchor" href="#数据备份" aria-hidden="true">#</a> 数据备份</h2><p>备份(mongodump)与恢复(mongorestore)。在Mongodb中我们使用mongodump命令来备份MongoDB数据。该命令可以导出所有数据到指定目录中。</p><p>mongodump命令可以通过参数指定导出的数据量级转存的服务器。</p><h3 id="语法-1" tabindex="-1"><a class="header-anchor" href="#语法-1" aria-hidden="true">#</a> 语法</h3><p>mongodump命令脚本语法如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongodump -h dbhost -d dbname -o dbdirectory
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>-h：</p><p>MongoDB 所在服务器地址，例如：127.0.0.1，当然也可以指定端口号：127.0.0.1:27017</p></li><li><p>-d：</p><p>需要备份的数据库实例，例如：test</p></li><li><p>-o：</p><p>备份的数据存放位置，例如：c:\data\dump，当然该目录需要提前建立，在备份完成后，系统自动在dump目录下建立一个test目录，这个目录里面存放该数据库实例的备份数据。</p></li></ul><h3 id="实例-1" tabindex="-1"><a class="header-anchor" href="#实例-1" aria-hidden="true">#</a> 实例</h3><p>在本地使用 27017 启动你的mongod服务。打开命令提示符窗口，进入MongoDB安装目录的bin目录输入命令mongodump:</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>mongodump <span class="token comment">#即mongod</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行以上命令后，客户端会连接到ip为 127.0.0.1 端口号为 27017 的MongoDB服务上，并备份所有数据到 bin/dump/ 目录中。命令输出结果如下：</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongodump.png" alt="MongoDB数据备份" loading="lazy"></p><p>mongodump 命令可选参数列表如下所示：</p><table><thead><tr><th style="text-align:left;">语法</th><th style="text-align:left;">描述</th><th style="text-align:left;">实例</th></tr></thead><tbody><tr><td style="text-align:left;">mongodump --host HOST_NAME --port PORT_NUMBER</td><td style="text-align:left;">该命令将备份所有MongoDB数据</td><td style="text-align:left;">mongodump --host <a href="http://runoob.com" target="_blank" rel="noopener noreferrer">runoob.com<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> --port 27017</td></tr><tr><td style="text-align:left;">mongodump --dbpath DB_PATH --out BACKUP_DIRECTORY</td><td style="text-align:left;"></td><td style="text-align:left;">mongodump --dbpath /data/db/ --out /data/backup/</td></tr><tr><td style="text-align:left;">mongodump --collection COLLECTION --db DB_NAME</td><td style="text-align:left;">该命令将备份指定数据库的集合。</td><td style="text-align:left;">mongodump --collection mycol --db test</td></tr></tbody></table><hr><h2 id="数据恢复" tabindex="-1"><a class="header-anchor" href="#数据恢复" aria-hidden="true">#</a> 数据恢复</h2><p>mongodb使用 mongorestore 命令来恢复备份的数据。</p><h3 id="语法-2" tabindex="-1"><a class="header-anchor" href="#语法-2" aria-hidden="true">#</a> 语法</h3><p>mongorestore命令脚本语法如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongorestore -h \&lt;hostname&gt;\&lt;:port&gt; -d dbname \&lt;path&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>--host &lt;:port&gt;, -h &lt;:port&gt;：</p><p>MongoDB所在服务器地址，默认为： localhost:27017</p></li><li><p>--db , -d ：</p><p>需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如test2</p></li><li><p>--drop：</p><p>恢复的时候，先删除当前数据，然后恢复备份的数据。就是说，恢复后，备份后添加修改的数据都会被删除，慎用哦！</p></li><li><p>&lt;path&gt;：</p><p>mongorestore 最后的一个参数，设置备份数据所在位置，例如：c:\data\dump\test。</p><p>你不能同时指定 &lt;path&gt; 和 --dir 选项，--dir也可以设置备份目录。</p></li><li><p>--dir：</p><p>指定备份的目录</p><p>你不能同时指定 &lt;path&gt; 和 --dir 选项。</p></li></ul><p>接下来我们执行以下命令:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongorestore
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>执行以上命令输出结果如下：</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongorestore.png" alt="MongoDB数据恢复" loading="lazy"></p><h1 id="十四、监控" tabindex="-1"><a class="header-anchor" href="#十四、监控" aria-hidden="true">#</a> 十四、监控</h1><p>在你已经安装部署并允许MongoDB服务后，你必须要了解MongoDB的运行情况，并查看MongoDB的性能。这样在大流量得情况下可以很好的应对并保证MongoDB正常运作。</p><p>MongoDB中提供了mongostat 和 mongotop 两个命令来监控MongoDB的运行情况。</p><hr><h2 id="mongostat-命令" tabindex="-1"><a class="header-anchor" href="#mongostat-命令" aria-hidden="true">#</a> mongostat 命令</h2><p>mongostat是mongodb自带的状态检测工具，在命令行下使用。它会间隔固定时间获取mongodb的当前运行状态，并输出。如果你发现数据库突然变慢或者有其他问题的话，你第一手的操作就考虑采用mongostat来查看mongo的状态。</p><p>启动你的Mongod服务，进入到你安装的MongoDB目录下的bin目录， 然后输入mongostat命令，如下所示：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\set up\mongodb\bin&gt;mongostat
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上命令输出结果如下：</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongostat.png" alt="img" loading="lazy"></p><h2 id="mongotop-命令" tabindex="-1"><a class="header-anchor" href="#mongotop-命令" aria-hidden="true">#</a> mongotop 命令</h2><p>mongotop也是mongodb下的一个内置工具，mongotop提供了一个方法，用来跟踪一个MongoDB的实例，查看哪些大量的时间花费在读取和写入数据。 mongotop提供每个集合的水平的统计数据。默认情况下，mongotop返回值的每一秒。</p><p>启动你的Mongod服务，进入到你安装的MongoDB目录下的bin目录， 然后输入mongotop命令，如下所示：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>D:\set up\mongodb\bin&gt;mongotop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上命令执行输出结果如下：</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/mongotop.png" alt="img" loading="lazy"></p><p>带参数实例</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> E:\mongodb-win32-x86_64-2.2.1\bin&gt;mongotop 10
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/29122412-e32a9f09e46e496a8833433fdb421311.gif" alt="img" loading="lazy"></p><p>后面的10是*&lt;sleeptime&gt;*参数 ，可以不使用，等待的时间长度，以秒为单位，mongotop等待调用之间。通过的默认mongotop返回数据的每一秒。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code> E:\mongodb-win32-x86_64-2.2.1\bin&gt;mongotop --locks
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>报告每个数据库的锁的使用中，使用mongotop - 锁，这将产生以下输出：</p><p><img src="https://www.runoob.com/wp-content/uploads/2013/12/29122706-bfdd58e62c404b948f8039c489f8be81.gif" alt="img" loading="lazy"></p><p>输出结果字段说明：</p><ul><li><p>ns：</p><p>包含数据库命名空间，后者结合了数据库名称和集合。</p></li><li><p><strong>db：</strong></p><p>包含数据库的名称。名为 . 的数据库针对全局锁定，而非特定数据库。</p></li><li><p><strong>total：</strong></p><p>mongod花费的时间工作在这个命名空间提供总额。</p></li><li><p><strong>read：</strong></p><p>提供了大量的时间，这mongod花费在执行读操作，在此命名空间。</p></li><li><p><strong>write：</strong></p><p>提供这个命名空间进行写操作，这mongod花了大量的时间。</p></li></ul><h1 id="十五、mongodbcompass使用" tabindex="-1"><a class="header-anchor" href="#十五、mongodbcompass使用" aria-hidden="true">#</a> 十五、MongoDBCompass使用</h1><p>MongoDB可视化工具</p><p>mongo命令连接服务器后打开工具</p><p>点击连接默认的服务器、接口和None认证的服务</p><p><img src="http://qnimg.gisfsde.com/work/image-20220121155412364.png" alt="image-20220121155412364" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121155655870.png" alt="image-20220121155655870" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121160035165.png" alt="image-20220121160035165" loading="lazy"></p><p><img src="http://qnimg.gisfsde.com/work/image-20220121160101367.png" alt="image-20220121160101367" loading="lazy"></p><h1 id="十六、java使用" tabindex="-1"><a class="header-anchor" href="#十六、java使用" aria-hidden="true">#</a> 十六、Java使用</h1><p><a href="https://docs.mongodb.com/drivers/java/sync/current/quick-start/" target="_blank" rel="noopener noreferrer">文档<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="引入依赖" tabindex="-1"><a class="header-anchor" href="#引入依赖" aria-hidden="true">#</a> 引入依赖</h2><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!--MongoDB--&gt;</span>
\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   \<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mongodb\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   \<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mongodb-driver-sync\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   \<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.1\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
\<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="连接" tabindex="-1"><a class="header-anchor" href="#连接" aria-hidden="true">#</a> 连接</h2><div class="language-java ext-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">pers<span class="token punctuation">.</span>lxl<span class="token punctuation">.</span>mylearnproject<span class="token punctuation">.</span>programbase<span class="token punctuation">.</span>nosql<span class="token punctuation">.</span>mongolearn</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">static</span> <span class="token import static"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span>model<span class="token punctuation">.</span></span><span class="token class-name">Filters</span><span class="token punctuation">.</span><span class="token static">eq</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>bson<span class="token punctuation">.</span></span><span class="token class-name">Document</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoClients</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoCollection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>mongodb<span class="token punctuation">.</span>client<span class="token punctuation">.</span></span><span class="token class-name">MongoDatabase</span></span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloMongoDB</span> <span class="token punctuation">{</span>
<span class="token comment">//1.添加依赖</span>
<span class="token comment">//            \&lt;dependency&gt;</span>
<span class="token comment">//            \&lt;groupId&gt;org.mongodb\&lt;/groupId&gt;</span>
<span class="token comment">//            \&lt;artifactId&gt;mongodb-driver-sync\&lt;/artifactId&gt;</span>
<span class="token comment">//            \&lt;version&gt;4.4.1\&lt;/version&gt;</span>
<span class="token comment">//        \&lt;/dependency&gt;</span>

<span class="token comment">//    2.连接到数据库</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span> <span class="token class-name">String</span> args<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//    try{</span>
<span class="token comment">//        // 连接到 mongodb 服务</span>
<span class="token comment">//        MongoClient mongoClient = new MongoClient( &quot;localhost&quot; , 27017 );</span>
<span class="token comment">//</span>
<span class="token comment">//        // 连接到数据库</span>
<span class="token comment">//        MongoDatabase mongoDatabase = mongoClient.getDatabase(&quot;mycol&quot;);</span>
<span class="token comment">//        System.out.println(&quot;Connect to database successfully&quot;);</span>
<span class="token comment">//</span>
<span class="token comment">//    }catch(Exception e){</span>
<span class="token comment">//        System.err.println( e.getClass().getName() + &quot;: &quot; + e.getMessage() );</span>
<span class="token comment">//    }</span>

<span class="token comment">// Replace the uri string with your MongoDB deployment&#39;s connection string</span>
<span class="token comment">//    IllegalArgumentException: Unsupported compressor &#39;disabled&#39;</span>
<span class="token comment">//    String uri = &quot;mongodb://127.0.0.1:27017/?compressors=disabled&amp;gssapiServiceName=mongodb&quot;;</span>
<span class="token comment">//    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: com/mongodb/internal/connection/InternalConnectionPoolSettings  升级springboot版本</span>
    <span class="token class-name">String</span> uri <span class="token operator">=</span> <span class="token string">&quot;mongodb://127.0.0.1:27017/?gssapiServiceName=mongodb&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">(</span><span class="token class-name">MongoClient</span> mongoClient <span class="token operator">=</span> <span class="token class-name">MongoClients</span><span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//        show dbs</span>
        <span class="token class-name">MongoDatabase</span> database <span class="token operator">=</span> mongoClient<span class="token punctuation">.</span><span class="token function">getDatabase</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        show collections 或 show tables</span>
        <span class="token class-name">MongoCollection</span>\<span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Document</span><span class="token punctuation">&gt;</span></span> collection <span class="token operator">=</span> database<span class="token punctuation">.</span><span class="token function">getCollection</span><span class="token punctuation">(</span><span class="token string">&quot;student&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Document</span> doc <span class="token operator">=</span> collection<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token function">eq</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>doc<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">&quot;==========&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="十七、关系" tabindex="-1"><a class="header-anchor" href="#十七、关系" aria-hidden="true">#</a> 十七、关系</h1><p>MongoDB 的关系表示多个文档之间在逻辑上的相互联系。</p><p>文档间可以通过嵌入和引用来建立联系。</p><p>MongoDB 中的关系可以是：</p><ul><li>1:1 (1对1)</li><li>1: N (1对多)</li><li>N: 1 (多对1)</li><li>N: N (多对多)</li></ul><p>接下来我们来考虑下用户与用户地址的关系。</p><p>一个用户可以有多个地址，所以是一对多的关系。</p><p>以下是 <strong>user</strong> 文档的简单结构：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;),
   &quot;name&quot;: &quot;Tom Hanks&quot;,
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是 <strong>address</strong> 文档的简单结构：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc4a5d85242602e000000&quot;),
   &quot;building&quot;: &quot;22 A, Indiana Apt&quot;,
   &quot;pincode&quot;: 123456,
   &quot;city&quot;: &quot;Los Angeles&quot;,
   &quot;state&quot;: &quot;California&quot;
} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="嵌入式关系" tabindex="-1"><a class="header-anchor" href="#嵌入式关系" aria-hidden="true">#</a> 嵌入式关系</h2><p>使用嵌入式方法，我们可以把用户地址嵌入到用户的文档中：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;),
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;,
   &quot;address&quot;: [
      {
         &quot;building&quot;: &quot;22 A, Indiana Apt&quot;,
         &quot;pincode&quot;: 123456,
         &quot;city&quot;: &quot;Los Angeles&quot;,
         &quot;state&quot;: &quot;California&quot;
      },
      {
         &quot;building&quot;: &quot;170 A, Acropolis Apt&quot;,
         &quot;pincode&quot;: 456789,
         &quot;city&quot;: &quot;Chicago&quot;,
         &quot;state&quot;: &quot;Illinois&quot;
      }]
} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上数据保存在单一的文档中，可以比较容易的获取和维护数据。 你可以这样查询用户的地址：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;},{&quot;address&quot;:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>注意：以上查询中 <strong>db</strong> 和 <strong>users</strong> 表示数据库和集合。</p><p>这种数据结构的缺点是，如果用户和用户地址在不断增加，数据量不断变大，会影响读写性能。</p><h2 id="引用式关系" tabindex="-1"><a class="header-anchor" href="#引用式关系" aria-hidden="true">#</a> 引用式关系</h2><p>引用式关系是设计数据库时经常用到的方法，这种方法把用户数据文档和用户地址数据文档分开，通过引用文档的 <strong>id</strong> 字段来建立关系。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;52ffc33cd85242f436000001&quot;),
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;,
   &quot;address_ids&quot;: [
      ObjectId(&quot;52ffc4a5d85242602e000000&quot;),
      ObjectId(&quot;52ffc4a5d85242602e000001&quot;)
   ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上实例中，用户文档的 <strong>address_ids</strong> 字段包含用户地址的对象id（ObjectId）数组。</p><p>我们可以读取这些用户地址的对象id（ObjectId）来获取用户的详细地址信息。</p><p>这种方法需要两次查询，第一次查询用户地址的对象id（ObjectId），第二次通过查询的id获取用户的详细地址信息。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;var result = db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;},{&quot;address_ids&quot;:1})
&gt;var addresses = db.address.find({&quot;_id&quot;:{&quot;$in&quot;:result[&quot;address_ids&quot;]}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="十八、数据库引用" tabindex="-1"><a class="header-anchor" href="#十八、数据库引用" aria-hidden="true">#</a> 十八、数据库引用</h1><p>在上一章节MongoDB关系中我们提到了MongoDB的引用来规范数据结构文档。</p><p>MongoDB 引用有两种：</p><ul><li>手动引用（Manual References）</li><li>DBRefs</li></ul><hr><h2 id="dbrefs-vs-手动引用" tabindex="-1"><a class="header-anchor" href="#dbrefs-vs-手动引用" aria-hidden="true">#</a> DBRefs vs 手动引用</h2><p>考虑这样的一个场景，我们在不同的集合中 (address_home, address_office, address_mailing, 等)存储不同的地址（住址，办公室地址，邮件地址等）。</p><p>这样，我们在调用不同地址时，也需要指定集合，一个文档从多个集合引用文档，我们应该使用 DBRefs。</p><hr><h2 id="使用-dbrefs" tabindex="-1"><a class="header-anchor" href="#使用-dbrefs" aria-hidden="true">#</a> 使用 DBRefs</h2><p>DBRef的形式：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $ref : , $id : , $db :  }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>三个字段表示的意义为：</p><ul><li>$ref：集合名称</li><li>$id：引用的id</li><li>$db:数据库名称，可选参数</li><li></li></ul><p>以下实例中用户数据文档使用了 DBRef, 字段 address：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;:ObjectId(&quot;53402597d852426020000002&quot;),
   &quot;address&quot;: {
   &quot;$ref&quot;: &quot;address_home&quot;,
   &quot;$id&quot;: ObjectId(&quot;534009e4d852427820000002&quot;),
   &quot;$db&quot;: &quot;runoob&quot;},
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>address</strong> DBRef 字段指定了引用的地址文档是在 runoob 数据库下的 address_home 集合，id 为 534009e4d852427820000002。</p><p>以下代码中，我们通过指定 $ref 参数（address_home 集合）来查找集合中指定id的用户地址信息：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;var user = db.users.findOne({&quot;name&quot;:&quot;Tom Benzamin&quot;})
&gt;var dbRef = user.address
&gt;db[dbRef.$ref].findOne({&quot;_id&quot;:(dbRef.$id)})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上实例返回了 address_home 集合中的地址数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot; : ObjectId(&quot;534009e4d852427820000002&quot;),
   &quot;building&quot; : &quot;22 A, Indiana Apt&quot;,
   &quot;pincode&quot; : 123456,
   &quot;city&quot; : &quot;Los Angeles&quot;,
   &quot;state&quot; : &quot;California&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="十九、覆盖索引查询" tabindex="-1"><a class="header-anchor" href="#十九、覆盖索引查询" aria-hidden="true">#</a> 十九、覆盖索引查询</h1><p>官方的MongoDB的文档中说明，覆盖查询是以下的查询：</p><ul><li>所有的查询字段是索引的一部分</li><li>所有的查询返回字段在同一个索引中</li></ul><p>由于所有出现在查询中的字段是索引的一部分， MongoDB 无需在整个数据文档中检索匹配查询条件和返回使用相同索引的查询结果。</p><p>因为索引存在于RAM中，从索引中获取数据比通过扫描文档读取数据要快得多。</p><hr><h2 id="使用覆盖索引查询" tabindex="-1"><a class="header-anchor" href="#使用覆盖索引查询" aria-hidden="true">#</a> 使用覆盖索引查询</h2><p>为了测试覆盖索引查询，使用以下 users 集合:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot;: ObjectId(&quot;53402597d852426020000002&quot;),
   &quot;contact&quot;: &quot;987654321&quot;,
   &quot;dob&quot;: &quot;01-01-1991&quot;,
   &quot;gender&quot;: &quot;M&quot;,
   &quot;name&quot;: &quot;Tom Benzamin&quot;,
   &quot;user_name&quot;: &quot;tombenzamin&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们在 users 集合中创建联合索引，字段为 gender 和 user_name :</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.ensureIndex({gender:1,user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>现在，该索引会覆盖以下查询：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>也就是说，对于上述查询，MongoDB的不会去数据库文件中查找。相反，它会从索引中提取数据，这是非常快速的数据查询。</p><p>由于我们的索引中不包括 _id 字段，_id在查询中会默认返回，我们可以在MongoDB的查询结果集中排除它。</p><p>下面的实例没有排除_id，查询就不会被覆盖：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>最后，如果是以下的查询，不能使用覆盖索引查询：</p><ul><li>所有索引字段是一个数组</li><li>所有索引字段是一个子文档</li></ul><h1 id="二十、查询分析" tabindex="-1"><a class="header-anchor" href="#二十、查询分析" aria-hidden="true">#</a> 二十、查询分析</h1><p>MongoDB 查询分析可以确保我们所建立的索引是否有效，是查询语句性能分析的重要工具。</p><p>MongoDB 查询分析常用函数有：explain() 和 hint()。</p><hr><h2 id="使用-explain" tabindex="-1"><a class="header-anchor" href="#使用-explain" aria-hidden="true">#</a> 使用 explain()</h2><p>explain 操作提供了查询信息，使用索引及查询统计等。有利于我们对索引的优化。</p><p>接下来我们在 users 集合中创建 gender 和 user_name 的索引：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.ensureIndex({gender:1,user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>现在在查询语句中使用 explain ：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).explain()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上的 explain() 查询返回如下结果：</p><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
   <span class="token property">&quot;cursor&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;BtreeCursor gender_1_user_name_1&quot;</span><span class="token punctuation">,</span>
   <span class="token property">&quot;isMultiKey&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
   <span class="token property">&quot;n&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscannedObjects&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscanned&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscannedObjectsAllPlans&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nscannedAllPlans&quot;</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
   <span class="token property">&quot;scanAndOrder&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
   <span class="token property">&quot;indexOnly&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//**indexOnly**: 字段为 true ，表示我们使用了索引。</span>
   <span class="token property">&quot;nYields&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;nChunkSkips&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;millis&quot;</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
   <span class="token property">&quot;indexBounds&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;gender&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token punctuation">[</span>
            <span class="token string">&quot;M&quot;</span><span class="token punctuation">,</span>
            <span class="token string">&quot;M&quot;</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;user_name&quot;</span> <span class="token operator">:</span> <span class="token punctuation">[</span>
         <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
               <span class="token property">&quot;$minElement&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
               <span class="token property">&quot;$maxElement&quot;</span> <span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，我们看看这个结果集的字段：</p><ul><li><strong>indexOnly</strong>: 字段为 true ，表示我们使用了索引。</li><li><strong>cursor</strong>：因为这个查询使用了索引，MongoDB 中索引存储在B树结构中，所以这是也使用了 BtreeCursor 类型的游标。如果没有使用索引，游标的类型是 BasicCursor。这个键还会给出你所使用的索引的名称，你通过这个名称可以查看当前数据库下的system.indexes集合（系统自动创建，由于存储索引信息，这个稍微会提到）来得到索引的详细信息。</li><li><strong>n</strong>：当前查询返回的文档数量。</li><li><strong>nscanned/nscannedObjects</strong>：表明当前这次查询一共扫描了集合中多少个文档，我们的目的是，让这个数值和返回文档的数量越接近越好。</li><li><strong>millis</strong>：当前查询所需时间，毫秒数。</li><li><strong>indexBounds</strong>：当前查询具体使用的索引。</li></ul><hr><h2 id="使用-hint" tabindex="-1"><a class="header-anchor" href="#使用-hint" aria-hidden="true">#</a> 使用 hint()</h2><p>虽然MongoDB查询优化器一般工作的很不错，但是也可以<strong>使用 hint 来强制 MongoDB 使用一个指定的索引</strong>。</p><p>这种方法某些情形下会提升性能。 一个有索引的 collection 并且执行一个多字段的查询(一些字段已经索引了)。</p><p>如下查询实例指定了使用 gender 和 user_name 索引字段来查询：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).hint({gender:1,user_name:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可以使用 explain() 函数来分析以上查询：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({gender:&quot;M&quot;},{user_name:1,_id:0}).hint({gender:1,user_name:1}).explain()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="二一、mongodb-原子操作" tabindex="-1"><a class="header-anchor" href="#二一、mongodb-原子操作" aria-hidden="true">#</a> 二一、MongoDB 原子操作</h1><p>mongodb<strong>不支持事务</strong>，所以，在你的项目中应用时，要注意这点。无论什么设计，都不要要求mongodb保证数据的完整性。</p><p>但是mongodb提供了许多原子操作，比如文档的保存，修改，删除等，都是原子操作。</p><p>所谓原子操作就是要么这个文档保存到Mongodb，要么没有保存到Mongodb，不会出现查询到的文档没有保存完整的情况。</p><hr><h2 id="原子操作数据模型" tabindex="-1"><a class="header-anchor" href="#原子操作数据模型" aria-hidden="true">#</a> 原子操作数据模型</h2><p>考虑下面的例子，图书馆的书籍及结账信息。</p><p>实例说明了在一个相同的文档中如何确保嵌入字段关联原子操作（update：更新）的字段是同步的。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>book = {
          _id: 123456789,
          title: &quot;MongoDB: The Definitive Guide&quot;,
          author: [ &quot;Kristina Chodorow&quot;, &quot;Mike Dirolf&quot; ],
          published_date: ISODate(&quot;2010-09-24&quot;),
          pages: 216,
          language: &quot;English&quot;,
          publisher_id: &quot;oreilly&quot;,
          available: 3,
          checkout: [ { by: &quot;joe&quot;, date: ISODate(&quot;2012-10-15&quot;) } ]
        }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>你可以使用 db.collection.findAndModify() 方法来判断书籍是否可结算并更新新的结算信息。</p><p>在同一个文档中嵌入的 available 和 checkout 字段来确保这些字段是同步更新的:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>db.books.findAndModify ( {
   query: {
            _id: 123456789,
            available: { $gt: 0 }
          },
   update: {
             $inc: { available: -1 },
             $push: { checkout: { by: &quot;abc&quot;, date: new Date() } }
           }
} )
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="原子操作常用命令" tabindex="-1"><a class="header-anchor" href="#原子操作常用命令" aria-hidden="true">#</a> 原子操作常用命令</h2><h4 id="set" tabindex="-1"><a class="header-anchor" href="#set" aria-hidden="true">#</a> $set</h4><p>用来指定一个键并更新键值，若键不存在并创建。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $set : { field : value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="unset" tabindex="-1"><a class="header-anchor" href="#unset" aria-hidden="true">#</a> $unset</h4><p>用来删除一个键。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $unset : { field : 1} }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="inc" tabindex="-1"><a class="header-anchor" href="#inc" aria-hidden="true">#</a> $inc</h4><p>$inc可以对文档的某个值为数字型（只能为满足要求的数字）的键进行增减的操作。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $inc : { field : value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="push" tabindex="-1"><a class="header-anchor" href="#push" aria-hidden="true">#</a> $push</h4><p>用法：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $push : { field : value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>把value追加到field里面去，field一定要是数组类型才行，如果field不存在，会新增一个数组类型加进去。</p><h4 id="pushall" tabindex="-1"><a class="header-anchor" href="#pushall" aria-hidden="true">#</a> $pushAll</h4><p>同$push,只是一次可以追加多个值到一个数组字段内。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $pushAll : { field : value_array } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="pull" tabindex="-1"><a class="header-anchor" href="#pull" aria-hidden="true">#</a> $pull</h4><p>从数组field内删除一个等于value值。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $pull : { field : _value } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="addtoset" tabindex="-1"><a class="header-anchor" href="#addtoset" aria-hidden="true">#</a> $addToSet</h4><p>增加一个值到数组内，而且只有当这个值不在数组内才增加。</p><h4 id="pop" tabindex="-1"><a class="header-anchor" href="#pop" aria-hidden="true">#</a> $pop</h4><p>删除数组的第一个或最后一个元素</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $pop : { field : 1 } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="rename" tabindex="-1"><a class="header-anchor" href="#rename" aria-hidden="true">#</a> $rename</h4><p>修改字段名称</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ $rename : { old_field_name : new_field_name } }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="bit" tabindex="-1"><a class="header-anchor" href="#bit" aria-hidden="true">#</a> $bit</h4><p>位操作，integer类型</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{$bit : { field : {and : 5}}}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="偏移操作符" tabindex="-1"><a class="header-anchor" href="#偏移操作符" aria-hidden="true">#</a> 偏移操作符</h4><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt; t.find() { &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 3 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] }
 
&gt; t.update( {&#39;comments.by&#39;:&#39;joe&#39;}, {$inc:{&#39;comments.$.votes&#39;:1}}, false, true )
 
&gt; t.find() { &quot;_id&quot; : ObjectId(&quot;4b97e62bf1d8c7152c9ccb74&quot;), &quot;title&quot; : &quot;ABC&quot;, &quot;comments&quot; : [ { &quot;by&quot; : &quot;joe&quot;, &quot;votes&quot; : 4 }, { &quot;by&quot; : &quot;jane&quot;, &quot;votes&quot; : 7 } ] }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="二二、高级索引" tabindex="-1"><a class="header-anchor" href="#二二、高级索引" aria-hidden="true">#</a> 二二、高级索引</h1><p>考虑以下文档集合（users ）:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;address&quot;: {
      &quot;city&quot;: &quot;Los Angeles&quot;,
      &quot;state&quot;: &quot;California&quot;,
      &quot;pincode&quot;: &quot;123&quot;
   },
   &quot;tags&quot;: [
      &quot;music&quot;,
      &quot;cricket&quot;,
      &quot;blogs&quot;
   ],
   &quot;name&quot;: &quot;Tom Benzamin&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上文档包含了 address 子文档和 tags 数组。</p><hr><h2 id="索引数组字段" tabindex="-1"><a class="header-anchor" href="#索引数组字段" aria-hidden="true">#</a> 索引数组字段</h2><p>假设我们基于标签来检索用户，为此我们需要对集合中的数组 tags 建立索引。</p><p>在数组中创建索引，需要对数组中的每个字段依次建立索引。所以在我们为数组 tags 创建索引时，会为 music、cricket、blogs三个值建立单独的索引。</p><p>使用以下命令创建数组索引：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment">#3.0弃用</span>
<span class="token operator">&gt;</span>db.users.ensureIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tags&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&gt;</span> db.users.ensureIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tags&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
uncaught exception: TypeError: db.users.ensureIndex is not a <span class="token keyword">function</span> <span class="token builtin class-name">:</span>
@<span class="token punctuation">(</span>shell<span class="token punctuation">)</span>:1:1
<span class="token operator">&gt;</span> db.users.createIndex<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;tags&quot;</span>:1<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;numIndexesBefore&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
        <span class="token string">&quot;numIndexesAfter&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
        <span class="token string">&quot;createdCollectionAutomatically&quot;</span> <span class="token builtin class-name">:</span> false,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建索引后，我们可以这样检索集合的 tags 字段：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({tags:&quot;cricket&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>为了验证我们使用使用了索引，可以使用 explain 命令：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({tags:&quot;cricket&quot;}).explain()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上命令执行结果中会显示 &quot;cursor&quot; : &quot;BtreeCursor tags_1&quot; ，则表示已经使用了索引。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>db.users.find<span class="token punctuation">(</span><span class="token punctuation">{</span>tags:<span class="token string">&quot;cricket&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>.<span class="token function-name function">explain</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
        <span class="token string">&quot;explainVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;1&quot;</span>,
        <span class="token string">&quot;queryPlanner&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;namespace&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;users.users&quot;</span>,
                <span class="token string">&quot;indexFilterSet&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;parsedQuery&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                <span class="token string">&quot;<span class="token variable">$eq</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;cricket&quot;</span>
                        <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;queryHash&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;9D3B61A7&quot;</span>,
                <span class="token string">&quot;planCacheKey&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;3C3D3201&quot;</span>,
                <span class="token string">&quot;maxIndexedOrSolutionsReached&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;maxIndexedAndSolutionsReached&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;maxScansToExplodeReached&quot;</span> <span class="token builtin class-name">:</span> false,
                <span class="token string">&quot;winningPlan&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;FETCH&quot;</span>,
                        <span class="token string">&quot;inputStage&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                <span class="token string">&quot;stage&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;IXSCAN&quot;</span>,
                                <span class="token string">&quot;keyPattern&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
                                <span class="token punctuation">}</span>,
                                <span class="token string">&quot;indexName&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;tags_1&quot;</span>,
                                <span class="token string">&quot;isMultiKey&quot;</span> <span class="token builtin class-name">:</span> true,
                                <span class="token string">&quot;multiKeyPaths&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                                                <span class="token string">&quot;tags&quot;</span>
                                        <span class="token punctuation">]</span>
                                <span class="token punctuation">}</span>,
                                <span class="token string">&quot;isUnique&quot;</span> <span class="token builtin class-name">:</span> false,
                                <span class="token string">&quot;isSparse&quot;</span> <span class="token builtin class-name">:</span> false,
                                <span class="token string">&quot;isPartial&quot;</span> <span class="token builtin class-name">:</span> false,
                                <span class="token string">&quot;indexVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>,
                                <span class="token string">&quot;direction&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;forward&quot;</span>,
                                <span class="token string">&quot;indexBounds&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                                                <span class="token string">&quot;[<span class="token entity" title="\&quot;">\&quot;</span>cricket<span class="token entity" title="\&quot;">\&quot;</span>, <span class="token entity" title="\&quot;">\&quot;</span>cricket<span class="token entity" title="\&quot;">\&quot;</span>]&quot;</span>
                                        <span class="token punctuation">]</span>
                                <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;rejectedPlans&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">[</span> <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;command&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;find&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;users&quot;</span>,
                <span class="token string">&quot;filter&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                        <span class="token string">&quot;tags&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;cricket&quot;</span>
                <span class="token punctuation">}</span>,
                <span class="token string">&quot;<span class="token variable">$db</span>&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;users&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;serverInfo&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;host&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;BF-202103261718&quot;</span>,
                <span class="token string">&quot;port&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">27017</span>,
                <span class="token string">&quot;version&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;5.0.6-rc0&quot;</span>,
                <span class="token string">&quot;gitVersion&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;60af56dfe1a17c60bbd628163fda0a161105b6c0&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;serverParameters&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;internalQueryFacetBufferSizeBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalQueryFacetMaxOutputDocSizeBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalLookupStageIntermediateDocumentMaxSizeBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalDocumentSourceGroupMaxMemoryBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalQueryMaxBlockingSortMemoryUsageBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalQueryProhibitBlockingMergeOnMongoS&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">0</span>,
                <span class="token string">&quot;internalQueryMaxAddToSetBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>,
                <span class="token string">&quot;internalDocumentSourceSetWindowFieldsMaxMemoryBytes&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">104857600</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="索引子文档字段" tabindex="-1"><a class="header-anchor" href="#索引子文档字段" aria-hidden="true">#</a> 索引子文档字段</h2><p>假设我们需要通过city、state、pincode字段来检索文档，由于这些字段是子文档的字段，所以我们需要对子文档建立索引。</p><p>为子文档的三个字段创建索引，命令如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.ensureIndex({&quot;address.city&quot;:1,&quot;address.state&quot;:1,&quot;address.pincode&quot;:1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>一旦创建索引，我们可以使用子文档的字段来检索数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({&quot;address.city&quot;:&quot;Los Angeles&quot;})   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查询表达不一定遵循指定的索引的顺序，mongodb 会自动优化。所以上面创建的索引将支持以下查询：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({&quot;address.state&quot;:&quot;California&quot;,&quot;address.city&quot;:&quot;Los Angeles&quot;}) 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>同样支持以下查询：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.users.find({&quot;address.city&quot;:&quot;Los Angeles&quot;,&quot;address.state&quot;:&quot;California&quot;,&quot;address.pincode&quot;:&quot;123&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="二三、索引限制" tabindex="-1"><a class="header-anchor" href="#二三、索引限制" aria-hidden="true">#</a> 二三、索引限制</h1><hr><h2 id="额外开销" tabindex="-1"><a class="header-anchor" href="#额外开销" aria-hidden="true">#</a> 额外开销</h2><p>每个索引占据一定的存储空间，在进行插入，更新和删除操作时也需要对索引进行操作。所以，如果你很少对集合进行读取操作，建议不使用索引。</p><hr><h2 id="内存-ram-使用" tabindex="-1"><a class="header-anchor" href="#内存-ram-使用" aria-hidden="true">#</a> 内存(RAM)使用</h2><p>由于索引是存储在内存(RAM)中,你应该确保该索引的大小不超过内存的限制。</p><p>如果索引的大小大于内存的限制，MongoDB会删除一些索引，这将导致性能下降。</p><hr><h2 id="查询限制" tabindex="-1"><a class="header-anchor" href="#查询限制" aria-hidden="true">#</a> 查询限制</h2><p>索引不能被以下的查询使用：</p><ul><li>正则表达式及非操作符，如 $nin, $not, 等。</li><li>算术运算符，如 $mod, 等。</li><li>$where 子句</li></ul><p>所以，检测你的语句是否使用索引是一个好的习惯，可以用explain来查看。</p><hr><h2 id="索引键限制" tabindex="-1"><a class="header-anchor" href="#索引键限制" aria-hidden="true">#</a> 索引键限制</h2><p>从2.6版本开始，如果现有的索引字段的值超过索引键的限制，MongoDB中不会创建索引。</p><hr><h2 id="插入文档超过索引键限制" tabindex="-1"><a class="header-anchor" href="#插入文档超过索引键限制" aria-hidden="true">#</a> 插入文档超过索引键限制</h2><p>如果文档的索引字段值超过了索引键的限制，MongoDB不会将任何文档转换成索引的集合。与mongorestore和mongoimport工具类似。</p><hr><h2 id="最大范围" tabindex="-1"><a class="header-anchor" href="#最大范围" aria-hidden="true">#</a> 最大范围</h2><ul><li>集合中索引不能超过64个</li><li>索引名的长度不能超过128个字符</li><li>一个复合索引最多可以有31个字段</li></ul><h1 id="二四、mongodb-objectid" tabindex="-1"><a class="header-anchor" href="#二四、mongodb-objectid" aria-hidden="true">#</a> 二四、MongoDB ObjectId</h1><hr><p>在前面几个章节中我们已经使用了MongoDB 的对象 Id(ObjectId)。</p><p>在本章节中，我们将了解的ObjectId的结构。</p><p>ObjectId 是一个12字节 BSON 类型数据，有以下格式：</p><ul><li>前4个字节表示时间戳</li><li>接下来的3个字节是机器标识码</li><li>紧接的两个字节由进程id组成（PID）</li><li>最后三个字节是随机数。</li></ul><p>MongoDB中存储的文档必须有一个&quot;_id&quot;键。这个键的值可以是任何类型的，默认是个ObjectId对象。</p><p>在一个集合里面，每个文档都有唯一的&quot;_id&quot;值，来确保集合里面每个文档都能被唯一标识。</p><p>MongoDB采用ObjectId，而不是其他比较常规的做法（比如自动增加的主键）的主要原因，因为在多个 服务器上同步自动增加主键值既费力还费时。</p><hr><h2 id="创建新的objectid" tabindex="-1"><a class="header-anchor" href="#创建新的objectid" aria-hidden="true">#</a> 创建新的ObjectId</h2><p>使用以下代码生成新的ObjectId：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;newObjectId = ObjectId()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>上面的语句返回以下唯一生成的id：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ObjectId(&quot;5349b4ddd2781d08c09890f3&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>你也可以使用生成的id来取代MongoDB自动生成的ObjectId：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;myObjectId = ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="创建文档的时间戳" tabindex="-1"><a class="header-anchor" href="#创建文档的时间戳" aria-hidden="true">#</a> 创建文档的时间戳</h2><p>由于 ObjectId 中存储了 4 个字节的时间戳，所以你不需要为你的文档保存时间戳字段，你可以通过 getTimestamp 函数来获取文档的创建时间:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;ObjectId(&quot;5349b4ddd2781d08c09890f4&quot;).getTimestamp()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上代码将返回 ISO 格式的文档创建时间：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>ISODate(&quot;2014-04-12T21:49:17Z&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="objectid-转换为字符串" tabindex="-1"><a class="header-anchor" href="#objectid-转换为字符串" aria-hidden="true">#</a> ObjectId 转换为字符串</h2><p>在某些情况下，您可能需要将ObjectId转换为字符串格式。你可以使用下面的代码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;new ObjectId().str
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上代码将返回Guid格式的字符串：：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>5349b4ddd2781d08c09890f3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="二五、-map-reduce" tabindex="-1"><a class="header-anchor" href="#二五、-map-reduce" aria-hidden="true">#</a> 二五、 Map Reduce</h1><p>Map-Reduce是一种计算模型，简单的说就是将大批量的工作（数据）分解（MAP）执行，然后再将结果合并成最终结果（REDUCE）。</p><p>MongoDB提供的Map-Reduce非常灵活，对于大规模数据分析也相当实用。</p><h3 id="mapreduce-命令" tabindex="-1"><a class="header-anchor" href="#mapreduce-命令" aria-hidden="true">#</a> MapReduce 命令</h3><p>以下是MapReduce的基本语法：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.collection.mapReduce(
   function() {emit(key,value);},  //map 函数
   function(key,values) {return reduceFunction},   //reduce 函数
   {
      out: collection,
      query: document,
      sort: document,
      limit: number
   }
)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 MapReduce 要实现两个函数 Map 函数和 Reduce 函数,Map 函数调用 emit(key, value), 遍历 collection 中所有的记录, 将 key 与 value 传递给 Reduce 函数进行处理。</p><p>Map 函数必须调用 emit(key, value) 返回键值对。</p><p>参数说明:</p><ul><li><strong>map</strong> ：映射函数 (生成键值对序列,作为 reduce 函数参数)。</li><li><strong>reduce</strong> 统计函数，reduce函数的任务就是将key-values变成key-value，也就是把values数组变成一个单一的值value。。</li><li><strong>out</strong> 统计结果存放集合 (不指定则使用临时集合,在客户端断开后自动删除)。</li><li><strong>query</strong> 一个筛选条件，只有满足条件的文档才会调用map函数。（query。limit，sort可以随意组合）</li><li><strong>sort</strong> 和limit结合的sort排序参数（也是在发往map函数前给文档排序），可以优化分组机制</li><li><strong>limit</strong> 发往map函数的文档数量的上限（要是没有limit，单独使用sort的用处不大）</li></ul><p>以下实例在集合 orders 中查找 status:&quot;A&quot; 的数据，并根据 cust_id 来分组，并计算 amount 的总和。</p><p><img src="https://static.runoob.com/images/map-reduce.bakedsvg.svg" alt="img" loading="lazy"></p><hr><h2 id="使用-mapreduce" tabindex="-1"><a class="header-anchor" href="#使用-mapreduce" aria-hidden="true">#</a> 使用 MapReduce</h2><p>考虑以下文档结构存储用户的文章，文档存储了用户的 user_name 和文章的 status 字段：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;mark&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;disabled&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runoob&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;disabled&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runoob&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;disabled&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">&gt;</span>db.posts.insert<span class="token punctuation">(</span><span class="token punctuation">{</span>
   <span class="token string">&quot;post_text&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;菜鸟教程，最全的技术文档。&quot;</span>,
   <span class="token string">&quot;user_name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;runoob&quot;</span>,
   <span class="token string">&quot;status&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;active&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
WriteResult<span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string">&quot;nInserted&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，我们将在 posts 集合中使用 mapReduce 函数来选取已发布的文章(status:&quot;active&quot;)，并通过user_name分组，计算每个用户的文章数：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&gt;</span>db.posts.mapReduce<span class="token punctuation">(</span> 
   <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> emit<span class="token punctuation">(</span>this.user_name,1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>, 
   function<span class="token punctuation">(</span>key, values<span class="token punctuation">)</span> <span class="token punctuation">{</span>return Array.sum<span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">}</span>, 
      <span class="token punctuation">{</span>  
         query:<span class="token punctuation">{</span>status:<span class="token string">&quot;active&quot;</span><span class="token punctuation">}</span>,  
         out:<span class="token string">&quot;post_total&quot;</span> 
      <span class="token punctuation">}</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上 mapReduce 输出结果为：</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">{</span>
        <span class="token string">&quot;result&quot;</span> <span class="token builtin class-name">:</span> <span class="token string">&quot;post_total&quot;</span>,
        <span class="token string">&quot;timeMillis&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">23</span>,
        <span class="token string">&quot;counts&quot;</span> <span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;input&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">5</span>,
                <span class="token string">&quot;emit&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">5</span>,
                <span class="token string">&quot;reduce&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>,
                <span class="token string">&quot;output&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;ok&quot;</span> <span class="token builtin class-name">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>结果表明，共有 5 个符合查询条件（status:&quot;active&quot;）的文档， 在map函数中生成了 5 个键值对文档，最后使用reduce函数将相同的键值分为 2 组。</p><p>具体参数说明：</p><ul><li>result：储存结果的collection的名字,这是个临时集合，MapReduce的连接关闭后自动就被删除了。</li><li>timeMillis：执行花费的时间，毫秒为单位</li><li>input：满足条件被发送到map函数的文档个数</li><li>emit：在map函数中emit被调用的次数，也就是所有集合中的数据总量</li><li>ouput：结果集合中的文档个数**（count对调试非常有帮助）**</li><li>ok：是否成功，成功为1</li><li>err：如果失败，这里可以有失败原因，不过从经验上来看，原因比较模糊，作用不大</li></ul><p>使用 find 操作符来查看 mapReduce 的查询结果：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.mapReduce( 
   function() { emit(this.user_name,1); }, 
   function(key, values) {return Array.sum(values)}, 
      {  
         query:{status:&quot;active&quot;},  
         out:&quot;post_total&quot; 
      }
).find()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以上查询显示如下结果:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ &quot;_id&quot; : &quot;mark&quot;, &quot;value&quot; : 4 }
{ &quot;_id&quot; : &quot;runoob&quot;, &quot;value&quot; : 1 }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>用类似的方式，MapReduce可以被用来构建大型复杂的聚合查询。</p><p>Map函数和Reduce函数可以使用 JavaScript 来实现，使得MapReduce的使用非常灵活和强大。</p><h1 id="二六、全文检索" tabindex="-1"><a class="header-anchor" href="#二六、全文检索" aria-hidden="true">#</a> 二六、全文检索</h1><p>全文检索对每一个词建立一个索引，指明该词在文章中出现的次数和位置，当用户查询时，检索程序就根据事先建立的索引进行查找，并将查找的结果反馈给用户的检索方式。</p><p>这个过程类似于通过字典中的检索字表查字的过程。</p><p>MongoDB 从 2.4 版本开始支持全文检索，目前支持15种语言的全文索引。</p><ul><li>danish</li><li>dutch</li><li>english</li><li>finnish</li><li>french</li><li>german</li><li>hungarian</li><li>italian</li><li>norwegian</li><li>portuguese</li><li>romanian</li><li>russian</li><li>spanish</li><li>swedish</li><li>turkish</li></ul><hr><h2 id="启用全文检索" tabindex="-1"><a class="header-anchor" href="#启用全文检索" aria-hidden="true">#</a> 启用全文检索</h2><p>MongoDB 在 2.6 版本以后是默认开启全文检索的，如果你使用之前的版本，你需要使用以下代码来启用全文检索:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.adminCommand({setParameter:true,textSearchEnabled:true})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>或者使用命令：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>mongod --setParameter textSearchEnabled=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="创建全文索引" tabindex="-1"><a class="header-anchor" href="#创建全文索引" aria-hidden="true">#</a> 创建全文索引</h2><p>考虑以下 posts 集合的文档数据，包含了文章内容（post_text）及标签(tags)：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;post_text&quot;: &quot;enjoy the mongodb articles on Runoob&quot;,
   &quot;tags&quot;: [
      &quot;mongodb&quot;,
      &quot;runoob&quot;
   ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以对 post_text 字段建立全文索引，这样我们可以搜索文章内的内容：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.ensureIndex({post_text:&quot;text&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="使用全文索引" tabindex="-1"><a class="header-anchor" href="#使用全文索引" aria-hidden="true">#</a> 使用全文索引</h2><p>现在我们已经对 post_text 建立了全文索引，我们可以搜索文章中的关键词 runoob：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({$text:{$search:&quot;runoob&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以下命令返回了如下包含 runoob 关键词的文档数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ 
   &quot;_id&quot; : ObjectId(&quot;53493d14d852429c10000002&quot;), 
   &quot;post_text&quot; : &quot;enjoy the mongodb articles on Runoob&quot;, 
   &quot;tags&quot; : [ &quot;mongodb&quot;, &quot;runoob&quot; ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果你使用的是旧版本的 MongoDB，你可以使用以下命令：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.runCommand(&quot;text&quot;,{search:&quot;runoob&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用全文索引可以提高搜索效率。</p><hr><h2 id="删除全文索引" tabindex="-1"><a class="header-anchor" href="#删除全文索引" aria-hidden="true">#</a> 删除全文索引</h2><p>删除已存在的全文索引，可以使用 find 命令查找索引名：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.getIndexes()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>通过以上命令获取索引名，本例的索引名为post_text_text，执行以下命令来删除索引：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.dropIndex(&quot;post_text_text&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="二七、正则表达式" tabindex="-1"><a class="header-anchor" href="#二七、正则表达式" aria-hidden="true">#</a> 二七、正则表达式</h1><p>正则表达式是使用单个字符串来描述、匹配一系列符合某个句法规则的字符串。</p><p>许多程序设计语言都支持利用正则表达式进行字符串操作。</p><p>MongoDB 使用 <strong>$regex</strong> 操作符来设置匹配字符串的正则表达式。</p><p>MongoDB使用PCRE (Perl Compatible Regular Expression) 作为正则表达式语言。</p><p>不同于全文检索，我们使用正则表达式不需要做任何配置。</p><p>考虑以下 <strong>posts</strong> 集合的文档结构，该文档包含了文章内容和标签：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;post_text&quot;: &quot;enjoy the mongodb articles on runoob&quot;,
   &quot;tags&quot;: [
      &quot;mongodb&quot;,
      &quot;runoob&quot;
   ]
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="使用正则表达式" tabindex="-1"><a class="header-anchor" href="#使用正则表达式" aria-hidden="true">#</a> 使用正则表达式</h2><p>以下命令使用正则表达式查找包含 runoob 字符串的文章：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({post_text:{$regex:&quot;runoob&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上查询也可以写为：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({post_text:/runoob/})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="不区分大小写的正则表达式" tabindex="-1"><a class="header-anchor" href="#不区分大小写的正则表达式" aria-hidden="true">#</a> 不区分大小写的正则表达式</h2><p>如果检索需要不区分大小写，我们可以设置 $options 为 $i。</p><p>以下命令将查找不区分大小写的字符串 runoob：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({post_text:{$regex:&quot;runoob&quot;,$options:&quot;$i&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>集合中会返回所有包含字符串 runoob 的数据，且不区分大小写：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;_id&quot; : ObjectId(&quot;53493d37d852429c10000004&quot;),
   &quot;post_text&quot; : &quot;hey! this is my post on  runoob&quot;, 
   &quot;tags&quot; : [ &quot;runoob&quot; ]
} 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="数组元素使用正则表达式" tabindex="-1"><a class="header-anchor" href="#数组元素使用正则表达式" aria-hidden="true">#</a> 数组元素使用正则表达式</h2><p>我们还可以在数组字段中使用正则表达式来查找内容。 这在标签的实现上非常有用，如果你需要查找包含以 run 开头的标签数据(ru 或 run 或 runoob)， 你可以使用以下代码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.posts.find({tags:{$regex:&quot;run&quot;}})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="优化正则表达式查询" tabindex="-1"><a class="header-anchor" href="#优化正则表达式查询" aria-hidden="true">#</a> 优化正则表达式查询</h2><ul><li><p>如果你的文档中字段设置了索引，那么使用索引相比于正则表达式匹配查找所有的数据查询速度更快。</p></li><li><p>如果正则表达式是前缀表达式，所有匹配的数据将以指定的前缀字符串为开始。例如： 如果正则表达式为 <strong>^tut</strong> ，查询语句将查找以 tut 为开头的字符串。</p></li></ul><p><strong>这里面使用正则表达式有两点需要注意：</strong></p><p>正则表达式中使用变量。一定要使用eval将组合的字符串进行转换，不能直接将字符串拼接后传入给表达式。否则没有报错信息，只是结果为空！实例如下：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>var name=eval(&quot;/&quot; + 变量值key +&quot;/i&quot;); 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以下是模糊查询包含title关键词, 且不区分大小写:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>title:eval(&quot;/&quot;+title+&quot;/i&quot;)    // 等同于 title:{$regex:title,$Option:&quot;$i&quot;}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h1 id="二八、管理工具-rockmongo" tabindex="-1"><a class="header-anchor" href="#二八、管理工具-rockmongo" aria-hidden="true">#</a> 二八、管理工具: Rockmongo</h1><p>RockMongo是PHP5写的一个MongoDB管理工具。</p><p>通过 Rockmongo 你可以管理 MongoDB服务，数据库，集合，文档，索引等等。</p><p>它提供了非常人性化的操作。类似 phpMyAdmin（PHP开发的MySql管理工具）。</p><p>Rockmongo 下载地址：<a href="https://github.com/iwind/rockmongo" target="_blank" rel="noopener noreferrer">https://github.com/iwind/rockmongo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><img src="https://www.runoob.com/wp-content/uploads/2014/08/rockmongo.png" alt="img" loading="lazy"></p><hr><h2 id="简介" tabindex="-1"><a class="header-anchor" href="#简介" aria-hidden="true">#</a> 简介</h2><p>主要特征：</p><ul><li>使用宽松的<a href="https://www.opensource.org/licenses/bsd-license.php" target="_blank" rel="noopener noreferrer">New BSD License<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>协议</li><li>速度快，安装简单</li><li>支持多语言（目前提供中文、英文、日文、巴西葡萄牙语、法语、德语、俄语、意大利语）</li><li>系统 <ul><li>可以配置多个主机，每个主机可以有多个管理员</li><li>需要管理员密码才能登入操作，确保数据库的安全性</li></ul></li><li>服务器 <ul><li>服务器信息 (WEB服务器, PHP, PHP.ini相关指令 ...)</li><li>状态</li><li>数据库信息</li></ul></li><li>数据库 <ul><li>查询，创建和删除</li><li>执行命令和Javascript代码</li><li>统计信息</li></ul></li><li>集合（相当于表） <ul><li>强大的查询工具</li><li>读数据，写数据，更改数据，复制数据，删除数据</li><li>查询、创建和删除索引</li><li>清空数据</li><li>批量删除和更改数据</li><li>统计信息</li></ul></li><li>GridFS <ul><li>查看分块</li><li>下载文件</li></ul></li></ul><hr><h2 id="安装-1" tabindex="-1"><a class="header-anchor" href="#安装-1" aria-hidden="true">#</a> 安装</h2><h3 id="需求" tabindex="-1"><a class="header-anchor" href="#需求" aria-hidden="true">#</a> 需求</h3><ul><li>一个能运行PHP的Web服务器，比如Apache Httpd, Nginx ...</li><li>PHP - 需要PHP v5.1.6或更高版本，需要支持SESSION <ul><li>为了能连接MongoDB，你需要安装<a href="https://www.runoob.com/mongodb/mongodb-install-php-driver.html" target="_blank" rel="noopener noreferrer">php_mongo<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>扩展</li></ul></li></ul><h3 id="快速安装" tabindex="-1"><a class="header-anchor" href="#快速安装" aria-hidden="true">#</a> 快速安装</h3><ul><li><a href="https://github.com/iwind/rockmongo" target="_blank" rel="noopener noreferrer">下载安装包<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>解压到你的网站目录下</li><li>用编辑器打开config.php，修改host, port, admins等参数</li><li>在浏览器中访问index.php，比如说：<a href="http://localhost/rockmongo/index.php" target="_blank" rel="noopener noreferrer">http://localhost/rockmongo/index.php<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></li><li>使用用户名和密码登录，默认为&quot;admin&quot;和&quot;admin&quot;</li><li>开始玩转MongoDB!</li></ul><h1 id="二九、gridfs" tabindex="-1"><a class="header-anchor" href="#二九、gridfs" aria-hidden="true">#</a> 二九、GridFS</h1><p>GridFS 用于存储和恢复那些超过16M（BSON文件限制）的文件(如：图片、音频、视频等)。</p><p>GridFS 也是文件存储的一种方式，但是它是存储在MonoDB的集合中。</p><p>GridFS 可以更好的存储大于16M的文件。</p><p>GridFS 会将大文件对象分割成多个小的chunk(文件片段),一般为256k/个,每个chunk将作为MongoDB的一个文档(document)被存储在chunks集合中。</p><p>GridFS 用两个集合来存储一个文件：fs.files与fs.chunks。</p><p>每个文件的实际内容被存在chunks(二进制数据)中,和文件有关的meta数据(filename,content_type,还有用户自定义的属性)将会被存在files集合中。</p><p>以下是简单的 fs.files 集合文档：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;filename&quot;: &quot;test.txt&quot;,
   &quot;chunkSize&quot;: NumberInt(261120),
   &quot;uploadDate&quot;: ISODate(&quot;2014-04-13T11:32:33.557Z&quot;),
   &quot;md5&quot;: &quot;7b762939321e146569b07f72c62cca4f&quot;,
   &quot;length&quot;: NumberInt(646)
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是简单的 fs.chunks 集合文档：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   &quot;files_id&quot;: ObjectId(&quot;534a75d19f54bfec8a2fe44b&quot;),
   &quot;n&quot;: NumberInt(0),
   &quot;data&quot;: &quot;Mongo Binary Data&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="gridfs-添加文件" tabindex="-1"><a class="header-anchor" href="#gridfs-添加文件" aria-hidden="true">#</a> GridFS 添加文件</h2><p>现在我们使用 GridFS 的 put 命令来存储 mp3 文件。 调用 MongoDB 安装目录下bin的 mongofiles.exe工具。</p><p>打开命令提示符，进入到MongoDB的安装目录的bin目录中，找到mongofiles.exe，并输入下面的代码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;mongofiles.exe -d gridfs put song.mp3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>-d gridfs</strong> 指定存储文件的数据库名称，如果不存在该数据库，MongoDB会自动创建。如果不存在该数据库，MongoDB会自动创建。Song.mp3 是音频文件名。</p><p>使用以下命令来查看数据库中文件的文档：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.fs.files.find()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上命令执行后返回以下文档数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
   _id: ObjectId(&#39;534a811bf8b4aa4d33fdf94d&#39;), 
   filename: &quot;song.mp3&quot;, 
   chunkSize: 261120, 
   uploadDate: new Date(1397391643474), md5: &quot;e4f53379c909f7bed2e9d631e15c1c41&quot;,
   length: 10401959 
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>我们可以看到 fs.chunks 集合中所有的区块，以下我们得到了文件的 _id 值，我们可以根据这个 _id 获取区块(chunk)的数据：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.fs.chunks.find({files_id:ObjectId(&#39;534a811bf8b4aa4d33fdf94d&#39;)})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上实例中，查询返回了 40 个文档的数据，意味着mp3文件被存储在40个区块中。</p><h1 id="三十、固定集合-capped-collections" tabindex="-1"><a class="header-anchor" href="#三十、固定集合-capped-collections" aria-hidden="true">#</a> 三十、固定集合（Capped Collections）</h1><p>MongoDB 固定集合（Capped Collections）是性能出色且有着固定大小的集合，对于大小固定，我们可以想象其就像一个环形队列，当集合空间用完后，再插入的元素就会覆盖最初始的头部的元素！</p><hr><h2 id="创建固定集合" tabindex="-1"><a class="header-anchor" href="#创建固定集合" aria-hidden="true">#</a> 创建固定集合</h2><p>我们通过createCollection来创建一个固定集合，且capped选项设置为true：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.createCollection(&quot;cappedLogCollection&quot;,{capped:true,size:10000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>还可以指定文档个数,加上max:1000属性：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.createCollection(&quot;cappedLogCollection&quot;,{capped:true,size:10000,max:1000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>判断集合是否为固定集合:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.cappedLogCollection.isCapped()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果需要将已存在的集合转换为固定集合可以使用以下命令：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.runCommand({&quot;convertToCapped&quot;:&quot;posts&quot;,size:10000})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上代码将我们已存在的 posts 集合转换为固定集合。</p><hr><h2 id="固定集合查询" tabindex="-1"><a class="header-anchor" href="#固定集合查询" aria-hidden="true">#</a> 固定集合查询</h2><p>固定集合文档按照插入顺序储存的,默认情况下查询就是按照插入顺序返回的,也可以使用$natural调整返回顺序。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.cappedLogCollection.find().sort({$natural:-1})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="固定集合的功能特点" tabindex="-1"><a class="header-anchor" href="#固定集合的功能特点" aria-hidden="true">#</a> 固定集合的功能特点</h2><p>可以插入及更新,但更新不能超出collection的大小,否则更新失败,不允许删除,但是可以调用drop()删除集合中的所有行,但是drop后需要显式地重建集合。</p><p>在32位机子上一个cappped collection的最大值约为482.5M,64位上只受系统文件大小的限制。</p><hr><h2 id="固定集合属性及用法" tabindex="-1"><a class="header-anchor" href="#固定集合属性及用法" aria-hidden="true">#</a> 固定集合属性及用法</h2><h3 id="属性" tabindex="-1"><a class="header-anchor" href="#属性" aria-hidden="true">#</a> 属性</h3><ul><li>属性1:对固定集合进行插入速度极快</li><li>属性2:按照插入顺序的查询输出速度极快</li><li>属性3:能够在插入最新数据时,淘汰最早的数据</li></ul><h3 id="用法" tabindex="-1"><a class="header-anchor" href="#用法" aria-hidden="true">#</a> 用法</h3><ul><li>用法1:储存日志信息</li><li>用法2:缓存一些少量的文档</li></ul><h1 id="三一、自动增长" tabindex="-1"><a class="header-anchor" href="#三一、自动增长" aria-hidden="true">#</a> 三一、自动增长</h1><p>MongoDB 没有像 SQL 一样有自动增长的功能， MongoDB 的 _id 是系统自动生成的12字节唯一标识。</p><p>但在某些情况下，我们可能需要实现 ObjectId 自动增长功能。</p><p>由于 MongoDB 没有实现这个功能，我们可以通过编程的方式来实现，以下我们将在 counters 集合中实现_id字段自动增长。</p><hr><h2 id="使用-counters-集合" tabindex="-1"><a class="header-anchor" href="#使用-counters-集合" aria-hidden="true">#</a> 使用 counters 集合</h2><p>考虑以下 products 文档。我们希望 _id 字段实现 从 1,2,3,4 到 n 的自动增长功能。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;_id&quot;:1,
  &quot;product_name&quot;: &quot;Apple iPhone&quot;,
  &quot;category&quot;: &quot;mobiles&quot;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为此，创建 counters 集合，序列字段值可以实现自动长：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.createCollection(&quot;counters&quot;)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>现在我们向 counters 集合中插入以下文档，使用 productid 作为 key:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{
  &quot;_id&quot;:&quot;productid&quot;,
  &quot;sequence_value&quot;: 0
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>sequence_value 字段是序列通过自动增长后的一个值。</p><p>使用以下命令插入 counters 集合的序列文档中：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.counters.insert({_id:&quot;productid&quot;,sequence_value:0})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><hr><h2 id="创建-javascript-函数" tabindex="-1"><a class="header-anchor" href="#创建-javascript-函数" aria-hidden="true">#</a> 创建 Javascript 函数</h2><p>现在，我们创建函数 getNextSequenceValue 来作为序列名的输入， 指定的序列会自动增长 1 并返回最新序列值。在本文的实例中序列名为 productid 。</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;function getNextSequenceValue(sequenceName){
   var sequenceDocument = db.counters.findAndModify(
      {
         query:{_id: sequenceName },
         update: {$inc:{sequence_value:1}},
         &quot;new&quot;:true
      });
   return sequenceDocument.sequence_value;
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><h2 id="使用-javascript-函数" tabindex="-1"><a class="header-anchor" href="#使用-javascript-函数" aria-hidden="true">#</a> 使用 Javascript 函数</h2><p>接下来我们将使用 getNextSequenceValue 函数创建一个新的文档， 并设置文档 _id 自动为返回的序列值：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.products.insert({
   &quot;_id&quot;:getNextSequenceValue(&quot;productid&quot;),
   &quot;product_name&quot;:&quot;Apple iPhone&quot;,
   &quot;category&quot;:&quot;mobiles&quot;})

&gt;db.products.insert({
   &quot;_id&quot;:getNextSequenceValue(&quot;productid&quot;),
   &quot;product_name&quot;:&quot;Samsung S3&quot;,
   &quot;category&quot;:&quot;mobiles&quot;})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>就如你所看到的，我们使用 getNextSequenceValue 函数来设置 _id 字段。</p><p>为了验证函数是否有效，我们可以使用以下命令读取文档：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>&gt;db.products.find()
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>以上命令将返回以下结果，我们发现 _id 字段是自增长的：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>{ &quot;_id&quot; : 1, &quot;product_name&quot; : &quot;Apple iPhone&quot;, &quot;category&quot; : &quot;mobiles&quot;}

{ &quot;_id&quot; : 2, &quot;product_name&quot; : &quot;Samsung S3&quot;, &quot;category&quot; : &quot;mobiles&quot; }
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><div class="meta-item edit-link"><a href="https://github.com/GISFSDE//edit/main/docs/posts/2021/MongoDB.md" rel="noopener noreferrer" target="_blank" aria-label="编辑此页" class="nav-link label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" class="icon edit-icon" viewbox="0 0 1024 1024" fill="currentColor" aria-label="edit icon"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></svg><!--]-->编辑此页<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!----></a></div><div class="meta-item update-time"><span class="label">上次编辑于: </span><span class="info">2022/6/16 13:33:26</span></div><div class="meta-item contributors"><span class="label">贡献者: </span><!--[--><!--[--><span class="contributor" title="email: 714416426@qq.com">GISFSDE</span>,<!--]--><!--[--><span class="contributor" title="email: 714416426@qq.com">Passion</span><!--]--><!--]--></div></footer><nav class="page-nav"><a href="/posts/2021/inconstruction.html" class="nav-link prev" aria-label="PostgreSQL"><div class="hint"><span class="arrow left"></span>上一页</div><div class="link"><span class="icon iconfont icon-edit" style=""></span>PostgreSQL</div></a><a href="/posts/2021/inconstruction.html" class="nav-link next" aria-label="系统优化"><div class="hint">下一页<span class="arrow right"></span></div><div class="link">系统优化<span class="icon iconfont icon-edit" style=""></span></div></a></nav><div class="giscus-wrapper input-top" style="display:block;"><div style="text-align:center">Loading...</div></div><!----><!--]--></main><!--]--><footer class="footer-wrapper"><div class="footer"><a href="https://beian.miit.gov.cn">浙ICP备2022017274号</a></div><div class="copyright">Copyright © 2022 GIS-FSDE</div></footer><!--]--></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app.95807bc9.js" defer></script>
  </body>
</html>
